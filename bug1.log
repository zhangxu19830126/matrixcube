======== test matrixcube
# go test  -v -count=1 -timeout 600s github.com/matrixorigin/matrixcube/storage
go test  -v -count=1 -timeout 600s github.com/matrixorigin/matrixcube/raftstore
WARNING: Package "github.com/golang/protobuf/protoc-gen-go/generator" is deprecated.
	A future release of golang/protobuf will delete this package,
	which has long been excluded from the compatibility promise.

=== RUN   TestIssue97
2021/08/20 12:58:01.895323 [info] prophet: prophet logger set
2021/08/20 12:58:01.943442 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:01.943458 [info] [raftstore]: begin to start prophet
2021/08/20 12:58:01.943442 [info] [raftstore]: start scan gc snap files
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:01.943519 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:01.943562 I | embed: name = node-0
2021-08-20 12:58:01.943573 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 12:58:01.943575 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 12:58:01.943577 I | embed: heartbeat = 100ms
2021-08-20 12:58:01.943579 I | embed: election = 3000ms
2021-08-20 12:58:01.943580 I | embed: snapshot count = 100000
2021-08-20 12:58:01.943587 I | embed: advertise client URLs = http://127.0.0.1:40000
2021-08-20 12:58:01.947739 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
raft2021/08/20 12:58:01 INFO: 93ccda9956d988f4 switched to configuration voters=()
raft2021/08/20 12:58:01 INFO: 93ccda9956d988f4 became follower at term 0
raft2021/08/20 12:58:01 INFO: newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]
raft2021/08/20 12:58:01 INFO: 93ccda9956d988f4 became follower at term 1
raft2021/08/20 12:58:01 INFO: 93ccda9956d988f4 switched to configuration voters=(10650127570946328820)
2021-08-20 12:58:01.949456 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:01.953246 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:01.953306 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
raft2021/08/20 12:58:01 INFO: 93ccda9956d988f4 switched to configuration voters=(10650127570946328820)
2021-08-20 12:58:01.953508 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:01.954051 I | embed: listening for peers on 127.0.0.1:50000
raft2021/08/20 12:58:03 INFO: 93ccda9956d988f4 is starting a new election at term 1
raft2021/08/20 12:58:03 INFO: 93ccda9956d988f4 became candidate at term 2
raft2021/08/20 12:58:03 INFO: 93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2
raft2021/08/20 12:58:03 INFO: 93ccda9956d988f4 became leader at term 2
raft2021/08/20 12:58:03 INFO: raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2
2021-08-20 12:58:03.448896 I | etcdserver: setting up the initial cluster version to 3.4
2021-08-20 12:58:03.449626 N | etcdserver/membership: set the initial cluster version to 3.4
2021-08-20 12:58:03.449660 I | etcdserver/api: enabled capabilities for version 3.4
2021-08-20 12:58:03.449683 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:03.449698 I | embed: ready to serve client requests
2021/08/20 12:58:03.449715 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 12:58:03.449966 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021/08/20 12:58:03.451053 [info] prophet: net application started
2021/08/20 12:58:03.451103 [info] prophet: start system time monitor 
2021/08/20 12:58:03.451407 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 12:58:03.451653 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 12:58:03.451670 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 12:58:03.451980 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 12:58:03.452460 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 12:58:03.452474 [info] prophet: ********node-0 become to leader now********
2021/08/20 12:58:03.453581 [info] prophet: load 0 containers, cost 983.6µs
2021/08/20 12:58:03.453840 [info] prophet: load 0 resources, cost 245.5µs
2021/08/20 12:58:03.454446 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 12:58:03.454459 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 12:58:03.454460 [info] prophet: coordinator starts to run schedulers 
2021/08/20 12:58:03.454448 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:03.454449 [info] prophet: client started
2021/08/20 12:58:03.454543 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 12:58:03.454544 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:03.454580 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435483 deployPath:"not set" 
2021/08/20 12:58:03.454593 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:03.454594 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:03.454454 [info] prophet: client read loop started 
2021/08/20 12:58:03.454606 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:03.454625 [info] prophet: session 1[127.0.0.1:38398] connected
2021/08/20 12:58:03.454906 [info] prophet: load 0 jobs
2021/08/20 12:58:03.455342 [info] [raftstore]: create local store with id 1
2021/08/20 12:58:03.455577 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 12:58:03.455586 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 12:58:03.455696 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 12:58:03.455713 [info] prophet: coordinator starts patrol resources 
2021/08/20 12:58:03.455763 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 12:58:03.458848 [info] prophet: container 1 limit added
2021/08/20 12:58:03.458895 [info] [raftstore]: prophet started
2021/08/20 12:58:03.458936 [info] [transport]: net application started
2021/08/20 12:58:03.458946 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 12:58:03.458949 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:03.458977 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:03.458992 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:03.458994 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:03.458996 [info] [raftstore]: shard 2 init last term, last term=<5>
2021/08/20 12:58:03.458985 [info] prophet: container 1 heartbeat stream binded
{"level":"info","ts":"2021-08-20T12:58:03.459+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-08-20T12:58:03.459+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:03.459+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:03.459061 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:03.459+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:03.459+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:03.459+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T12:58:03.459+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 12:58:03.459114 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 12:58:03.459126 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 12:58:03.459157 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:03.459168 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:03.459169 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:03.459170 [info] [raftstore]: shards started
2021/08/20 12:58:03.459172 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:03.459179 [info] [raftstore]: net application started
2021/08/20 12:58:03.459180 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 12:58:03.459187 [info] [raftstore]: router started
2021/08/20 12:58:03.459226 [info] [raftstore]: router event loop task started
2021/08/20 12:58:03.459233 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:03.459286 [info] prophet: session 2[127.0.0.1:38400] connected
2021/08/20 12:58:03.459295 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:03.459303 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:03.459327 [info] prophet: new watcher 127.0.0.1:38400 added
2021/08/20 12:58:03.459360 [info] [raftstore]: start init event
2021/08/20 12:58:03.469296 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 12:58:03.659489 [info] [raftstore]: shard 2 start split check job from [122 0 0 0 0 0 0 0 0] to [122 0 0 0 0 0 0 0 1]
2021/08/20 12:58:03.659535 [info] [raftstore]: shard 2 try to split, size 40 bytes splitKeys [[122 0 0 0 0 0 0 0 0 107 101 121 50]]
2021/08/20 12:58:03.659604 [info] prophet: alloc ids [6] for resource 5 split
2021/08/20 12:58:03.679359 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/08/20 12:58:03.679387 [info] [raftstore]: shard 5 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:03.679393 [info] [raftstore]: shard 5 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:03.679395 [info] [raftstore]: shard 5 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:58:03.679+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(6)"}
{"level":"info","ts":"2021-08-20T12:58:03.679+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:03.679+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [6], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:03.679481 [info] [raftstore]: shard 5 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:03.679+0800","caller":"raft/raft.go:934","msg":"6 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:03.679+0800","caller":"raft/raft.go:724","msg":"6 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:03.679+0800","caller":"raft/raft.go:835","msg":"6 received MsgVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-08-20T12:58:03.679+0800","caller":"raft/raft.go:776","msg":"6 became leader at term 6"}
2021/08/20 12:58:03.679525 [error] [raftstore]: >>>>>>>>>>>> shard 5 peer 6 add registration job by doApplySplit
2021/08/20 12:58:03.679541 [error] [raftstore]: >>>>>>>>>>>> shard 5 peer 6 add registration job by doApplySplit, completed
2021/08/20 12:58:03.679560 [info] [raftstore]: shard 5 added with peer {ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:03.679568 [info] [raftstore]: shard 2 new shard added, new shards [{ID:5 Start:[107 101 121 50] End:[] Epoch:{ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:03.679590 [info] [raftstore]: shard 5 ********become leader now********
2021/08/20 12:58:03.679728 [info] prophet: resource 2 version changed from 1 to 2
2021/08/20 12:58:03.771106 [info] [raftstore]: shard 5 start split check job from [122 0 0 0 0 0 0 0 0 107 101 121 50] to [122 0 0 0 0 0 0 0 1]
2021/08/20 12:58:03.771135 [info] [raftstore]: shard 5 try to split, size 40 bytes splitKeys [[122 0 0 0 0 0 0 0 0 107 101 121 51]]
2021/08/20 12:58:03.771178 [info] prophet: alloc ids [8] for resource 7 split
2021/08/20 12:58:03.789628 [info] [raftstore]: shard 5 update to {ID:5 Start:[107 101 121 50] End:[107 101 121 51] Epoch:{ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/08/20 12:58:03.789656 [info] [raftstore]: shard 7 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:03.789661 [info] [raftstore]: shard 7 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:03.789663 [info] [raftstore]: shard 7 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:58:03.789+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(8)"}
{"level":"info","ts":"2021-08-20T12:58:03.789+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:03.789+0800","caller":"raft/raft.go:388","msg":"newRaft 8 [peers: [8], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:03.789741 [info] [raftstore]: shard 7 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:03.789+0800","caller":"raft/raft.go:934","msg":"8 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:03.789+0800","caller":"raft/raft.go:724","msg":"8 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:03.789+0800","caller":"raft/raft.go:835","msg":"8 received MsgVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-08-20T12:58:03.789+0800","caller":"raft/raft.go:776","msg":"8 became leader at term 6"}
2021/08/20 12:58:03.789786 [error] [raftstore]: >>>>>>>>>>>> shard 7 peer 8 add registration job by doApplySplit
2021/08/20 12:58:03.789809 [error] [raftstore]: >>>>>>>>>>>> shard 7 peer 8 add registration job by doApplySplit, completed
2021/08/20 12:58:03.789838 [info] [raftstore]: shard 7 added with peer {ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:03.789869 [info] [raftstore]: shard 5 new shard added, new shards [{ID:7 Start:[107 101 121 51] End:[] Epoch:{ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:03.789892 [info] [raftstore]: shard 7 ********become leader now********
2021/08/20 12:58:03.790012 [info] prophet: resource 5 version changed from 2 to 3
2021/08/20 12:58:03.869704 [info] [raftstore]: shard 7 start split check job from [122 0 0 0 0 0 0 0 0 107 101 121 51] to [122 0 0 0 0 0 0 0 1]
2021/08/20 12:58:03.891699 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:38398->127.0.0.1:30000: use of closed network connection
2021/08/20 12:58:03.891709 [error] prophet: client read loop stopped
2021/08/20 12:58:03.891748 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:03.891760 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:03.891750 [error] prophet: session 2[127.0.0.1:38400] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38400: use of closed network connection
2021/08/20 12:58:03.892016 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 12:58:03.892059 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 12:58:03.892061 [info] prophet: coordinator is stopping
2021/08/20 12:58:03.892067 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 12:58:03.892071 [info] prophet: patrol resources has been stopped 
2021/08/20 12:58:03.892073 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 12:58:03.892060 [info] prophet: drive push operator has been stopped 
2021/08/20 12:58:03.892083 [info] prophet: coordinator has been stopped
2021-08-20 12:58:03.892090 I | etcdserver: skipped leadership transfer for single voting member cluster
2021/08/20 12:58:03.899239 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:03.899253 [info] [raftstore]: shard 5 handle serve raft stopped
2021/08/20 12:58:03.899255 [info] [raftstore]: shard 7 handle serve raft stopped
2021/08/20 12:58:03.899274 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:03.899274 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:58:03.899278 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:03.899280 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:03.899319 [info] [transport]: transfer stopped
2021/08/20 12:58:03.899332 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:03.899337 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:03.899333 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:03.899340 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:03.899343 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:03.899345 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:03.899349 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:03.899352 [info] [transport]: send raft worker stopped
2021/08/20 12:58:03.899327 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:03.901765 [info] prophet: prophet logger set
2021/08/20 12:58:03.916039 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:03.916051 [info] [raftstore]: begin to start prophet
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:03.916089 I | embed: pprof is enabled under /debug/pprof
2021/08/20 12:58:03.916093 [info] [raftstore]: start scan gc snap files
2021-08-20 12:58:03.916119 I | embed: name = node-0
2021-08-20 12:58:03.916132 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 12:58:03.916134 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 12:58:03.916135 I | embed: heartbeat = 100ms
2021-08-20 12:58:03.916136 I | embed: election = 3000ms
2021-08-20 12:58:03.916138 I | embed: snapshot count = 100000
2021-08-20 12:58:03.916140 I | embed: advertise client URLs = http://127.0.0.1:40000
2021-08-20 12:58:03.916142 I | embed: initial advertise peer URLs = http://127.0.0.1:50000
2021-08-20 12:58:03.916150 I | embed: initial cluster = 
2021-08-20 12:58:03.916420 I | etcdserver: restarting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f at commit index 20
{"level":"info","ts":"2021-08-20T12:58:03.916+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:03.916+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-08-20T12:58:03.916+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 2, commit: 20, applied: 0, lastindex: 20, lastterm: 2]"}
2021-08-20 12:58:03.917147 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:03.919259 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
{"level":"info","ts":"2021-08-20T12:58:03.919+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:03.919528 I | embed: listening for peers on 127.0.0.1:50000
2021-08-20 12:58:03.919574 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:03.919615 N | etcdserver/membership: set the initial cluster version to 3.4
2021/08/20 12:58:03.941988 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 12:58:03.942001 [info] [raftstore]: shard 5 raft tick stopped
2021/08/20 12:58:03.942003 [info] [raftstore]: shard 7 raft tick stopped
2021/08/20 12:58:03.992780 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-08-20T12:58:09.017+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-08-20T12:58:09.017+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-08-20T12:58:09.017+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:09.017+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 3"}
{"level":"info","ts":"2021-08-20T12:58:09.017+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 3"}
2021-08-20 12:58:09.017812 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:09.017835 I | embed: ready to serve client requests
2021/08/20 12:58:09.017899 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 12:58:09.018408 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021/08/20 12:58:09.019638 [info] prophet: net application started
2021/08/20 12:58:09.019658 [info] prophet: start system time monitor 
2021/08/20 12:58:09.019797 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 12:58:09.019954 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 12:58:09.019968 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 12:58:09.020237 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 12:58:09.020815 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 12:58:09.020833 [info] prophet: ********node-0 become to leader now********
2021/08/20 12:58:09.021598 [info] prophet: load 1 containers, cost 677.3µs
2021/08/20 12:58:09.021779 [info] prophet: load 3 resources, cost 168µs
2021/08/20 12:58:09.022125 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:09.022171 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 12:58:09.022187 [info] prophet: client read loop started 
2021/08/20 12:58:09.022190 [info] prophet: client started
2021/08/20 12:58:09.022192 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 12:58:09.022194 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:09.022199 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:09.022209 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435489 deployPath:"not set" 
2021/08/20 12:58:09.022224 [info] prophet: session 1[127.0.0.1:38406] connected
2021/08/20 12:58:09.022231 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:09.022288 [info] [raftstore]: load local store 1
2021/08/20 12:58:09.022311 [info] [raftstore]: prophet started
2021/08/20 12:58:09.022347 [info] [transport]: net application started
2021/08/20 12:58:09.022356 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 12:58:09.022358 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:09.022380 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:6 Vote:3 Commit:9 XXX_unrecognized:[]} LastIndex:9 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:09.022396 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:9 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:09.022399 [info] [raftstore]: shard 2 init last term, last term=<6>
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
2021/08/20 12:58:09.022431 [info] [raftstore]: raft worker 0/0 start
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 6, commit: 9, applied: 9, lastindex: 9, lastterm: 6]"}
2021/08/20 12:58:09.022454 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 7"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 7"}
2021/08/20 12:58:09.022479 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 12:58:09.022498 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 12:58:09.022507 [info] prophet: load 0 jobs
2021/08/20 12:58:09.022510 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:09.022517 [info] [raftstore]: shard 5 init with raft local state {HardState:{Term:6 Vote:6 Commit:9 XXX_unrecognized:[]} LastIndex:9 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:09.022521 [info] [raftstore]: shard 5 init raft apply state, state=<{AppliedIndex:8 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:09.022523 [info] [raftstore]: shard 5 init last term, last term=<6>
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(6)"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [6], term: 6, commit: 9, applied: 8, lastindex: 9, lastterm: 6]"}
2021/08/20 12:58:09.022545 [info] [raftstore]: shard 5 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:934","msg":"6 is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:724","msg":"6 became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:835","msg":"6 received MsgVoteResp from 6 at term 7"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:776","msg":"6 became leader at term 7"}
2021/08/20 12:58:09.022567 [error] [raftstore]: >>>>>>>>>>>> shard 5 peer 6 add registration job by startShards
2021/08/20 12:58:09.022570 [error] [raftstore]: >>>>>>>>>>>> shard 5 peer 6 add registration job by startShards, completed
2021/08/20 12:58:09.022588 [info] [raftstore]: shard 5 added with peer {ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:09.022607 [info] [raftstore]: shard 7 init with raft local state {HardState:{Term:6 Vote:8 Commit:6 XXX_unrecognized:[]} LastIndex:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:09.022608 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 12:58:09.022611 [info] [raftstore]: shard 7 init raft apply state, state=<{AppliedIndex:6 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:09.022613 [info] [raftstore]: shard 7 init last term, last term=<6>
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(8)"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:388","msg":"newRaft 8 [peers: [8], term: 6, commit: 6, applied: 6, lastindex: 6, lastterm: 6]"}
2021/08/20 12:58:09.022634 [info] [raftstore]: shard 7 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:934","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:724","msg":"8 became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:835","msg":"8 received MsgVoteResp from 8 at term 7"}
{"level":"info","ts":"2021-08-20T12:58:09.022+0800","caller":"raft/raft.go:776","msg":"8 became leader at term 7"}
2021/08/20 12:58:09.022652 [error] [raftstore]: >>>>>>>>>>>> shard 7 peer 8 add registration job by startShards
2021/08/20 12:58:09.022666 [error] [raftstore]: >>>>>>>>>>>> shard 7 peer 8 add registration job by startShards, completed
2021/08/20 12:58:09.022686 [info] [raftstore]: shard 7 added with peer {ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:09.022690 [info] [raftstore]: starts with 3 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:09.022691 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:09.022692 [info] [raftstore]: shards started
2021/08/20 12:58:09.022706 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:09.022718 [info] [raftstore]: net application started
2021/08/20 12:58:09.022720 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 12:58:09.022735 [info] [raftstore]: router started
2021/08/20 12:58:09.022758 [info] [raftstore]: router event loop task started
2021/08/20 12:58:09.022747 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:09.022856 [info] prophet: session 2[127.0.0.1:38408] connected
2021/08/20 12:58:09.022858 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:09.022862 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:09.022910 [info] prophet: new watcher 127.0.0.1:38408 added
2021/08/20 12:58:09.022974 [info] [raftstore]: start init event
2021/08/20 12:58:09.023977 [info] [raftstore]: shard 5 ********become leader now********
2021/08/20 12:58:09.025166 [info] [raftstore]: shard 7 ********become leader now********
2021/08/20 12:58:09.132553 [info] [raftstore]: shard 5 start split check job from [122 0 0 0 0 0 0 0 0 107 101 121 50] to [122 0 0 0 0 0 0 0 0 107 101 121 51]
2021/08/20 12:58:09.132660 [error] [raftstore]: shard 5 heartbeat to prophet failed with client is closed
2021/08/20 12:58:09.132678 [error] [raftstore]: shard 7 heartbeat to prophet failed with client is closed
2021/08/20 12:58:09.132694 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:38406->127.0.0.1:30000: use of closed network connection
2021/08/20 12:58:09.132697 [error] prophet: client read loop stopped
2021/08/20 12:58:09.132700 [error] prophet: flush messages failed with illegal state, closed this session
2021/08/20 12:58:09.132714 [error] prophet: session 1[127.0.0.1:38406] read failed with illegal state
2021/08/20 12:58:09.132724 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:09.132726 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:09.132729 [error] prophet: session 2[127.0.0.1:38408] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38408: use of closed network connection
2021/08/20 12:58:09.133067 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 12:58:09.133120 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 12:58:09.133133 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 12:58:09.133128 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 12:58:09.133140 [info] prophet: coordinator stops running 
2021/08/20 12:58:09.133144 [info] prophet: coordinator is stopping
2021/08/20 12:58:09.133146 [info] prophet: coordinator has been stopped
2021-08-20 12:58:09.133144 I | etcdserver: skipped leadership transfer for single voting member cluster
2021/08/20 12:58:09.143424 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:09.143436 [info] [raftstore]: shard 5 handle serve raft stopped
2021/08/20 12:58:09.143438 [info] [raftstore]: shard 7 handle serve raft stopped
2021/08/20 12:58:09.143458 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:09.143462 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:09.143466 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:09.143501 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:09.143511 [info] [transport]: transfer stopped
2021/08/20 12:58:09.143514 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:09.143517 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:09.143520 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:09.143523 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:09.143526 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:09.143528 [info] [transport]: send raft worker stopped
2021/08/20 12:58:09.143518 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:09.143540 [info] [transport]: send snapshot worker stopped
--- PASS: TestIssue97 (7.25s)
=== RUN   TestSyncData
2021/08/20 12:58:09.146182 [info] prophet: prophet logger set
2021/08/20 12:58:09.146652 [info] [raftstore]: start scan gc snap files
2021/08/20 12:58:09.146891 [info] [raftstore]: start scan gc snap files
2021/08/20 12:58:09.147138 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:09.147150 [info] [raftstore]: begin to start prophet
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:09.147183 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:09.147234 I | embed: name = node-0
2021-08-20 12:58:09.147244 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 12:58:09.147246 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 12:58:09.147248 I | embed: heartbeat = 100ms
2021-08-20 12:58:09.147249 I | embed: election = 3000ms
2021-08-20 12:58:09.147250 I | embed: snapshot count = 100000
2021-08-20 12:58:09.147253 I | embed: advertise client URLs = http://127.0.0.1:40000
2021/08/20 12:58:09.147186 [info] [raftstore]: start scan gc snap files
2021-08-20 12:58:09.151982 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:09.152+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:09.152+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:09.152+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T12:58:09.152+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T12:58:09.152+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:09.153788 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:09.156815 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:09.156931 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
2021-08-20 12:58:09.157041 I | embed: listening for peers on 127.0.0.1:50000
{"level":"info","ts":"2021-08-20T12:58:09.157+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:09.157148 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021/08/20 12:58:09.191560 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 12:58:09.191574 [info] [raftstore]: shard 5 raft tick stopped
2021/08/20 12:58:09.191576 [info] [raftstore]: shard 7 raft tick stopped
2021/08/20 12:58:09.233869 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-08-20T12:58:10.152+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T12:58:10.152+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T12:58:10.152+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:10.152+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T12:58:10.152+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 12:58:10.152904 I | etcdserver: setting up the initial cluster version to 3.4
2021-08-20 12:58:10.153580 N | etcdserver/membership: set the initial cluster version to 3.4
2021-08-20 12:58:10.153623 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:10.153638 I | embed: ready to serve client requests
2021/08/20 12:58:10.153673 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 12:58:10.153930 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021/08/20 12:58:10.154689 [info] prophet: net application started
2021/08/20 12:58:10.154737 [info] prophet: start system time monitor 
2021/08/20 12:58:10.155111 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 12:58:10.155262 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 12:58:10.155272 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 12:58:10.155566 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 12:58:10.156009 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 12:58:10.156027 [info] prophet: ********node-0 become to leader now********
2021/08/20 12:58:10.156588 [info] prophet: load 0 containers, cost 522.4µs
2021/08/20 12:58:10.156741 [info] prophet: load 0 resources, cost 141.9µs
2021/08/20 12:58:10.158130 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:10.158152 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 12:58:10.158156 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 12:58:10.158157 [info] prophet: coordinator starts to run schedulers 
2021/08/20 12:58:10.158161 [info] prophet: client started
2021/08/20 12:58:10.158165 [info] prophet: client read loop started 
2021/08/20 12:58:10.158166 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 12:58:10.158170 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:10.158183 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:10.158195 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:10.158186 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435490 deployPath:"not set" 
2021/08/20 12:58:10.158202 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:10.158231 [info] prophet: session 1[127.0.0.1:38414] connected
2021/08/20 12:58:10.158545 [info] prophet: load 0 jobs
2021/08/20 12:58:10.158763 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 12:58:10.158786 [info] prophet: coordinator starts patrol resources 
2021/08/20 12:58:10.159308 [info] [raftstore]: create local store with id 1
2021/08/20 12:58:10.159697 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 12:58:10.159706 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 12:58:10.159887 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 12:58:10.161125 [info] prophet: container 1 limit added
2021/08/20 12:58:10.161192 [info] [raftstore]: prophet started
2021/08/20 12:58:10.161232 [info] [transport]: net application started
2021/08/20 12:58:10.161234 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 12:58:10.161236 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:10.161236 [info] prophet: container 1 heartbeat stream binded
2021/08/20 12:58:10.161254 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:10.161261 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:10.161262 [info] [raftstore]: shard 2 init last term, last term=<5>
2021/08/20 12:58:10.161266 [info] [raftstore]: shard 2 change init applied index from 5 to 5
{"level":"info","ts":"2021-08-20T12:58:10.161+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-08-20T12:58:10.161+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:10.161+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:10.161331 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:10.161337 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:10.161+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:10.161+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:10.161+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T12:58:10.161+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 12:58:10.161378 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 12:58:10.161400 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 12:58:10.161424 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:10.161452 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:10.161454 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:10.161455 [info] [raftstore]: shards started
2021/08/20 12:58:10.161464 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:10.161477 [info] [raftstore]: net application started
2021/08/20 12:58:10.161478 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 12:58:10.161487 [info] [raftstore]: router started
2021/08/20 12:58:10.161500 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:10.161562 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:10.161571 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:10.161576 [info] prophet: session 2[127.0.0.1:38416] connected
2021/08/20 12:58:10.161585 [info] [raftstore]: router event loop task started
2021/08/20 12:58:10.161594 [info] prophet: new watcher 127.0.0.1:38416 added
2021/08/20 12:58:10.161645 [info] [raftstore]: start init event
2021/08/20 12:58:10.171666 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 12:58:10.262791 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:10.262804 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-08-20T12:58:10.263+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 13072267036748255715)"}
2021-08-20 12:58:10.263570 I | etcdserver/membership: added member b56a059c2e6d91e3 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 12:58:10.263588 I | rafthttp: starting peer b56a059c2e6d91e3...
2021-08-20 12:58:10.263607 I | rafthttp: started HTTP pipelining with peer b56a059c2e6d91e3
2021-08-20 12:58:10.263973 I | rafthttp: started streaming with peer b56a059c2e6d91e3 (writer)
2021-08-20 12:58:10.264807 I | rafthttp: started streaming with peer b56a059c2e6d91e3 (writer)
2021-08-20 12:58:10.264896 I | rafthttp: started peer b56a059c2e6d91e3
2021-08-20 12:58:10.264913 I | rafthttp: added peer b56a059c2e6d91e3
2021-08-20 12:58:10.264915 I | rafthttp: started streaming with peer b56a059c2e6d91e3 (stream MsgApp v2 reader)
2021-08-20 12:58:10.264935 I | rafthttp: started streaming with peer b56a059c2e6d91e3 (stream Message reader)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:10.265264 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:10.265288 I | embed: name = node-1
2021-08-20 12:58:10.265312 I | embed: data dir = /tmp/cube/node-1/prophet
2021-08-20 12:58:10.265314 I | embed: member dir = /tmp/cube/node-1/prophet/member
2021-08-20 12:58:10.265315 I | embed: heartbeat = 100ms
2021-08-20 12:58:10.265316 I | embed: election = 3000ms
2021-08-20 12:58:10.265318 I | embed: snapshot count = 100000
2021-08-20 12:58:10.265320 I | embed: advertise client URLs = http://127.0.0.1:40001
2021-08-20 12:58:10.269336 I | etcdserver: starting member b56a059c2e6d91e3 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:10.269+0800","caller":"raft/raft.go:1550","msg":"b56a059c2e6d91e3 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:10.269+0800","caller":"raft/raft.go:711","msg":"b56a059c2e6d91e3 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:10.269+0800","caller":"raft/raft.go:388","msg":"newRaft b56a059c2e6d91e3 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 12:58:10.271082 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:10.274059 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:10.274074 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 12:58:10.274080 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:10.274283 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:10.274338 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 12:58:10.274348 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:10.274352 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 12:58:10.274354 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:10.274359 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:10.274364 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:10.274565 I | rafthttp: peer b56a059c2e6d91e3 became active
2021-08-20 12:58:10.274582 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 12:58:10.274596 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:10.274599 I | rafthttp: established a TCP streaming connection with peer b56a059c2e6d91e3 (stream Message writer)
2021-08-20 12:58:10.274607 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:10.274610 I | rafthttp: established a TCP streaming connection with peer b56a059c2e6d91e3 (stream MsgApp v2 writer)
2021-08-20 12:58:10.274644 I | embed: listening for peers on 127.0.0.1:50001
{"level":"info","ts":"2021-08-20T12:58:10.352+0800","caller":"raft/raft.go:870","msg":"b56a059c2e6d91e3 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T12:58:10.352+0800","caller":"raft/raft.go:711","msg":"b56a059c2e6d91e3 became follower at term 2"}
{"level":"info","ts":"2021-08-20T12:58:10.352+0800","caller":"raft/node.go:325","msg":"raft.node: b56a059c2e6d91e3 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:10.354+0800","caller":"raft/raft.go:1550","msg":"b56a059c2e6d91e3 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:10.354275 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:10.354316 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T12:58:10.355+0800","caller":"raft/raft.go:1550","msg":"b56a059c2e6d91e3 switched to configuration voters=(10650127570946328820 13072267036748255715)"}
2021-08-20 12:58:10.355775 I | etcdserver/membership: added member b56a059c2e6d91e3 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 12:58:10.356005 I | etcdserver: published {Name:node-1 ClientURLs:[http://127.0.0.1:40001]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:10.356021 I | embed: ready to serve client requests
2021/08/20 12:58:10.356035 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
2021-08-20 12:58:10.356209 N | embed: serving insecure client requests on 127.0.0.1:40001, this is strongly discouraged!
2021/08/20 12:58:10.357040 [info] prophet: net application started
2021/08/20 12:58:10.357085 [info] prophet: start system time monitor 
2021/08/20 12:58:10.357471 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 12:58:10.357484 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:10.357486 [info] prophet: ********node-1 become to follower now********
2021/08/20 12:58:10.357502 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:10.357538 [info] prophet: client read loop started 
2021/08/20 12:58:10.357548 [info] prophet: client started
2021/08/20 12:58:10.357552 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 12:58:10.357553 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:10.357565 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1629435490 deployPath:"not set" 
2021/08/20 12:58:10.357567 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:10.357578 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:10.357613 [info] prophet: session 3[127.0.0.1:38448] connected
2021/08/20 12:58:10.357615 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:10.357709 [info] [raftstore]: create local store with id 5
2021/08/20 12:58:10.358233 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 12:58:10.362640 [info] prophet: container 5 limit added
2021/08/20 12:58:10.362718 [info] [raftstore]: prophet started
2021/08/20 12:58:10.362738 [info] prophet: container 5 heartbeat stream binded
2021/08/20 12:58:10.362758 [info] [transport]: net application started
2021/08/20 12:58:10.362768 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/08/20 12:58:10.362771 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:10.362774 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:10.362775 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:10.362776 [info] [raftstore]: shards started
2021/08/20 12:58:10.362778 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:10.362782 [info] [raftstore]: net application started
2021/08/20 12:58:10.362783 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/08/20 12:58:10.362788 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:10.362795 [info] [raftstore]: router event loop task started
2021/08/20 12:58:10.362790 [info] [raftstore]: router started
2021/08/20 12:58:10.362800 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:10.362847 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:10.362861 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:10.362888 [info] prophet: session 4[127.0.0.1:38450] connected
2021/08/20 12:58:10.362909 [info] prophet: new watcher 127.0.0.1:38450 added
2021/08/20 12:58:10.362973 [info] [raftstore]: start init event
2021-08-20 12:58:10.366127 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 12:58:10.366141 I | rafthttp: established a TCP streaming connection with peer b56a059c2e6d91e3 (stream MsgApp v2 reader)
2021-08-20 12:58:10.366144 I | rafthttp: established a TCP streaming connection with peer b56a059c2e6d91e3 (stream Message reader)
2021-08-20 12:58:10.366179 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021/08/20 12:58:10.373754 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:10.459854 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 12:58:10.4598234 +0800 CST m=+8.574909201, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/08/20 12:58:10.459882 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/08/20 12:58:10.460032 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:10.462162 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:10.462252 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source heartbeat
2021/08/20 12:58:10.462280 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:10.462296 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:10.462335 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-08-20T12:58:10.471+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/08/20 12:58:10.471932 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 218 165 40 87 181 133 79 113 163 208 166 48 151 216 207 169 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:10.471960 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:10.471987 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:10.472111 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:10.472251 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/08/20 12:58:10.472609 [info] [transport]: session 1[127.0.0.1:58336] connected
2021/08/20 12:58:10.472622 [info] [transport]: connected to store 5
2021/08/20 12:58:10.472698 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 12:58:10.472720 [info] [raftstore]: shard 2 replicate peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:10.472737 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:10.472742 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:10.472744 [info] [raftstore]: shard 2 init last term, last term=<0>
2021/08/20 12:58:10.472747 [info] [raftstore]: shard 2 change init applied index from 0 to 0
{"level":"info","ts":"2021-08-20T12:58:10.472+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:10.472+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:10.472+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:10.472946 [info] [raftstore]: shard 2 added with peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:58:10.472+0800","caller":"raft/raft.go:870","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:10.472+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 6"}
2021/08/20 12:58:10.473057 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:10.473659 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/08/20 12:58:10.473703 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:10.473848 [info] [transport]: connected to store 1
2021/08/20 12:58:10.473909 [info] [transport]: session 1[127.0.0.1:36022] connected
2021/08/20 12:58:10.474004 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:10.474076 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:10.474088 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:10.474093 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T12:58:10.474+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:10.474308 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T12:58:10.474+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6)"}
{"level":"error","ts":"2021-08-20T12:58:10.474+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:10.474487 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 140 48 137 232 138 72 66 22 185 226 6 138 18 59 17 219 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:10.474501 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:10.474601 [info] prophet: resource 2 ConfVer changed from 2 to 3
{"level":"error","ts":"2021-08-20T12:58:10.474+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:10.474611 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:10.474827 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<9> 
2021/08/20 12:58:10.475841 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 12:58:10.4598234 +0800 CST m=+8.574909201, startAt:2021-08-20 12:58:10.4598705 +0800 CST m=+8.574956401, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 15.9579ms, 
2021/08/20 12:58:10.566379 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:10.566395 [info] [raftstore]: begin to start prophet
2021-08-20 12:58:10.567469 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:1e03a1a09642fb93 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:10.567+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e7c0304f-b911-4ec1-92fa-ecf93e40e0dd/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:10.567584 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:10.642075 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T12:58:10.642+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:10.642196 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 12:58:10.642311 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:9 >,size=<124>
2021/08/20 12:58:10.642346 [info] [raftstore]: shard 2 send snap complete
2021/08/20 12:58:10.642353 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 12:58:10.642396 [info] [transport]: session 2[127.0.0.1:58342] connected
2021/08/20 12:58:10.642412 [info] [transport]: connected to store 5
{"level":"info","ts":"2021-08-20T12:58:10.642+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:10.642+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-08-20T12:58:10.642+0800","caller":"raft/raft.go:1503","msg":"6 [commit: 9, lastindex: 9, lastterm: 6] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:10.642+0800","caller":"raft/raft.go:1420","msg":"6 [commit: 9] restored snapshot [index: 9, term: 6]"}
2021/08/20 12:58:10.642582 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 12:58:10.642599 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 12:58:10.642608 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:9 TruncatedState:{Index:9 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:10.642615 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 start applying snapshot
2021/08/20 12:58:10.642628 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 12:58:10.642736 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply
2021/08/20 12:58:10.642750 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 applying snapshot to set read 9
2021/08/20 12:58:10.642779 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:10.642805 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:10.642812 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 AdvanceApply with 9
2021/08/20 12:58:10.643121 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_9.gz, header is shard:<id:2 epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:9 
2021/08/20 12:58:10.643156 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:9 XXX_unrecognized:[]}
2021/08/20 12:58:10.643168 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply, completed
2021-08-20 12:58:11.068764 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:be0621ebfde36aee RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:11.068+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e7c0304f-b911-4ec1-92fa-ecf93e40e0dd/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:11.068902 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:11.569561 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:be0621ebfde36aee RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:11.569+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e7c0304f-b911-4ec1-92fa-ecf93e40e0dd/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:11.569691 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:12.070165 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:7bded1e118ecea88 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:12.070+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e7c0304f-b911-4ec1-92fa-ecf93e40e0dd/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:12.070296 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:12.571238 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:7bded1e118ecea88 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:12.571+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e7c0304f-b911-4ec1-92fa-ecf93e40e0dd/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:12.571388 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:13.071744 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:734130dddf9a9b50 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:13.071+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e7c0304f-b911-4ec1-92fa-ecf93e40e0dd/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:13.071899 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:13.572639 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:734130dddf9a9b50 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:13.572+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e7c0304f-b911-4ec1-92fa-ecf93e40e0dd/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:13.572805 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:14.074053 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:a2c909cd3c906228 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:14.074+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e7c0304f-b911-4ec1-92fa-ecf93e40e0dd/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:14.074247 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:14.575344 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:a2c909cd3c906228 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:14.575+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e7c0304f-b911-4ec1-92fa-ecf93e40e0dd/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:14.575492 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:15.076549 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:25433a638926774f RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:15.076+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e7c0304f-b911-4ec1-92fa-ecf93e40e0dd/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:15.076713 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-08-20T12:58:15.578+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(2685054002020120399 10650127570946328820 13072267036748255715)"}
2021-08-20 12:58:15.578483 I | etcdserver/membership: added member 25433a638926774f [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:15.578491 I | rafthttp: starting peer 25433a638926774f...
2021-08-20 12:58:15.578506 I | rafthttp: started HTTP pipelining with peer 25433a638926774f
{"level":"info","ts":"2021-08-20T12:58:15.578+0800","caller":"raft/raft.go:1550","msg":"b56a059c2e6d91e3 switched to configuration voters=(2685054002020120399 10650127570946328820 13072267036748255715)"}
2021-08-20 12:58:15.578684 I | rafthttp: started streaming with peer 25433a638926774f (writer)
2021-08-20 12:58:15.578741 I | etcdserver/membership: added member 25433a638926774f [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:15.578759 I | rafthttp: starting peer 25433a638926774f...
2021-08-20 12:58:15.578765 I | rafthttp: started HTTP pipelining with peer 25433a638926774f
2021-08-20 12:58:15.578780 I | rafthttp: started peer 25433a638926774f
2021-08-20 12:58:15.578787 I | rafthttp: added peer 25433a638926774f
2021-08-20 12:58:15.578789 I | rafthttp: started streaming with peer 25433a638926774f (writer)
2021-08-20 12:58:15.578807 I | rafthttp: started streaming with peer 25433a638926774f (stream MsgApp v2 reader)
2021-08-20 12:58:15.578906 I | rafthttp: started streaming with peer 25433a638926774f (stream Message reader)
2021-08-20 12:58:15.578948 I | rafthttp: started streaming with peer 25433a638926774f (writer)
2021-08-20 12:58:15.579177 I | rafthttp: started peer 25433a638926774f
2021-08-20 12:58:15.579312 I | rafthttp: added peer 25433a638926774f
2021-08-20 12:58:15.579527 I | rafthttp: started streaming with peer 25433a638926774f (stream MsgApp v2 reader)
2021-08-20 12:58:15.579706 I | rafthttp: started streaming with peer 25433a638926774f (stream Message reader)
2021-08-20 12:58:15.579768 I | rafthttp: started streaming with peer 25433a638926774f (writer)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:15.579967 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:15.580057 I | embed: name = node-2
2021-08-20 12:58:15.580873 I | embed: data dir = /tmp/cube/node-2/prophet
2021-08-20 12:58:15.580877 I | embed: member dir = /tmp/cube/node-2/prophet/member
2021-08-20 12:58:15.580880 I | embed: heartbeat = 100ms
2021-08-20 12:58:15.580882 I | embed: election = 3000ms
2021-08-20 12:58:15.580886 I | embed: snapshot count = 100000
2021-08-20 12:58:15.580890 I | embed: advertise client URLs = http://127.0.0.1:40002
2021-08-20 12:58:15.585450 I | etcdserver: starting member 25433a638926774f in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:15.585+0800","caller":"raft/raft.go:1550","msg":"25433a638926774f switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:15.585+0800","caller":"raft/raft.go:711","msg":"25433a638926774f became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:15.585+0800","caller":"raft/raft.go:388","msg":"newRaft 25433a638926774f [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 12:58:15.587147 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:15.590227 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:15.590244 I | rafthttp: started HTTP pipelining with peer b56a059c2e6d91e3
2021-08-20 12:58:15.590249 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 12:58:15.590267 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:15.590477 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:15.590535 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:15.590553 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 12:58:15.590558 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 12:58:15.590561 I | rafthttp: starting peer b56a059c2e6d91e3...
2021-08-20 12:58:15.590566 I | rafthttp: started HTTP pipelining with peer b56a059c2e6d91e3
2021-08-20 12:58:15.590576 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:15.590649 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:15.590700 I | rafthttp: started streaming with peer b56a059c2e6d91e3 (writer)
2021-08-20 12:58:15.590773 I | rafthttp: peer 25433a638926774f became active
2021-08-20 12:58:15.590791 I | rafthttp: started streaming with peer b56a059c2e6d91e3 (writer)
2021-08-20 12:58:15.590798 I | rafthttp: established a TCP streaming connection with peer 25433a638926774f (stream MsgApp v2 writer)
2021-08-20 12:58:15.590801 I | rafthttp: established a TCP streaming connection with peer 25433a638926774f (stream Message writer)
2021-08-20 12:58:15.590818 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 12:58:15.590857 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:15.590868 I | rafthttp: started peer b56a059c2e6d91e3
2021-08-20 12:58:15.590872 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:15.590884 I | rafthttp: added peer b56a059c2e6d91e3
2021-08-20 12:58:15.590892 I | rafthttp: started streaming with peer b56a059c2e6d91e3 (stream Message reader)
2021-08-20 12:58:15.590895 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:15.590941 I | rafthttp: started streaming with peer b56a059c2e6d91e3 (stream MsgApp v2 reader)
2021-08-20 12:58:15.591078 I | rafthttp: peer 25433a638926774f became active
2021-08-20 12:58:15.591102 I | rafthttp: established a TCP streaming connection with peer 25433a638926774f (stream Message writer)
2021-08-20 12:58:15.591107 I | rafthttp: established a TCP streaming connection with peer 25433a638926774f (stream MsgApp v2 writer)
2021-08-20 12:58:15.591109 I | rafthttp: peer b56a059c2e6d91e3 became active
2021-08-20 12:58:15.591123 I | rafthttp: established a TCP streaming connection with peer b56a059c2e6d91e3 (stream MsgApp v2 reader)
2021-08-20 12:58:15.591129 I | embed: listening for peers on 127.0.0.1:50002
2021-08-20 12:58:15.591206 I | rafthttp: established a TCP streaming connection with peer b56a059c2e6d91e3 (stream Message reader)
2021-08-20 12:58:15.591241 I | rafthttp: established a TCP streaming connection with peer b56a059c2e6d91e3 (stream MsgApp v2 writer)
2021-08-20 12:58:15.591252 I | rafthttp: established a TCP streaming connection with peer 25433a638926774f (stream MsgApp v2 reader)
2021-08-20 12:58:15.641676 I | etcdserver: 25433a638926774f initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
{"level":"info","ts":"2021-08-20T12:58:15.653+0800","caller":"raft/raft.go:870","msg":"25433a638926774f [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T12:58:15.653+0800","caller":"raft/raft.go:711","msg":"25433a638926774f became follower at term 2"}
{"level":"info","ts":"2021-08-20T12:58:15.653+0800","caller":"raft/node.go:325","msg":"raft.node: 25433a638926774f elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:15.654+0800","caller":"raft/raft.go:1550","msg":"25433a638926774f switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:15.654757 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:15.654785 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T12:58:15.655+0800","caller":"raft/raft.go:1550","msg":"25433a638926774f switched to configuration voters=(10650127570946328820 13072267036748255715)"}
2021-08-20 12:58:15.655148 I | etcdserver/membership: added member b56a059c2e6d91e3 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:15.655+0800","caller":"raft/raft.go:1550","msg":"25433a638926774f switched to configuration voters=(2685054002020120399 10650127570946328820 13072267036748255715)"}
2021-08-20 12:58:15.655367 I | etcdserver/membership: added member 25433a638926774f [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:15.655948 I | etcdserver: published {Name:node-2 ClientURLs:[http://127.0.0.1:40002]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:15.655960 I | embed: ready to serve client requests
2021/08/20 12:58:15.655950 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
2021-08-20 12:58:15.656169 N | embed: serving insecure client requests on 127.0.0.1:40002, this is strongly discouraged!
2021/08/20 12:58:15.656927 [info] prophet: net application started
2021/08/20 12:58:15.656947 [info] prophet: start system time monitor 
2021/08/20 12:58:15.657294 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 12:58:15.657303 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:15.657306 [info] prophet: ********node-2 become to follower now********
2021/08/20 12:58:15.657333 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:15.657350 [info] prophet: client read loop started 
2021/08/20 12:58:15.657356 [info] prophet: client started
2021/08/20 12:58:15.657361 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 12:58:15.657363 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:15.657379 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1629435495 deployPath:"not set" 
2021/08/20 12:58:15.657388 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:15.657401 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:15.657414 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:15.657408 [info] prophet: session 5[127.0.0.1:38512] connected
2021/08/20 12:58:15.657503 [info] [raftstore]: create local store with id 7
2021/08/20 12:58:15.657948 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 12:58:15.659973 [info] prophet: container 7 limit added
2021/08/20 12:58:15.660030 [info] [raftstore]: prophet started
2021/08/20 12:58:15.660064 [info] prophet: container 7 heartbeat stream binded
2021/08/20 12:58:15.660073 [info] [transport]: net application started
2021/08/20 12:58:15.660083 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/08/20 12:58:15.660086 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:15.660091 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:15.660092 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:15.660093 [info] [raftstore]: shards started
2021/08/20 12:58:15.660096 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:15.660104 [info] [raftstore]: net application started
2021/08/20 12:58:15.660106 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/08/20 12:58:15.660112 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:15.660124 [info] [raftstore]: router event loop task started
2021/08/20 12:58:15.660119 [info] [raftstore]: router started
2021/08/20 12:58:15.660130 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:15.660230 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:15.660251 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:15.660235 [info] prophet: session 6[127.0.0.1:38514] connected
2021/08/20 12:58:15.660283 [info] prophet: new watcher 127.0.0.1:38514 added
2021/08/20 12:58:15.660341 [info] [raftstore]: start init event
2021-08-20 12:58:15.679492 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 12:58:15.679511 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:58:15.679519 I | rafthttp: established a TCP streaming connection with peer 25433a638926774f (stream MsgApp v2 reader)
2021-08-20 12:58:15.679525 I | rafthttp: established a TCP streaming connection with peer 25433a638926774f (stream Message reader)
2021-08-20 12:58:15.680756 I | rafthttp: established a TCP streaming connection with peer b56a059c2e6d91e3 (stream Message writer)
2021-08-20 12:58:15.680778 I | rafthttp: established a TCP streaming connection with peer 25433a638926774f (stream Message reader)
2021/08/20 12:58:15.690295 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:15.693667 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 12:58:15.6936461 +0800 CST m=+13.808731901, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/08/20 12:58:15.693686 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/08/20 12:58:15.693772 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:15.702238 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:15.702535 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:15.702556 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:15.702+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6) learners=(8)"}
2021/08/20 12:58:15.702606 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:15.702620 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:15.702629 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 86 128 38 174 48 60 74 214 168 113 41 202 140 112 240 232 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:15.702651 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:15.702+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6) learners=(8)"}
2021/08/20 12:58:15.702714 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:15.702744 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/08/20 12:58:15.703432 [info] [transport]: connected to store 7
2021/08/20 12:58:15.703450 [info] [transport]: session 1[127.0.0.1:40790] connected
2021/08/20 12:58:15.703477 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 12:58:15.703493 [info] [raftstore]: shard 2 replicate peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:15.703506 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:15.703518 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:15.703519 [info] [raftstore]: shard 2 init last term, last term=<0>
2021/08/20 12:58:15.703522 [info] [raftstore]: shard 2 change init applied index from 0 to 0
{"level":"info","ts":"2021-08-20T12:58:15.703+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:15.703+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:15.703+0800","caller":"raft/raft.go:388","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:15.703577 [info] [raftstore]: shard 2 added with peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:58:15.703+0800","caller":"raft/raft.go:870","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:15.703+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 6"}
2021/08/20 12:58:15.703702 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:15.704308 [info] prophet: resource 2 send schedule command, step promote learner peer 8 on container 7 to voter, source heartbeat
2021/08/20 12:58:15.704360 [info] [raftstore]: shard-2 AddNode peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:15.704517 [info] [transport]: connected to store 1
2021/08/20 12:58:15.704524 [info] [transport]: session 2[127.0.0.1:36088] connected
2021/08/20 12:58:15.704576 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:15.704648 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T12:58:15.704+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:15.704714 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"error","ts":"2021-08-20T12:58:15.704+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1175\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:15.704920 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:15.704940 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:15.704954 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:15.704970 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:15.704+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-08-20T12:58:15.704+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6 8)"}
2021/08/20 12:58:15.705014 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T12:58:15.704+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:15.705036 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 85 173 222 151 46 5 71 110 172 245 102 85 142 34 115 60 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 8 16 7] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:15.705052 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:15.705061 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<10> 
2021/08/20 12:58:15.705128 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/08/20 12:58:15.705146 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T12:58:15.705+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:15.705227 [info] [raftstore]: shard 2 snapshot epoch 4/5 stale, generate again.
2021/08/20 12:58:15.705233 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:15.705565 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<11> 
2021/08/20 12:58:15.706213 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 12:58:15.6936461 +0800 CST m=+13.808731901, startAt:2021-08-20 12:58:15.6936811 +0800 CST m=+13.808766901, currentStep:2, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]) finished) finish, takes 12.5227ms, 
{"level":"error","ts":"2021-08-20T12:58:15.772+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:13:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1090\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Propose\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:83\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeNormal\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:198\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).propose\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:135\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleRequest\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:187\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:447\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:15.772235 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 12:58:15.772362 [info] [transport]: connected to store 7
2021/08/20 12:58:15.772383 [info] [transport]: session 2[127.0.0.1:40794] connected
{"level":"info","ts":"2021-08-20T12:58:15.772+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:15.772+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-08-20T12:58:15.772+0800","caller":"raft/raft.go:1503","msg":"8 [commit: 11, lastindex: 11, lastterm: 6] restored snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:15.772+0800","caller":"raft/raft.go:1420","msg":"8 [commit: 11] restored snapshot [index: 11, term: 6]"}
2021/08/20 12:58:15.772499 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/08/20 12:58:15.772509 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:5 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:8 containerID:7 > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:11 >,size=<124>
2021/08/20 12:58:15.772553 [info] [raftstore]: shard 2 send snap complete
2021/08/20 12:58:15.772568 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 12:58:15.841461 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 12:58:15.841480 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 12:58:15.841489 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:11 TruncatedState:{Index:11 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:15.841496 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 start applying snapshot
2021/08/20 12:58:15.841509 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 12:58:15.841637 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 add registration job by handleRaftReadyApply
2021/08/20 12:58:15.841652 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 applying snapshot to set read 11
2021/08/20 12:58:15.841671 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:15.841686 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_11.gz, header is shard:<id:2 epoch:<confVer:4 version:1 > peers:<id:8 containerID:7 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:11 
2021/08/20 12:58:15.841695 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:15.841701 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 AdvanceApply with 11
2021/08/20 12:58:15.841713 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:11 XXX_unrecognized:[]}
2021/08/20 12:58:15.841732 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 add registration job by handleRaftReadyApply, completed
2021/08/20 12:58:15.861940 [info] [raftstore]: shard 2 start split check job from [122 0 0 0 0 0 0 0 0] to [122 0 0 0 0 0 0 0 1]
2021/08/20 12:58:15.861972 [info] [raftstore]: shard 2 try to split, size 40 bytes splitKeys [[122 0 0 0 0 0 0 0 0 107 101 121 50]]
2021/08/20 12:58:15.862023 [info] prophet: alloc ids [10 11 12] for resource 9 split
2021/08/20 12:58:15.871671 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/08/20 12:58:15.871714 [info] [raftstore]: shard 9 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:15.871720 [info] [raftstore]: shard 9 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:15.871721 [info] [raftstore]: shard 9 init last term, last term=<5>
2021/08/20 12:58:15.871725 [info] [raftstore]: shard 9 change init applied index from 5 to 5
2021/08/20 12:58:15.871750 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/08/20 12:58:15.871682 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/08/20 12:58:15.871770 [info] [raftstore]: shard 9 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:15.871772 [info] [raftstore]: shard 9 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:15.871774 [info] [raftstore]: shard 9 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:15.871775 [info] [raftstore]: shard 9 init last term, last term=<5>
2021/08/20 12:58:15.871776 [info] [raftstore]: shard 9 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:15.871777 [info] [raftstore]: shard 9 change init applied index from 5 to 5
{"level":"info","ts":"2021-08-20T12:58:15.871+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-08-20T12:58:15.871+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-08-20T12:58:15.871+0800","caller":"raft/raft.go:711","msg":"a became follower at term 5"}
2021/08/20 12:58:15.871777 [info] [raftstore]: shard 9 init last term, last term=<5>
2021/08/20 12:58:15.871835 [info] [raftstore]: shard 9 change init applied index from 5 to 5
{"level":"info","ts":"2021-08-20T12:58:15.871+0800","caller":"raft/raft.go:388","msg":"newRaft a [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:15.871873 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 10 add registration job by doApplySplit
2021/08/20 12:58:15.871886 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 10 add registration job by doApplySplit, completed
2021/08/20 12:58:15.871896 [info] [raftstore]: shard 9 added with peer {ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:58:15.871+0800","caller":"raft/raft.go:711","msg":"b became follower at term 5"}
2021/08/20 12:58:15.871914 [info] [raftstore]: shard 2 new shard added, new shards [{ID:9 Start:[107 101 121 50] End:[] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:15.871+0800","caller":"raft/raft.go:388","msg":"newRaft b [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:15.871958 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 11 add registration job by doApplySplit
2021/08/20 12:58:15.871974 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 11 add registration job by doApplySplit, completed
2021/08/20 12:58:15.871979 [info] prophet: resource 2 version changed from 1 to 2
{"level":"info","ts":"2021-08-20T12:58:15.871+0800","caller":"raft/raft.go:1550","msg":"c switched to configuration voters=(10 11 12)"}
2021/08/20 12:58:15.871985 [info] [raftstore]: shard 9 added with peer {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:15.872081 [info] [raftstore]: shard 2 new shard added, new shards [{ID:9 Start:[107 101 121 50] End:[] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:711","msg":"c became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:388","msg":"newRaft c [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:15.872191 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 12 add registration job by doApplySplit
2021/08/20 12:58:15.872208 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 12 add registration job by doApplySplit, completed
2021/08/20 12:58:15.872219 [info] [raftstore]: shard 9 added with peer {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:15.872229 [info] [raftstore]: shard 2 new shard added, new shards [{ID:9 Start:[107 101 121 50] End:[] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:15.871+0800","caller":"raft/raft.go:934","msg":"a is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:724","msg":"a became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:835","msg":"a received MsgVoteResp from a at term 6"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:822","msg":"a [logterm: 5, index: 5] sent MsgVote request to b at term 6"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:822","msg":"a [logterm: 5, index: 5] sent MsgVote request to c at term 6"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:870","msg":"c [term: 5] received a MsgVote message with higher term from a [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:711","msg":"c became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:971","msg":"c [logterm: 5, index: 5, vote: 0] cast MsgVote for a [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:835","msg":"a received MsgVoteResp from c at term 6"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:1319","msg":"a has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:776","msg":"a became leader at term 6"}
2021/08/20 12:58:15.872470 [info] [raftstore]: shard 9 ********become leader now********
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:870","msg":"b [term: 5] received a MsgVote message with higher term from a [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:711","msg":"b became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:58:15.872+0800","caller":"raft/raft.go:971","msg":"b [logterm: 5, index: 5, vote: 0] cast MsgVote for a [logterm: 5, index: 5] at term 6"}
2021/08/20 12:58:15.872601 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:38414->127.0.0.1:30000: use of closed network connection
2021/08/20 12:58:15.872620 [error] prophet: client read loop stopped
2021/08/20 12:58:15.872636 [error] prophet: session 4[127.0.0.1:38450] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38450: use of closed network connection
2021/08/20 12:58:15.872646 [error] prophet: session 2[127.0.0.1:38416] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38416: use of closed network connection
2021/08/20 12:58:15.872653 [error] prophet: session 3[127.0.0.1:38448] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38448: use of closed network connection
2021/08/20 12:58:15.872655 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:15.872661 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:15.872664 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 12:58:15.872667 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:15.872669 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:15.872667 [error] prophet: session 6[127.0.0.1:38514] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38514: use of closed network connection
2021/08/20 12:58:15.872688 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:15.872695 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 12:58:15.872702 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:15.872706 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:15.872702 [error] prophet: session 5[127.0.0.1:38512] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38512: use of closed network connection
2021/08/20 12:58:15.872727 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:15.872774 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:15.872799 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:15.873939 [error] prophet: session 1[] handle failed with queue: disposed, close session
2021/08/20 12:58:15.873960 [info] prophet: watcher  removed
2021/08/20 12:58:15.873962 [info] prophet: watcher  removed
2021/08/20 12:58:15.873963 [info] prophet: watcher  removed
2021/08/20 12:58:15.874910 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 12:58:15.874982 [info] prophet: drive push operator has been stopped 
2021/08/20 12:58:15.874996 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 12:58:15.874999 [info] prophet: coordinator is stopping
2021/08/20 12:58:15.875015 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 12:58:15.875024 [info] prophet: patrol resources has been stopped 
2021/08/20 12:58:15.875056 [info] prophet: coordinator has been stopped
2021/08/20 12:58:15.875042 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/08/20 12:58:15.875064 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/08/20 12:58:15.875042 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 12:58:15.875105 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/08/20 12:58:15.875112 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021-08-20 12:58:15.875124 I | etcdserver: 93ccda9956d988f4 starts leadership transfer from 93ccda9956d988f4 to b56a059c2e6d91e3
{"level":"info","ts":"2021-08-20T12:58:15.875+0800","caller":"raft/raft.go:1278","msg":"93ccda9956d988f4 [term 2] starts to transfer leadership to b56a059c2e6d91e3"}
{"level":"info","ts":"2021-08-20T12:58:15.875+0800","caller":"raft/raft.go:1284","msg":"93ccda9956d988f4 sends MsgTimeoutNow to b56a059c2e6d91e3 immediately as b56a059c2e6d91e3 already has up-to-date log"}
{"level":"info","ts":"2021-08-20T12:58:15.875+0800","caller":"raft/raft.go:1372","msg":"b56a059c2e6d91e3 [term 2] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T12:58:15.875+0800","caller":"raft/raft.go:724","msg":"b56a059c2e6d91e3 became candidate at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.875+0800","caller":"raft/raft.go:835","msg":"b56a059c2e6d91e3 received MsgVoteResp from b56a059c2e6d91e3 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.875+0800","caller":"raft/raft.go:822","msg":"b56a059c2e6d91e3 [logterm: 2, index: 31] sent MsgVote request to 25433a638926774f at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.875+0800","caller":"raft/raft.go:822","msg":"b56a059c2e6d91e3 [logterm: 2, index: 31] sent MsgVote request to 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.875+0800","caller":"raft/node.go:331","msg":"raft.node: b56a059c2e6d91e3 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.876+0800","caller":"raft/raft.go:870","msg":"93ccda9956d988f4 [term: 2] received a MsgVote message with higher term from b56a059c2e6d91e3 [term: 3]"}
{"level":"info","ts":"2021-08-20T12:58:15.876+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.876+0800","caller":"raft/raft.go:971","msg":"93ccda9956d988f4 [logterm: 2, index: 31, vote: 0] cast MsgVote for b56a059c2e6d91e3 [logterm: 2, index: 31] at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.876+0800","caller":"raft/node.go:331","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.876+0800","caller":"raft/raft.go:870","msg":"25433a638926774f [term: 2] received a MsgVote message with higher term from b56a059c2e6d91e3 [term: 3]"}
{"level":"info","ts":"2021-08-20T12:58:15.876+0800","caller":"raft/raft.go:711","msg":"25433a638926774f became follower at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.876+0800","caller":"raft/raft.go:971","msg":"25433a638926774f [logterm: 2, index: 31, vote: 0] cast MsgVote for b56a059c2e6d91e3 [logterm: 2, index: 31] at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.876+0800","caller":"raft/node.go:331","msg":"raft.node: 25433a638926774f lost leader 93ccda9956d988f4 at term 3"}
2021/08/20 12:58:15.876450 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/08/20 12:58:15.876461 [info] prophet: [prophet-leader/node-2]/campaign: start
{"level":"info","ts":"2021-08-20T12:58:15.877+0800","caller":"raft/raft.go:835","msg":"b56a059c2e6d91e3 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.877+0800","caller":"raft/raft.go:1319","msg":"b56a059c2e6d91e3 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:58:15.877+0800","caller":"raft/raft.go:776","msg":"b56a059c2e6d91e3 became leader at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.877+0800","caller":"raft/node.go:325","msg":"raft.node: b56a059c2e6d91e3 elected leader b56a059c2e6d91e3 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:15.877+0800","caller":"raft/node.go:325","msg":"raft.node: 25433a638926774f elected leader b56a059c2e6d91e3 at term 3"}
{"level":"warn","ts":"2021-08-20T12:58:15.877+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cf24a8cb-9fc0-4b0e-a8e0-112b13922d15/127.0.0.1:40001","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-08-20T12:58:15.877+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader b56a059c2e6d91e3 at term 3"}
2021/08/20 12:58:15.879820 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
2021/08/20 12:58:15.881676 [info] prophet: [prophet-leader/node-2]/campaign: completed, start keepalive
2021/08/20 12:58:15.881696 [info] prophet: ********node-2 become to leader now********
2021/08/20 12:58:15.883880 [info] prophet: load 3 containers, cost 2.105ms
2021/08/20 12:58:15.884311 [info] prophet: load 1 resources, cost 417.8µs
2021/08/20 12:58:15.885077 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 12:58:15.885121 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 12:58:15.885387 [info] prophet: load 0 jobs
2021/08/20 12:58:15.904566 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/08/20 12:58:15.904583 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/08/20 12:58:15.905482 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/08/20 12:58:15.907391 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/08/20 12:58:15.907405 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
2021/08/20 12:58:15.961726 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/08/20 12:58:15.961749 [info] [raftstore]: shard 9 start split check job from [122 0 0 0 0 0 0 0 0 107 101 121 50] to [122 0 0 0 0 0 0 0 1]
2021/08/20 12:58:15.961772 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021-08-20 12:58:15.975484 I | etcdserver: 93ccda9956d988f4 finished leadership transfer from 93ccda9956d988f4 to b56a059c2e6d91e3 (took 100.3611ms)
2021/08/20 12:58:15.975495 [info] prophet: [prophet-leader/node-0]/loop: exit
2021-08-20 12:58:15.975516 I | rafthttp: stopping peer b56a059c2e6d91e3...
2021-08-20 12:58:15.975678 I | rafthttp: closed the TCP streaming connection with peer b56a059c2e6d91e3 (stream MsgApp v2 writer)
2021-08-20 12:58:15.975691 I | rafthttp: stopped streaming with peer b56a059c2e6d91e3 (writer)
2021-08-20 12:58:15.975719 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:15.975840 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:15.975858 I | rafthttp: closed the TCP streaming connection with peer b56a059c2e6d91e3 (stream Message writer)
2021-08-20 12:58:15.975861 I | rafthttp: stopped streaming with peer b56a059c2e6d91e3 (writer)
2021-08-20 12:58:15.975868 I | rafthttp: stopped HTTP pipelining with peer b56a059c2e6d91e3
2021-08-20 12:58:15.975914 W | rafthttp: lost the TCP streaming connection with peer b56a059c2e6d91e3 (stream MsgApp v2 reader)
2021-08-20 12:58:15.975930 E | rafthttp: failed to read b56a059c2e6d91e3 on stream MsgApp v2 (context canceled)
2021-08-20 12:58:15.975932 I | rafthttp: peer b56a059c2e6d91e3 became inactive (message send to peer failed)
2021-08-20 12:58:15.975940 I | rafthttp: stopped streaming with peer b56a059c2e6d91e3 (stream MsgApp v2 reader)
2021-08-20 12:58:15.975969 W | rafthttp: lost the TCP streaming connection with peer b56a059c2e6d91e3 (stream Message reader)
2021-08-20 12:58:15.975973 I | rafthttp: stopped streaming with peer b56a059c2e6d91e3 (stream Message reader)
2021-08-20 12:58:15.975975 I | rafthttp: stopped peer b56a059c2e6d91e3
2021-08-20 12:58:15.975978 I | rafthttp: stopping peer 25433a638926774f...
2021-08-20 12:58:15.976157 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:15.976497 I | rafthttp: closed the TCP streaming connection with peer 25433a638926774f (stream MsgApp v2 writer)
2021-08-20 12:58:15.976511 I | rafthttp: stopped streaming with peer 25433a638926774f (writer)
2021-08-20 12:58:15.976605 I | rafthttp: closed the TCP streaming connection with peer 25433a638926774f (stream Message writer)
2021-08-20 12:58:15.976616 I | rafthttp: stopped streaming with peer 25433a638926774f (writer)
2021-08-20 12:58:15.976623 I | rafthttp: stopped HTTP pipelining with peer 25433a638926774f
2021-08-20 12:58:15.976653 W | rafthttp: lost the TCP streaming connection with peer 25433a638926774f (stream MsgApp v2 reader)
2021-08-20 12:58:15.976656 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:15.976680 E | rafthttp: failed to read 25433a638926774f on stream MsgApp v2 (context canceled)
2021-08-20 12:58:15.976705 I | rafthttp: peer 25433a638926774f became inactive (message send to peer failed)
2021-08-20 12:58:15.976712 I | rafthttp: stopped streaming with peer 25433a638926774f (stream MsgApp v2 reader)
2021-08-20 12:58:15.976745 W | rafthttp: lost the TCP streaming connection with peer 25433a638926774f (stream Message reader)
2021-08-20 12:58:15.976758 I | rafthttp: stopped streaming with peer 25433a638926774f (stream Message reader)
2021-08-20 12:58:15.976761 I | rafthttp: stopped peer 25433a638926774f
2021-08-20 12:58:15.976840 E | rafthttp: failed to find member b56a059c2e6d91e3 in cluster 6a4ade671189dc2f
2021-08-20 12:58:15.976856 E | rafthttp: failed to find member 25433a638926774f in cluster 6a4ade671189dc2f
2021-08-20 12:58:15.976876 E | rafthttp: failed to find member b56a059c2e6d91e3 in cluster 6a4ade671189dc2f
2021-08-20 12:58:15.976890 E | rafthttp: failed to find member 25433a638926774f in cluster 6a4ade671189dc2f
2021-08-20 12:58:15.976906 E | rafthttp: failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node b56a059c2e6d91e3)
2021-08-20 12:58:15.976955 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021-08-20 12:58:15.976976 E | rafthttp: failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node 25433a638926774f)
2021-08-20 12:58:15.976978 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021/08/20 12:58:15.982189 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:15.982202 [info] [raftstore]: shard 9 handle serve raft stopped
2021/08/20 12:58:15.982223 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:58:15.982226 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:15.982230 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:15.982233 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:15.982265 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:15.982277 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:15.982278 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:15.982280 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:15.982281 [info] [transport]: transfer stopped
2021/08/20 12:58:15.982282 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:15.982277 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:15.982285 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:15.982287 [info] [transport]: send raft worker stopped
2021/08/20 12:58:15.982290 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:15.982322 [error] [transport]: session 1[127.0.0.1:36022] read failed with read tcp 127.0.0.1:10000->127.0.0.1:36022: use of closed network connection
2021/08/20 12:58:15.982331 [error] [transport]: session 2[127.0.0.1:36088] read failed with read tcp 127.0.0.1:10000->127.0.0.1:36088: use of closed network connection
2021-08-20 12:58:15.983258 W | etcdserver: failed to apply request "header:<ID:10512381615721667854 > lease_revoke:<id:11e37b61ec6fdd0a>" with response "size:27" took (22.7µs) to execute, err is lease not found
2021-08-20 12:58:15.983291 W | etcdserver: failed to apply request "header:<ID:10512381615721667854 > lease_revoke:<id:11e37b61ec6fdd0a>" with response "size:26" took (26.5µs) to execute, err is lease not found
{"level":"warn","ts":"2021-08-20T12:58:15.983+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cf24a8cb-9fc0-4b0e-a8e0-112b13922d15/127.0.0.1:40001","attempt":0,"error":"rpc error: code = NotFound desc = etcdserver: requested lease not found"}
2021/08/20 12:58:15.983344 [info] prophet: [prophet-leader/node-1]/lease: close failed with etcdserver: requested lease not found
2021-08-20 12:58:15.983399 I | etcdserver: b56a059c2e6d91e3 starts leadership transfer from b56a059c2e6d91e3 to 25433a638926774f
{"level":"info","ts":"2021-08-20T12:58:15.983+0800","caller":"raft/raft.go:1278","msg":"b56a059c2e6d91e3 [term 3] starts to transfer leadership to 25433a638926774f"}
{"level":"info","ts":"2021-08-20T12:58:15.983+0800","caller":"raft/raft.go:1284","msg":"b56a059c2e6d91e3 sends MsgTimeoutNow to 25433a638926774f immediately as 25433a638926774f already has up-to-date log"}
{"level":"info","ts":"2021-08-20T12:58:15.983+0800","caller":"raft/raft.go:1372","msg":"25433a638926774f [term 3] received MsgTimeoutNow from b56a059c2e6d91e3 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T12:58:15.983+0800","caller":"raft/raft.go:724","msg":"25433a638926774f became candidate at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.983+0800","caller":"raft/raft.go:835","msg":"25433a638926774f received MsgVoteResp from 25433a638926774f at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.983+0800","caller":"raft/raft.go:822","msg":"25433a638926774f [logterm: 3, index: 38] sent MsgVote request to 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.983+0800","caller":"raft/raft.go:822","msg":"25433a638926774f [logterm: 3, index: 38] sent MsgVote request to b56a059c2e6d91e3 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.983+0800","caller":"raft/node.go:331","msg":"raft.node: 25433a638926774f lost leader b56a059c2e6d91e3 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.984+0800","caller":"raft/raft.go:870","msg":"b56a059c2e6d91e3 [term: 3] received a MsgVote message with higher term from 25433a638926774f [term: 4]"}
{"level":"info","ts":"2021-08-20T12:58:15.984+0800","caller":"raft/raft.go:711","msg":"b56a059c2e6d91e3 became follower at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.984+0800","caller":"raft/raft.go:971","msg":"b56a059c2e6d91e3 [logterm: 3, index: 38, vote: 0] cast MsgVote for 25433a638926774f [logterm: 3, index: 38] at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.984+0800","caller":"raft/node.go:331","msg":"raft.node: b56a059c2e6d91e3 lost leader b56a059c2e6d91e3 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.984+0800","caller":"raft/raft.go:835","msg":"25433a638926774f received MsgVoteResp from b56a059c2e6d91e3 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.984+0800","caller":"raft/raft.go:1319","msg":"25433a638926774f has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:58:15.984+0800","caller":"raft/raft.go:776","msg":"25433a638926774f became leader at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.984+0800","caller":"raft/node.go:325","msg":"raft.node: 25433a638926774f elected leader 25433a638926774f at term 4"}
{"level":"info","ts":"2021-08-20T12:58:15.984+0800","caller":"raft/node.go:325","msg":"raft.node: b56a059c2e6d91e3 elected leader 25433a638926774f at term 4"}
2021/08/20 12:58:15.985328 [info] prophet: [prophet-leader/node-2]/keepalive: exit with etcd leader changed
2021/08/20 12:58:15.985351 [error] prophet: [prophet-leader/node-2]/lease: keep lease exit
2021/08/20 12:58:15.985358 [info] prophet: [prophet-leader/node-2]/lease: exit with context done
2021/08/20 12:58:16.041799 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 12:58:16.041823 [info] [raftstore]: shard 9 raft tick stopped
2021/08/20 12:58:16.073105 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:16.073113 [error] prophet: reset leader connection failed with client is closed
2021/08/20 12:58:16.073182 [error] prophet: client read loop stopped
2021/08/20 12:58:16.073195 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021-08-20 12:58:16.083847 I | etcdserver: b56a059c2e6d91e3 finished leadership transfer from b56a059c2e6d91e3 to 25433a638926774f (took 100.4463ms)
2021-08-20 12:58:16.083898 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:16.083912 I | rafthttp: stopping peer 25433a638926774f...
2021-08-20 12:58:16.084001 I | rafthttp: closed the TCP streaming connection with peer 25433a638926774f (stream MsgApp v2 writer)
2021-08-20 12:58:16.084012 I | rafthttp: stopped streaming with peer 25433a638926774f (writer)
2021-08-20 12:58:16.084096 W | rafthttp: lost the TCP streaming connection with peer b56a059c2e6d91e3 (stream MsgApp v2 reader)
2021-08-20 12:58:16.084129 W | rafthttp: lost the TCP streaming connection with peer b56a059c2e6d91e3 (stream Message reader)
2021-08-20 12:58:16.084148 I | rafthttp: closed the TCP streaming connection with peer 25433a638926774f (stream Message writer)
2021-08-20 12:58:16.084169 I | rafthttp: stopped streaming with peer 25433a638926774f (writer)
2021-08-20 12:58:16.084177 I | rafthttp: stopped HTTP pipelining with peer 25433a638926774f
2021-08-20 12:58:16.084194 W | rafthttp: lost the TCP streaming connection with peer 25433a638926774f (stream MsgApp v2 reader)
2021-08-20 12:58:16.084197 E | rafthttp: failed to read 25433a638926774f on stream MsgApp v2 (context canceled)
2021-08-20 12:58:16.084199 I | rafthttp: peer 25433a638926774f became inactive (message send to peer failed)
2021-08-20 12:58:16.084207 I | rafthttp: stopped streaming with peer 25433a638926774f (stream MsgApp v2 reader)
2021-08-20 12:58:16.084243 W | rafthttp: lost the TCP streaming connection with peer 25433a638926774f (stream Message reader)
2021-08-20 12:58:16.084258 I | rafthttp: stopped streaming with peer 25433a638926774f (stream Message reader)
2021-08-20 12:58:16.084262 I | rafthttp: stopped peer 25433a638926774f
2021-08-20 12:58:16.084265 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 12:58:16.084352 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:58:16.084365 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:16.084449 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 12:58:16.084459 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:16.084466 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:16.084469 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:16.084472 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:16.084475 I | rafthttp: stopped peer 93ccda9956d988f4
2021-08-20 12:58:16.084501 E | rafthttp: failed to find member 25433a638926774f in cluster 6a4ade671189dc2f
2021-08-20 12:58:16.084530 E | rafthttp: failed to find member 25433a638926774f in cluster 6a4ade671189dc2f
2021-08-20 12:58:16.084559 E | rafthttp: failed to dial b56a059c2e6d91e3 on stream Message (peer b56a059c2e6d91e3 failed to find local node 25433a638926774f)
2021-08-20 12:58:16.084563 I | rafthttp: peer b56a059c2e6d91e3 became inactive (message send to peer failed)
2021-08-20 12:58:16.085923 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021/08/20 12:58:16.093394 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:16.093407 [info] [raftstore]: shard 9 handle serve raft stopped
2021/08/20 12:58:16.093426 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:58:16.093431 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:16.093432 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:16.093440 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:16.093479 [info] [transport]: transfer stopped
2021/08/20 12:58:16.093536 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:16.093565 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:16.093573 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:16.093575 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:16.093578 [error] [transport]: session 1[127.0.0.1:58336] read failed with read tcp 127.0.0.1:10001->127.0.0.1:58336: use of closed network connection
2021/08/20 12:58:16.093581 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:16.093589 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:16.093578 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:16.093592 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:16.093595 [info] [transport]: send raft worker stopped
2021/08/20 12:58:16.093638 [error] [transport]: session 2[127.0.0.1:58342] read failed with read tcp 127.0.0.1:10001->127.0.0.1:58342: use of closed network connection
2021/08/20 12:58:16.141623 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 12:58:16.141638 [info] [raftstore]: shard 9 raft tick stopped
2021-08-20 12:58:16.186307 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 12:58:16.273419 [error] prophet: reset leader connection failed with client is closed
2021/08/20 12:58:16.273481 [error] prophet: client read loop stopped
2021-08-20 12:58:16.287967 W | rafthttp: lost the TCP streaming connection with peer b56a059c2e6d91e3 (stream Message writer)
2021-08-20 12:58:16.288131 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 12:58:16.473469 [error] [transport]: session 2[127.0.0.1:40794] read failed with read tcp 127.0.0.1:10002->127.0.0.1:40794: i/o timeout
2021/08/20 12:58:16.473483 [error] [transport]: session 1[127.0.0.1:40790] read failed with read tcp 127.0.0.1:10002->127.0.0.1:40790: i/o timeout
2021/08/20 12:58:16.661348 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-08-20T12:58:17.093+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-1895e234-36ce-409e-b602-47820e055c19/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 12:58:17.094211 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
2021/08/20 12:58:17.094242 [info] prophet: coordinator stops running 
2021/08/20 12:58:17.094247 [info] prophet: coordinator is stopping
2021/08/20 12:58:17.094248 [info] prophet: coordinator has been stopped
{"level":"warn","ts":"2021-08-20T12:58:17.094+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-1895e234-36ce-409e-b602-47820e055c19/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021-08-20 12:58:17.094301 W | etcdserver: 25433a638926774f failed to transfer leadership (etcdserver: unhealthy cluster)
2021/08/20 12:58:17.094304 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context canceled
2021/08/20 12:58:17.094310 [error] prophet: [prophet-leader/node-2]/loop: load current leader failed with context canceled, retry later
2021-08-20 12:58:17.094329 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:17.094345 I | rafthttp: stopped HTTP pipelining with peer b56a059c2e6d91e3
2021-08-20 12:58:17.094359 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 12:58:17.094434 W | etcdserver: read-only range request "key:\"/electors/leader/prophet-leader\" " with result "error:context canceled" took too long (1.0085458s) to execute
WARNING: 2021/08/20 12:58:17 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
2021-08-20 12:58:17.094488 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:58:17.094496 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:17.094504 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:17.094514 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:17.094532 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:17.094537 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:17.094541 I | rafthttp: stopped peer 93ccda9956d988f4
2021-08-20 12:58:17.094543 I | rafthttp: stopping peer b56a059c2e6d91e3...
2021-08-20 12:58:17.094637 I | rafthttp: closed the TCP streaming connection with peer b56a059c2e6d91e3 (stream MsgApp v2 writer)
2021-08-20 12:58:17.094651 I | rafthttp: stopped streaming with peer b56a059c2e6d91e3 (writer)
2021-08-20 12:58:17.094654 I | rafthttp: stopped streaming with peer b56a059c2e6d91e3 (writer)
2021-08-20 12:58:17.094663 I | rafthttp: stopped HTTP pipelining with peer b56a059c2e6d91e3
2021-08-20 12:58:17.094670 I | rafthttp: stopped streaming with peer b56a059c2e6d91e3 (stream MsgApp v2 reader)
2021-08-20 12:58:17.094686 I | rafthttp: stopped streaming with peer b56a059c2e6d91e3 (stream Message reader)
2021-08-20 12:58:17.094700 I | rafthttp: stopped peer b56a059c2e6d91e3
2021/08/20 12:58:17.100659 [info] [raftstore]: shard 9 handle serve raft stopped
2021/08/20 12:58:17.100672 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:17.100694 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:58:17.100698 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:17.100700 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:17.100713 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:17.100748 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:17.100759 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:17.100761 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:17.100764 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:17.100765 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:17.100768 [info] [transport]: send raft worker stopped
2021/08/20 12:58:17.100766 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:17.100767 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:17.100767 [info] [transport]: transfer stopped
2021/08/20 12:58:17.100774 [info] [transport]: send snapshot worker stopped
--- PASS: TestSyncData (7.95s)
=== RUN   TestIssue90
2021/08/20 12:58:17.101558 [info] prophet: prophet logger set
2021/08/20 12:58:17.102045 [info] [raftstore]: start scan gc snap files
2021/08/20 12:58:17.102305 [info] [raftstore]: start scan gc snap files
2021/08/20 12:58:17.102481 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:17.102493 [info] [raftstore]: begin to start prophet
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021/08/20 12:58:17.102520 [info] [raftstore]: start scan gc snap files
2021-08-20 12:58:17.102530 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:17.102553 I | embed: name = node-0
2021-08-20 12:58:17.102565 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 12:58:17.102567 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 12:58:17.102568 I | embed: heartbeat = 100ms
2021-08-20 12:58:17.102570 I | embed: election = 3000ms
2021-08-20 12:58:17.102571 I | embed: snapshot count = 100000
2021-08-20 12:58:17.102573 I | embed: advertise client URLs = http://127.0.0.1:40000
2021-08-20 12:58:17.107109 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:17.107+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:17.107+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:17.107+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T12:58:17.107+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T12:58:17.107+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:17.109051 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:17.111925 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:17.112051 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
{"level":"info","ts":"2021-08-20T12:58:17.112+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:17.112184 I | embed: listening for peers on 127.0.0.1:50000
2021-08-20 12:58:17.112204 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021/08/20 12:58:17.141767 [info] [raftstore]: shard 9 raft tick stopped
2021/08/20 12:58:17.191348 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 12:58:17.194493 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"info","ts":"2021-08-20T12:58:17.507+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T12:58:17.507+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T12:58:17.507+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:17.507+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T12:58:17.507+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 12:58:17.507799 I | etcdserver: setting up the initial cluster version to 3.4
2021-08-20 12:58:17.508543 N | etcdserver/membership: set the initial cluster version to 3.4
2021-08-20 12:58:17.508582 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:17.508597 I | embed: ready to serve client requests
2021/08/20 12:58:17.508628 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 12:58:17.508893 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021/08/20 12:58:17.509791 [info] prophet: net application started
2021/08/20 12:58:17.509801 [info] prophet: start system time monitor 
2021/08/20 12:58:17.510323 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 12:58:17.510485 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 12:58:17.510497 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 12:58:17.510705 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 12:58:17.511232 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 12:58:17.511245 [info] prophet: ********node-0 become to leader now********
2021/08/20 12:58:17.511663 [info] prophet: load 0 containers, cost 362.5µs
2021/08/20 12:58:17.511851 [info] prophet: load 0 resources, cost 177.1µs
2021/08/20 12:58:17.512466 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:17.512491 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 12:58:17.512495 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 12:58:17.512496 [info] prophet: client started
2021/08/20 12:58:17.512496 [info] prophet: coordinator starts to run schedulers 
2021/08/20 12:58:17.512500 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 12:58:17.512501 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:17.512505 [info] prophet: client read loop started 
2021/08/20 12:58:17.512517 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435497 deployPath:"not set" 
2021/08/20 12:58:17.512518 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:17.512532 [info] prophet: session 1[127.0.0.1:38672] connected
2021/08/20 12:58:17.512532 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:17.512541 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:17.512909 [info] prophet: load 0 jobs
2021/08/20 12:58:17.513195 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 12:58:17.513210 [info] prophet: coordinator starts patrol resources 
2021/08/20 12:58:17.513742 [info] [raftstore]: create local store with id 1
2021/08/20 12:58:17.514148 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 12:58:17.514157 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 12:58:17.514320 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 12:58:17.515580 [info] prophet: container 1 limit added
2021/08/20 12:58:17.515650 [info] [raftstore]: prophet started
2021/08/20 12:58:17.515707 [info] prophet: container 1 heartbeat stream binded
2021/08/20 12:58:17.515719 [info] [transport]: net application started
2021/08/20 12:58:17.515722 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 12:58:17.515725 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:17.515746 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:17.515764 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:17.515765 [info] [raftstore]: shard 2 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:58:17.515+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-08-20T12:58:17.515+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:17.515+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:17.515843 [info] [raftstore]: shard 2 try to campaign leader, because only self
2021/08/20 12:58:17.515846 [info] [raftstore]: raft worker 0/0 start
{"level":"info","ts":"2021-08-20T12:58:17.515+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:17.515+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:17.515+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T12:58:17.515+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 12:58:17.515890 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 12:58:17.515910 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 12:58:17.515924 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:17.515933 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:17.515934 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:17.515935 [info] [raftstore]: shards started
2021/08/20 12:58:17.515937 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:17.515943 [info] [raftstore]: net application started
2021/08/20 12:58:17.515944 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 12:58:17.515945 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 12:58:17.516008 [info] [raftstore]: router started
2021/08/20 12:58:17.516036 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:17.516039 [info] [raftstore]: router event loop task started
2021/08/20 12:58:17.516121 [info] prophet: session 2[127.0.0.1:38674] connected
2021/08/20 12:58:17.516121 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:17.516138 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:17.516170 [info] prophet: new watcher 127.0.0.1:38674 added
2021/08/20 12:58:17.516233 [info] [raftstore]: start init event
2021/08/20 12:58:17.517485 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:17.517496 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-08-20T12:58:17.518+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(9333943660726457372 10650127570946328820)"}
2021-08-20 12:58:17.518080 I | etcdserver/membership: added member 8188d44e5b1c141c [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 12:58:17.518095 I | rafthttp: starting peer 8188d44e5b1c141c...
2021-08-20 12:58:17.518110 I | rafthttp: started HTTP pipelining with peer 8188d44e5b1c141c
2021-08-20 12:58:17.518271 I | rafthttp: started streaming with peer 8188d44e5b1c141c (writer)
2021-08-20 12:58:17.518339 I | rafthttp: started streaming with peer 8188d44e5b1c141c (writer)
2021-08-20 12:58:17.518375 I | rafthttp: started peer 8188d44e5b1c141c
2021-08-20 12:58:17.518390 I | rafthttp: added peer 8188d44e5b1c141c
2021-08-20 12:58:17.518393 I | rafthttp: started streaming with peer 8188d44e5b1c141c (stream MsgApp v2 reader)
2021-08-20 12:58:17.518413 I | rafthttp: started streaming with peer 8188d44e5b1c141c (stream Message reader)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:17.518751 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:17.518796 I | embed: name = node-1
2021-08-20 12:58:17.518809 I | embed: data dir = /tmp/cube/node-1/prophet
2021-08-20 12:58:17.518812 I | embed: member dir = /tmp/cube/node-1/prophet/member
2021-08-20 12:58:17.518813 I | embed: heartbeat = 100ms
2021-08-20 12:58:17.518815 I | embed: election = 3000ms
2021-08-20 12:58:17.518816 I | embed: snapshot count = 100000
2021-08-20 12:58:17.518818 I | embed: advertise client URLs = http://127.0.0.1:40001
2021-08-20 12:58:17.523231 I | etcdserver: starting member 8188d44e5b1c141c in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:17.523+0800","caller":"raft/raft.go:1550","msg":"8188d44e5b1c141c switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:17.523+0800","caller":"raft/raft.go:711","msg":"8188d44e5b1c141c became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:17.523+0800","caller":"raft/raft.go:388","msg":"newRaft 8188d44e5b1c141c [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 12:58:17.524924 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:17.528124 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:17.528138 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 12:58:17.528150 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:17.528350 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:17.528405 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 12:58:17.528416 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:17.528419 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 12:58:17.528421 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:17.528512 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:17.528550 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:17.528628 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 12:58:17.528651 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:17.528672 I | rafthttp: peer 8188d44e5b1c141c became active
2021-08-20 12:58:17.528694 I | rafthttp: established a TCP streaming connection with peer 8188d44e5b1c141c (stream MsgApp v2 writer)
2021-08-20 12:58:17.528700 I | rafthttp: established a TCP streaming connection with peer 8188d44e5b1c141c (stream Message writer)
2021-08-20 12:58:17.528705 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:17.528866 I | embed: listening for peers on 127.0.0.1:50001
{"level":"info","ts":"2021-08-20T12:58:17.607+0800","caller":"raft/raft.go:870","msg":"8188d44e5b1c141c [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T12:58:17.607+0800","caller":"raft/raft.go:711","msg":"8188d44e5b1c141c became follower at term 2"}
{"level":"info","ts":"2021-08-20T12:58:17.607+0800","caller":"raft/node.go:325","msg":"raft.node: 8188d44e5b1c141c elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:17.609+0800","caller":"raft/raft.go:1550","msg":"8188d44e5b1c141c switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:17.609180 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:17.609228 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T12:58:17.609+0800","caller":"raft/raft.go:1550","msg":"8188d44e5b1c141c switched to configuration voters=(9333943660726457372 10650127570946328820)"}
2021-08-20 12:58:17.610040 I | etcdserver/membership: added member 8188d44e5b1c141c [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 12:58:17.610842 I | etcdserver: published {Name:node-1 ClientURLs:[http://127.0.0.1:40001]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:17.610855 I | embed: ready to serve client requests
2021/08/20 12:58:17.610906 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
2021-08-20 12:58:17.611075 N | embed: serving insecure client requests on 127.0.0.1:40001, this is strongly discouraged!
2021/08/20 12:58:17.611811 [info] prophet: net application started
2021/08/20 12:58:17.611815 [info] prophet: start system time monitor 
2021/08/20 12:58:17.612548 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 12:58:17.612559 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:17.612561 [info] prophet: ********node-1 become to follower now********
2021/08/20 12:58:17.612580 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:17.612616 [info] prophet: client read loop started 
2021/08/20 12:58:17.612638 [info] prophet: client started
2021/08/20 12:58:17.612661 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 12:58:17.612670 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:17.612638 [info] prophet: session 3[127.0.0.1:38704] connected
2021/08/20 12:58:17.612679 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:17.612694 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:17.612683 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1629435497 deployPath:"not set" 
2021/08/20 12:58:17.612698 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:17.612783 [info] [raftstore]: create local store with id 5
2021/08/20 12:58:17.613242 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 12:58:17.615984 [info] prophet: container 5 limit added
2021/08/20 12:58:17.616061 [info] [raftstore]: prophet started
2021/08/20 12:58:17.616064 [info] prophet: container 5 heartbeat stream binded
2021/08/20 12:58:17.616424 [info] [transport]: net application started
2021/08/20 12:58:17.616436 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/08/20 12:58:17.616439 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:17.616442 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:17.616443 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:17.616444 [info] [raftstore]: shards started
2021/08/20 12:58:17.616448 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:17.616453 [info] [raftstore]: net application started
2021/08/20 12:58:17.616454 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/08/20 12:58:17.616465 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:17.616465 [info] [raftstore]: router started
2021/08/20 12:58:17.616471 [info] [raftstore]: router event loop task started
2021/08/20 12:58:17.616477 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:17.616641 [info] prophet: session 4[127.0.0.1:38706] connected
2021/08/20 12:58:17.616650 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:17.616657 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:17.616697 [info] prophet: new watcher 127.0.0.1:38706 added
2021/08/20 12:58:17.616765 [info] [raftstore]: start init event
2021/08/20 12:58:17.618647 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:17.618661 [info] [raftstore]: begin to start prophet
2021-08-20 12:58:17.618695 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 12:58:17.618714 I | rafthttp: established a TCP streaming connection with peer 8188d44e5b1c141c (stream Message reader)
2021-08-20 12:58:17.618723 I | rafthttp: established a TCP streaming connection with peer 8188d44e5b1c141c (stream MsgApp v2 reader)
2021-08-20 12:58:17.618743 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:58:17.619144 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:9c3156335a54a449 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:17.619+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-94401e95-44c4-4be1-91cf-f509b64748b9/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:17.619245 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:17.627946 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:17.713997 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 12:58:17.7139762 +0800 CST m=+15.829062001, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/08/20 12:58:17.714017 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/08/20 12:58:17.714098 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:17.716243 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:17.716325 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source heartbeat
2021/08/20 12:58:17.716346 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:17.716353 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:17.716386 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-08-20T12:58:17.725+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/08/20 12:58:17.725949 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 234 29 66 51 11 151 72 170 135 132 1 5 171 243 195 43 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:17.725961 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:17.725976 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:17.726103 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:17.726156 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/08/20 12:58:17.726483 [info] [transport]: connected to store 5
2021/08/20 12:58:17.726501 [info] [transport]: session 1[127.0.0.1:58594] connected
2021/08/20 12:58:17.726541 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 12:58:17.726875 [info] [raftstore]: shard 2 replicate peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:17.726913 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:17.726918 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:17.726919 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T12:58:17.726+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:17.726+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:17.726+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:17.726994 [info] [raftstore]: shard 2 added with peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:58:17.727+0800","caller":"raft/raft.go:870","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:17.727+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 6"}
2021/08/20 12:58:17.727096 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:17.727166 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/08/20 12:58:17.727241 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:17.728019 [info] [transport]: connected to store 1
2021/08/20 12:58:17.728028 [info] [transport]: session 1[127.0.0.1:36280] connected
2021/08/20 12:58:17.728089 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:17.728167 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:17.728177 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:17.728181 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T12:58:17.728+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:17.728235 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T12:58:17.728+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6)"}
{"level":"error","ts":"2021-08-20T12:58:17.728+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:17.729582 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 133 125 232 249 233 173 64 42 182 1 160 243 137 58 251 246 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:17.729643 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:17.729767 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:17.729949 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/08/20 12:58:17.729980 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<9> 
{"level":"error","ts":"2021-08-20T12:58:17.730+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:17.730199 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 12:58:17.730486 [info] [transport]: session 2[127.0.0.1:58598] connected
2021/08/20 12:58:17.730498 [info] [transport]: connected to store 5
{"level":"info","ts":"2021-08-20T12:58:17.730+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:17.730+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-08-20T12:58:17.730+0800","caller":"raft/raft.go:1503","msg":"6 [commit: 9, lastindex: 9, lastterm: 6] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:17.730+0800","caller":"raft/raft.go:1420","msg":"6 [commit: 9] restored snapshot [index: 9, term: 6]"}
2021/08/20 12:58:17.730697 [info] [raftstore]: shard 2 peer 6 receiving snapshot, skip further handling
2021/08/20 12:58:17.730779 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:9 >,size=<124>
2021/08/20 12:58:17.730821 [info] [raftstore]: shard 2 send snap complete
2021/08/20 12:58:17.730834 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 12:58:17.731455 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 12:58:17.7139762 +0800 CST m=+15.829062001, startAt:2021-08-20 12:58:17.7140117 +0800 CST m=+15.829097501, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 17.4298ms, 
2021/08/20 12:58:17.791850 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 12:58:17.791869 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 12:58:17.791878 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:9 TruncatedState:{Index:9 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:17.791886 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 start applying snapshot
2021/08/20 12:58:17.791901 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 12:58:17.792054 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply
2021/08/20 12:58:17.792067 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 applying snapshot to set read 9
2021/08/20 12:58:17.792079 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_9.gz, header is shard:<id:2 epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:9 
2021/08/20 12:58:17.792113 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:9 XXX_unrecognized:[]}
2021/08/20 12:58:17.792133 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply, completed
2021/08/20 12:58:17.792080 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:17.792149 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:17.792163 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 AdvanceApply with 9
2021-08-20 12:58:18.119837 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:bd0878096c4836ca RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:18.119+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-94401e95-44c4-4be1-91cf-f509b64748b9/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:18.119990 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:18.620934 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:bd0878096c4836ca RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:18.621+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-94401e95-44c4-4be1-91cf-f509b64748b9/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:18.621062 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:18.907929 [info] prophet: [prophet-leader/node-1]/loop: exit
2021-08-20 12:58:19.121697 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:21535e15973c6b78 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:19.121+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-94401e95-44c4-4be1-91cf-f509b64748b9/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:19.121834 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:19.622291 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:21535e15973c6b78 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:19.622+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-94401e95-44c4-4be1-91cf-f509b64748b9/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:19.622449 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:20.123517 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:d9e78332fd96ff2d RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:20.123+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-94401e95-44c4-4be1-91cf-f509b64748b9/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:20.123695 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:20.624821 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:d9e78332fd96ff2d RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:20.624+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-94401e95-44c4-4be1-91cf-f509b64748b9/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:20.624957 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:21.125821 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:f4150efa16ef676e RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:21.125+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-94401e95-44c4-4be1-91cf-f509b64748b9/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:21.125963 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:21.627149 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:f4150efa16ef676e RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:21.627+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-94401e95-44c4-4be1-91cf-f509b64748b9/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:21.627262 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:22.127772 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:9835b71300fd19d8 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:22.127+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-94401e95-44c4-4be1-91cf-f509b64748b9/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:22.127908 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-08-20T12:58:22.629+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(9333943660726457372 10650127570946328820 10967873759779559896)"}
{"level":"info","ts":"2021-08-20T12:58:22.629+0800","caller":"raft/raft.go:1550","msg":"8188d44e5b1c141c switched to configuration voters=(9333943660726457372 10650127570946328820 10967873759779559896)"}
2021-08-20 12:58:22.629448 I | etcdserver/membership: added member 9835b71300fd19d8 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:22.629465 I | rafthttp: starting peer 9835b71300fd19d8...
2021-08-20 12:58:22.629472 I | rafthttp: started HTTP pipelining with peer 9835b71300fd19d8
2021-08-20 12:58:22.629540 I | etcdserver/membership: added member 9835b71300fd19d8 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:22.629555 I | rafthttp: starting peer 9835b71300fd19d8...
2021-08-20 12:58:22.629563 I | rafthttp: started HTTP pipelining with peer 9835b71300fd19d8
2021-08-20 12:58:22.629741 I | rafthttp: started streaming with peer 9835b71300fd19d8 (writer)
2021-08-20 12:58:22.629831 I | rafthttp: started streaming with peer 9835b71300fd19d8 (writer)
2021-08-20 12:58:22.630064 I | rafthttp: started streaming with peer 9835b71300fd19d8 (writer)
2021-08-20 12:58:22.630136 I | rafthttp: started streaming with peer 9835b71300fd19d8 (writer)
2021-08-20 12:58:22.630298 I | rafthttp: started peer 9835b71300fd19d8
2021-08-20 12:58:22.630313 I | rafthttp: started streaming with peer 9835b71300fd19d8 (stream MsgApp v2 reader)
2021-08-20 12:58:22.630319 I | rafthttp: started streaming with peer 9835b71300fd19d8 (stream Message reader)
2021-08-20 12:58:22.630323 I | rafthttp: started peer 9835b71300fd19d8
2021-08-20 12:58:22.630334 I | rafthttp: added peer 9835b71300fd19d8
2021-08-20 12:58:22.630357 I | rafthttp: started streaming with peer 9835b71300fd19d8 (stream MsgApp v2 reader)
2021-08-20 12:58:22.630397 I | rafthttp: added peer 9835b71300fd19d8
2021-08-20 12:58:22.630411 I | rafthttp: started streaming with peer 9835b71300fd19d8 (stream Message reader)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:22.630808 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:22.630876 I | embed: name = node-2
2021-08-20 12:58:22.630890 I | embed: data dir = /tmp/cube/node-2/prophet
2021-08-20 12:58:22.630892 I | embed: member dir = /tmp/cube/node-2/prophet/member
2021-08-20 12:58:22.630895 I | embed: heartbeat = 100ms
2021-08-20 12:58:22.630896 I | embed: election = 3000ms
2021-08-20 12:58:22.630898 I | embed: snapshot count = 100000
2021-08-20 12:58:22.630900 I | embed: advertise client URLs = http://127.0.0.1:40002
2021-08-20 12:58:22.635136 I | etcdserver: starting member 9835b71300fd19d8 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:22.635+0800","caller":"raft/raft.go:1550","msg":"9835b71300fd19d8 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:22.635+0800","caller":"raft/raft.go:711","msg":"9835b71300fd19d8 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:22.635+0800","caller":"raft/raft.go:388","msg":"newRaft 9835b71300fd19d8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 12:58:22.636833 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:22.639919 I | rafthttp: started HTTP pipelining with peer 8188d44e5b1c141c
2021-08-20 12:58:22.639939 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:22.639945 I | rafthttp: starting peer 8188d44e5b1c141c...
2021-08-20 12:58:22.639952 I | rafthttp: started HTTP pipelining with peer 8188d44e5b1c141c
2021-08-20 12:58:22.640331 I | rafthttp: started streaming with peer 8188d44e5b1c141c (writer)
2021-08-20 12:58:22.640567 I | rafthttp: started streaming with peer 8188d44e5b1c141c (writer)
2021-08-20 12:58:22.640738 I | rafthttp: started peer 8188d44e5b1c141c
2021-08-20 12:58:22.640756 I | rafthttp: started streaming with peer 8188d44e5b1c141c (stream MsgApp v2 reader)
2021-08-20 12:58:22.640765 I | rafthttp: started streaming with peer 8188d44e5b1c141c (stream Message reader)
2021-08-20 12:58:22.640816 I | rafthttp: added peer 8188d44e5b1c141c
2021-08-20 12:58:22.640835 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 12:58:22.640842 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:22.640945 I | rafthttp: peer 9835b71300fd19d8 became active
2021-08-20 12:58:22.640975 I | rafthttp: established a TCP streaming connection with peer 9835b71300fd19d8 (stream Message writer)
2021-08-20 12:58:22.640979 I | rafthttp: peer 8188d44e5b1c141c became active
2021-08-20 12:58:22.640983 I | rafthttp: established a TCP streaming connection with peer 8188d44e5b1c141c (stream MsgApp v2 reader)
2021-08-20 12:58:22.641067 I | rafthttp: established a TCP streaming connection with peer 8188d44e5b1c141c (stream Message reader)
2021-08-20 12:58:22.641231 I | rafthttp: established a TCP streaming connection with peer 9835b71300fd19d8 (stream MsgApp v2 writer)
2021-08-20 12:58:22.641328 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:22.641468 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:22.641684 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 12:58:22.641697 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 12:58:22.641701 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:22.641703 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:22.641712 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:22.641880 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 12:58:22.641900 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:22.641914 I | rafthttp: peer 9835b71300fd19d8 became active
2021-08-20 12:58:22.641922 I | rafthttp: established a TCP streaming connection with peer 9835b71300fd19d8 (stream Message writer)
2021-08-20 12:58:22.641927 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:22.642007 I | embed: listening for peers on 127.0.0.1:50002
2021-08-20 12:58:22.642144 I | rafthttp: established a TCP streaming connection with peer 9835b71300fd19d8 (stream MsgApp v2 writer)
2021-08-20 12:58:22.692383 I | etcdserver: 9835b71300fd19d8 initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
{"level":"info","ts":"2021-08-20T12:58:22.707+0800","caller":"raft/raft.go:870","msg":"9835b71300fd19d8 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T12:58:22.707+0800","caller":"raft/raft.go:711","msg":"9835b71300fd19d8 became follower at term 2"}
{"level":"info","ts":"2021-08-20T12:58:22.707+0800","caller":"raft/node.go:325","msg":"raft.node: 9835b71300fd19d8 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:22.709+0800","caller":"raft/raft.go:1550","msg":"9835b71300fd19d8 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:22.709589 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:22.709619 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T12:58:22.709+0800","caller":"raft/raft.go:1550","msg":"9835b71300fd19d8 switched to configuration voters=(9333943660726457372 10650127570946328820)"}
2021-08-20 12:58:22.710032 I | etcdserver/membership: added member 8188d44e5b1c141c [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:22.710+0800","caller":"raft/raft.go:1550","msg":"9835b71300fd19d8 switched to configuration voters=(9333943660726457372 10650127570946328820 10967873759779559896)"}
2021-08-20 12:58:22.710241 I | etcdserver/membership: added member 9835b71300fd19d8 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:22.710885 I | etcdserver: published {Name:node-2 ClientURLs:[http://127.0.0.1:40002]} to cluster 6a4ade671189dc2f
2021/08/20 12:58:22.710896 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
2021-08-20 12:58:22.710898 I | embed: ready to serve client requests
2021-08-20 12:58:22.711126 N | embed: serving insecure client requests on 127.0.0.1:40002, this is strongly discouraged!
2021/08/20 12:58:22.711787 [info] prophet: net application started
2021/08/20 12:58:22.711840 [info] prophet: start system time monitor 
2021/08/20 12:58:22.712155 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 12:58:22.712165 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:22.712168 [info] prophet: ********node-2 become to follower now********
2021/08/20 12:58:22.712192 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:22.712199 [info] prophet: client read loop started 
2021/08/20 12:58:22.712246 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:22.712270 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:22.712273 [info] prophet: client started
2021/08/20 12:58:22.712279 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 12:58:22.712281 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:22.712293 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1629435502 deployPath:"not set" 
2021/08/20 12:58:22.712302 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:22.712250 [info] prophet: session 5[127.0.0.1:38770] connected
2021/08/20 12:58:22.712403 [info] [raftstore]: create local store with id 7
2021/08/20 12:58:22.712815 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 12:58:22.714831 [info] prophet: container 7 limit added
2021/08/20 12:58:22.714895 [info] [raftstore]: prophet started
2021/08/20 12:58:22.714933 [info] [transport]: net application started
2021/08/20 12:58:22.714947 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/08/20 12:58:22.714950 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:22.714952 [info] prophet: container 7 heartbeat stream binded
2021/08/20 12:58:22.714953 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:22.714957 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:22.714958 [info] [raftstore]: shards started
2021/08/20 12:58:22.714958 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:22.714960 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:22.714964 [info] [raftstore]: net application started
2021/08/20 12:58:22.714965 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/08/20 12:58:22.714971 [info] [raftstore]: router started
2021/08/20 12:58:22.715027 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:22.715060 [info] [raftstore]: router event loop task started
2021/08/20 12:58:22.715089 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:22.715095 [info] prophet: session 6[127.0.0.1:38772] connected
2021/08/20 12:58:22.715097 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:22.715150 [info] prophet: new watcher 127.0.0.1:38772 added
2021/08/20 12:58:22.716068 [info] [raftstore]: start init event
2021-08-20 12:58:22.731318 I | rafthttp: established a TCP streaming connection with peer 8188d44e5b1c141c (stream Message writer)
2021-08-20 12:58:22.731337 I | rafthttp: established a TCP streaming connection with peer 9835b71300fd19d8 (stream Message reader)
2021-08-20 12:58:22.731350 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 12:58:22.731357 I | rafthttp: established a TCP streaming connection with peer 9835b71300fd19d8 (stream Message reader)
2021-08-20 12:58:22.731372 I | rafthttp: established a TCP streaming connection with peer 9835b71300fd19d8 (stream MsgApp v2 reader)
2021-08-20 12:58:22.731431 I | rafthttp: established a TCP streaming connection with peer 9835b71300fd19d8 (stream MsgApp v2 reader)
2021-08-20 12:58:22.731511 I | rafthttp: established a TCP streaming connection with peer 8188d44e5b1c141c (stream MsgApp v2 writer)
2021-08-20 12:58:22.731560 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021/08/20 12:58:22.740095 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:22.741326 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 12:58:22.7413108 +0800 CST m=+20.856396701, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/08/20 12:58:22.741344 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/08/20 12:58:22.741403 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:22.746618 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:22.746902 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:22.746925 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:22.746+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6) learners=(8)"}
2021/08/20 12:58:22.747009 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:22.826393 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:22.826514 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:22.836847 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:22.926487 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:22.926586 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:22.936816 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:23.016099 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:23.016196 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:23.026778 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:23.116589 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:23.116687 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:23.126045 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:23.216785 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:23.216872 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:23.226306 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:23.326499 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:23.326692 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:23.335900 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:23.416585 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:23.416723 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:23.426125 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:23.526027 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:23.526120 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:23.536581 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:23.616170 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:23.616272 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:23.626090 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:23.726713 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:23.726824 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:23.736001 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:23.816596 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:23.816682 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:23.826092 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:23.916939 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:23.917010 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:23.926416 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:24.016304 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:24.016382 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:24.025914 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:24.116863 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:24.116948 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:24.126389 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:24.226096 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:24.226259 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:24.236509 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:24.316948 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:24.317047 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:24.326483 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:24.416065 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:24.416164 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:24.426743 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:24.526378 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:24.526466 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:24.536917 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:24.616406 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:24.616482 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:24.626296 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:24.726839 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:24.726940 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:24.736104 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:24.816570 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:24.816663 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:24.826013 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:24.916695 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:24.916766 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:24.926161 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:25.026277 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:25.026376 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:25.036814 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:25.126441 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:25.126576 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:25.136825 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:25.226037 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:25.226124 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:25.236408 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:25.316626 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:25.316729 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:25.326170 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:25.416873 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:25.416973 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:25.426401 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:25.516599 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:25.516677 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:25.526519 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:25.616657 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:25.616752 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:25.626447 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:25.726282 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:25.726392 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:25.736686 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:25.826650 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:25.826760 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:25.835928 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:25.916939 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:25.917053 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:25.926489 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:26.016742 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:26.016827 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:26.026301 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:26.116080 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:26.116200 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:26.126779 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:26.216570 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:26.216742 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:26.226053 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:26.316645 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:26.316746 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:26.326215 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:26.416761 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:26.416844 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:26.426367 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:26.526014 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:26.526143 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:26.536667 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:26.616901 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:26.616956 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:26.626844 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:26.716137 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:26.716310 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:26.725944 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:26.816639 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:26.816700 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:26.826108 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:26.926521 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:26.926611 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:26.936850 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:27.016557 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:27.016615 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.025966 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:27.116877 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:27.117002 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.126524 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:27.226011 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:27.226107 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.236431 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:27.326234 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:27.326341 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.336673 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:27.426447 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:27.426541 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.436778 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:27.516406 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:27.516464 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.526373 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:27.616293 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:27.616375 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.626145 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/08/20 12:58:27.726294 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 12:58:27.726388 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.727551 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:27.727569 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:27.736+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6) learners=(8)"}
2021/08/20 12:58:27.736927 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 27 41 51 121 218 252 70 98 170 97 48 242 193 200 95 246 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.736939 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:27.736958 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:27.736997 [error] prophet: session 2[127.0.0.1:38674] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38674: use of closed network connection
2021/08/20 12:58:27.737010 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:38672->127.0.0.1:30000: use of closed network connection
2021/08/20 12:58:27.737014 [error] prophet: client read loop stopped
2021/08/20 12:58:27.737019 [error] prophet: session 4[127.0.0.1:38706] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38706: use of closed network connection
2021/08/20 12:58:27.737034 [error] prophet: session 6[127.0.0.1:38772] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38772: use of closed network connection
2021/08/20 12:58:27.737047 [error] prophet: session 5[127.0.0.1:38770] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38770: use of closed network connection
2021/08/20 12:58:27.737061 [error] prophet: session 3[127.0.0.1:38704] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38704: use of closed network connection
2021/08/20 12:58:27.737063 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:27.737066 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:27.737075 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/08/20 12:58:27.737080 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 12:58:27.737084 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:27.737085 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:27.737092 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:27.737101 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:27.737102 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 12:58:27.737110 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:27.737124 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:27.737178 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:27.737214 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:27.738332 [info] [transport]: connected to store 7
2021/08/20 12:58:27.738371 [info] [transport]: session 1[127.0.0.1:41074] connected
2021/08/20 12:58:27.738412 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 12:58:27.738430 [info] [raftstore]: shard 2 replicate peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.738446 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:27.738450 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:27.738451 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:388","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:27.738519 [info] [raftstore]: shard 2 added with peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:27.738529 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:27.738573 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:870","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 6"}
2021/08/20 12:58:27.738680 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 12:58:27.738692 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:27.738700 [info] prophet: patrol resources has been stopped 
2021/08/20 12:58:27.738707 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 12:58:27.738719 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 12:58:27.738733 [info] prophet: coordinator is stopping
2021/08/20 12:58:27.738735 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 12:58:27.738750 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/08/20 12:58:27.738731 [info] prophet: drive push operator has been stopped 
2021/08/20 12:58:27.738760 [info] prophet: coordinator has been stopped
2021/08/20 12:58:27.738763 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/08/20 12:58:27.738766 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021-08-20 12:58:27.738777 I | etcdserver: 93ccda9956d988f4 starts leadership transfer from 93ccda9956d988f4 to 8188d44e5b1c141c
2021/08/20 12:58:27.738781 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:1278","msg":"93ccda9956d988f4 [term 2] starts to transfer leadership to 8188d44e5b1c141c"}
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:1284","msg":"93ccda9956d988f4 sends MsgTimeoutNow to 8188d44e5b1c141c immediately as 8188d44e5b1c141c already has up-to-date log"}
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:1372","msg":"8188d44e5b1c141c [term 2] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:724","msg":"8188d44e5b1c141c became candidate at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:835","msg":"8188d44e5b1c141c received MsgVoteResp from 8188d44e5b1c141c at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:822","msg":"8188d44e5b1c141c [logterm: 2, index: 28] sent MsgVote request to 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/raft.go:822","msg":"8188d44e5b1c141c [logterm: 2, index: 28] sent MsgVote request to 9835b71300fd19d8 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.738+0800","caller":"raft/node.go:331","msg":"raft.node: 8188d44e5b1c141c lost leader 93ccda9956d988f4 at term 3"}
2021/08/20 12:58:27.739116 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/08/20 12:58:27.739131 [info] prophet: [prophet-leader/node-2]/campaign: start
2021/08/20 12:58:27.739162 [info] [transport]: session 2[127.0.0.1:36372] connected
2021/08/20 12:58:27.739120 [info] [transport]: connected to store 1
2021/08/20 12:58:27.739293 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T12:58:27.739+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:14:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:27.739358 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T12:58:27.739+0800","caller":"raft/raft.go:870","msg":"9835b71300fd19d8 [term: 2] received a MsgVote message with higher term from 8188d44e5b1c141c [term: 3]"}
{"level":"info","ts":"2021-08-20T12:58:27.739+0800","caller":"raft/raft.go:711","msg":"9835b71300fd19d8 became follower at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.739+0800","caller":"raft/raft.go:971","msg":"9835b71300fd19d8 [logterm: 2, index: 28, vote: 0] cast MsgVote for 8188d44e5b1c141c [logterm: 2, index: 28] at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.739+0800","caller":"raft/node.go:331","msg":"raft.node: 9835b71300fd19d8 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.739+0800","caller":"raft/raft.go:870","msg":"93ccda9956d988f4 [term: 2] received a MsgVote message with higher term from 8188d44e5b1c141c [term: 3]"}
{"level":"info","ts":"2021-08-20T12:58:27.739+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.739+0800","caller":"raft/raft.go:971","msg":"93ccda9956d988f4 [logterm: 2, index: 28, vote: 0] cast MsgVote for 8188d44e5b1c141c [logterm: 2, index: 28] at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.739+0800","caller":"raft/node.go:331","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 3"}
2021/08/20 12:58:27.739730 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<13> 
{"level":"info","ts":"2021-08-20T12:58:27.740+0800","caller":"raft/raft.go:835","msg":"8188d44e5b1c141c received MsgVoteResp from 9835b71300fd19d8 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.740+0800","caller":"raft/raft.go:1319","msg":"8188d44e5b1c141c has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:58:27.740+0800","caller":"raft/raft.go:776","msg":"8188d44e5b1c141c became leader at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.740+0800","caller":"raft/node.go:325","msg":"raft.node: 8188d44e5b1c141c elected leader 8188d44e5b1c141c at term 3"}
{"level":"info","ts":"2021-08-20T12:58:27.740+0800","caller":"raft/node.go:325","msg":"raft.node: 9835b71300fd19d8 elected leader 8188d44e5b1c141c at term 3"}
{"level":"warn","ts":"2021-08-20T12:58:27.740+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-51e359ee-c63c-4d8f-b29d-b2cb06626cfe/127.0.0.1:40001","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-08-20T12:58:27.740+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 8188d44e5b1c141c at term 3"}
2021/08/20 12:58:27.768300 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/08/20 12:58:27.768313 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/08/20 12:58:27.769546 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/08/20 12:58:27.770364 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/08/20 12:58:27.770379 [info] prophet: ********node-1 become to leader now********
2021/08/20 12:58:27.772056 [info] prophet: load 3 containers, cost 1.5947ms
2021/08/20 12:58:27.772341 [info] prophet: load 1 resources, cost 271.7µs
2021/08/20 12:58:27.772930 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 12:58:27.772934 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 12:58:27.773232 [info] prophet: load 0 jobs
2021/08/20 12:58:27.791339 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T12:58:27.791+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:14:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:27.791434 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:4 version:1 > term=<6> index=<13>
2021/08/20 12:58:27.791596 [info] [transport]: session 2[127.0.0.1:41082] connected
2021/08/20 12:58:27.791598 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-08-20T12:58:27.791+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 13, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:27.791+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-08-20T12:58:27.791+0800","caller":"raft/raft.go:1503","msg":"8 [commit: 13, lastindex: 13, lastterm: 6] restored snapshot [index: 13, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:27.791+0800","caller":"raft/raft.go:1420","msg":"8 [commit: 13] restored snapshot [index: 13, term: 6]"}
2021/08/20 12:58:27.791814 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/08/20 12:58:27.792107 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:4 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:8 containerID:7 role:Learner > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:13 >,size=<139>
2021/08/20 12:58:27.792145 [info] [raftstore]: shard 2 send snap complete
2021/08/20 12:58:27.792157 [info] [transport]: shard 2 pending snap sent succ, size=<139>, epoch=<confVer:4 version:1 > term=<6> index=<13>
2021/08/20 12:58:27.816258 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/08/20 12:58:27.839317 [info] prophet: [prophet-leader/node-0]/loop: exit
2021-08-20 12:58:27.839335 I | etcdserver: 93ccda9956d988f4 finished leadership transfer from 93ccda9956d988f4 to 8188d44e5b1c141c (took 100.5569ms)
2021-08-20 12:58:27.839373 I | rafthttp: stopping peer 8188d44e5b1c141c...
2021-08-20 12:58:27.839529 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:27.839784 I | rafthttp: closed the TCP streaming connection with peer 8188d44e5b1c141c (stream MsgApp v2 writer)
2021-08-20 12:58:27.839799 I | rafthttp: stopped streaming with peer 8188d44e5b1c141c (writer)
2021-08-20 12:58:27.839905 I | rafthttp: closed the TCP streaming connection with peer 8188d44e5b1c141c (stream Message writer)
2021-08-20 12:58:27.839917 I | rafthttp: stopped streaming with peer 8188d44e5b1c141c (writer)
2021-08-20 12:58:27.839925 I | rafthttp: stopped HTTP pipelining with peer 8188d44e5b1c141c
2021-08-20 12:58:27.839961 W | rafthttp: lost the TCP streaming connection with peer 8188d44e5b1c141c (stream MsgApp v2 reader)
2021-08-20 12:58:27.839974 E | rafthttp: failed to read 8188d44e5b1c141c on stream MsgApp v2 (context canceled)
2021-08-20 12:58:27.839976 I | rafthttp: peer 8188d44e5b1c141c became inactive (message send to peer failed)
2021-08-20 12:58:27.839978 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:27.839984 I | rafthttp: stopped streaming with peer 8188d44e5b1c141c (stream MsgApp v2 reader)
2021-08-20 12:58:27.840001 W | rafthttp: lost the TCP streaming connection with peer 8188d44e5b1c141c (stream Message reader)
2021-08-20 12:58:27.840026 I | rafthttp: stopped streaming with peer 8188d44e5b1c141c (stream Message reader)
2021-08-20 12:58:27.840030 I | rafthttp: stopped peer 8188d44e5b1c141c
2021-08-20 12:58:27.840031 I | rafthttp: stopping peer 9835b71300fd19d8...
2021-08-20 12:58:27.840162 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:27.840373 I | rafthttp: closed the TCP streaming connection with peer 9835b71300fd19d8 (stream MsgApp v2 writer)
2021-08-20 12:58:27.840385 I | rafthttp: stopped streaming with peer 9835b71300fd19d8 (writer)
2021-08-20 12:58:27.840556 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:27.840687 I | rafthttp: closed the TCP streaming connection with peer 9835b71300fd19d8 (stream Message writer)
2021-08-20 12:58:27.840697 I | rafthttp: stopped streaming with peer 9835b71300fd19d8 (writer)
2021-08-20 12:58:27.840704 I | rafthttp: stopped HTTP pipelining with peer 9835b71300fd19d8
2021-08-20 12:58:27.840731 W | rafthttp: lost the TCP streaming connection with peer 9835b71300fd19d8 (stream MsgApp v2 reader)
2021-08-20 12:58:27.840741 E | rafthttp: failed to read 9835b71300fd19d8 on stream MsgApp v2 (context canceled)
2021-08-20 12:58:27.840742 I | rafthttp: peer 9835b71300fd19d8 became inactive (message send to peer failed)
2021-08-20 12:58:27.840747 I | rafthttp: stopped streaming with peer 9835b71300fd19d8 (stream MsgApp v2 reader)
2021-08-20 12:58:27.840771 W | rafthttp: lost the TCP streaming connection with peer 9835b71300fd19d8 (stream Message reader)
2021-08-20 12:58:27.840782 I | rafthttp: stopped streaming with peer 9835b71300fd19d8 (stream Message reader)
2021-08-20 12:58:27.840793 I | rafthttp: stopped peer 9835b71300fd19d8
2021-08-20 12:58:27.840899 E | rafthttp: failed to find member 8188d44e5b1c141c in cluster 6a4ade671189dc2f
2021-08-20 12:58:27.840937 E | rafthttp: failed to find member 8188d44e5b1c141c in cluster 6a4ade671189dc2f
2021-08-20 12:58:27.840973 E | rafthttp: failed to find member 9835b71300fd19d8 in cluster 6a4ade671189dc2f
2021-08-20 12:58:27.841003 E | rafthttp: failed to find member 9835b71300fd19d8 in cluster 6a4ade671189dc2f
2021-08-20 12:58:27.841011 E | rafthttp: failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node 8188d44e5b1c141c)
2021-08-20 12:58:27.841015 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021-08-20 12:58:27.841045 E | rafthttp: failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node 9835b71300fd19d8)
2021-08-20 12:58:27.841060 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021/08/20 12:58:27.846301 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:27.846329 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:58:27.846334 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:27.846336 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:27.846339 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:27.846370 [info] [transport]: transfer stopped
2021/08/20 12:58:27.846408 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.846423 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.846426 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.846429 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.846431 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.846433 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.846436 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.846437 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.846439 [info] [transport]: send raft worker stopped
2021/08/20 12:58:27.846454 [error] [transport]: session 2[127.0.0.1:36372] read failed with read tcp 127.0.0.1:10000->127.0.0.1:36372: use of closed network connection
2021/08/20 12:58:27.846467 [error] [transport]: session 1[127.0.0.1:36280] read failed with read tcp 127.0.0.1:10000->127.0.0.1:36280: use of closed network connection
2021/08/20 12:58:27.847693 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/08/20 12:58:27.847750 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
2021/08/20 12:58:27.847760 [info] prophet: coordinator stops running 
2021-08-20 12:58:27.847766 I | etcdserver: 8188d44e5b1c141c starts leadership transfer from 8188d44e5b1c141c to 9835b71300fd19d8
2021/08/20 12:58:27.847774 [info] prophet: coordinator is stopping
2021/08/20 12:58:27.847776 [info] prophet: coordinator has been stopped
2021/08/20 12:58:27.847755 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/08/20 12:58:27.847755 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
{"level":"info","ts":"2021-08-20T12:58:27.847+0800","caller":"raft/raft.go:1278","msg":"8188d44e5b1c141c [term 3] starts to transfer leadership to 9835b71300fd19d8"}
{"level":"info","ts":"2021-08-20T12:58:27.847+0800","caller":"raft/raft.go:1284","msg":"8188d44e5b1c141c sends MsgTimeoutNow to 9835b71300fd19d8 immediately as 9835b71300fd19d8 already has up-to-date log"}
{"level":"info","ts":"2021-08-20T12:58:27.847+0800","caller":"raft/raft.go:1372","msg":"9835b71300fd19d8 [term 3] received MsgTimeoutNow from 8188d44e5b1c141c and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T12:58:27.847+0800","caller":"raft/raft.go:724","msg":"9835b71300fd19d8 became candidate at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.847+0800","caller":"raft/raft.go:835","msg":"9835b71300fd19d8 received MsgVoteResp from 9835b71300fd19d8 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.847+0800","caller":"raft/raft.go:822","msg":"9835b71300fd19d8 [logterm: 3, index: 32] sent MsgVote request to 8188d44e5b1c141c at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.847+0800","caller":"raft/raft.go:822","msg":"9835b71300fd19d8 [logterm: 3, index: 32] sent MsgVote request to 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.847+0800","caller":"raft/node.go:331","msg":"raft.node: 9835b71300fd19d8 lost leader 8188d44e5b1c141c at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.848+0800","caller":"raft/raft.go:870","msg":"8188d44e5b1c141c [term: 3] received a MsgVote message with higher term from 9835b71300fd19d8 [term: 4]"}
{"level":"info","ts":"2021-08-20T12:58:27.848+0800","caller":"raft/raft.go:711","msg":"8188d44e5b1c141c became follower at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.848+0800","caller":"raft/raft.go:971","msg":"8188d44e5b1c141c [logterm: 3, index: 32, vote: 0] cast MsgVote for 9835b71300fd19d8 [logterm: 3, index: 32] at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.848+0800","caller":"raft/node.go:331","msg":"raft.node: 8188d44e5b1c141c lost leader 8188d44e5b1c141c at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.849+0800","caller":"raft/raft.go:835","msg":"9835b71300fd19d8 received MsgVoteResp from 8188d44e5b1c141c at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.849+0800","caller":"raft/raft.go:1319","msg":"9835b71300fd19d8 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:58:27.849+0800","caller":"raft/raft.go:776","msg":"9835b71300fd19d8 became leader at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.849+0800","caller":"raft/node.go:325","msg":"raft.node: 9835b71300fd19d8 elected leader 9835b71300fd19d8 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:27.849+0800","caller":"raft/node.go:325","msg":"raft.node: 8188d44e5b1c141c elected leader 9835b71300fd19d8 at term 4"}
2021/08/20 12:58:27.891087 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 12:58:27.938029 [error] prophet: reset leader connection failed with client is closed
2021/08/20 12:58:27.938046 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:27.938066 [error] prophet: client read loop stopped
2021/08/20 12:58:27.938117 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021-08-20 12:58:27.948832 I | etcdserver: 8188d44e5b1c141c finished leadership transfer from 8188d44e5b1c141c to 9835b71300fd19d8 (took 101.0638ms)
2021/08/20 12:58:27.948844 [info] prophet: [prophet-leader/node-1]/loop: exit
2021-08-20 12:58:27.948888 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:27.948902 I | rafthttp: stopping peer 9835b71300fd19d8...
2021-08-20 12:58:27.949033 W | rafthttp: lost the TCP streaming connection with peer 8188d44e5b1c141c (stream MsgApp v2 reader)
2021-08-20 12:58:27.949378 I | rafthttp: closed the TCP streaming connection with peer 9835b71300fd19d8 (stream MsgApp v2 writer)
2021-08-20 12:58:27.949393 I | rafthttp: stopped streaming with peer 9835b71300fd19d8 (writer)
2021-08-20 12:58:27.949543 W | rafthttp: lost the TCP streaming connection with peer 8188d44e5b1c141c (stream Message reader)
2021-08-20 12:58:27.949754 I | rafthttp: closed the TCP streaming connection with peer 9835b71300fd19d8 (stream Message writer)
2021-08-20 12:58:27.949771 I | rafthttp: stopped streaming with peer 9835b71300fd19d8 (writer)
2021-08-20 12:58:27.949780 I | rafthttp: stopped HTTP pipelining with peer 9835b71300fd19d8
2021-08-20 12:58:27.949816 W | rafthttp: lost the TCP streaming connection with peer 9835b71300fd19d8 (stream MsgApp v2 reader)
2021-08-20 12:58:27.949827 E | rafthttp: failed to read 9835b71300fd19d8 on stream MsgApp v2 (context canceled)
2021-08-20 12:58:27.949829 I | rafthttp: peer 9835b71300fd19d8 became inactive (message send to peer failed)
2021-08-20 12:58:27.949836 I | rafthttp: stopped streaming with peer 9835b71300fd19d8 (stream MsgApp v2 reader)
2021-08-20 12:58:27.949877 W | rafthttp: lost the TCP streaming connection with peer 9835b71300fd19d8 (stream Message reader)
2021-08-20 12:58:27.949890 I | rafthttp: stopped streaming with peer 9835b71300fd19d8 (stream Message reader)
2021-08-20 12:58:27.949900 I | rafthttp: stopped peer 9835b71300fd19d8
2021-08-20 12:58:27.949903 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 12:58:27.949992 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:58:27.950003 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:27.950346 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 12:58:27.950358 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:27.950381 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:27.950401 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:27.950405 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:27.950408 I | rafthttp: stopped peer 93ccda9956d988f4
2021-08-20 12:58:27.950484 E | rafthttp: failed to find member 9835b71300fd19d8 in cluster 6a4ade671189dc2f
2021-08-20 12:58:27.950534 E | rafthttp: failed to find member 9835b71300fd19d8 in cluster 6a4ade671189dc2f
2021-08-20 12:58:27.950565 E | rafthttp: failed to dial 8188d44e5b1c141c on stream MsgApp v2 (peer 8188d44e5b1c141c failed to find local node 9835b71300fd19d8)
2021-08-20 12:58:27.950579 I | rafthttp: peer 8188d44e5b1c141c became inactive (message send to peer failed)
2021/08/20 12:58:27.956875 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:27.956907 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:58:27.956909 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:27.956908 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:27.956913 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:27.956941 [info] [transport]: transfer stopped
2021/08/20 12:58:27.956980 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.957000 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.957006 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.957009 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.957012 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.957015 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.957017 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.957020 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:27.957022 [info] [transport]: send raft worker stopped
2021/08/20 12:58:27.957026 [error] [transport]: session 2[127.0.0.1:58598] read failed with read tcp 127.0.0.1:10001->127.0.0.1:58598: use of closed network connection
2021/08/20 12:58:27.957028 [error] [transport]: session 1[127.0.0.1:58594] read failed with read tcp 127.0.0.1:10001->127.0.0.1:58594: use of closed network connection
2021/08/20 12:58:27.991266 [info] [raftstore]: shard 2 raft tick stopped
2021-08-20 12:58:28.135950 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021/08/20 12:58:28.138739 [error] prophet: reset leader connection failed with client is closed
2021/08/20 12:58:28.138775 [error] prophet: client read loop stopped
2021-08-20 12:58:28.235883 W | rafthttp: failed to process raft message (raft: stopped)
2021-08-20 12:58:28.336178 W | rafthttp: lost the TCP streaming connection with peer 8188d44e5b1c141c (stream Message writer)
2021/08/20 12:58:28.391722 [error] [transport]: session 2[127.0.0.1:41082] read failed with read tcp 127.0.0.1:10002->127.0.0.1:41082: i/o timeout
2021/08/20 12:58:28.392861 [error] [transport]: session 1[127.0.0.1:41074] read failed with read tcp 127.0.0.1:10002->127.0.0.1:41074: i/o timeout
2021-08-20 12:58:28.436041 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 12:58:28.715169 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-08-20T12:58:28.957+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-82cda6d4-2d1d-4a7e-8c8e-4f8c00c4d371/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 12:58:28.957128 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"warn","ts":"2021-08-20T12:58:28.957+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-82cda6d4-2d1d-4a7e-8c8e-4f8c00c4d371/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/08/20 12:58:28.957196 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
2021-08-20 12:58:28.957215 W | etcdserver: 9835b71300fd19d8 failed to transfer leadership (etcdserver: unhealthy cluster)
WARNING: 2021/08/20 12:58:28 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
WARNING: 2021/08/20 12:58:28 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
2021-08-20 12:58:28.957290 I | rafthttp: stopped HTTP pipelining with peer 8188d44e5b1c141c
2021-08-20 12:58:28.957336 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:28.957341 I | rafthttp: stopping peer 8188d44e5b1c141c...
2021-08-20 12:58:28.957513 I | rafthttp: closed the TCP streaming connection with peer 8188d44e5b1c141c (stream MsgApp v2 writer)
2021-08-20 12:58:28.957527 I | rafthttp: stopped streaming with peer 8188d44e5b1c141c (writer)
2021-08-20 12:58:28.957542 I | rafthttp: stopped streaming with peer 8188d44e5b1c141c (writer)
2021-08-20 12:58:28.957561 I | rafthttp: stopped HTTP pipelining with peer 8188d44e5b1c141c
2021-08-20 12:58:28.957588 I | rafthttp: stopped streaming with peer 8188d44e5b1c141c (stream MsgApp v2 reader)
2021-08-20 12:58:28.957602 I | rafthttp: stopped streaming with peer 8188d44e5b1c141c (stream Message reader)
2021-08-20 12:58:28.957614 I | rafthttp: stopped peer 8188d44e5b1c141c
2021-08-20 12:58:28.957617 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 12:58:28.958005 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:58:28.958020 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:28.958033 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:28.958049 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:28.958068 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:28.958088 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:28.958097 I | rafthttp: stopped peer 93ccda9956d988f4
2021/08/20 12:58:28.965539 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:28.965565 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:58:28.965571 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:28.965573 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:28.965566 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:28.965615 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:28.965632 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:28.965632 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:28.965636 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:28.965616 [info] [transport]: transfer stopped
2021/08/20 12:58:28.965638 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:28.965640 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:28.965642 [info] [transport]: send raft worker stopped
2021/08/20 12:58:28.965627 [info] [transport]: send snapshot worker stopped
--- PASS: TestIssue90 (11.86s)
2021/08/20 12:58:28.965630 [info] [transport]: send snapshot worker stopped
=== RUN   TestIssue133
2021/08/20 12:58:28.966390 [info] prophet: prophet logger set
2021/08/20 12:58:28.966809 [info] [raftstore]: start scan gc snap files
2021/08/20 12:58:28.967015 [info] [raftstore]: start scan gc snap files
2021/08/20 12:58:28.967186 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:28.967196 [info] [raftstore]: begin to start prophet
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:28.967232 I | embed: pprof is enabled under /debug/pprof
2021/08/20 12:58:28.967251 [info] [raftstore]: start scan gc snap files
2021-08-20 12:58:28.967265 I | embed: name = node-0
2021-08-20 12:58:28.967275 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 12:58:28.967277 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 12:58:28.967278 I | embed: heartbeat = 100ms
2021-08-20 12:58:28.967279 I | embed: election = 3000ms
2021-08-20 12:58:28.967281 I | embed: snapshot count = 100000
2021-08-20 12:58:28.967283 I | embed: advertise client URLs = http://127.0.0.1:40000
2021-08-20 12:58:28.971724 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:28.971+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:28.971+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:28.971+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T12:58:28.971+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T12:58:28.971+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:28.973512 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:28.976396 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:28.976507 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
{"level":"info","ts":"2021-08-20T12:58:28.976+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:28.976658 I | embed: listening for peers on 127.0.0.1:50000
2021-08-20 12:58:28.976680 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:31.072+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T12:58:31.072+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T12:58:31.072+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:31.072+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T12:58:31.072+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 12:58:31.072982 I | etcdserver: setting up the initial cluster version to 3.4
2021-08-20 12:58:31.073671 N | etcdserver/membership: set the initial cluster version to 3.4
2021-08-20 12:58:31.073724 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:31.073728 I | embed: ready to serve client requests
2021/08/20 12:58:31.073763 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 12:58:31.074022 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021/08/20 12:58:31.074943 [info] prophet: net application started
2021/08/20 12:58:31.074961 [info] prophet: start system time monitor 
2021/08/20 12:58:31.075389 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 12:58:31.075596 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 12:58:31.075605 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 12:58:31.075862 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 12:58:31.076366 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 12:58:31.076377 [info] prophet: ********node-0 become to leader now********
2021/08/20 12:58:31.077036 [info] prophet: load 0 containers, cost 523.2µs
2021/08/20 12:58:31.077223 [info] prophet: load 0 resources, cost 176.7µs
2021/08/20 12:58:31.077878 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:31.077889 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 12:58:31.077892 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 12:58:31.077893 [info] prophet: coordinator starts to run schedulers 
2021/08/20 12:58:31.077896 [info] prophet: client read loop started 
2021/08/20 12:58:31.077900 [info] prophet: client started
2021/08/20 12:58:31.077905 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 12:58:31.077907 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:31.077924 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435511 deployPath:"not set" 
2021/08/20 12:58:31.077930 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:31.077938 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:31.077942 [info] prophet: session 1[127.0.0.1:38948] connected
2021/08/20 12:58:31.077944 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:31.078319 [info] prophet: load 0 jobs
2021/08/20 12:58:31.078620 [info] [raftstore]: create local store with id 1
2021/08/20 12:58:31.079133 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 12:58:31.079144 [info] prophet: coordinator starts patrol resources 
2021/08/20 12:58:31.079164 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 12:58:31.079138 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 12:58:31.079572 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 12:58:31.079589 [info] [raftstore]: create init shard id:4 start:"b" end:"c" epoch:<confVer:1 version:1 > peers:<id:5 containerID:1 > 
2021/08/20 12:58:31.079595 [info] [raftstore]: create init shard id:6 start:"c" end:"d" epoch:<confVer:1 version:1 > peers:<id:7 containerID:1 > 
2021/08/20 12:58:31.080797 [info] prophet: container 1 limit added
2021/08/20 12:58:31.080858 [info] [raftstore]: prophet started
2021/08/20 12:58:31.080887 [info] prophet: container 1 heartbeat stream binded
2021/08/20 12:58:31.080889 [info] [transport]: net application started
2021/08/20 12:58:31.080897 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 12:58:31.080900 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:31.080920 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.080926 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:31.080929 [info] [raftstore]: shard 2 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:58:31.080+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
2021/08/20 12:58:31.080976 [info] [raftstore]: raft worker 0/0 start
{"level":"info","ts":"2021-08-20T12:58:31.080+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:31.080+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:31.080993 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:31.080+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:31.080+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 12:58:31.081054 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 12:58:31.081076 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 12:58:31.081088 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:31.081103 [info] [raftstore]: shard 4 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.081106 [info] [raftstore]: shard 4 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:31.081107 [info] [raftstore]: shard 4 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:1550","msg":"5 switched to configuration voters=(5)"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:711","msg":"5 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:388","msg":"newRaft 5 [peers: [5], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:31.081130 [info] [raftstore]: shard 4 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:934","msg":"5 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:724","msg":"5 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:835","msg":"5 received MsgVoteResp from 5 at term 6"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:776","msg":"5 became leader at term 6"}
2021/08/20 12:58:31.081149 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 5 add registration job by startShards
2021/08/20 12:58:31.081155 [info] [raftstore]: shard 4 added with peer {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:31.081161 [info] [raftstore]: shard 6 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.081163 [info] [raftstore]: shard 6 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:31.081164 [info] [raftstore]: shard 6 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:1550","msg":"7 switched to configuration voters=(7)"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:711","msg":"7 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:388","msg":"newRaft 7 [peers: [7], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:31.081179 [info] [raftstore]: shard 6 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:934","msg":"7 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:724","msg":"7 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:835","msg":"7 received MsgVoteResp from 7 at term 6"}
{"level":"info","ts":"2021-08-20T12:58:31.081+0800","caller":"raft/raft.go:776","msg":"7 became leader at term 6"}
2021/08/20 12:58:31.081199 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 7 add registration job by startShards
2021/08/20 12:58:31.081214 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 5 add registration job by startShards, completed
2021/08/20 12:58:31.081220 [info] [raftstore]: shard 6 added with peer {ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:31.081222 [info] [raftstore]: starts with 3 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:31.081223 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:31.081224 [info] [raftstore]: shards started
2021/08/20 12:58:31.081225 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:31.081225 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 7 add registration job by startShards, completed
2021/08/20 12:58:31.081244 [info] [raftstore]: net application started
2021/08/20 12:58:31.081254 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 12:58:31.081255 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 12:58:31.081274 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:31.081295 [info] [raftstore]: shard 4 ********become leader now********
2021/08/20 12:58:31.081327 [info] [raftstore]: shard 6 ********become leader now********
2021/08/20 12:58:31.081333 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:31.081351 [info] [raftstore]: router event loop task started
2021/08/20 12:58:31.081353 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:31.081351 [info] prophet: session 2[127.0.0.1:38950] connected
2021/08/20 12:58:31.081365 [info] [raftstore]: router started
2021/08/20 12:58:31.081388 [info] prophet: new watcher 127.0.0.1:38950 added
2021/08/20 12:58:31.081460 [info] [raftstore]: start init event
2021/08/20 12:58:31.085792 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:31.085801 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-08-20T12:58:31.086+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 17318351997214688188)"}
2021-08-20 12:58:31.086487 I | etcdserver/membership: added member f0572562892883bc [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 12:58:31.086501 I | rafthttp: starting peer f0572562892883bc...
2021-08-20 12:58:31.086519 I | rafthttp: started HTTP pipelining with peer f0572562892883bc
2021-08-20 12:58:31.086684 I | rafthttp: started streaming with peer f0572562892883bc (writer)
2021-08-20 12:58:31.086758 I | rafthttp: started streaming with peer f0572562892883bc (writer)
2021-08-20 12:58:31.086798 I | rafthttp: started peer f0572562892883bc
2021-08-20 12:58:31.086815 I | rafthttp: started streaming with peer f0572562892883bc (stream MsgApp v2 reader)
2021-08-20 12:58:31.086825 I | rafthttp: started streaming with peer f0572562892883bc (stream Message reader)
2021-08-20 12:58:31.086876 I | rafthttp: added peer f0572562892883bc
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:31.087143 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:31.087168 I | embed: name = node-1
2021-08-20 12:58:31.087180 I | embed: data dir = /tmp/cube/node-1/prophet
2021-08-20 12:58:31.087182 I | embed: member dir = /tmp/cube/node-1/prophet/member
2021-08-20 12:58:31.087183 I | embed: heartbeat = 100ms
2021-08-20 12:58:31.087185 I | embed: election = 3000ms
2021-08-20 12:58:31.087186 I | embed: snapshot count = 100000
2021-08-20 12:58:31.087188 I | embed: advertise client URLs = http://127.0.0.1:40001
2021-08-20 12:58:31.091513 I | etcdserver: starting member f0572562892883bc in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:31.091+0800","caller":"raft/raft.go:1550","msg":"f0572562892883bc switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:31.091+0800","caller":"raft/raft.go:711","msg":"f0572562892883bc became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:31.091+0800","caller":"raft/raft.go:388","msg":"newRaft f0572562892883bc [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 12:58:31.093245 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:31.097402 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:31.097419 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 12:58:31.097429 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:31.097646 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:31.097780 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:31.097956 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 12:58:31.097968 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 12:58:31.097972 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:31.097979 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:31.098049 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:31.098176 I | rafthttp: peer f0572562892883bc became active
2021-08-20 12:58:31.098196 I | rafthttp: established a TCP streaming connection with peer f0572562892883bc (stream Message writer)
2021-08-20 12:58:31.098198 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 12:58:31.098221 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:31.098234 I | rafthttp: established a TCP streaming connection with peer f0572562892883bc (stream MsgApp v2 writer)
2021-08-20 12:58:31.098284 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:31.098304 I | embed: listening for peers on 127.0.0.1:50001
{"level":"info","ts":"2021-08-20T12:58:31.172+0800","caller":"raft/raft.go:870","msg":"f0572562892883bc [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T12:58:31.172+0800","caller":"raft/raft.go:711","msg":"f0572562892883bc became follower at term 2"}
{"level":"info","ts":"2021-08-20T12:58:31.172+0800","caller":"raft/node.go:325","msg":"raft.node: f0572562892883bc elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:31.174+0800","caller":"raft/raft.go:1550","msg":"f0572562892883bc switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:31.174616 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:31.174652 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T12:58:31.175+0800","caller":"raft/raft.go:1550","msg":"f0572562892883bc switched to configuration voters=(10650127570946328820 17318351997214688188)"}
2021-08-20 12:58:31.175051 I | etcdserver/membership: added member f0572562892883bc [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 12:58:31.175890 I | etcdserver: published {Name:node-1 ClientURLs:[http://127.0.0.1:40001]} to cluster 6a4ade671189dc2f
2021/08/20 12:58:31.175902 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
2021-08-20 12:58:31.175912 I | embed: ready to serve client requests
2021-08-20 12:58:31.176109 N | embed: serving insecure client requests on 127.0.0.1:40001, this is strongly discouraged!
2021/08/20 12:58:31.176843 [info] prophet: net application started
2021/08/20 12:58:31.176886 [info] prophet: start system time monitor 
2021/08/20 12:58:31.177266 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 12:58:31.177279 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:31.177282 [info] prophet: ********node-1 become to follower now********
2021/08/20 12:58:31.177314 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:31.177326 [info] prophet: client read loop started 
2021/08/20 12:58:31.177330 [info] prophet: client started
2021/08/20 12:58:31.177332 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 12:58:31.177334 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:31.177346 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1629435511 deployPath:"not set" 
2021/08/20 12:58:31.177355 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:31.177371 [info] prophet: session 3[127.0.0.1:38980] connected
2021/08/20 12:58:31.177377 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:31.177390 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:31.177479 [info] [raftstore]: create local store with id 9
2021/08/20 12:58:31.177905 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 12:58:31.180269 [info] prophet: container 9 limit added
2021/08/20 12:58:31.180328 [info] [raftstore]: prophet started
2021/08/20 12:58:31.180348 [info] prophet: container 9 heartbeat stream binded
2021/08/20 12:58:31.180377 [info] [transport]: net application started
2021/08/20 12:58:31.180386 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/08/20 12:58:31.180389 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:31.180391 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:31.180392 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:31.180393 [info] [raftstore]: shards started
2021/08/20 12:58:31.180394 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:31.180398 [info] [raftstore]: net application started
2021/08/20 12:58:31.180399 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/08/20 12:58:31.180406 [info] [raftstore]: router started
2021/08/20 12:58:31.180445 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:31.180462 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:31.180509 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:31.180518 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:31.180532 [info] prophet: session 4[127.0.0.1:38982] connected
2021/08/20 12:58:31.180541 [info] prophet: new watcher 127.0.0.1:38982 added
2021/08/20 12:58:31.180542 [info] [raftstore]: router event loop task started
2021/08/20 12:58:31.180626 [info] [raftstore]: start init event
2021/08/20 12:58:31.181507 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:31.181516 [info] [raftstore]: begin to start prophet
2021-08-20 12:58:31.181974 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:feaa7a5fa3903c33 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:31.182+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f6ca6202-498a-4de4-ac94-04a05bd0dc24/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:31.182167 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:31.187891 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 12:58:31.187923 I | rafthttp: established a TCP streaming connection with peer f0572562892883bc (stream MsgApp v2 reader)
2021-08-20 12:58:31.187957 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:58:31.188014 I | rafthttp: established a TCP streaming connection with peer f0572562892883bc (stream Message reader)
2021/08/20 12:58:31.196802 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:31.280435 [info] prophet: resource 6 add operator add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:6(1,1), createAt:2021-08-20 12:58:31.2804175 +0800 CST m=+29.395503301, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 10 on container 9, promote learner peer 10 on container 9 to voter]), 
2021/08/20 12:58:31.280456 [info] prophet: resource 6 send schedule command, step add learner peer 10 on container 9, source create
2021/08/20 12:58:31.280496 [info] prophet: resource 4 add operator add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:4(1,1), createAt:2021-08-20 12:58:31.2804878 +0800 CST m=+29.395573601, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 11 on container 9, promote learner peer 11 on container 9 to voter]), 
2021/08/20 12:58:31.280510 [info] prophet: resource 4 send schedule command, step add learner peer 11 on container 9, source create
2021/08/20 12:58:31.280534 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 12:58:31.2805271 +0800 CST m=+29.395612901, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 12 on container 9, promote learner peer 12 on container 9 to voter]), 
2021/08/20 12:58:31.280537 [info] prophet: resource 2 send schedule command, step add learner peer 12 on container 9, source create
2021/08/20 12:58:31.280619 [info] [raftstore]: shard-6 AddLearnerNode peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.280653 [info] [raftstore]: shard-4 AddLearnerNode peer {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.280658 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.281699 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.281745 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.281771 [info] [raftstore]: shard-6 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.281840 [info] prophet: resource 2 send schedule command, step add learner peer 12 on container 9, source heartbeat
2021/08/20 12:58:31.281846 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:12 containerID:9 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.281898 [info] prophet: resource 4 send schedule command, step add learner peer 11 on container 9, source heartbeat
2021/08/20 12:58:31.281902 [info] [raftstore]: shard-2 add learner peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.281907 [info] prophet: resource 6 send schedule command, step add learner peer 10 on container 9, source heartbeat
2021/08/20 12:58:31.281926 [info] [raftstore]: shard 4 do apply change peer changeType:AddLearnerNode peer:<id:11 containerID:9 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.281941 [info] [raftstore]: shard-4 add learner peer {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.281954 [info] [raftstore]: shard 6 do apply change peer changeType:AddLearnerNode peer:<id:10 containerID:9 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.281968 [info] [raftstore]: shard-6 add learner peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.281988 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.282008 [info] [raftstore]: shard-4 AddLearnerNode peer {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.282012 [info] [raftstore]: shard-6 AddLearnerNode peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-08-20T12:58:31.291+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3) learners=(12)"}
2021/08/20 12:58:31.291846 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:12 XXX_unrecognized:[]}] Context:[10 32 10 16 6 108 166 5 113 105 77 116 159 111 27 76 9 222 126 106 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 12 16 9 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.291862 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.291889 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.292025 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:12 containerID:9 role:Learner >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:1550","msg":"5 switched to configuration voters=(5) learners=(11)"}
2021/08/20 12:58:31.292108 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:11 XXX_unrecognized:[]}] Context:[10 32 10 16 30 184 77 57 226 83 79 14 155 47 206 57 62 44 204 143 16 4 26 4 8 5 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 11 16 9 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.292128 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddLearnerNode Peer:{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.292138 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/08/20 12:58:31.292142 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:1550","msg":"7 switched to configuration voters=(7) learners=(10)"}
2021/08/20 12:58:31.292201 [info] [raftstore]: shard 6 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:10 XXX_unrecognized:[]}] Context:[10 32 10 16 172 125 43 89 96 225 74 63 169 171 247 166 33 226 200 133 16 6 26 4 8 7 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 10 16 9 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.292206 [info] [raftstore]: shard 4 do apply change peer changeType:AddLearnerNode peer:<id:11 containerID:9 role:Learner >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.292210 [info] [raftstore]: shard 6 applied changes [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.292221 [info] [raftstore]: shard-6 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.292242 [info] [raftstore]: shard 6 do apply change peer changeType:AddLearnerNode peer:<id:10 containerID:9 role:Learner >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.292428 [info] [transport]: connected to store 9
2021/08/20 12:58:31.292481 [info] [transport]: session 1[127.0.0.1:58870] connected
2021/08/20 12:58:31.292511 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 12:58:31.292528 [info] [raftstore]: shard 2 replicate peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.292544 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.292557 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:31.292559 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:1550","msg":"c switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:711","msg":"c became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:388","msg":"newRaft c [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:31.292630 [info] [raftstore]: shard 2 added with peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:31.292648 [info] [raftstore]: shard 4 target peer doesn't exist, peer=<{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 12:58:31.292652 [info] [raftstore]: shard 4 replicate peer {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.292656 [info] [raftstore]: shard 4 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.292659 [info] [raftstore]: shard 4 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:31.292660 [info] [raftstore]: shard 4 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:711","msg":"b became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:388","msg":"newRaft b [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:31.292700 [info] [raftstore]: shard 4 added with peer {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:31.292717 [info] [raftstore]: shard 6 target peer doesn't exist, peer=<{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:870","msg":"c [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:711","msg":"c became follower at term 6"}
2021/08/20 12:58:31.292722 [info] [raftstore]: shard 6 replicate peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.292815 [info] [raftstore]: shard 6 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.292817 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:31.292820 [info] [raftstore]: shard 6 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:31.292821 [info] [raftstore]: shard 6 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:870","msg":"b [term: 0] received a MsgHeartbeat message with higher term from 5 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:711","msg":"b became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=()"}
2021/08/20 12:58:31.292835 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 0 commits, result <nil>
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:711","msg":"a became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:388","msg":"newRaft a [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:31.292862 [info] [raftstore]: shard 6 added with peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:870","msg":"a [term: 0] received a MsgHeartbeat message with higher term from 7 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:31.292+0800","caller":"raft/raft.go:711","msg":"a became follower at term 6"}
2021/08/20 12:58:31.292895 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:31.293332 [info] prophet: resource 2 send schedule command, step promote learner peer 12 on container 9 to voter, source heartbeat
2021/08/20 12:58:31.293371 [info] prophet: resource 4 ConfVer changed from 1 to 2
2021/08/20 12:58:31.293413 [info] [raftstore]: shard-2 AddNode peer {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.293541 [info] [transport]: connected to store 1
2021/08/20 12:58:31.293564 [info] [transport]: session 1[127.0.0.1:36556] connected
2021/08/20 12:58:31.293679 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:31.293732 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:31.293687 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.293813 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:31.293819 [info] [raftstore]: shard 2 do apply change peer peer:<id:12 containerID:9 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.293843 [info] [raftstore]: shard-2 add peer {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T12:58:31.293+0800","caller":"raft/log.go:354","msg":"5 >>>>>>>>>>>>>>>> [1:9:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:31.293895 [info] [raftstore]: shard 4 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"error","ts":"2021-08-20T12:58:31.293+0800","caller":"raft/log.go:354","msg":"7 >>>>>>>>>>>>>>>> [1:9:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:31.294036 [info] [raftstore]: shard 6 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"error","ts":"2021-08-20T12:58:31.294+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:31.294075 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T12:58:31.294+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 12)"}
{"level":"error","ts":"2021-08-20T12:58:31.294+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:31.294132 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:12 XXX_unrecognized:[]}] Context:[10 32 10 16 172 26 102 64 98 164 75 250 148 213 182 237 241 40 159 13 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 12 16 9] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.294139 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.294164 [info] [raftstore]: shard 4 snapshot created, epoch=<confVer:2 version:1 > term=<6> index=<8> 
2021/08/20 12:58:31.294204 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:31.294224 [info] prophet: resource 4 send schedule command, step promote learner peer 11 on container 9 to voter, source heartbeat
{"level":"error","ts":"2021-08-20T12:58:31.294+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:31.294270 [info] prophet: resource 6 ConfVer changed from 1 to 2
2021/08/20 12:58:31.294313 [info] [raftstore]: shard-4 AddNode peer {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.294355 [info] [raftstore]: shard 6 snapshot created, epoch=<confVer:2 version:1 > term=<6> index=<8> 
2021/08/20 12:58:31.294525 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<9> 
2021/08/20 12:58:31.295124 [info] prophet: resource 6 send schedule command, step promote learner peer 10 on container 9 to voter, source heartbeat
2021/08/20 12:58:31.295162 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/08/20 12:58:31.295237 [info] [raftstore]: shard-6 AddNode peer {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.296022 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 12:58:31.2805271 +0800 CST m=+29.395612901, startAt:2021-08-20 12:58:31.2805353 +0800 CST m=+29.395621101, currentStep:2, steps:[add learner peer 12 on container 9, promote learner peer 12 on container 9 to voter]) finished) finish, takes 15.4753ms, 
2021/08/20 12:58:31.301544 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddNode Peer:{ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T12:58:31.301+0800","caller":"raft/log.go:354","msg":"5 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1090\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).ProposeConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChangeInternal\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:262\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:232\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).propose\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:141\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleRequest\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:187\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:447\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:31.301650 [info] [transport]: shard 4 start send pending snap, epoch=<confVer:2 version:1 > term=<6> index=<8>
2021/08/20 12:58:31.301857 [info] [transport]: connected to store 9
2021/08/20 12:58:31.301880 [info] [raftstore]: shard-6 propose conf change peer [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.301883 [info] [transport]: session 2[127.0.0.1:58874] connected
2021/08/20 12:58:31.301858 [info] [raftstore]: shard 4 do apply change peer peer:<id:11 containerID:9 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.301910 [info] [raftstore]: shard-4 add peer {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T12:58:31.301+0800","caller":"raft/log.go:354","msg":"7 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1090\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).ProposeConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChangeInternal\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:262\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:232\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).propose\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:141\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleRequest\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:187\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:447\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
{"level":"info","ts":"2021-08-20T12:58:31.301+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:31.301+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(5 11)"}
{"level":"info","ts":"2021-08-20T12:58:31.301+0800","caller":"raft/raft.go:1550","msg":"5 switched to configuration voters=(5 11)"}
{"level":"info","ts":"2021-08-20T12:58:31.302+0800","caller":"raft/raft.go:1503","msg":"b [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:31.302+0800","caller":"raft/raft.go:1420","msg":"b [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/08/20 12:58:31.301955 [info] [raftstore]: shard 4 try to send snap, header=<shard:<id:4 start:"b" end:"c" epoch:<confVer:2 version:1 > peers:<id:5 containerID:1 > peers:<id:11 containerID:9 role:Learner > > from:<id:5 containerID:1 > to:<id:11 containerID:9 role:Learner > term:6 index:8 >,size=<126>
2021/08/20 12:58:31.302019 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:11 XXX_unrecognized:[]}] Context:[10 32 10 16 169 249 199 186 122 172 65 131 177 121 154 60 153 111 76 212 16 4 26 4 8 5 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 11 16 9] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.302029 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddNode Peer:{ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.302034 [info] [raftstore]: shard 4 peer 11 receiving snapshot, skip further handling
{"level":"info","ts":"2021-08-20T12:58:31.302+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
2021/08/20 12:58:31.302051 [info] [raftstore]: shard 4 send snap complete
2021/08/20 12:58:31.301983 [info] [raftstore]: shard 6 do apply change peer peer:<id:10 containerID:9 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:31.302+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=(7 10)"}
2021/08/20 12:58:31.302062 [info] [transport]: shard 4 pending snap sent succ, size=<126>, epoch=<confVer:2 version:1 > term=<6> index=<8>
{"level":"info","ts":"2021-08-20T12:58:31.302+0800","caller":"raft/raft.go:1503","msg":"a [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
2021/08/20 12:58:31.302085 [info] [transport]: shard 6 start send pending snap, epoch=<confVer:2 version:1 > term=<6> index=<8>
{"level":"info","ts":"2021-08-20T12:58:31.302+0800","caller":"raft/raft.go:1420","msg":"a [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/08/20 12:58:31.302113 [info] [raftstore]: shard 6 peer 10 receiving snapshot, skip further handling
2021/08/20 12:58:31.302119 [info] prophet: resource 4 ConfVer changed from 2 to 3
2021/08/20 12:58:31.302132 [info] [raftstore]: shard 4 begin to apply snapshot
2021/08/20 12:58:31.302135 [info] [raftstore]: shard 4 clear 0 meta keys and 0 raft keys
2021/08/20 12:58:31.302142 [info] [raftstore]: shard 4 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.302148 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 start applying snapshot
2021/08/20 12:58:31.302063 [info] [raftstore]: shard-6 add peer {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.302168 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 add registration job by handleRaftReadyApply
2021/08/20 12:58:31.302170 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 applying snapshot to set read 8
2021/08/20 12:58:31.302179 [info] [raftstore]: shard 4 snapshot is applied, shard=<{ID:4 Start:[98] End:[99] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:31.302191 [info] [raftstore]: shard 4 shard changed after apply snapshot, from=<{ID:4 Start:[98] End:[99] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:4 Start:[98] End:[99] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:31.302152 [info] [raftstore]: shard 4 begin apply snapshot data
{"level":"info","ts":"2021-08-20T12:58:31.302+0800","caller":"raft/raft.go:1550","msg":"7 switched to configuration voters=(7 10)"}
2021/08/20 12:58:31.302204 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 AdvanceApply with 8
2021/08/20 12:58:31.302305 [info] [raftstore]: shard 6 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:10 XXX_unrecognized:[]}] Context:[10 32 10 16 36 87 239 157 195 216 76 5 177 130 48 18 136 10 46 130 16 6 26 4 8 7 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 10 16 9] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:31.302317 [info] [raftstore]: shard 6 applied changes [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:31.302366 [info] [raftstore]: shard 6 peer 10 receiving snapshot, skip further handling
2021/08/20 12:58:31.302381 [info] [raftstore]: shard 6 try to send snap, header=<shard:<id:6 start:"c" end:"d" epoch:<confVer:2 version:1 > peers:<id:7 containerID:1 > peers:<id:10 containerID:9 role:Learner > > from:<id:7 containerID:1 > to:<id:10 containerID:9 role:Learner > term:6 index:8 >,size=<126>
2021/08/20 12:58:31.302414 [info] [raftstore]: shard 6 send snap complete
2021/08/20 12:58:31.302422 [info] [raftstore]: shard 4 delete exists snap gz file /tmp/cube/node-1/snapshots/4_6_8.gz, header is shard:<id:4 start:"b" end:"c" epoch:<confVer:2 version:1 > peers:<id:5 containerID:1 > peers:<id:11 containerID:9 role:Learner > > from:<> to:<> term:6 index:8 
2021/08/20 12:58:31.302430 [info] [transport]: shard 6 pending snap sent succ, size=<126>, epoch=<confVer:2 version:1 > term=<6> index=<8>
2021/08/20 12:58:31.302453 [info] [raftstore]: shard 4 apply snapshot data complete, {Term:6 Vote:0 Commit:8 XXX_unrecognized:[]}
2021/08/20 12:58:31.303056 [info] prophet: resource 4 operator(add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:4(1,1), createAt:2021-08-20 12:58:31.2804878 +0800 CST m=+29.395573601, startAt:2021-08-20 12:58:31.2805075 +0800 CST m=+29.395593301, currentStep:2, steps:[add learner peer 11 on container 9, promote learner peer 11 on container 9 to voter]) finished) finish, takes 22.5315ms, 
2021/08/20 12:58:31.303102 [info] prophet: resource 6 ConfVer changed from 2 to 3
2021/08/20 12:58:31.303984 [info] prophet: resource 6 operator(add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:6(1,1), createAt:2021-08-20 12:58:31.2804175 +0800 CST m=+29.395503301, startAt:2021-08-20 12:58:31.2804502 +0800 CST m=+29.395536001, currentStep:2, steps:[add learner peer 10 on container 9, promote learner peer 10 on container 9 to voter]) finished) finish, takes 23.5259ms, 
2021/08/20 12:58:31.341461 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:31.341504 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:31.341519 [info] [raftstore]: shard 6 peer 10 receiving snapshot, skip further handling
{"level":"error","ts":"2021-08-20T12:58:31.341+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:31.341543 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<9>
{"level":"info","ts":"2021-08-20T12:58:31.341+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:31.341+0800","caller":"raft/raft.go:1550","msg":"c switched to configuration voters=(3 12)"}
{"level":"info","ts":"2021-08-20T12:58:31.341+0800","caller":"raft/raft.go:1503","msg":"c [commit: 9, lastindex: 9, lastterm: 6] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:31.341+0800","caller":"raft/raft.go:1420","msg":"c [commit: 9] restored snapshot [index: 9, term: 6]"}
2021/08/20 12:58:31.341672 [info] [raftstore]: shard 2 peer 12 receiving snapshot, skip further handling
2021/08/20 12:58:31.341726 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:31.341880 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:12 containerID:9 > > from:<id:3 containerID:1 > to:<id:12 containerID:9 role:Learner > term:6 index:9 >,size=<126>
2021/08/20 12:58:31.341921 [info] [raftstore]: shard 2 send snap complete
2021/08/20 12:58:31.341937 [info] [transport]: shard 2 pending snap sent succ, size=<126>, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 12:58:31.391695 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:31.492019 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:31.541722 [info] [raftstore]: shard 6 peer 10 receiving snapshot, skip further handling
2021/08/20 12:58:31.541746 [info] [raftstore]: shard 2 peer 12 receiving snapshot, skip further handling
2021/08/20 12:58:31.541794 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:31.591347 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021-08-20 12:58:31.683221 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:feaa7a5fa3903c33 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:31.683+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f6ca6202-498a-4de4-ac94-04a05bd0dc24/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:31.683343 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:31.691009 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:31.741764 [info] [raftstore]: shard 2 peer 12 receiving snapshot, skip further handling
2021/08/20 12:58:31.741820 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:31.741840 [info] [raftstore]: shard 6 peer 10 receiving snapshot, skip further handling
2021/08/20 12:58:31.791612 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:31.892061 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:31.941640 [info] [raftstore]: shard 2 peer 12 receiving snapshot, skip further handling
2021/08/20 12:58:31.941708 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:31.941731 [info] [raftstore]: shard 6 peer 10 receiving snapshot, skip further handling
2021/08/20 12:58:31.958207 [info] prophet: [prophet-leader/node-2]/loop: exit
2021/08/20 12:58:31.991378 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:32.091014 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:32.141822 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:32.141858 [info] [raftstore]: shard 6 peer 10 receiving snapshot, skip further handling
2021/08/20 12:58:32.141868 [info] [raftstore]: shard 2 peer 12 receiving snapshot, skip further handling
2021-08-20 12:58:32.184081 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:acf2f452684cb695 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:32.184+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f6ca6202-498a-4de4-ac94-04a05bd0dc24/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:32.184217 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:32.191869 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:32.292031 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:32.303152 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 add registration job by handleRaftReadyApply, completed
2021/08/20 12:58:32.341827 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 12:58:32.341848 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 12:58:32.341862 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:9 TruncatedState:{Index:9 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:32.341876 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 start applying snapshot
2021/08/20 12:58:32.341882 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 12:58:32.342018 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 add registration job by handleRaftReadyApply
2021/08/20 12:58:32.342036 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 applying snapshot to set read 9
2021/08/20 12:58:32.342061 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:32.342081 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:32.342087 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 AdvanceApply with 9
2021/08/20 12:58:32.342104 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_9.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:2 version:1 > peers:<id:12 containerID:9 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:9 
2021/08/20 12:58:32.342148 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:9 XXX_unrecognized:[]}
2021/08/20 12:58:32.342149 [info] [raftstore]: shard 6 begin to apply snapshot
2021/08/20 12:58:32.342165 [info] [raftstore]: shard 6 clear 0 meta keys and 0 raft keys
2021/08/20 12:58:32.342169 [info] [raftstore]: shard 6 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:32.342176 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 start applying snapshot
2021/08/20 12:58:32.342205 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 add registration job by handleRaftReadyApply
2021/08/20 12:58:32.342208 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 applying snapshot to set read 8
2021/08/20 12:58:32.342218 [info] [raftstore]: shard 6 snapshot is applied, shard=<{ID:6 Start:[99] End:[100] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:32.342236 [info] [raftstore]: shard 6 shard changed after apply snapshot, from=<{ID:6 Start:[99] End:[100] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:6 Start:[99] End:[100] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:32.342241 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 AdvanceApply with 8
2021/08/20 12:58:32.342251 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:32.541835 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 skip with no delegates, 0 commits, result <nil>
2021-08-20 12:58:32.684501 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:acf2f452684cb695 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:32.684+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f6ca6202-498a-4de4-ac94-04a05bd0dc24/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:32.684618 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:32.742097 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:32.941670 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:33.142006 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 skip with no delegates, 0 commits, result <nil>
2021-08-20 12:58:33.185444 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:e8eb31e82bfd9392 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:33.185+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f6ca6202-498a-4de4-ac94-04a05bd0dc24/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:33.185573 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:33.341701 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:33.342845 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 12 add registration job by handleRaftReadyApply, completed
2021/08/20 12:58:33.342886 [info] [raftstore]: shard 4 do apply change peer peer:<id:11 containerID:9 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:33.342902 [info] [raftstore]: shard-4 add peer {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:33.342913 [info] [raftstore]: shard 6 begin apply snapshot data
2021/08/20 12:58:33.343074 [info] [raftstore]: shard 6 delete exists snap gz file /tmp/cube/node-1/snapshots/6_6_8.gz, header is shard:<id:6 start:"c" end:"d" epoch:<confVer:2 version:1 > peers:<id:7 containerID:1 > peers:<id:10 containerID:9 role:Learner > > from:<> to:<> term:6 index:8 
2021/08/20 12:58:33.343108 [info] [raftstore]: shard 6 apply snapshot data complete, {Term:6 Vote:0 Commit:8 XXX_unrecognized:[]}
{"level":"info","ts":"2021-08-20T12:58:33.350+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(5 11)"}
2021/08/20 12:58:33.350605 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddNode Peer:{ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:33.391489 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:33.391621 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:33.491056 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:33.541656 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:33.591289 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021-08-20 12:58:33.686184 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:e8eb31e82bfd9392 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:33.686+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f6ca6202-498a-4de4-ac94-04a05bd0dc24/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:33.686321 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:33.691770 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:33.741488 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:33.791156 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:33.891404 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:33.941249 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:33.991859 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:34.091668 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:34.141418 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021-08-20 12:58:34.187125 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:b3b18a9109327811 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:34.187+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f6ca6202-498a-4de4-ac94-04a05bd0dc24/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:34.187261 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:34.191745 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:34.291027 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:34.341732 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:34.343949 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 10 add registration job by handleRaftReadyApply, completed
2021/08/20 12:58:34.391698 [info] [raftstore]: shard 6 do apply change peer peer:<id:10 containerID:9 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:34.391718 [info] [raftstore]: shard-6 add peer {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:34.391+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=(7 10)"}
2021/08/20 12:58:34.391785 [info] [raftstore]: shard 6 applied changes [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021-08-20 12:58:34.687635 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:b3b18a9109327811 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:34.687+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f6ca6202-498a-4de4-ac94-04a05bd0dc24/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:34.687782 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:35.188424 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:217212672263aacb RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:35.188+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f6ca6202-498a-4de4-ac94-04a05bd0dc24/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:35.188571 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:35.689726 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:217212672263aacb RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:35.689+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f6ca6202-498a-4de4-ac94-04a05bd0dc24/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:35.689872 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-08-20T12:58:36.191+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 11524663199691958114 17318351997214688188)"}
{"level":"info","ts":"2021-08-20T12:58:36.191+0800","caller":"raft/raft.go:1550","msg":"f0572562892883bc switched to configuration voters=(10650127570946328820 11524663199691958114 17318351997214688188)"}
2021-08-20 12:58:36.191607 I | etcdserver/membership: added member 9fefd41eada7e762 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:36.191617 I | etcdserver/membership: added member 9fefd41eada7e762 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:36.191620 I | rafthttp: starting peer 9fefd41eada7e762...
2021-08-20 12:58:36.191623 I | rafthttp: starting peer 9fefd41eada7e762...
2021-08-20 12:58:36.191630 I | rafthttp: started HTTP pipelining with peer 9fefd41eada7e762
2021-08-20 12:58:36.191729 I | rafthttp: started HTTP pipelining with peer 9fefd41eada7e762
2021-08-20 12:58:36.191858 I | rafthttp: started streaming with peer 9fefd41eada7e762 (writer)
2021-08-20 12:58:36.191963 I | rafthttp: started streaming with peer 9fefd41eada7e762 (writer)
2021-08-20 12:58:36.192045 I | rafthttp: started streaming with peer 9fefd41eada7e762 (writer)
2021-08-20 12:58:36.192121 I | rafthttp: started streaming with peer 9fefd41eada7e762 (writer)
2021-08-20 12:58:36.192207 I | rafthttp: started peer 9fefd41eada7e762
2021-08-20 12:58:36.192225 I | rafthttp: added peer 9fefd41eada7e762
2021-08-20 12:58:36.192226 I | rafthttp: started streaming with peer 9fefd41eada7e762 (stream MsgApp v2 reader)
2021-08-20 12:58:36.192238 I | rafthttp: started streaming with peer 9fefd41eada7e762 (stream Message reader)
2021-08-20 12:58:36.192306 I | rafthttp: started peer 9fefd41eada7e762
2021-08-20 12:58:36.192319 I | rafthttp: started streaming with peer 9fefd41eada7e762 (stream MsgApp v2 reader)
2021-08-20 12:58:36.192324 I | rafthttp: added peer 9fefd41eada7e762
2021-08-20 12:58:36.192344 I | rafthttp: started streaming with peer 9fefd41eada7e762 (stream Message reader)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:36.192732 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:36.192769 I | embed: name = node-2
2021-08-20 12:58:36.192797 I | embed: data dir = /tmp/cube/node-2/prophet
2021-08-20 12:58:36.192800 I | embed: member dir = /tmp/cube/node-2/prophet/member
2021-08-20 12:58:36.192801 I | embed: heartbeat = 100ms
2021-08-20 12:58:36.192803 I | embed: election = 3000ms
2021-08-20 12:58:36.192804 I | embed: snapshot count = 100000
2021-08-20 12:58:36.192806 I | embed: advertise client URLs = http://127.0.0.1:40002
2021-08-20 12:58:36.197367 I | etcdserver: starting member 9fefd41eada7e762 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:36.197+0800","caller":"raft/raft.go:1550","msg":"9fefd41eada7e762 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:36.197+0800","caller":"raft/raft.go:711","msg":"9fefd41eada7e762 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:36.197+0800","caller":"raft/raft.go:388","msg":"newRaft 9fefd41eada7e762 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 12:58:36.199043 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:36.202128 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:36.202146 I | rafthttp: started HTTP pipelining with peer f0572562892883bc
2021-08-20 12:58:36.202150 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 12:58:36.202156 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:36.202378 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:36.202610 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:36.203139 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 12:58:36.203153 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:36.203162 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:36.203213 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 12:58:36.203228 I | rafthttp: starting peer f0572562892883bc...
2021-08-20 12:58:36.203237 I | rafthttp: started HTTP pipelining with peer f0572562892883bc
2021-08-20 12:58:36.203368 I | rafthttp: peer 9fefd41eada7e762 became active
2021-08-20 12:58:36.203402 I | rafthttp: established a TCP streaming connection with peer 9fefd41eada7e762 (stream Message writer)
2021-08-20 12:58:36.203409 I | rafthttp: started streaming with peer f0572562892883bc (writer)
2021-08-20 12:58:36.203414 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 12:58:36.203422 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:36.203424 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:36.203526 I | rafthttp: established a TCP streaming connection with peer 9fefd41eada7e762 (stream MsgApp v2 writer)
2021-08-20 12:58:36.203672 I | rafthttp: started streaming with peer f0572562892883bc (writer)
2021-08-20 12:58:36.204236 I | rafthttp: started peer f0572562892883bc
2021-08-20 12:58:36.204248 I | rafthttp: added peer f0572562892883bc
2021-08-20 12:58:36.204252 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:36.204253 I | rafthttp: started streaming with peer f0572562892883bc (stream MsgApp v2 reader)
2021-08-20 12:58:36.204262 I | rafthttp: started streaming with peer f0572562892883bc (stream Message reader)
2021-08-20 12:58:36.204459 I | rafthttp: peer 9fefd41eada7e762 became active
2021-08-20 12:58:36.204478 I | rafthttp: established a TCP streaming connection with peer 9fefd41eada7e762 (stream Message writer)
2021-08-20 12:58:36.204495 I | rafthttp: peer f0572562892883bc became active
2021-08-20 12:58:36.204502 I | rafthttp: established a TCP streaming connection with peer f0572562892883bc (stream Message reader)
2021-08-20 12:58:36.204508 I | rafthttp: established a TCP streaming connection with peer f0572562892883bc (stream MsgApp v2 reader)
2021-08-20 12:58:36.204524 I | embed: listening for peers on 127.0.0.1:50002
2021-08-20 12:58:36.204648 I | rafthttp: established a TCP streaming connection with peer 9fefd41eada7e762 (stream MsgApp v2 writer)
2021-08-20 12:58:36.254988 I | etcdserver: 9fefd41eada7e762 initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
{"level":"info","ts":"2021-08-20T12:58:36.272+0800","caller":"raft/raft.go:870","msg":"9fefd41eada7e762 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T12:58:36.272+0800","caller":"raft/raft.go:711","msg":"9fefd41eada7e762 became follower at term 2"}
{"level":"info","ts":"2021-08-20T12:58:36.272+0800","caller":"raft/node.go:325","msg":"raft.node: 9fefd41eada7e762 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:36.274+0800","caller":"raft/raft.go:1550","msg":"9fefd41eada7e762 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:36.274502 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:36.274546 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T12:58:36.274+0800","caller":"raft/raft.go:1550","msg":"9fefd41eada7e762 switched to configuration voters=(10650127570946328820 17318351997214688188)"}
2021-08-20 12:58:36.275032 I | etcdserver/membership: added member f0572562892883bc [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:36.275+0800","caller":"raft/raft.go:1550","msg":"9fefd41eada7e762 switched to configuration voters=(10650127570946328820 11524663199691958114 17318351997214688188)"}
2021-08-20 12:58:36.275337 I | etcdserver/membership: added member 9fefd41eada7e762 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:36.275991 I | etcdserver: published {Name:node-2 ClientURLs:[http://127.0.0.1:40002]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:36.276007 I | embed: ready to serve client requests
2021/08/20 12:58:36.276017 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
2021-08-20 12:58:36.276278 N | embed: serving insecure client requests on 127.0.0.1:40002, this is strongly discouraged!
2021/08/20 12:58:36.277078 [info] prophet: net application started
2021/08/20 12:58:36.277085 [info] prophet: start system time monitor 
2021/08/20 12:58:36.277519 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 12:58:36.277532 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:36.277535 [info] prophet: ********node-2 become to follower now********
2021/08/20 12:58:36.277551 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:36.277554 [info] prophet: client started
2021/08/20 12:58:36.277558 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 12:58:36.277559 [info] prophet: client read loop started 
2021/08/20 12:58:36.277559 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:36.277578 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1629435516 deployPath:"not set" 
2021/08/20 12:58:36.277587 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:36.277620 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:36.277647 [info] prophet: session 5[127.0.0.1:39044] connected
2021/08/20 12:58:36.277656 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:36.277751 [info] [raftstore]: create local store with id 13
2021/08/20 12:58:36.278180 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 12:58:36.280996 [info] prophet: container 13 limit added
2021/08/20 12:58:36.281048 [info] [raftstore]: prophet started
2021/08/20 12:58:36.281078 [info] [transport]: net application started
2021/08/20 12:58:36.281096 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/08/20 12:58:36.281083 [info] prophet: container 13 heartbeat stream binded
2021/08/20 12:58:36.281099 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:36.281105 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:36.281112 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:36.281114 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:36.281115 [info] [raftstore]: shards started
2021/08/20 12:58:36.281118 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:36.281128 [info] [raftstore]: net application started
2021/08/20 12:58:36.281141 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/08/20 12:58:36.281156 [info] [raftstore]: router started
2021/08/20 12:58:36.281188 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:36.281189 [info] [raftstore]: router event loop task started
2021/08/20 12:58:36.281260 [info] prophet: session 6[127.0.0.1:39046] connected
2021/08/20 12:58:36.281266 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:36.281269 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:36.281337 [info] prophet: new watcher 127.0.0.1:39046 added
2021/08/20 12:58:36.281404 [info] [raftstore]: start init event
2021-08-20 12:58:36.293249 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 12:58:36.293283 I | rafthttp: established a TCP streaming connection with peer 9fefd41eada7e762 (stream Message reader)
2021-08-20 12:58:36.293286 I | rafthttp: established a TCP streaming connection with peer 9fefd41eada7e762 (stream MsgApp v2 reader)
2021-08-20 12:58:36.293398 I | rafthttp: established a TCP streaming connection with peer 9fefd41eada7e762 (stream MsgApp v2 reader)
2021-08-20 12:58:36.293416 I | rafthttp: established a TCP streaming connection with peer f0572562892883bc (stream Message writer)
2021-08-20 12:58:36.293435 I | rafthttp: established a TCP streaming connection with peer 9fefd41eada7e762 (stream Message reader)
2021-08-20 12:58:36.293659 I | rafthttp: established a TCP streaming connection with peer f0572562892883bc (stream MsgApp v2 writer)
2021-08-20 12:58:36.293744 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021/08/20 12:58:36.302134 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:36.307398 [info] prophet: resource 6 add operator add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:6(1,3), createAt:2021-08-20 12:58:36.3073799 +0800 CST m=+34.422465701, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 14 on container 13, promote learner peer 14 on container 13 to voter]), 
2021/08/20 12:58:36.307415 [info] prophet: resource 6 send schedule command, step add learner peer 14 on container 13, source create
2021/08/20 12:58:36.307452 [info] prophet: resource 4 add operator add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:4(1,3), createAt:2021-08-20 12:58:36.3074448 +0800 CST m=+34.422530701, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 15 on container 13, promote learner peer 15 on container 13 to voter]), 
2021/08/20 12:58:36.307463 [info] prophet: resource 4 send schedule command, step add learner peer 15 on container 13, source create
2021/08/20 12:58:36.307486 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 12:58:36.3074808 +0800 CST m=+34.422566601, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 16 on container 13, promote learner peer 16 on container 13 to voter]), 
2021/08/20 12:58:36.307497 [info] prophet: resource 2 send schedule command, step add learner peer 16 on container 13, source create
2021/08/20 12:58:36.307603 [info] [raftstore]: shard-6 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.307617 [info] [raftstore]: shard-4 AddLearnerNode peer {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.307620 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.311851 [info] [raftstore]: shard-6 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.311969 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312034 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312116 [info] [raftstore]: shard 6 do apply change peer changeType:AddLearnerNode peer:<id:14 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312138 [info] [raftstore]: shard-6 add learner peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312171 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:16 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312196 [info] [raftstore]: shard-2 add learner peer {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312210 [info] [raftstore]: shard 6 do apply change peer changeType:AddLearnerNode peer:<id:14 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312226 [info] [raftstore]: shard 4 do apply change peer changeType:AddLearnerNode peer:<id:15 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312247 [info] [raftstore]: shard-4 add learner peer {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312236 [info] [raftstore]: shard-6 add learner peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312269 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:16 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312276 [info] [raftstore]: shard-2 add learner peer {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312291 [info] [raftstore]: shard 4 do apply change peer changeType:AddLearnerNode peer:<id:15 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:36.312+0800","caller":"raft/raft.go:1550","msg":"7 switched to configuration voters=(7 10) learners=(14)"}
2021/08/20 12:58:36.312298 [info] [raftstore]: shard-4 add learner peer {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312324 [info] [raftstore]: shard 6 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:14 XXX_unrecognized:[]}] Context:[10 32 10 16 247 233 114 189 62 19 66 142 153 147 136 98 146 105 153 127 16 6 26 4 8 7 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 14 16 13 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.312352 [info] [raftstore]: shard 6 applied changes [{ChangeType:AddLearnerNode Peer:{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:36.312+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=(7 10) learners=(14)"}
2021/08/20 12:58:36.312393 [info] [raftstore]: shard 6 applied changes [{ChangeType:AddLearnerNode Peer:{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:36.312+0800","caller":"raft/raft.go:1550","msg":"c switched to configuration voters=(3 12) learners=(16)"}
2021/08/20 12:58:36.312458 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:36.312+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 12) learners=(16)"}
2021/08/20 12:58:36.312505 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:16 XXX_unrecognized:[]}] Context:[10 32 10 16 130 204 229 110 61 63 65 110 187 167 51 14 155 202 213 140 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 16 16 13 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.312517 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312539 [info] prophet: resource 6 ConfVer changed from 3 to 4
{"level":"info","ts":"2021-08-20T12:58:36.312+0800","caller":"raft/raft.go:1550","msg":"5 switched to configuration voters=(5 11) learners=(15)"}
2021/08/20 12:58:36.312602 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:15 XXX_unrecognized:[]}] Context:[10 32 10 16 24 39 121 165 237 36 75 233 137 223 159 0 6 101 45 192 16 4 26 4 8 5 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 15 16 13 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.312629 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddLearnerNode Peer:{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:36.312+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(5 11) learners=(15)"}
2021/08/20 12:58:36.312678 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddLearnerNode Peer:{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.312921 [info] [transport]: connected to store 13
2021/08/20 12:58:36.312959 [info] [transport]: session 1[127.0.0.1:41324] connected
2021/08/20 12:58:36.312984 [info] [raftstore]: shard 6 target peer doesn't exist, peer=<{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 12:58:36.313004 [info] [raftstore]: shard 6 replicate peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.313021 [info] [raftstore]: shard 6 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.313044 [info] [raftstore]: shard 6 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:36.313045 [info] [raftstore]: shard 6 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:1550","msg":"e switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:711","msg":"e became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:388","msg":"newRaft e [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:36.313112 [info] [raftstore]: shard 6 added with peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:36.313130 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 12:58:36.313134 [info] [raftstore]: shard 2 replicate peer {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.313136 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.313139 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:36.313140 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:1550","msg":"10 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:711","msg":"10 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:388","msg":"newRaft 10 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:36.313167 [info] [raftstore]: shard 2 added with peer {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:36.313184 [info] [raftstore]: shard 4 target peer doesn't exist, peer=<{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 12:58:36.313189 [info] [raftstore]: shard 4 replicate peer {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.313191 [info] [raftstore]: shard 4 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.313193 [info] [raftstore]: shard 4 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:36.313195 [info] [raftstore]: shard 4 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:1550","msg":"f switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:711","msg":"f became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:870","msg":"e [term: 0] received a MsgHeartbeat message with higher term from 7 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:388","msg":"newRaft f [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:36.313236 [info] [raftstore]: shard 4 added with peer {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:711","msg":"e became follower at term 6"}
2021/08/20 12:58:36.313321 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 14 skip with no delegates, 0 commits, result <nil>
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:870","msg":"10 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:711","msg":"10 became follower at term 6"}
2021/08/20 12:58:36.313348 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 0 commits, result <nil>
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:870","msg":"f [term: 0] received a MsgHeartbeat message with higher term from 5 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:36.313+0800","caller":"raft/raft.go:711","msg":"f became follower at term 6"}
2021/08/20 12:58:36.313361 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 15 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:36.313657 [info] prophet: resource 6 send schedule command, step promote learner peer 14 on container 13 to voter, source heartbeat
2021/08/20 12:58:36.313694 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/08/20 12:58:36.313755 [info] [raftstore]: shard-6 AddNode peer {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.313816 [info] [transport]: connected to store 1
2021/08/20 12:58:36.313830 [info] [transport]: session 2[127.0.0.1:36622] connected
2021/08/20 12:58:36.313909 [info] [raftstore]: shard-6 propose conf change peer [{ChangeType:AddNode Peer:{ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.313984 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 14 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:36.314001 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:36.314005 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 15 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T12:58:36.314+0800","caller":"raft/log.go:354","msg":"7 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:36.314058 [info] [raftstore]: shard 6 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"error","ts":"2021-08-20T12:58:36.314+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:11:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:36.314184 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"error","ts":"2021-08-20T12:58:36.314+0800","caller":"raft/log.go:354","msg":"5 >>>>>>>>>>>>>>>> [1:11:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:36.314224 [info] [raftstore]: shard 4 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"error","ts":"2021-08-20T12:58:36.314+0800","caller":"raft/log.go:354","msg":"7 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1175\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:36.314317 [info] [raftstore]: shard 6 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<10> 
2021/08/20 12:58:36.314339 [info] [raftstore]: shard 6 do apply change peer peer:<id:14 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.314319 [info] [raftstore]: shard 6 do apply change peer peer:<id:14 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.314349 [info] [raftstore]: shard-6 add peer {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.314358 [info] [raftstore]: shard-6 add peer {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.315514 [info] prophet: resource 2 send schedule command, step promote learner peer 16 on container 13 to voter, source heartbeat
2021/08/20 12:58:36.315676 [info] prophet: resource 4 ConfVer changed from 3 to 4
2021/08/20 12:58:36.315833 [info] [raftstore]: shard-2 AddNode peer {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.316283 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<10> 
2021/08/20 12:58:36.317121 [info] [raftstore]: shard 4 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<10> 
2021/08/20 12:58:36.319693 [info] prophet: resource 4 send schedule command, step promote learner peer 15 on container 13 to voter, source heartbeat
2021/08/20 12:58:36.319766 [info] [raftstore]: shard-4 AddNode peer {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-08-20T12:58:36.320+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=(7 10 14)"}
2021/08/20 12:58:36.320932 [info] [raftstore]: shard 6 applied changes [{ChangeType:AddNode Peer:{ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.321170 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1090\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).ProposeConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChangeInternal\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:262\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:232\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).propose\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:141\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleRequest\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:187\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:447\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:36.321318 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:4 version:1 > term=<6> index=<10>
2021/08/20 12:58:36.321407 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddNode Peer:{ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/log.go:354","msg":"5 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1090\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).ProposeConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChangeInternal\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:262\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:232\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).propose\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:141\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleRequest\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:187\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:447\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:36.321491 [info] [transport]: connected to store 13
2021/08/20 12:58:36.321502 [info] [transport]: session 2[127.0.0.1:41328] connected
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/raft.go:1550","msg":"7 switched to configuration voters=(7 10 14)"}
{"level":"error","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/log.go:354","msg":"7 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:447\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:36.321608 [info] [raftstore]: shard 6 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:14 XXX_unrecognized:[]}] Context:[10 32 10 16 147 9 240 48 44 143 69 113 146 21 162 166 148 24 178 146 16 6 26 4 8 7 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 14 16 13] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.321620 [info] [raftstore]: shard 6 applied changes [{ChangeType:AddNode Peer:{ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/raft.go:1550","msg":"10 switched to configuration voters=(3 12 16)"}
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/raft.go:1503","msg":"10 [commit: 10, lastindex: 10, lastterm: 6] restored snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/raft.go:1420","msg":"10 [commit: 10] restored snapshot [index: 10, term: 6]"}
2021/08/20 12:58:36.321697 [info] [raftstore]: shard 2 peer 16 receiving snapshot, skip further handling
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 10, term: 6]"}
2021/08/20 12:58:36.321716 [info] [raftstore]: shard 2 do apply change peer peer:<id:16 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/raft.go:1550","msg":"f switched to configuration voters=(5 11 15)"}
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/raft.go:1503","msg":"f [commit: 10, lastindex: 10, lastterm: 6] restored snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/raft.go:1420","msg":"f [commit: 10] restored snapshot [index: 10, term: 6]"}
2021/08/20 12:58:36.321726 [info] [raftstore]: shard-2 add peer {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.321769 [info] prophet: resource 6 ConfVer changed from 4 to 5
2021/08/20 12:58:36.321801 [info] [raftstore]: shard 2 do apply change peer peer:<id:16 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 12 16)"}
2021/08/20 12:58:36.321825 [info] [raftstore]: shard-2 add peer {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.321786 [info] [raftstore]: shard 4 do apply change peer peer:<id:15 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.321852 [info] [raftstore]: shard-4 add peer {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.321755 [info] [raftstore]: shard 4 peer 15 receiving snapshot, skip further handling
2021/08/20 12:58:36.321860 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:3 containerID:1 > peers:<id:12 containerID:9 > peers:<id:16 containerID:13 role:Learner > > from:<id:3 containerID:1 > to:<id:16 containerID:13 role:Learner > term:6 index:10 >,size=<125>
2021/08/20 12:58:36.321881 [info] [raftstore]: shard 2 send snap complete
2021/08/20 12:58:36.321883 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 14 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:36.321916 [info] [raftstore]: shard 4 do apply change peer peer:<id:15 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.321840 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:16 XXX_unrecognized:[]}] Context:[10 32 10 16 236 238 220 189 62 138 65 231 134 150 45 204 120 160 43 111 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 16 16 13] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.321929 [info] [raftstore]: shard-4 add peer {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/raft.go:1550","msg":"c switched to configuration voters=(3 12 16)"}
2021/08/20 12:58:36.321948 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.321901 [info] [transport]: shard 2 pending snap sent succ, size=<125>, epoch=<confVer:4 version:1 > term=<6> index=<10>
{"level":"error","ts":"2021-08-20T12:58:36.321+0800","caller":"raft/log.go:354","msg":"7 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:36.322033 [info] [transport]: shard 4 start send pending snap, epoch=<confVer:4 version:1 > term=<6> index=<10>
2021/08/20 12:58:36.322044 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 12:58:36.322063 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 12:58:36.322070 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:10 TruncatedState:{Index:10 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.322076 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 start applying snapshot
2021/08/20 12:58:36.322080 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 12:58:36.321967 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:36.322+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(5 11 15)"}
2021/08/20 12:58:36.322034 [info] [raftstore]: shard 6 snapshot epoch 4/5 stale, generate again.
2021/08/20 12:58:36.322152 [info] [raftstore]: shard 6 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:36.322147 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddNode Peer:{ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.322194 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 add registration job by handleRaftReadyApply
2021/08/20 12:58:36.322198 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 applying snapshot to set read 10
2021/08/20 12:58:36.322213 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:36.322226 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:36.322243 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 AdvanceApply with 10
{"level":"info","ts":"2021-08-20T12:58:36.322+0800","caller":"raft/raft.go:1550","msg":"5 switched to configuration voters=(5 11 15)"}
2021/08/20 12:58:36.322231 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_10.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:16 containerID:13 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:10 
2021/08/20 12:58:36.322260 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:15 XXX_unrecognized:[]}] Context:[10 32 10 16 248 169 16 68 111 212 74 164 155 127 174 218 185 113 195 231 16 4 26 4 8 5 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 15 16 13] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:36.322281 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddNode Peer:{ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:36.322290 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:10 XXX_unrecognized:[]}
2021/08/20 12:58:36.322359 [info] [raftstore]: shard 4 peer 15 receiving snapshot, skip further handling
2021/08/20 12:58:36.322418 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:36.322478 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:36.322525 [info] [raftstore]: shard 6 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<11> 
2021/08/20 12:58:36.322683 [info] [raftstore]: shard 4 try to send snap, header=<shard:<id:4 start:"b" end:"c" epoch:<confVer:4 version:1 > peers:<id:5 containerID:1 > peers:<id:11 containerID:9 > peers:<id:15 containerID:13 role:Learner > > from:<id:5 containerID:1 > to:<id:15 containerID:13 role:Learner > term:6 index:10 >,size=<126>
2021/08/20 12:58:36.322716 [info] [raftstore]: shard 4 send snap complete
2021/08/20 12:58:36.322730 [info] [transport]: shard 4 pending snap sent succ, size=<126>, epoch=<confVer:4 version:1 > term=<6> index=<10>
2021/08/20 12:58:36.323473 [info] prophet: resource 6 operator(add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:6(1,3), createAt:2021-08-20 12:58:36.3073799 +0800 CST m=+34.422465701, startAt:2021-08-20 12:58:36.3074093 +0800 CST m=+34.422495101, currentStep:2, steps:[add learner peer 14 on container 13, promote learner peer 14 on container 13 to voter]) finished) finish, takes 16.0461ms, 
2021/08/20 12:58:36.323519 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/08/20 12:58:36.324426 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 12:58:36.3074808 +0800 CST m=+34.422566601, startAt:2021-08-20 12:58:36.3074952 +0800 CST m=+34.422581001, currentStep:2, steps:[add learner peer 16 on container 13, promote learner peer 16 on container 13 to voter]) finished) finish, takes 16.921ms, 
2021/08/20 12:58:36.324470 [info] prophet: resource 4 ConfVer changed from 4 to 5
2021/08/20 12:58:36.325391 [info] prophet: resource 4 operator(add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:4(1,3), createAt:2021-08-20 12:58:36.3074448 +0800 CST m=+34.422530701, startAt:2021-08-20 12:58:36.307461 +0800 CST m=+34.422546901, currentStep:2, steps:[add learner peer 15 on container 13, promote learner peer 15 on container 13 to voter]) finished) finish, takes 17.9107ms, 
2021/08/20 12:58:36.342093 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 14 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:36.342120 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:36.342140 [info] [raftstore]: shard 4 peer 15 receiving snapshot, skip further handling
{"level":"error","ts":"2021-08-20T12:58:36.342+0800","caller":"raft/log.go:354","msg":"7 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:36.342179 [info] [transport]: shard 6 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<11>
{"level":"info","ts":"2021-08-20T12:58:36.342+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:36.342+0800","caller":"raft/raft.go:1550","msg":"e switched to configuration voters=(7 10 14)"}
{"level":"info","ts":"2021-08-20T12:58:36.342+0800","caller":"raft/raft.go:1503","msg":"e [commit: 11, lastindex: 11, lastterm: 6] restored snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:36.342+0800","caller":"raft/raft.go:1420","msg":"e [commit: 11] restored snapshot [index: 11, term: 6]"}
2021/08/20 12:58:36.342369 [info] [raftstore]: shard 6 peer 14 receiving snapshot, skip further handling
2021/08/20 12:58:36.342669 [info] [raftstore]: shard 6 try to send snap, header=<shard:<id:6 start:"c" end:"d" epoch:<confVer:5 version:1 > peers:<id:7 containerID:1 > peers:<id:10 containerID:9 > peers:<id:14 containerID:13 > > from:<id:7 containerID:1 > to:<id:14 containerID:13 role:Learner > term:6 index:11 >,size=<127>
2021/08/20 12:58:36.342714 [info] [raftstore]: shard 6 send snap complete
2021/08/20 12:58:36.342729 [info] [transport]: shard 6 pending snap sent succ, size=<127>, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 12:58:36.383643 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:38948->127.0.0.1:30000: use of closed network connection
2021/08/20 12:58:36.383661 [error] prophet: client read loop stopped
2021/08/20 12:58:36.383675 [error] prophet: session 5[127.0.0.1:39044] read failed with read tcp 127.0.0.1:30000->127.0.0.1:39044: use of closed network connection
2021/08/20 12:58:36.383685 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 12:58:36.383691 [error] prophet: session 6[127.0.0.1:39046] read failed with read tcp 127.0.0.1:30000->127.0.0.1:39046: use of closed network connection
2021/08/20 12:58:36.383695 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:36.383698 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:36.383699 [error] prophet: session 3[127.0.0.1:38980] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38980: use of closed network connection
2021/08/20 12:58:36.383710 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:36.383711 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:36.383711 [error] prophet: session 2[127.0.0.1:38950] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38950: use of closed network connection
2021/08/20 12:58:36.383716 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:36.383726 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 12:58:36.383732 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:36.383735 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:36.383727 [error] prophet: session 4[127.0.0.1:38982] read failed with read tcp 127.0.0.1:30000->127.0.0.1:38982: use of closed network connection
2021/08/20 12:58:36.383791 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:36.383808 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:36.383893 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:36.384874 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 12:58:36.384936 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/08/20 12:58:36.384950 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 12:58:36.384954 [info] prophet: patrol resources has been stopped 
2021/08/20 12:58:36.384955 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/08/20 12:58:36.384959 [info] prophet: drive push operator has been stopped 
2021/08/20 12:58:36.384960 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 12:58:36.384963 [info] prophet: coordinator is stopping
2021/08/20 12:58:36.384965 [info] prophet: coordinator has been stopped
2021/08/20 12:58:36.384974 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 12:58:36.384984 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/08/20 12:58:36.384991 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021-08-20 12:58:36.384994 I | etcdserver: 93ccda9956d988f4 starts leadership transfer from 93ccda9956d988f4 to f0572562892883bc
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:1278","msg":"93ccda9956d988f4 [term 2] starts to transfer leadership to f0572562892883bc"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:1284","msg":"93ccda9956d988f4 sends MsgTimeoutNow to f0572562892883bc immediately as f0572562892883bc already has up-to-date log"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:1372","msg":"f0572562892883bc [term 2] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:724","msg":"f0572562892883bc became candidate at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:835","msg":"f0572562892883bc received MsgVoteResp from f0572562892883bc at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:822","msg":"f0572562892883bc [logterm: 2, index: 40] sent MsgVote request to 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:822","msg":"f0572562892883bc [logterm: 2, index: 40] sent MsgVote request to 9fefd41eada7e762 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/node.go:331","msg":"raft.node: f0572562892883bc lost leader 93ccda9956d988f4 at term 3"}
2021/08/20 12:58:36.385416 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/08/20 12:58:36.385430 [info] prophet: [prophet-leader/node-2]/campaign: start
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:870","msg":"9fefd41eada7e762 [term: 2] received a MsgVote message with higher term from f0572562892883bc [term: 3]"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:711","msg":"9fefd41eada7e762 became follower at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:971","msg":"9fefd41eada7e762 [logterm: 2, index: 40, vote: 0] cast MsgVote for f0572562892883bc [logterm: 2, index: 40] at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/node.go:331","msg":"raft.node: 9fefd41eada7e762 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:870","msg":"93ccda9956d988f4 [term: 2] received a MsgVote message with higher term from f0572562892883bc [term: 3]"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.385+0800","caller":"raft/raft.go:971","msg":"93ccda9956d988f4 [logterm: 2, index: 40, vote: 0] cast MsgVote for f0572562892883bc [logterm: 2, index: 40] at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.386+0800","caller":"raft/node.go:331","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.386+0800","caller":"raft/raft.go:835","msg":"f0572562892883bc received MsgVoteResp from 9fefd41eada7e762 at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.386+0800","caller":"raft/raft.go:1319","msg":"f0572562892883bc has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:58:36.386+0800","caller":"raft/raft.go:776","msg":"f0572562892883bc became leader at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.386+0800","caller":"raft/node.go:325","msg":"raft.node: f0572562892883bc elected leader f0572562892883bc at term 3"}
{"level":"info","ts":"2021-08-20T12:58:36.386+0800","caller":"raft/node.go:325","msg":"raft.node: 9fefd41eada7e762 elected leader f0572562892883bc at term 3"}
{"level":"warn","ts":"2021-08-20T12:58:36.386+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e09b584e-82b8-4693-87f5-bb4d766a0c5c/127.0.0.1:40001","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-08-20T12:58:36.386+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader f0572562892883bc at term 3"}
2021/08/20 12:58:36.391009 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:36.413354 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/08/20 12:58:36.413373 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/08/20 12:58:36.414519 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/08/20 12:58:36.415727 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/08/20 12:58:36.415743 [info] prophet: ********node-1 become to leader now********
2021/08/20 12:58:36.417551 [info] prophet: load 3 containers, cost 1.7241ms
2021/08/20 12:58:36.417846 [info] prophet: load 3 resources, cost 281µs
2021/08/20 12:58:36.418427 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 12:58:36.418438 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 12:58:36.418739 [info] prophet: load 0 jobs
2021/08/20 12:58:36.481415 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/08/20 12:58:36.481437 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/08/20 12:58:36.481446 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/08/20 12:58:36.485535 [info] prophet: [prophet-leader/node-0]/loop: exit
2021-08-20 12:58:36.485559 I | etcdserver: 93ccda9956d988f4 finished leadership transfer from 93ccda9956d988f4 to f0572562892883bc (took 100.5645ms)
2021-08-20 12:58:36.485608 I | rafthttp: stopping peer f0572562892883bc...
2021-08-20 12:58:36.485836 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:36.485900 I | rafthttp: closed the TCP streaming connection with peer f0572562892883bc (stream MsgApp v2 writer)
2021-08-20 12:58:36.485913 I | rafthttp: stopped streaming with peer f0572562892883bc (writer)
2021-08-20 12:58:36.486100 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:36.486269 I | rafthttp: closed the TCP streaming connection with peer f0572562892883bc (stream Message writer)
2021-08-20 12:58:36.486282 I | rafthttp: stopped streaming with peer f0572562892883bc (writer)
2021-08-20 12:58:36.486291 I | rafthttp: stopped HTTP pipelining with peer f0572562892883bc
2021-08-20 12:58:36.486343 W | rafthttp: lost the TCP streaming connection with peer f0572562892883bc (stream MsgApp v2 reader)
2021-08-20 12:58:36.486356 E | rafthttp: failed to read f0572562892883bc on stream MsgApp v2 (context canceled)
2021-08-20 12:58:36.486358 I | rafthttp: peer f0572562892883bc became inactive (message send to peer failed)
2021-08-20 12:58:36.486366 I | rafthttp: stopped streaming with peer f0572562892883bc (stream MsgApp v2 reader)
2021-08-20 12:58:36.486391 W | rafthttp: lost the TCP streaming connection with peer f0572562892883bc (stream Message reader)
2021-08-20 12:58:36.486401 I | rafthttp: stopped streaming with peer f0572562892883bc (stream Message reader)
2021-08-20 12:58:36.486404 I | rafthttp: stopped peer f0572562892883bc
2021-08-20 12:58:36.486405 I | rafthttp: stopping peer 9fefd41eada7e762...
2021-08-20 12:58:36.486544 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:36.486699 I | rafthttp: closed the TCP streaming connection with peer 9fefd41eada7e762 (stream MsgApp v2 writer)
2021-08-20 12:58:36.486710 I | rafthttp: stopped streaming with peer 9fefd41eada7e762 (writer)
2021-08-20 12:58:36.486861 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:36.486877 I | rafthttp: closed the TCP streaming connection with peer 9fefd41eada7e762 (stream Message writer)
2021-08-20 12:58:36.486880 I | rafthttp: stopped streaming with peer 9fefd41eada7e762 (writer)
2021-08-20 12:58:36.486902 I | rafthttp: stopped HTTP pipelining with peer 9fefd41eada7e762
2021-08-20 12:58:36.486959 W | rafthttp: lost the TCP streaming connection with peer 9fefd41eada7e762 (stream MsgApp v2 reader)
2021-08-20 12:58:36.486976 E | rafthttp: failed to read 9fefd41eada7e762 on stream MsgApp v2 (context canceled)
2021-08-20 12:58:36.486979 I | rafthttp: peer 9fefd41eada7e762 became inactive (message send to peer failed)
2021-08-20 12:58:36.486990 I | rafthttp: stopped streaming with peer 9fefd41eada7e762 (stream MsgApp v2 reader)
2021-08-20 12:58:36.487013 W | rafthttp: lost the TCP streaming connection with peer 9fefd41eada7e762 (stream Message reader)
2021-08-20 12:58:36.487028 I | rafthttp: stopped streaming with peer 9fefd41eada7e762 (stream Message reader)
2021-08-20 12:58:36.487032 I | rafthttp: stopped peer 9fefd41eada7e762
2021-08-20 12:58:36.487084 E | rafthttp: failed to find member f0572562892883bc in cluster 6a4ade671189dc2f
2021-08-20 12:58:36.487127 E | rafthttp: failed to find member 9fefd41eada7e762 in cluster 6a4ade671189dc2f
2021-08-20 12:58:36.487153 E | rafthttp: failed to find member f0572562892883bc in cluster 6a4ade671189dc2f
2021-08-20 12:58:36.487194 E | rafthttp: failed to find member 9fefd41eada7e762 in cluster 6a4ade671189dc2f
2021-08-20 12:58:36.487207 E | rafthttp: failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node f0572562892883bc)
2021-08-20 12:58:36.487211 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021-08-20 12:58:36.487222 E | rafthttp: failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 9fefd41eada7e762)
2021-08-20 12:58:36.487233 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021/08/20 12:58:36.491466 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:36.491494 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:36.491496 [info] [raftstore]: shard 4 handle serve raft stopped
2021/08/20 12:58:36.491498 [info] [raftstore]: shard 6 handle serve raft stopped
2021/08/20 12:58:36.491505 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:58:36.491511 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:36.491514 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:36.491516 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:36.491553 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:36.491563 [info] [transport]: transfer stopped
2021/08/20 12:58:36.491578 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:36.491582 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:36.491584 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:36.491587 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:36.491590 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:36.491592 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:36.491596 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:36.491608 [info] [transport]: send raft worker stopped
2021/08/20 12:58:36.491626 [error] [transport]: session 2[127.0.0.1:36622] read failed with read tcp 127.0.0.1:10000->127.0.0.1:36622: use of closed network connection
2021/08/20 12:58:36.491659 [error] [transport]: session 1[127.0.0.1:36556] read failed with read tcp 127.0.0.1:10000->127.0.0.1:36556: use of closed network connection
2021/08/20 12:58:36.541604 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 12:58:36.541620 [info] [raftstore]: shard 4 raft tick stopped
2021/08/20 12:58:36.541622 [info] [raftstore]: shard 6 raft tick stopped
2021/08/20 12:58:36.584186 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:36.584205 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/08/20 12:58:36.584321 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:36.584379 [info] prophet: session 1[127.0.0.1:45482] connected
2021/08/20 12:58:36.584400 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/08/20 12:58:36.584458 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:36.584501 [info] prophet: container 9 heartbeat stream binded
2021/08/20 12:58:36.591123 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:36.691092 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:36.785333 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:36.785470 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:36.792089 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021-08-20 12:58:36.792506 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021/08/20 12:58:36.891038 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021-08-20 12:58:36.892244 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 12:58:36.942221 [error] [transport]: session 1[127.0.0.1:58870] read failed with read tcp 127.0.0.1:10001->127.0.0.1:58870: i/o timeout
2021/08/20 12:58:36.942233 [error] [transport]: session 2[127.0.0.1:58874] read failed with read tcp 127.0.0.1:10001->127.0.0.1:58874: i/o timeout
2021/08/20 12:58:36.942334 [error] [transport]: session 1[127.0.0.1:41324] read failed with read tcp 127.0.0.1:10002->127.0.0.1:41324: i/o timeout
2021/08/20 12:58:36.943523 [error] [transport]: session 2[127.0.0.1:41328] read failed with read tcp 127.0.0.1:10002->127.0.0.1:41328: i/o timeout
2021/08/20 12:58:36.986203 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:36.986366 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:36.991763 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:37.091824 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:37.186835 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:37.186901 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:37.191152 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:37.291187 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:934","msg":"c is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:724","msg":"c became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:835","msg":"c received MsgVoteResp from c at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:822","msg":"c [logterm: 6, index: 11] sent MsgVote request to 3 at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:822","msg":"c [logterm: 6, index: 11] sent MsgVote request to 10 at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:934","msg":"b is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:724","msg":"b became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:835","msg":"b received MsgVoteResp from b at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:822","msg":"b [logterm: 6, index: 11] sent MsgVote request to 5 at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:822","msg":"b [logterm: 6, index: 11] sent MsgVote request to f at term 7"}
2021/08/20 12:58:37.291741 [info] [transport]: session 3[127.0.0.1:41434] connected
2021/08/20 12:58:37.291749 [info] [transport]: connected to store 13
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:870","msg":"10 [term: 6] received a MsgVote message with higher term from c [term: 7]"}
2021/08/20 12:58:37.291900 [error] [transport]: shard 4 send msg shardID:4 from:<id:11 containerID:9 role:Learner > to:<id:5 containerID:1 > message:<type:MsgVoteMsgVote to:5 from:11 term:7 logTerm:6 index:11 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"b" end:"c"  from 11 to 5 failed with write tcp 127.0.0.1:36556->127.0.0.1:10000: write: broken pipe
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:711","msg":"10 became follower at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.291+0800","caller":"raft/raft.go:971","msg":"10 [logterm: 6, index: 11, vote: 0] cast MsgVote for c [logterm: 6, index: 11] at term 7"}
2021/08/20 12:58:37.292047 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
{"level":"info","ts":"2021-08-20T12:58:37.292+0800","caller":"raft/raft.go:855","msg":"f [logterm: 6, index: 10, vote: 0] ignored MsgVote from b [logterm: 6, index: 11] at term 6: lease is not expired (remaining ticks: 10)"}
2021/08/20 12:58:37.292094 [info] [raftstore]: shard 4 peer 15 receiving snapshot, skip further handling
2021/08/20 12:58:37.292386 [info] [transport]: connected to store 9
2021/08/20 12:58:37.292399 [info] [transport]: session 3[127.0.0.1:59052] connected
{"level":"info","ts":"2021-08-20T12:58:37.292+0800","caller":"raft/raft.go:835","msg":"c received MsgVoteResp from 10 at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.292+0800","caller":"raft/raft.go:1319","msg":"c has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:58:37.292+0800","caller":"raft/raft.go:776","msg":"c became leader at term 7"}
2021/08/20 12:58:37.292455 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 12:58:37.292510 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:58:37.292550 [error] [transport]: shard 2 send msg shardID:2 from:<id:12 containerID:9 role:Learner > to:<id:3 containerID:1 > message:<type:MsgAppMsgApp to:3 from:12 term:7 logTerm:6 index:11 entries:<Term:7 Index:12 Type:EntryNormalEntryNormal > commit:11 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 12 to 3 failed with not connected
2021/08/20 12:58:37.292624 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 1 commits, result <nil>
2021/08/20 12:58:37.292757 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 2 commits, result <nil>
2021/08/20 12:58:37.323196 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 add registration job by handleRaftReadyApply, completed
2021/08/20 12:58:37.384144 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/08/20 12:58:37.384271 [info] prophet: session 2[127.0.0.1:45582] connected
2021/08/20 12:58:37.384288 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/08/20 12:58:37.384290 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/08/20 12:58:37.384355 [info] prophet: new watcher 127.0.0.1:45582 added
2021/08/20 12:58:37.384490 [info] [raftstore]: start init event
2021/08/20 12:58:37.387741 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:37.387823 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:37.391054 [info] [raftstore]: shard 2 do apply change peer peer:<id:16 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:37.391076 [info] [raftstore]: shard-2 add peer {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:37.391+0800","caller":"raft/raft.go:1550","msg":"10 switched to configuration voters=(3 12 16)"}
2021/08/20 12:58:37.391143 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:37.491+0800","caller":"raft/raft.go:934","msg":"a is starting a new election at term 6"}
2021/08/20 12:58:37.491907 [error] prophet: client read resp from leader 127.0.0.1:30001 failed with read tcp 127.0.0.1:45482->127.0.0.1:30001: use of closed network connection
2021/08/20 12:58:37.491911 [error] prophet: client read loop stopped
{"level":"info","ts":"2021-08-20T12:58:37.491+0800","caller":"raft/raft.go:724","msg":"a became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.491+0800","caller":"raft/raft.go:835","msg":"a received MsgVoteResp from a at term 7"}
2021/08/20 12:58:37.491921 [error] prophet: session 2[127.0.0.1:45582] read failed with read tcp 127.0.0.1:30001->127.0.0.1:45582: use of closed network connection
{"level":"info","ts":"2021-08-20T12:58:37.491+0800","caller":"raft/raft.go:822","msg":"a [logterm: 6, index: 11] sent MsgVote request to 7 at term 7"}
{"level":"info","ts":"2021-08-20T12:58:37.491+0800","caller":"raft/raft.go:822","msg":"a [logterm: 6, index: 11] sent MsgVote request to e at term 7"}
2021/08/20 12:58:37.491936 [error] prophet: watcher read events failed with EOF
2021/08/20 12:58:37.491937 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:58:37.491991 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:58:37.492054 [error] [transport]: shard 6 send msg shardID:6 from:<id:10 containerID:9 role:Learner > to:<id:7 containerID:1 > message:<type:MsgVoteMsgVote to:7 from:10 term:7 logTerm:6 index:11 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"c" end:"d"  from 10 to 7 failed with not connected
2021/08/20 12:58:37.492124 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
{"level":"info","ts":"2021-08-20T12:58:37.492+0800","caller":"raft/raft.go:855","msg":"e [logterm: 6, index: 11, vote: 0] ignored MsgVote from a [logterm: 6, index: 11] at term 6: lease is not expired (remaining ticks: 10)"}
2021/08/20 12:58:37.492160 [error] [transport]: shard 2 send msg shardID:2 from:<id:12 containerID:9 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:12 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 12 to 3 failed with not connected
2021/08/20 12:58:37.492175 [info] [raftstore]: shard 6 begin to apply snapshot
2021/08/20 12:58:37.492187 [info] [raftstore]: shard 6 clear 0 meta keys and 0 raft keys
2021/08/20 12:58:37.492201 [info] [raftstore]: shard 6 apply snapshot state completed, apply state {AppliedIndex:11 TruncatedState:{Index:11 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:37.492211 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 14 start applying snapshot
2021/08/20 12:58:37.492219 [info] [raftstore]: shard 6 begin apply snapshot data
2021/08/20 12:58:37.492306 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 14 add registration job by handleRaftReadyApply
2021/08/20 12:58:37.492328 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 14 applying snapshot to set read 11
2021/08/20 12:58:37.492360 [info] [raftstore]: shard 6 snapshot is applied, shard=<{ID:6 Start:[99] End:[100] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:37.492411 [info] [raftstore]: shard 6 shard changed after apply snapshot, from=<{ID:6 Start:[99] End:[100] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:6 Start:[99] End:[100] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:37.492433 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 14 AdvanceApply with 11
2021/08/20 12:58:37.492444 [info] [raftstore]: shard 6 delete exists snap gz file /tmp/cube/node-2/snapshots/6_6_11.gz, header is shard:<id:6 start:"c" end:"d" epoch:<confVer:4 version:1 > peers:<id:14 containerID:13 role:Learner > peers:<id:7 containerID:1 > > from:<> to:<> term:6 index:11 
2021/08/20 12:58:37.492469 [info] [raftstore]: shard 6 apply snapshot data complete, {Term:6 Vote:0 Commit:11 XXX_unrecognized:[]}
2021/08/20 12:58:37.493512 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/08/20 12:58:37.493564 [info] prophet: coordinator stops running 
2021/08/20 12:58:37.493581 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
2021/08/20 12:58:37.493583 [info] prophet: coordinator is stopping
2021/08/20 12:58:37.493588 [info] prophet: coordinator has been stopped
2021/08/20 12:58:37.493575 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
2021-08-20 12:58:37.493605 I | etcdserver: f0572562892883bc starts leadership transfer from f0572562892883bc to 9fefd41eada7e762
{"level":"info","ts":"2021-08-20T12:58:37.493+0800","caller":"raft/raft.go:1278","msg":"f0572562892883bc [term 3] starts to transfer leadership to 9fefd41eada7e762"}
{"level":"info","ts":"2021-08-20T12:58:37.493+0800","caller":"raft/raft.go:1284","msg":"f0572562892883bc sends MsgTimeoutNow to 9fefd41eada7e762 immediately as 9fefd41eada7e762 already has up-to-date log"}
2021/08/20 12:58:37.493567 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
{"level":"info","ts":"2021-08-20T12:58:37.493+0800","caller":"raft/raft.go:1372","msg":"9fefd41eada7e762 [term 3] received MsgTimeoutNow from f0572562892883bc and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T12:58:37.493+0800","caller":"raft/raft.go:724","msg":"9fefd41eada7e762 became candidate at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.493+0800","caller":"raft/raft.go:835","msg":"9fefd41eada7e762 received MsgVoteResp from 9fefd41eada7e762 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.493+0800","caller":"raft/raft.go:822","msg":"9fefd41eada7e762 [logterm: 3, index: 45] sent MsgVote request to 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.493+0800","caller":"raft/raft.go:822","msg":"9fefd41eada7e762 [logterm: 3, index: 45] sent MsgVote request to f0572562892883bc at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.493+0800","caller":"raft/node.go:331","msg":"raft.node: 9fefd41eada7e762 lost leader f0572562892883bc at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.494+0800","caller":"raft/raft.go:870","msg":"f0572562892883bc [term: 3] received a MsgVote message with higher term from 9fefd41eada7e762 [term: 4]"}
{"level":"info","ts":"2021-08-20T12:58:37.494+0800","caller":"raft/raft.go:711","msg":"f0572562892883bc became follower at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.494+0800","caller":"raft/raft.go:971","msg":"f0572562892883bc [logterm: 3, index: 45, vote: 0] cast MsgVote for 9fefd41eada7e762 [logterm: 3, index: 45] at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.494+0800","caller":"raft/node.go:331","msg":"raft.node: f0572562892883bc lost leader f0572562892883bc at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.494+0800","caller":"raft/raft.go:835","msg":"9fefd41eada7e762 received MsgVoteResp from f0572562892883bc at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.494+0800","caller":"raft/raft.go:1319","msg":"9fefd41eada7e762 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:58:37.494+0800","caller":"raft/raft.go:776","msg":"9fefd41eada7e762 became leader at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.494+0800","caller":"raft/node.go:325","msg":"raft.node: 9fefd41eada7e762 elected leader 9fefd41eada7e762 at term 4"}
{"level":"info","ts":"2021-08-20T12:58:37.495+0800","caller":"raft/node.go:325","msg":"raft.node: f0572562892883bc elected leader 9fefd41eada7e762 at term 4"}
2021/08/20 12:58:37.588534 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:37.588662 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:58:37.590892 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/08/20 12:58:37.594131 [info] prophet: [prophet-leader/node-1]/loop: exit
2021-08-20 12:58:37.594153 I | etcdserver: f0572562892883bc finished leadership transfer from f0572562892883bc to 9fefd41eada7e762 (took 100.5441ms)
2021-08-20 12:58:37.594213 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:37.594230 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 12:58:37.594631 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:58:37.594648 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:37.594666 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:37.594687 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:37.594703 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:37.594708 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:37.594714 I | rafthttp: stopped peer 93ccda9956d988f4
2021-08-20 12:58:37.594717 I | rafthttp: stopping peer 9fefd41eada7e762...
2021-08-20 12:58:37.594830 I | rafthttp: closed the TCP streaming connection with peer 9fefd41eada7e762 (stream MsgApp v2 writer)
2021-08-20 12:58:37.594846 I | rafthttp: stopped streaming with peer 9fefd41eada7e762 (writer)
2021-08-20 12:58:37.594945 W | rafthttp: lost the TCP streaming connection with peer f0572562892883bc (stream MsgApp v2 reader)
2021-08-20 12:58:37.595013 W | rafthttp: lost the TCP streaming connection with peer f0572562892883bc (stream Message reader)
2021-08-20 12:58:37.595056 I | rafthttp: closed the TCP streaming connection with peer 9fefd41eada7e762 (stream Message writer)
2021-08-20 12:58:37.595063 I | rafthttp: stopped streaming with peer 9fefd41eada7e762 (writer)
2021-08-20 12:58:37.595098 I | rafthttp: stopped HTTP pipelining with peer 9fefd41eada7e762
2021-08-20 12:58:37.595176 W | rafthttp: lost the TCP streaming connection with peer 9fefd41eada7e762 (stream MsgApp v2 reader)
2021-08-20 12:58:37.595195 E | rafthttp: failed to read 9fefd41eada7e762 on stream MsgApp v2 (context canceled)
2021-08-20 12:58:37.595199 I | rafthttp: peer 9fefd41eada7e762 became inactive (message send to peer failed)
2021-08-20 12:58:37.595211 I | rafthttp: stopped streaming with peer 9fefd41eada7e762 (stream MsgApp v2 reader)
2021-08-20 12:58:37.595256 W | rafthttp: lost the TCP streaming connection with peer 9fefd41eada7e762 (stream Message reader)
2021-08-20 12:58:37.595270 I | rafthttp: stopped streaming with peer 9fefd41eada7e762 (stream Message reader)
2021-08-20 12:58:37.595275 I | rafthttp: stopped peer 9fefd41eada7e762
2021-08-20 12:58:37.595343 E | rafthttp: failed to find member 9fefd41eada7e762 in cluster 6a4ade671189dc2f
2021-08-20 12:58:37.595418 E | rafthttp: failed to find member 9fefd41eada7e762 in cluster 6a4ade671189dc2f
2021-08-20 12:58:37.595481 E | rafthttp: failed to dial f0572562892883bc on stream Message (peer f0572562892883bc failed to find local node 9fefd41eada7e762)
2021-08-20 12:58:37.595502 I | rafthttp: peer f0572562892883bc became inactive (message send to peer failed)
2021/08/20 12:58:37.600920 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:37.600936 [info] [raftstore]: shard 4 handle serve raft stopped
2021/08/20 12:58:37.600939 [info] [raftstore]: shard 6 handle serve raft stopped
2021/08/20 12:58:37.600967 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:58:37.600968 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:37.600970 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:37.600973 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:37.601019 [info] [transport]: transfer stopped
2021/08/20 12:58:37.601050 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:37.601056 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:37.601060 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:37.601063 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:37.601067 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:37.601071 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:37.601089 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:37.601111 [info] [transport]: send raft worker stopped
2021/08/20 12:58:37.601115 [error] [transport]: session 3[127.0.0.1:59052] read failed with read tcp 127.0.0.1:10001->127.0.0.1:59052: use of closed network connection
2021/08/20 12:58:37.601118 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:37.691217 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 12:58:37.691241 [info] [raftstore]: shard 4 raft tick stopped
2021/08/20 12:58:37.691244 [info] [raftstore]: shard 6 raft tick stopped
2021-08-20 12:58:37.697760 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021/08/20 12:58:37.785480 [error] prophet: reset watcher conn failed with client is closed, retry later
2021/08/20 12:58:37.788795 [error] prophet: reset leader connection failed with client is closed
2021/08/20 12:58:37.788839 [error] prophet: client read loop stopped
2021/08/20 12:58:37.788847 [error] prophet: container 13 heartbeat failed with client is closed
2021/08/20 12:58:37.788849 [error] [raftstore]: send store heartbeat failed with client is closed
2021-08-20 12:58:37.798426 W | rafthttp: failed to process raft message (raft: stopped)
2021-08-20 12:58:37.870455 W | rafthttp: lost the TCP streaming connection with peer f0572562892883bc (stream Message writer)
2021-08-20 12:58:37.897834 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 12:58:38.092379 [error] [transport]: session 3[127.0.0.1:41434] read failed with read tcp 127.0.0.1:10002->127.0.0.1:41434: i/o timeout
2021/08/20 12:58:38.281757 [error] [raftstore]: send store heartbeat failed with client is closed
2021/08/20 12:58:38.493363 [error] [raftstore]: >>>>>>>>>>>> shard 6 peer 14 add registration job by handleRaftReadyApply, completed
{"level":"warn","ts":"2021-08-20T12:58:38.601+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-176ccf4e-7ed2-4d7f-8259-d01e0721d5f3/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 12:58:38.601581 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"warn","ts":"2021-08-20T12:58:38.601+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-176ccf4e-7ed2-4d7f-8259-d01e0721d5f3/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/08/20 12:58:38.601628 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
WARNING: 2021/08/20 12:58:38 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
2021-08-20 12:58:38.601678 W | etcdserver: 9fefd41eada7e762 failed to transfer leadership (etcdserver: unhealthy cluster)
2021-08-20 12:58:38.601751 I | rafthttp: stopped HTTP pipelining with peer f0572562892883bc
2021-08-20 12:58:38.601796 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:38.601812 I | rafthttp: stopping peer f0572562892883bc...
2021-08-20 12:58:38.601962 I | rafthttp: closed the TCP streaming connection with peer f0572562892883bc (stream MsgApp v2 writer)
2021-08-20 12:58:38.601977 I | rafthttp: stopped streaming with peer f0572562892883bc (writer)
2021-08-20 12:58:38.601992 I | rafthttp: stopped streaming with peer f0572562892883bc (writer)
2021-08-20 12:58:38.602020 I | rafthttp: stopped HTTP pipelining with peer f0572562892883bc
2021-08-20 12:58:38.602064 I | rafthttp: stopped streaming with peer f0572562892883bc (stream MsgApp v2 reader)
2021-08-20 12:58:38.602096 I | rafthttp: stopped streaming with peer f0572562892883bc (stream Message reader)
2021-08-20 12:58:38.602127 I | rafthttp: stopped peer f0572562892883bc
2021-08-20 12:58:38.602132 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 12:58:38.602271 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:58:38.602287 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:38.602310 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:38.602340 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:38.602367 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:38.602393 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:38.602418 I | rafthttp: stopped peer 93ccda9956d988f4
2021/08/20 12:58:38.611912 [info] [raftstore]: shard 6 handle serve raft stopped
2021/08/20 12:58:38.611927 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:58:38.611930 [info] [raftstore]: shard 4 handle serve raft stopped
2021/08/20 12:58:38.611956 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:58:38.611964 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:58:38.611965 [info] [raftstore]: router event loop task stopped
2021/08/20 12:58:38.611972 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:58:38.612022 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:38.612036 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:38.612038 [info] [transport]: transfer stopped
2021/08/20 12:58:38.612042 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:38.612042 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:38.612038 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:38.612050 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:38.612052 [info] [transport]: send snapshot worker stopped
2021/08/20 12:58:38.612057 [info] [transport]: send raft worker stopped
2021/08/20 12:58:38.612038 [info] [transport]: send snapshot worker stopped
--- PASS: TestIssue133 (9.65s)
=== RUN   TestShardPool
2021/08/20 12:58:38.612940 [info] prophet: prophet logger set
2021/08/20 12:58:38.613665 [info] [raftstore]: start scan gc snap files
2021/08/20 12:58:38.613978 [info] [raftstore]: start scan gc snap files
2021/08/20 12:58:38.614241 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:38.614256 [info] [raftstore]: begin to start prophet
2021/08/20 12:58:38.614275 [info] [raftstore]: start scan gc snap files
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:38.614327 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:38.614373 I | embed: name = node-0
2021-08-20 12:58:38.614388 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 12:58:38.614391 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 12:58:38.614393 I | embed: heartbeat = 100ms
2021-08-20 12:58:38.614395 I | embed: election = 3000ms
2021-08-20 12:58:38.614397 I | embed: snapshot count = 100000
2021-08-20 12:58:38.614402 I | embed: advertise client URLs = http://127.0.0.1:40000
2021-08-20 12:58:38.619124 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:38.619+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:38.619+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:38.619+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T12:58:38.619+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T12:58:38.619+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:38.621100 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:38.624180 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:38.624273 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
{"level":"info","ts":"2021-08-20T12:58:38.624+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:38.624555 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:38.624592 I | embed: listening for peers on 127.0.0.1:50000
2021/08/20 12:58:38.691891 [info] [raftstore]: shard 6 raft tick stopped
2021/08/20 12:58:38.691907 [info] [raftstore]: shard 2 raft tick stopped
{"level":"info","ts":"2021-08-20T12:58:41.020+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T12:58:41.020+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T12:58:41.020+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:41.020+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T12:58:41.020+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 12:58:41.020489 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:41.020519 I | embed: ready to serve client requests
2021-08-20 12:58:41.020609 I | etcdserver: setting up the initial cluster version to 3.4
2021/08/20 12:58:41.020614 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 12:58:41.020822 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021-08-20 12:58:41.021086 N | etcdserver/membership: set the initial cluster version to 3.4
2021/08/20 12:58:41.021949 [info] prophet: net application started
2021/08/20 12:58:41.021968 [info] prophet: start system time monitor 
2021/08/20 12:58:41.022329 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 12:58:41.022480 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 12:58:41.022500 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 12:58:41.022729 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 12:58:41.023237 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 12:58:41.023257 [info] prophet: ********node-0 become to leader now********
2021/08/20 12:58:41.023718 [info] prophet: load 0 containers, cost 409.4µs
2021/08/20 12:58:41.023889 [info] prophet: load 0 resources, cost 158.8µs
2021/08/20 12:58:41.024401 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:41.024410 [info] prophet: client read loop started 
2021/08/20 12:58:41.024412 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 12:58:41.024419 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 12:58:41.024421 [info] prophet: coordinator starts to run schedulers 
2021/08/20 12:58:41.024442 [info] prophet: client started
2021/08/20 12:58:41.024455 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 12:58:41.024456 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:41.024467 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:41.024479 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:41.024471 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435521 deployPath:"not set" 
2021/08/20 12:58:41.024486 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:41.024496 [info] prophet: session 1[127.0.0.1:39340] connected
2021/08/20 12:58:41.024854 [info] prophet: load 0 jobs
2021/08/20 12:58:41.025122 [info] [raftstore]: create local store with id 1
2021/08/20 12:58:41.025656 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 12:58:41.025666 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 12:58:41.025694 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 12:58:41.025704 [info] prophet: coordinator starts patrol resources 
2021/08/20 12:58:41.025873 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 12:58:41.027093 [info] prophet: container 1 limit added
2021/08/20 12:58:41.027202 [info] [raftstore]: prophet started
2021/08/20 12:58:41.027255 [info] [transport]: net application started
2021/08/20 12:58:41.027271 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 12:58:41.027274 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:41.027260 [info] prophet: container 1 heartbeat stream binded
2021/08/20 12:58:41.027293 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:41.027311 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:41.027313 [info] [raftstore]: shard 2 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:58:41.027+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-08-20T12:58:41.027+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:41.027+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:41.027352 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:41.027403 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T12:58:41.027+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:41.027+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:41.027+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T12:58:41.027+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 12:58:41.027460 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 12:58:41.027483 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 12:58:41.027526 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:41.027538 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:41.027539 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:41.027541 [info] [raftstore]: shards started
2021/08/20 12:58:41.027544 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:41.027551 [info] [raftstore]: net application started
2021/08/20 12:58:41.027559 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 12:58:41.027566 [info] [raftstore]: router started
2021/08/20 12:58:41.027601 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:41.027664 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:41.027674 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:41.027685 [info] [raftstore]: router event loop task started
2021/08/20 12:58:41.027687 [info] prophet: session 2[127.0.0.1:39342] connected
2021/08/20 12:58:41.027698 [info] prophet: new watcher 127.0.0.1:39342 added
2021/08/20 12:58:41.027744 [info] [raftstore]: start init event
2021/08/20 12:58:41.028363 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:41.028372 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-08-20T12:58:41.028+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(9415029686283246829 10650127570946328820)"}
2021-08-20 12:58:41.029002 I | etcdserver/membership: added member 82a8e79de0ab9ced [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 12:58:41.029016 I | rafthttp: starting peer 82a8e79de0ab9ced...
2021-08-20 12:58:41.029030 I | rafthttp: started HTTP pipelining with peer 82a8e79de0ab9ced
2021-08-20 12:58:41.029196 I | rafthttp: started streaming with peer 82a8e79de0ab9ced (writer)
2021-08-20 12:58:41.029258 I | rafthttp: started streaming with peer 82a8e79de0ab9ced (writer)
2021-08-20 12:58:41.029291 I | rafthttp: started peer 82a8e79de0ab9ced
2021-08-20 12:58:41.029305 I | rafthttp: added peer 82a8e79de0ab9ced
2021-08-20 12:58:41.029311 I | rafthttp: started streaming with peer 82a8e79de0ab9ced (stream MsgApp v2 reader)
2021-08-20 12:58:41.029325 I | rafthttp: started streaming with peer 82a8e79de0ab9ced (stream Message reader)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:41.029706 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:41.029728 I | embed: name = node-1
2021-08-20 12:58:41.029739 I | embed: data dir = /tmp/cube/node-1/prophet
2021-08-20 12:58:41.029741 I | embed: member dir = /tmp/cube/node-1/prophet/member
2021-08-20 12:58:41.029742 I | embed: heartbeat = 100ms
2021-08-20 12:58:41.029744 I | embed: election = 3000ms
2021-08-20 12:58:41.029745 I | embed: snapshot count = 100000
2021-08-20 12:58:41.029748 I | embed: advertise client URLs = http://127.0.0.1:40001
2021-08-20 12:58:41.034060 I | etcdserver: starting member 82a8e79de0ab9ced in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:41.034+0800","caller":"raft/raft.go:1550","msg":"82a8e79de0ab9ced switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:41.034+0800","caller":"raft/raft.go:711","msg":"82a8e79de0ab9ced became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:41.034+0800","caller":"raft/raft.go:388","msg":"newRaft 82a8e79de0ab9ced [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 12:58:41.035797 W | auth: simple token is not cryptographically signed
2021/08/20 12:58:41.037746 [info] [raftstore]: shard 2 ********become leader now********
2021-08-20 12:58:41.039094 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:41.039108 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 12:58:41.039114 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:41.039307 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:41.039371 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 12:58:41.039383 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:41.039388 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:41.039402 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 12:58:41.039407 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:41.039410 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:41.039650 I | rafthttp: peer 82a8e79de0ab9ced became active
2021-08-20 12:58:41.039670 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 12:58:41.039674 I | rafthttp: established a TCP streaming connection with peer 82a8e79de0ab9ced (stream Message writer)
2021-08-20 12:58:41.039684 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:41.039686 I | embed: listening for peers on 127.0.0.1:50001
2021-08-20 12:58:41.039708 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:41.039727 I | rafthttp: established a TCP streaming connection with peer 82a8e79de0ab9ced (stream MsgApp v2 writer)
{"level":"info","ts":"2021-08-20T12:58:41.039+0800","caller":"raft/raft.go:870","msg":"82a8e79de0ab9ced [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T12:58:41.039+0800","caller":"raft/raft.go:711","msg":"82a8e79de0ab9ced became follower at term 2"}
{"level":"info","ts":"2021-08-20T12:58:41.039+0800","caller":"raft/node.go:325","msg":"raft.node: 82a8e79de0ab9ced elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T12:58:41.041+0800","caller":"raft/raft.go:1550","msg":"82a8e79de0ab9ced switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:41.041152 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:41.041190 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T12:58:41.041+0800","caller":"raft/raft.go:1550","msg":"82a8e79de0ab9ced switched to configuration voters=(9415029686283246829 10650127570946328820)"}
2021-08-20 12:58:41.041697 I | etcdserver/membership: added member 82a8e79de0ab9ced [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 12:58:41.042506 I | etcdserver: published {Name:node-1 ClientURLs:[http://127.0.0.1:40001]} to cluster 6a4ade671189dc2f
2021/08/20 12:58:41.042525 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
2021-08-20 12:58:41.042524 I | embed: ready to serve client requests
2021-08-20 12:58:41.042738 N | embed: serving insecure client requests on 127.0.0.1:40001, this is strongly discouraged!
2021/08/20 12:58:41.043390 [info] prophet: net application started
2021/08/20 12:58:41.043432 [info] prophet: start system time monitor 
2021/08/20 12:58:41.043792 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 12:58:41.043803 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:41.043806 [info] prophet: ********node-1 become to follower now********
2021/08/20 12:58:41.043833 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:41.043846 [info] prophet: client read loop started 
2021/08/20 12:58:41.043868 [info] prophet: client started
2021/08/20 12:58:41.043883 [info] prophet: session 3[127.0.0.1:39374] connected
2021/08/20 12:58:41.043888 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 12:58:41.043890 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:41.043907 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1629435521 deployPath:"not set" 
2021/08/20 12:58:41.043924 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:41.043888 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:41.043971 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:41.044027 [info] [raftstore]: create local store with id 5
2021/08/20 12:58:41.044479 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 12:58:41.047135 [info] prophet: container 5 limit added
2021/08/20 12:58:41.047175 [info] [raftstore]: prophet started
2021/08/20 12:58:41.047188 [info] prophet: container 5 heartbeat stream binded
2021/08/20 12:58:41.047218 [info] [transport]: net application started
2021/08/20 12:58:41.047230 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/08/20 12:58:41.047232 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:41.047235 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:41.047237 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:41.047238 [info] [raftstore]: shards started
2021/08/20 12:58:41.047239 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:41.047243 [info] [raftstore]: net application started
2021/08/20 12:58:41.047244 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/08/20 12:58:41.047247 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:41.047260 [info] [raftstore]: router started
2021/08/20 12:58:41.047269 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:41.047322 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:41.047339 [info] [raftstore]: router event loop task started
2021/08/20 12:58:41.047341 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:41.047348 [info] prophet: session 4[127.0.0.1:39376] connected
2021/08/20 12:58:41.047382 [info] prophet: new watcher 127.0.0.1:39376 added
2021/08/20 12:58:41.047434 [info] [raftstore]: start init event
2021/08/20 12:58:41.049078 [info] [raftstore]: begin start raftstore
2021/08/20 12:58:41.049088 [info] [raftstore]: begin to start prophet
2021-08-20 12:58:41.049550 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:6fdef9ab2d252bbd RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:41.049+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-39a731d5-42df-4dac-91e4-af9aa57ad1af/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:41.049649 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:41.126688 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 12:58:41.1266695 +0800 CST m=+39.241755401, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/08/20 12:58:41.126708 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/08/20 12:58:41.126781 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:41.127871 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:41.127962 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source heartbeat
2021/08/20 12:58:41.127990 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:41.127998 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:41.128073 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021-08-20 12:58:41.130375 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 12:58:41.130387 I | rafthttp: established a TCP streaming connection with peer 82a8e79de0ab9ced (stream Message reader)
2021-08-20 12:58:41.130397 I | rafthttp: established a TCP streaming connection with peer 82a8e79de0ab9ced (stream MsgApp v2 reader)
2021-08-20 12:58:41.130401 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
{"level":"info","ts":"2021-08-20T12:58:41.137+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/08/20 12:58:41.137898 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 116 190 141 12 27 99 67 15 169 144 84 217 63 187 9 150 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:41.137908 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:41.137937 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:41.138051 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:41.138143 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/08/20 12:58:41.138307 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:41.140477 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/08/20 12:58:41.140524 [info] [transport]: connected to store 5
2021/08/20 12:58:41.140540 [info] [transport]: session 1[127.0.0.1:59264] connected
2021/08/20 12:58:41.140574 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 12:58:41.140584 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:41.140589 [info] [raftstore]: shard 2 replicate peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:41.140606 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:41.140617 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:41.140618 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T12:58:41.140+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:41.140+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:41.140+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:41.140691 [info] [raftstore]: shard 2 added with peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:58:41.140+0800","caller":"raft/raft.go:870","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:41.140+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 6"}
2021/08/20 12:58:41.140817 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:41.141266 [info] [transport]: connected to store 1
2021/08/20 12:58:41.141282 [info] [transport]: session 1[127.0.0.1:36950] connected
2021/08/20 12:58:41.141323 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:41.141385 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:41.141393 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:41.141410 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T12:58:41.141+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:41.141457 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T12:58:41.141+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6)"}
{"level":"error","ts":"2021-08-20T12:58:41.141+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:41.141625 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 237 123 231 149 81 62 67 218 186 97 149 250 81 115 137 8 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:41.141640 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:41.141719 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/08/20 12:58:41.141753 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T12:58:41.141+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:41.141836 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<9> 
2021/08/20 12:58:41.142584 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 12:58:41.1266695 +0800 CST m=+39.241755401, startAt:2021-08-20 12:58:41.1267029 +0800 CST m=+39.241788801, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 15.8682ms, 
2021/08/20 12:58:41.291499 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T12:58:41.291+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:41.291630 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 12:58:41.292287 [info] [transport]: session 2[127.0.0.1:59268] connected
2021/08/20 12:58:41.292329 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:9 >,size=<126>
2021/08/20 12:58:41.292331 [info] [transport]: connected to store 5
2021/08/20 12:58:41.292393 [info] [raftstore]: shard 2 send snap complete
2021/08/20 12:58:41.292423 [info] [transport]: shard 2 pending snap sent succ, size=<126>, epoch=<confVer:3 version:1 > term=<6> index=<9>
{"level":"info","ts":"2021-08-20T12:58:41.292+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:41.292+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-08-20T12:58:41.292+0800","caller":"raft/raft.go:1503","msg":"6 [commit: 9, lastindex: 9, lastterm: 6] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:41.292+0800","caller":"raft/raft.go:1420","msg":"6 [commit: 9] restored snapshot [index: 9, term: 6]"}
2021/08/20 12:58:41.292752 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 12:58:41.292783 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 12:58:41.292811 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:9 TruncatedState:{Index:9 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:41.292853 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 start applying snapshot
2021/08/20 12:58:41.292864 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 12:58:41.293290 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_9.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:9 
2021/08/20 12:58:41.293370 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:9 XXX_unrecognized:[]}
2021/08/20 12:58:41.293392 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply
2021/08/20 12:58:41.293418 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply, completed
2021/08/20 12:58:41.293439 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 applying snapshot to set read 9
2021/08/20 12:58:41.293483 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:41.293541 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:41.293558 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 AdvanceApply with 9
2021-08-20 12:58:41.549911 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:6fdef9ab2d252bbd RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:41.550+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-39a731d5-42df-4dac-91e4-af9aa57ad1af/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:41.550061 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 12:58:41.601736 [info] prophet: [prophet-leader/node-2]/loop: exit
2021-08-20 12:58:42.050294 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:68510d683477288 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:42.050+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-39a731d5-42df-4dac-91e4-af9aa57ad1af/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:42.050441 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:42.551488 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:68510d683477288 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:42.551+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-39a731d5-42df-4dac-91e4-af9aa57ad1af/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:42.551636 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:43.052660 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:22f2feb89de0eab1 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:43.052+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-39a731d5-42df-4dac-91e4-af9aa57ad1af/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:43.052777 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:43.553012 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:22f2feb89de0eab1 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:43.553+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-39a731d5-42df-4dac-91e4-af9aa57ad1af/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:43.553161 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:44.053847 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:308b50de4d17e4f4 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:44.053+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-39a731d5-42df-4dac-91e4-af9aa57ad1af/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:44.053986 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:44.554966 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:308b50de4d17e4f4 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:44.555+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-39a731d5-42df-4dac-91e4-af9aa57ad1af/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:44.555097 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:45.055468 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:ab90e57e5f00d496 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:45.055+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-39a731d5-42df-4dac-91e4-af9aa57ad1af/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:45.055591 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 12:58:45.556191 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:ab90e57e5f00d496 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T12:58:45.556+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-39a731d5-42df-4dac-91e4-af9aa57ad1af/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 12:58:45.556336 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-08-20T12:58:46.057+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(9415029686283246829 10650127570946328820 13235940980773017247)"}
{"level":"info","ts":"2021-08-20T12:58:46.057+0800","caller":"raft/raft.go:1550","msg":"82a8e79de0ab9ced switched to configuration voters=(9415029686283246829 10650127570946328820 13235940980773017247)"}
2021-08-20 12:58:46.057865 I | etcdserver/membership: added member b7af8231eb02d69f [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:46.057896 I | rafthttp: starting peer b7af8231eb02d69f...
2021-08-20 12:58:46.057913 I | rafthttp: started HTTP pipelining with peer b7af8231eb02d69f
2021-08-20 12:58:46.057970 I | etcdserver/membership: added member b7af8231eb02d69f [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:46.057983 I | rafthttp: starting peer b7af8231eb02d69f...
2021-08-20 12:58:46.057993 I | rafthttp: started HTTP pipelining with peer b7af8231eb02d69f
2021-08-20 12:58:46.058153 I | rafthttp: started streaming with peer b7af8231eb02d69f (writer)
2021-08-20 12:58:46.058253 I | rafthttp: started streaming with peer b7af8231eb02d69f (writer)
2021-08-20 12:58:46.058321 I | rafthttp: started streaming with peer b7af8231eb02d69f (writer)
2021-08-20 12:58:46.058398 I | rafthttp: started streaming with peer b7af8231eb02d69f (writer)
2021-08-20 12:58:46.058503 I | rafthttp: started peer b7af8231eb02d69f
2021-08-20 12:58:46.058520 I | rafthttp: added peer b7af8231eb02d69f
2021-08-20 12:58:46.058524 I | rafthttp: started streaming with peer b7af8231eb02d69f (stream MsgApp v2 reader)
2021-08-20 12:58:46.058530 I | rafthttp: started streaming with peer b7af8231eb02d69f (stream Message reader)
2021-08-20 12:58:46.058578 I | rafthttp: started peer b7af8231eb02d69f
2021-08-20 12:58:46.058593 I | rafthttp: started streaming with peer b7af8231eb02d69f (stream MsgApp v2 reader)
2021-08-20 12:58:46.058596 I | rafthttp: started streaming with peer b7af8231eb02d69f (stream Message reader)
2021-08-20 12:58:46.058629 I | rafthttp: added peer b7af8231eb02d69f
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 12:58:46.059146 I | embed: pprof is enabled under /debug/pprof
2021-08-20 12:58:46.059174 I | embed: name = node-2
2021-08-20 12:58:46.059205 I | embed: data dir = /tmp/cube/node-2/prophet
2021-08-20 12:58:46.059207 I | embed: member dir = /tmp/cube/node-2/prophet/member
2021-08-20 12:58:46.059208 I | embed: heartbeat = 100ms
2021-08-20 12:58:46.059210 I | embed: election = 3000ms
2021-08-20 12:58:46.059211 I | embed: snapshot count = 100000
2021-08-20 12:58:46.059213 I | embed: advertise client URLs = http://127.0.0.1:40002
2021-08-20 12:58:46.064125 I | etcdserver: starting member b7af8231eb02d69f in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:46.064+0800","caller":"raft/raft.go:1550","msg":"b7af8231eb02d69f switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:46.064+0800","caller":"raft/raft.go:711","msg":"b7af8231eb02d69f became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:46.064+0800","caller":"raft/raft.go:388","msg":"newRaft b7af8231eb02d69f [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 12:58:46.065780 W | auth: simple token is not cryptographically signed
2021-08-20 12:58:46.068722 I | rafthttp: started HTTP pipelining with peer 82a8e79de0ab9ced
2021-08-20 12:58:46.068738 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:46.068743 I | rafthttp: starting peer 82a8e79de0ab9ced...
2021-08-20 12:58:46.068751 I | rafthttp: started HTTP pipelining with peer 82a8e79de0ab9ced
2021-08-20 12:58:46.068973 I | rafthttp: started streaming with peer 82a8e79de0ab9ced (writer)
2021-08-20 12:58:46.069111 I | rafthttp: started streaming with peer 82a8e79de0ab9ced (writer)
2021-08-20 12:58:46.069315 I | rafthttp: started peer 82a8e79de0ab9ced
2021-08-20 12:58:46.069327 I | rafthttp: added peer 82a8e79de0ab9ced
2021-08-20 12:58:46.069329 I | rafthttp: started streaming with peer 82a8e79de0ab9ced (stream MsgApp v2 reader)
2021-08-20 12:58:46.069337 I | rafthttp: started streaming with peer 82a8e79de0ab9ced (stream Message reader)
2021-08-20 12:58:46.069385 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 12:58:46.069401 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:58:46.069540 I | rafthttp: peer b7af8231eb02d69f became active
2021-08-20 12:58:46.069556 I | rafthttp: established a TCP streaming connection with peer b7af8231eb02d69f (stream Message writer)
2021-08-20 12:58:46.069559 I | rafthttp: peer 82a8e79de0ab9ced became active
2021-08-20 12:58:46.069569 I | rafthttp: established a TCP streaming connection with peer 82a8e79de0ab9ced (stream Message reader)
2021-08-20 12:58:46.069576 I | rafthttp: established a TCP streaming connection with peer 82a8e79de0ab9ced (stream MsgApp v2 reader)
2021-08-20 12:58:46.069613 I | rafthttp: established a TCP streaming connection with peer b7af8231eb02d69f (stream MsgApp v2 writer)
2021-08-20 12:58:46.069633 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:46.069856 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:58:46.070065 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 12:58:46.070078 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 12:58:46.070082 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 12:58:46.070086 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:46.070094 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:46.070304 I | rafthttp: peer b7af8231eb02d69f became active
2021-08-20 12:58:46.070329 I | rafthttp: established a TCP streaming connection with peer b7af8231eb02d69f (stream Message writer)
2021-08-20 12:58:46.070333 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 12:58:46.070338 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:58:46.070351 I | embed: listening for peers on 127.0.0.1:50002
2021-08-20 12:58:46.070409 I | rafthttp: established a TCP streaming connection with peer b7af8231eb02d69f (stream MsgApp v2 writer)
2021-08-20 12:58:46.070428 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:58:46.100122 I | etcdserver: 82a8e79de0ab9ced initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
{"level":"info","ts":"2021-08-20T12:58:46.119+0800","caller":"raft/raft.go:870","msg":"b7af8231eb02d69f [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T12:58:46.119+0800","caller":"raft/raft.go:711","msg":"b7af8231eb02d69f became follower at term 2"}
{"level":"info","ts":"2021-08-20T12:58:46.119+0800","caller":"raft/node.go:325","msg":"raft.node: b7af8231eb02d69f elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 12:58:46.120627 I | etcdserver: b7af8231eb02d69f initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
{"level":"info","ts":"2021-08-20T12:58:46.121+0800","caller":"raft/raft.go:1550","msg":"b7af8231eb02d69f switched to configuration voters=(10650127570946328820)"}
2021-08-20 12:58:46.121666 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 12:58:46.121706 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T12:58:46.122+0800","caller":"raft/raft.go:1550","msg":"b7af8231eb02d69f switched to configuration voters=(9415029686283246829 10650127570946328820)"}
2021-08-20 12:58:46.122086 I | etcdserver/membership: added member 82a8e79de0ab9ced [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T12:58:46.122+0800","caller":"raft/raft.go:1550","msg":"b7af8231eb02d69f switched to configuration voters=(9415029686283246829 10650127570946328820 13235940980773017247)"}
2021-08-20 12:58:46.122326 I | etcdserver/membership: added member b7af8231eb02d69f [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 12:58:46.122882 I | etcdserver: published {Name:node-2 ClientURLs:[http://127.0.0.1:40002]} to cluster 6a4ade671189dc2f
2021-08-20 12:58:46.122896 I | embed: ready to serve client requests
2021/08/20 12:58:46.122900 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
2021-08-20 12:58:46.123098 N | embed: serving insecure client requests on 127.0.0.1:40002, this is strongly discouraged!
2021/08/20 12:58:46.123679 [info] prophet: start system time monitor 
2021/08/20 12:58:46.123687 [info] prophet: net application started
2021/08/20 12:58:46.124089 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 12:58:46.124099 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 12:58:46.124101 [info] prophet: ********node-2 become to follower now********
2021/08/20 12:58:46.124123 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:46.124131 [info] prophet: client read loop started 
2021/08/20 12:58:46.124179 [info] prophet: client started
2021/08/20 12:58:46.124190 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 12:58:46.124191 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 12:58:46.124179 [info] prophet: session 5[127.0.0.1:39436] connected
2021/08/20 12:58:46.124199 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:46.124203 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:58:46.124205 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1629435526 deployPath:"not set" 
2021/08/20 12:58:46.124206 [info] [raftstore]: begin to create local store metadata
2021/08/20 12:58:46.124294 [info] [raftstore]: create local store with id 7
2021/08/20 12:58:46.124713 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 12:58:46.126629 [info] prophet: container 7 limit added
2021/08/20 12:58:46.126688 [info] [raftstore]: prophet started
2021/08/20 12:58:46.126705 [info] prophet: container 7 heartbeat stream binded
2021/08/20 12:58:46.126729 [info] [transport]: net application started
2021/08/20 12:58:46.126741 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/08/20 12:58:46.126744 [info] [raftstore]: raft shards workers started
2021/08/20 12:58:46.126746 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 12:58:46.126747 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 12:58:46.126748 [info] [raftstore]: shards started
2021/08/20 12:58:46.126750 [info] [raftstore]: shard timer based tasks started
2021/08/20 12:58:46.126754 [info] [raftstore]: net application started
2021/08/20 12:58:46.126755 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/08/20 12:58:46.126762 [info] [raftstore]: router started
2021/08/20 12:58:46.126777 [info] [raftstore]: raft worker 0/0 start
2021/08/20 12:58:46.126784 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:58:46.126791 [info] [raftstore]: router event loop task started
2021/08/20 12:58:46.126854 [info] prophet: session 6[127.0.0.1:39438] connected
2021/08/20 12:58:46.126871 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 12:58:46.126876 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 12:58:46.126941 [info] prophet: new watcher 127.0.0.1:39438 added
2021/08/20 12:58:46.127007 [info] [raftstore]: start init event
2021/08/20 12:58:46.129938 [info] [raftstore]: dynamic shards pool job started
2021/08/20 12:58:46.130958 [info] prophet: resource 8 created with peers [{ID:9 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.132057 [info] [raftstore]: shard 8 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.132068 [info] [raftstore]: shard 8 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.132073 [info] [raftstore]: shard 8 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:46.132074 [info] [raftstore]: shard 8 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:46.132074 [info] [raftstore]: shard 8 init last term, last term=<5>
2021/08/20 12:58:46.132074 [info] [raftstore]: shard 8 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.132081 [info] [raftstore]: shard 8 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:46.132082 [info] [raftstore]: shard 8 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:1550","msg":"9 switched to configuration voters=(9 10 11)"}
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(9 10 11)"}
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:711","msg":"9 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:711","msg":"b became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:388","msg":"newRaft 9 [peers: [9,a,b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:388","msg":"newRaft b [peers: [9,a,b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:46.132117 [info] [raftstore]: shard 8 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 6"}
2021/08/20 12:58:46.132132 [info] [raftstore]: shard 8 added with peer {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:9 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:46.132075 [info] [raftstore]: shard 8 init last term, last term=<5>
2021/08/20 12:58:46.132157 [info] [raftstore]: create init shard id:8 start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" epoch:<confVer:3 > state:WaittingCreate peers:<id:9 containerID:7 > peers:<id:10 containerID:5 > peers:<id:11 containerID:1 > unique:"1-0-1" 
2021/08/20 12:58:46.132175 [error] [raftstore]: >>>>>>>>>>>> shard 8 peer 11 add registration job by doCreate
2021/08/20 12:58:46.132180 [error] [raftstore]: >>>>>>>>>>>> shard 8 peer 11 add registration job by doCreate, completed
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 5, index: 5] sent MsgVote request to a at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 5, index: 5] sent MsgVote request to b at term 6"}
2021/08/20 12:58:46.132204 [info] [raftstore]: shard 8 added with peer {ID:9 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:9 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=(9 10 11)"}
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:711","msg":"a became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:46.132+0800","caller":"raft/raft.go:388","msg":"newRaft a [peers: [9,a,b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:46.132232 [info] [raftstore]: create init shard id:8 start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" epoch:<confVer:3 > state:WaittingCreate peers:<id:9 containerID:7 > peers:<id:10 containerID:5 > peers:<id:11 containerID:1 > unique:"1-0-1" 
2021/08/20 12:58:46.132339 [error] [raftstore]: >>>>>>>>>>>> shard 8 peer 9 add registration job by doCreate
2021/08/20 12:58:46.132285 [error] [raftstore]: >>>>>>>>>>>> shard 8 peer 9 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:46.132356 [error] [raftstore]: >>>>>>>>>>>> shard 8 peer 9 add registration job by doCreate, completed
2021/08/20 12:58:46.132314 [info] [raftstore]: shard 8 added with peer {ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:9 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:46.132388 [info] [raftstore]: create init shard id:8 start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" epoch:<confVer:3 > state:WaittingCreate peers:<id:9 containerID:7 > peers:<id:10 containerID:5 > peers:<id:11 containerID:1 > unique:"1-0-1" 
2021/08/20 12:58:46.132397 [error] [raftstore]: >>>>>>>>>>>> shard 8 peer 10 add registration job by doCreate
2021/08/20 12:58:46.132401 [error] [raftstore]: >>>>>>>>>>>> shard 8 peer 10 add registration job by doCreate, completed
2021/08/20 12:58:46.133245 [info] prophet: resource 12 created with peers [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.133486 [info] [transport]: connected to store 5
2021/08/20 12:58:46.133516 [info] [transport]: session 3[127.0.0.1:59320] connected
{"level":"info","ts":"2021-08-20T12:58:46.133+0800","caller":"raft/raft.go:870","msg":"a [term: 5] received a MsgVote message with higher term from 9 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:46.133+0800","caller":"raft/raft.go:711","msg":"a became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.133+0800","caller":"raft/raft.go:971","msg":"a [logterm: 5, index: 5, vote: 0] cast MsgVote for 9 [logterm: 5, index: 5] at term 6"}
2021/08/20 12:58:46.134596 [info] [raftstore]: shard 12 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.134606 [info] [raftstore]: shard 12 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.134612 [info] [raftstore]: shard 12 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:46.134614 [info] [raftstore]: shard 12 init last term, last term=<5>
2021/08/20 12:58:46.134621 [info] [raftstore]: shard 12 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:46.134623 [info] [raftstore]: shard 12 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:1550","msg":"d switched to configuration voters=(13 14 15)"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:711","msg":"d became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:1550","msg":"e switched to configuration voters=(13 14 15)"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:388","msg":"newRaft d [peers: [d,e,f], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:46.134660 [info] [raftstore]: shard 12 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:711","msg":"e became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:388","msg":"newRaft e [peers: [d,e,f], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:822","msg":"d [logterm: 5, index: 5] sent MsgVote request to e at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:822","msg":"d [logterm: 5, index: 5] sent MsgVote request to f at term 6"}
2021/08/20 12:58:46.134684 [info] [raftstore]: shard 12 added with peer {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:46.134600 [info] [raftstore]: shard 12 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.134698 [info] [raftstore]: shard 12 added with peer {ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:46.134703 [info] [raftstore]: create init shard id:12 start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" epoch:<confVer:3 > state:WaittingCreate peers:<id:13 containerID:7 > peers:<id:14 containerID:5 > peers:<id:15 containerID:1 > unique:"1-0-2" 
2021/08/20 12:58:46.134704 [info] [raftstore]: shard 12 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:46.134705 [info] [raftstore]: shard 12 init last term, last term=<5>
2021/08/20 12:58:46.134708 [error] [raftstore]: >>>>>>>>>>>> shard 12 peer 14 add registration job by doCreate
2021/08/20 12:58:46.134712 [error] [raftstore]: >>>>>>>>>>>> shard 12 peer 14 add registration job by doCreate, completed
2021/08/20 12:58:46.134713 [info] [raftstore]: create init shard id:12 start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" epoch:<confVer:3 > state:WaittingCreate peers:<id:13 containerID:7 > peers:<id:14 containerID:5 > peers:<id:15 containerID:1 > unique:"1-0-2" 
2021/08/20 12:58:46.134719 [error] [raftstore]: >>>>>>>>>>>> shard 12 peer 13 add registration job by doCreate
2021/08/20 12:58:46.134724 [error] [raftstore]: >>>>>>>>>>>> shard 12 peer 13 add registration job by doCreate, completed
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:1550","msg":"f switched to configuration voters=(13 14 15)"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:711","msg":"f became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:58:46.134+0800","caller":"raft/raft.go:388","msg":"newRaft f [peers: [d,e,f], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:58:46.134791 [info] [raftstore]: shard 12 added with peer {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:58:46.134834 [info] [raftstore]: create init shard id:12 start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" epoch:<confVer:3 > state:WaittingCreate peers:<id:13 containerID:7 > peers:<id:14 containerID:5 > peers:<id:15 containerID:1 > unique:"1-0-2" 
2021/08/20 12:58:46.134856 [error] [raftstore]: >>>>>>>>>>>> shard 12 peer 15 add registration job by doCreate
2021/08/20 12:58:46.134861 [error] [raftstore]: >>>>>>>>>>>> shard 12 peer 15 add registration job by doCreate, completed
2021/08/20 12:58:46.135759 [info] [transport]: session 1[127.0.0.1:41714] connected
2021/08/20 12:58:46.135770 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from a at term 6"}
2021/08/20 12:58:46.135848 [info] [transport]: session 2[127.0.0.1:37012] connected
2021/08/20 12:58:46.135849 [info] [transport]: connected to store 1
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:1319","msg":"9 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:776","msg":"9 became leader at term 6"}
2021/08/20 12:58:46.135870 [info] [raftstore]: shard 8 ********become leader now********
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:870","msg":"b [term: 5] received a MsgVote message with higher term from 9 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:711","msg":"b became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:971","msg":"b [logterm: 5, index: 5, vote: 0] cast MsgVote for 9 [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:870","msg":"e [term: 5] received a MsgVote message with higher term from d [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:711","msg":"e became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:971","msg":"e [logterm: 5, index: 5, vote: 0] cast MsgVote for d [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:870","msg":"f [term: 5] received a MsgVote message with higher term from d [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:711","msg":"f became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.135+0800","caller":"raft/raft.go:971","msg":"f [logterm: 5, index: 5, vote: 0] cast MsgVote for d [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.136+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from e at term 6"}
{"level":"info","ts":"2021-08-20T12:58:46.136+0800","caller":"raft/raft.go:1319","msg":"d has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:58:46.136+0800","caller":"raft/raft.go:776","msg":"d became leader at term 6"}
2021/08/20 12:58:46.136058 [info] [raftstore]: shard 12 ********become leader now********
2021/08/20 12:58:46.136244 [info] [transport]: session 2[127.0.0.1:41718] connected
2021/08/20 12:58:46.136260 [info] [transport]: connected to store 7
2021/08/20 12:58:46.151099 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 12:58:46.1510771 +0800 CST m=+44.266162901, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 16 on container 7, promote learner peer 16 on container 7 to voter]), 
2021/08/20 12:58:46.151120 [info] prophet: resource 2 send schedule command, step add learner peer 16 on container 7, source create
2021/08/20 12:58:46.151210 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.157523 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.157757 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:16 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.157779 [info] [raftstore]: shard-2 add learner peer {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.157781 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:16 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.157792 [info] [raftstore]: shard-2 add learner peer {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:46.157+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6) learners=(16)"}
2021/08/20 12:58:46.157847 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:16 XXX_unrecognized:[]}] Context:[10 32 10 16 182 129 209 73 23 67 73 155 163 113 183 64 162 135 165 190 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 16 16 7 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.157860 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.157922 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
{"level":"info","ts":"2021-08-20T12:58:46.157+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6) learners=(16)"}
2021/08/20 12:58:46.157942 [info] [raftstore]: shard 2 replicate peer {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.157950 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.157957 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/08/20 12:58:46.157957 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.157963 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:46.157964 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T12:58:46.157+0800","caller":"raft/raft.go:1550","msg":"10 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T12:58:46.157+0800","caller":"raft/raft.go:711","msg":"10 became follower at term 0"}
{"level":"info","ts":"2021-08-20T12:58:46.157+0800","caller":"raft/raft.go:388","msg":"newRaft 10 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 12:58:46.158022 [info] [raftstore]: shard 2 added with peer {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:58:46.158+0800","caller":"raft/raft.go:870","msg":"10 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:46.158+0800","caller":"raft/raft.go:711","msg":"10 became follower at term 6"}
2021/08/20 12:58:46.158070 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:58:46.158199 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T12:58:46.158+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:11:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:46.158295 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:46.158573 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<10> 
2021-08-20 12:58:46.158886 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021/08/20 12:58:46.158904 [info] prophet: resource 2 send schedule command, step promote learner peer 16 on container 7 to voter, source heartbeat
2021-08-20 12:58:46.158905 I | rafthttp: established a TCP streaming connection with peer b7af8231eb02d69f (stream Message reader)
2021-08-20 12:58:46.158913 I | rafthttp: established a TCP streaming connection with peer 82a8e79de0ab9ced (stream Message writer)
2021-08-20 12:58:46.158917 I | rafthttp: established a TCP streaming connection with peer b7af8231eb02d69f (stream MsgApp v2 reader)
2021-08-20 12:58:46.158921 I | rafthttp: established a TCP streaming connection with peer b7af8231eb02d69f (stream Message reader)
2021/08/20 12:58:46.158951 [info] [raftstore]: shard-2 AddNode peer {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021-08-20 12:58:46.158963 I | rafthttp: established a TCP streaming connection with peer b7af8231eb02d69f (stream MsgApp v2 reader)
2021-08-20 12:58:46.158997 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:58:46.159095 I | rafthttp: established a TCP streaming connection with peer 82a8e79de0ab9ced (stream MsgApp v2 writer)
2021/08/20 12:58:46.167601 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T12:58:46.167+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1090\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).ProposeConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChangeInternal\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:262\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:232\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).propose\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:141\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleRequest\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:187\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:447\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 12:58:46.167738 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:4 version:1 > term=<6> index=<10>
2021/08/20 12:58:46.167883 [info] [transport]: connected to store 7
2021/08/20 12:58:46.167904 [info] [raftstore]: shard 2 do apply change peer peer:<id:16 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.167910 [info] [transport]: session 3[127.0.0.1:41728] connected
2021/08/20 12:58:46.167914 [info] [raftstore]: shard-2 add peer {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:46.167+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 10, term: 6]"}
2021/08/20 12:58:46.167999 [info] [raftstore]: shard 2 do apply change peer peer:<id:16 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.168027 [info] [raftstore]: shard-2 add peer {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:46.167+0800","caller":"raft/raft.go:1550","msg":"10 switched to configuration voters=(3 6 16)"}
2021/08/20 12:58:46.168028 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
{"level":"info","ts":"2021-08-20T12:58:46.168+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6 16)"}
{"level":"info","ts":"2021-08-20T12:58:46.168+0800","caller":"raft/raft.go:1503","msg":"10 [commit: 10, lastindex: 10, lastterm: 6] restored snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-08-20T12:58:46.168+0800","caller":"raft/raft.go:1420","msg":"10 [commit: 10] restored snapshot [index: 10, term: 6]"}
2021/08/20 12:58:46.168081 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:16 XXX_unrecognized:[]}] Context:[10 32 10 16 35 108 186 242 235 179 79 44 188 21 35 57 12 52 124 90 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 16 16 7] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.168090 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:16 containerID:7 role:Learner > > from:<id:3 containerID:1 > to:<id:16 containerID:7 role:Learner > term:6 index:10 >,size=<126>
2021/08/20 12:58:46.168110 [info] [raftstore]: shard 2 peer 16 receiving snapshot, skip further handling
2021/08/20 12:58:46.168093 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.168136 [info] [raftstore]: shard 2 send snap complete
2021/08/20 12:58:46.168143 [info] [transport]: shard 2 pending snap sent succ, size=<126>, epoch=<confVer:4 version:1 > term=<6> index=<10>
{"level":"info","ts":"2021-08-20T12:58:46.168+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6 16)"}
2021/08/20 12:58:46.168216 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.168228 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 12:58:46.168237 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/08/20 12:58:46.168245 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 12:58:46.168251 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:10 TruncatedState:{Index:10 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:58:46.168257 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 start applying snapshot
2021/08/20 12:58:46.168259 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 12:58:46.168360 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 add registration job by handleRaftReadyApply
2021/08/20 12:58:46.168374 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 applying snapshot to set read 10
2021/08/20 12:58:46.168385 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:46.168397 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:58:46.168400 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 AdvanceApply with 10
2021/08/20 12:58:46.168402 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_10.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:16 containerID:7 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:10 
2021/08/20 12:58:46.168424 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:10 XXX_unrecognized:[]}
2021/08/20 12:58:46.168463 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 16 add registration job by handleRaftReadyApply, completed
2021/08/20 12:58:46.169171 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 12:58:46.1510771 +0800 CST m=+44.266162901, startAt:2021-08-20 12:58:46.1511136 +0800 CST m=+44.266199401, currentStep:2, steps:[add learner peer 16 on container 7, promote learner peer 16 on container 7 to voter]) finished) finish, takes 18.0422ms, 
2021/08/20 12:58:46.241187 [info] [raftstore]: shard 2 do apply change peer peer:<id:16 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:46.241210 [info] [raftstore]: shard-2 add peer {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T12:58:46.241+0800","caller":"raft/raft.go:1550","msg":"10 switched to configuration voters=(3 6 16)"}
2021/08/20 12:58:46.241275 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:58:56.191299 [error] [raftstore]: shards pool create shards failed with rpc timeout
2021/08/20 12:58:56.991348 [error] prophet: container 1 heartbeat failed with rpc timeout
2021/08/20 12:58:56.991367 [error] [raftstore]: send store heartbeat failed with rpc timeout
2021/08/20 12:59:06.191945 [error] [raftstore]: shards pool create shards failed with rpc timeout
2021/08/20 12:59:06.192268 [info] prophet: resource 18 created with peers [{ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:21 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 12:59:06.193454 [info] [raftstore]: shard 18 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:59:06.193466 [info] [raftstore]: shard 18 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:59:06.193468 [info] [raftstore]: shard 18 init last term, last term=<5>
2021/08/20 12:59:06.193475 [info] [raftstore]: shard 18 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:59:06.193480 [info] [raftstore]: shard 18 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:59:06.193482 [info] [raftstore]: shard 18 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:1550","msg":"15 switched to configuration voters=(19 20 21)"}
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:1550","msg":"14 switched to configuration voters=(19 20 21)"}
2021/08/20 12:59:06.193454 [info] [raftstore]: shard 18 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 12:59:06.193515 [info] [raftstore]: shard 18 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 12:59:06.193516 [info] [raftstore]: shard 18 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:711","msg":"14 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:388","msg":"newRaft 14 [peers: [13,14,15], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:59:06.193544 [info] [raftstore]: shard 18 added with peer {ID:20 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:21 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:711","msg":"15 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:1550","msg":"13 switched to configuration voters=(19 20 21)"}
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:711","msg":"13 became follower at term 5"}
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:388","msg":"newRaft 15 [peers: [13,14,15], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:388","msg":"newRaft 13 [peers: [13,14,15], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 12:59:06.193565 [info] [raftstore]: shard 18 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:934","msg":"13 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:724","msg":"13 became candidate at term 6"}
2021/08/20 12:59:06.193574 [info] [raftstore]: shard 18 added with peer {ID:21 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:21 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:835","msg":"13 received MsgVoteResp from 13 at term 6"}
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:822","msg":"13 [logterm: 5, index: 5] sent MsgVote request to 14 at term 6"}
{"level":"info","ts":"2021-08-20T12:59:06.193+0800","caller":"raft/raft.go:822","msg":"13 [logterm: 5, index: 5] sent MsgVote request to 15 at term 6"}
2021/08/20 12:59:06.193599 [info] [raftstore]: create init shard id:18 start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" epoch:<confVer:3 > state:WaittingCreate peers:<id:19 containerID:5 > peers:<id:20 containerID:7 > peers:<id:21 containerID:1 > unique:"1-0-3" 
2021/08/20 12:59:06.193623 [error] [raftstore]: >>>>>>>>>>>> shard 18 peer 21 add registration job by doCreate
2021/08/20 12:59:06.193630 [error] [raftstore]: >>>>>>>>>>>> shard 18 peer 21 add registration job by doCreate, completed
2021/08/20 12:59:06.193575 [info] [raftstore]: create init shard id:18 start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" epoch:<confVer:3 > state:WaittingCreate peers:<id:19 containerID:5 > peers:<id:20 containerID:7 > peers:<id:21 containerID:1 > unique:"1-0-3" 
2021/08/20 12:59:06.193653 [error] [raftstore]: >>>>>>>>>>>> shard 18 peer 20 add registration job by doCreate
2021/08/20 12:59:06.193600 [info] [raftstore]: shard 18 added with peer {ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:21 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 12:59:06.193675 [error] [raftstore]: >>>>>>>>>>>> shard 18 peer 20 add registration job by doCreate, completed
2021/08/20 12:59:06.193694 [info] [raftstore]: create init shard id:18 start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" epoch:<confVer:3 > state:WaittingCreate peers:<id:19 containerID:5 > peers:<id:20 containerID:7 > peers:<id:21 containerID:1 > unique:"1-0-3" 
2021/08/20 12:59:06.193716 [error] [raftstore]: >>>>>>>>>>>> shard 18 peer 19 add registration job by doCreate
2021/08/20 12:59:06.193608 [error] [raftstore]: >>>>>>>>>>>> shard 18 peer 19 skip with no delegates, 0 commits, result <nil>
2021/08/20 12:59:06.193723 [error] [raftstore]: >>>>>>>>>>>> shard 18 peer 19 add registration job by doCreate, completed
    store_shards_pool_test.go:60: 
        	Error Trace:	store_shards_pool_test.go:60
        	Error:      	Received unexpected error:
        	            	rpc timeout
        	Test:       	TestShardPool
    store_shards_pool_test.go:61: 
        	Error Trace:	store_shards_pool_test.go:61
        	Error:      	Not equal: 
        	            	expected: 0x1
        	            	actual  : 0x0
        	Test:       	TestShardPool
    store_shards_pool_test.go:62: 
        	Error Trace:	store_shards_pool_test.go:62
        	Error:      	Not equal: 
        	            	expected: []byte{0x70, 0x72, 0x6f, 0x70, 0x6f, 0x73, 0x65, 0x31}
        	            	actual  : []byte(nil)
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1,4 +1,2 @@
        	            	-([]uint8) (len=8) {
        	            	- 00000000  70 72 6f 70 6f 73 65 31                           |propose1|
        	            	-}
        	            	+([]uint8) <nil>
        	            	 
        	Test:       	TestShardPool
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 6"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 5, index: 5] sent MsgVote request to 13 at term 6"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 5, index: 5] sent MsgVote request to 15 at term 6"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:989","msg":"13 [logterm: 5, index: 5, vote: 13] rejected MsgVote from 14 [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:837","msg":"14 received MsgVoteResp rejection from 13 at term 6"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:1319","msg":"14 has received 1 MsgVoteResp votes and 1 vote rejections"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:870","msg":"15 [term: 5] received a MsgVote message with higher term from 14 [term: 6]"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:711","msg":"15 became follower at term 6"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:971","msg":"15 [logterm: 5, index: 5, vote: 0] cast MsgVote for 14 [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 15 at term 6"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:1319","msg":"14 has received 2 MsgVoteResp votes and 1 vote rejections"}
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:776","msg":"14 became leader at term 6"}
2021/08/20 12:59:07.291866 [info] [raftstore]: shard 18 ********become leader now********
{"level":"info","ts":"2021-08-20T12:59:07.291+0800","caller":"raft/raft.go:711","msg":"13 became follower at term 6"}
2021/08/20 12:59:16.191795 [error] [raftstore]: shards pool create shards failed with rpc timeout
2021/08/20 12:59:16.191798 [error] prophet: container 1 heartbeat failed with rpc timeout
2021/08/20 12:59:16.191853 [error] [raftstore]: send store heartbeat failed with rpc timeout
    testutil.go:743: 
        	Error Trace:	testutil.go:743
        	            				store_shards_pool_test.go:63
        	Error:      	
        	Test:       	TestShardPool
        	Messages:   	wait shard state changed to Running timeout
2021/08/20 12:59:17.276123 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:39340->127.0.0.1:30000: use of closed network connection
2021/08/20 12:59:17.276136 [error] prophet: client read loop stopped
2021/08/20 12:59:17.276124 [error] prophet: session 3[127.0.0.1:39374] read failed with read tcp 127.0.0.1:30000->127.0.0.1:39374: use of closed network connection
2021/08/20 12:59:17.276126 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 12:59:17.276143 [error] prophet: session 5[127.0.0.1:39436] read failed with read tcp 127.0.0.1:30000->127.0.0.1:39436: use of closed network connection
2021/08/20 12:59:17.276154 [error] prophet: session 2[127.0.0.1:39342] read failed with read tcp 127.0.0.1:30000->127.0.0.1:39342: use of closed network connection
2021/08/20 12:59:17.276162 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:17.276181 [error] prophet: session 4[127.0.0.1:39376] read failed with read tcp 127.0.0.1:30000->127.0.0.1:39376: use of closed network connection
2021/08/20 12:59:17.276187 [error] prophet: watcher read events failed with EOF
2021/08/20 12:59:17.276189 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:59:17.276193 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 12:59:17.276202 [error] prophet: session 6[127.0.0.1:39438] read failed with read tcp 127.0.0.1:30000->127.0.0.1:39438: use of closed network connection
2021/08/20 12:59:17.276216 [error] prophet: watcher read events failed with EOF
2021/08/20 12:59:17.276225 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:59:17.276211 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:17.276213 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:17.276217 [error] prophet: watcher read events failed with EOF
2021/08/20 12:59:17.276318 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 12:59:17.276326 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:17.277264 [info] prophet: [prophet-leader/node-0]/keepalive: exit with lease expired
2021/08/20 12:59:17.277285 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 12:59:17.277293 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 12:59:17.277359 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 12:59:17.277387 [info] prophet: coordinator is stopping
2021/08/20 12:59:17.277394 [info] prophet: patrol resources has been stopped 
2021/08/20 12:59:17.277409 [info] prophet: drive push operator has been stopped 
2021/08/20 12:59:17.277411 [info] prophet: coordinator has been stopped
2021/08/20 12:59:17.277447 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021-08-20 12:59:17.277470 I | etcdserver: 93ccda9956d988f4 starts leadership transfer from 93ccda9956d988f4 to 82a8e79de0ab9ced
2021/08/20 12:59:17.277451 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/08/20 12:59:17.277501 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
{"level":"info","ts":"2021-08-20T12:59:17.277+0800","caller":"raft/raft.go:1278","msg":"93ccda9956d988f4 [term 2] starts to transfer leadership to 82a8e79de0ab9ced"}
WARNING: 2021/08/20 12:59:17 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
{"level":"info","ts":"2021-08-20T12:59:17.277+0800","caller":"raft/raft.go:1284","msg":"93ccda9956d988f4 sends MsgTimeoutNow to 82a8e79de0ab9ced immediately as 82a8e79de0ab9ced already has up-to-date log"}
2021/08/20 12:59:17.277508 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
{"level":"info","ts":"2021-08-20T12:59:17.277+0800","caller":"raft/raft.go:1372","msg":"82a8e79de0ab9ced [term 2] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T12:59:17.277+0800","caller":"raft/raft.go:724","msg":"82a8e79de0ab9ced became candidate at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.277+0800","caller":"raft/raft.go:835","msg":"82a8e79de0ab9ced received MsgVoteResp from 82a8e79de0ab9ced at term 3"}
WARNING: 2021/08/20 12:59:17 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
{"level":"info","ts":"2021-08-20T12:59:17.277+0800","caller":"raft/raft.go:822","msg":"82a8e79de0ab9ced [logterm: 2, index: 41] sent MsgVote request to 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.277+0800","caller":"raft/raft.go:822","msg":"82a8e79de0ab9ced [logterm: 2, index: 41] sent MsgVote request to b7af8231eb02d69f at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.277+0800","caller":"raft/node.go:331","msg":"raft.node: 82a8e79de0ab9ced lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/raft.go:870","msg":"b7af8231eb02d69f [term: 2] received a MsgVote message with higher term from 82a8e79de0ab9ced [term: 3]"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/raft.go:711","msg":"b7af8231eb02d69f became follower at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/raft.go:971","msg":"b7af8231eb02d69f [logterm: 2, index: 41, vote: 0] cast MsgVote for 82a8e79de0ab9ced [logterm: 2, index: 41] at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/node.go:331","msg":"raft.node: b7af8231eb02d69f lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/raft.go:870","msg":"93ccda9956d988f4 [term: 2] received a MsgVote message with higher term from 82a8e79de0ab9ced [term: 3]"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/raft.go:971","msg":"93ccda9956d988f4 [logterm: 2, index: 41, vote: 0] cast MsgVote for 82a8e79de0ab9ced [logterm: 2, index: 41] at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/node.go:331","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/raft.go:835","msg":"82a8e79de0ab9ced received MsgVoteResp from b7af8231eb02d69f at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/raft.go:1319","msg":"82a8e79de0ab9ced has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/raft.go:776","msg":"82a8e79de0ab9ced became leader at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/node.go:325","msg":"raft.node: 82a8e79de0ab9ced elected leader 82a8e79de0ab9ced at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/node.go:325","msg":"raft.node: b7af8231eb02d69f elected leader 82a8e79de0ab9ced at term 3"}
{"level":"info","ts":"2021-08-20T12:59:17.278+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 82a8e79de0ab9ced at term 3"}
{"level":"warn","ts":"2021-08-20T12:59:17.278+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
2021/08/20 12:59:17.280007 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/08/20 12:59:17.280032 [info] prophet: [prophet-leader/node-2]/campaign: start
2021/08/20 12:59:17.281127 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
2021/08/20 12:59:17.282060 [info] prophet: [prophet-leader/node-2]/campaign: completed, start keepalive
2021/08/20 12:59:17.282072 [info] prophet: ********node-2 become to leader now********
2021/08/20 12:59:17.377284 [info] prophet: [prophet-leader/node-0]/loop: exit
2021-08-20 12:59:17.378386 I | etcdserver: 93ccda9956d988f4 finished leadership transfer from 93ccda9956d988f4 to 82a8e79de0ab9ced (took 100.9147ms)
2021-08-20 12:59:17.378429 I | rafthttp: stopping peer 82a8e79de0ab9ced...
2021-08-20 12:59:17.378589 I | rafthttp: closed the TCP streaming connection with peer 82a8e79de0ab9ced (stream MsgApp v2 writer)
2021-08-20 12:59:17.378601 I | rafthttp: stopped streaming with peer 82a8e79de0ab9ced (writer)
2021-08-20 12:59:17.378608 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:59:17.378757 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:59:17.378790 I | rafthttp: closed the TCP streaming connection with peer 82a8e79de0ab9ced (stream Message writer)
2021-08-20 12:59:17.378794 I | rafthttp: stopped streaming with peer 82a8e79de0ab9ced (writer)
2021-08-20 12:59:17.378810 I | rafthttp: stopped HTTP pipelining with peer 82a8e79de0ab9ced
2021-08-20 12:59:17.378858 W | rafthttp: lost the TCP streaming connection with peer 82a8e79de0ab9ced (stream MsgApp v2 reader)
2021-08-20 12:59:17.378871 E | rafthttp: failed to read 82a8e79de0ab9ced on stream MsgApp v2 (context canceled)
2021-08-20 12:59:17.378873 I | rafthttp: peer 82a8e79de0ab9ced became inactive (message send to peer failed)
2021-08-20 12:59:17.378882 I | rafthttp: stopped streaming with peer 82a8e79de0ab9ced (stream MsgApp v2 reader)
2021-08-20 12:59:17.378917 W | rafthttp: lost the TCP streaming connection with peer 82a8e79de0ab9ced (stream Message reader)
2021-08-20 12:59:17.378930 I | rafthttp: stopped streaming with peer 82a8e79de0ab9ced (stream Message reader)
2021-08-20 12:59:17.378941 I | rafthttp: stopped peer 82a8e79de0ab9ced
2021-08-20 12:59:17.378944 I | rafthttp: stopping peer b7af8231eb02d69f...
2021-08-20 12:59:17.379097 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:59:17.379223 I | rafthttp: closed the TCP streaming connection with peer b7af8231eb02d69f (stream MsgApp v2 writer)
2021-08-20 12:59:17.379234 I | rafthttp: stopped streaming with peer b7af8231eb02d69f (writer)
2021-08-20 12:59:17.379400 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:59:17.379459 I | rafthttp: closed the TCP streaming connection with peer b7af8231eb02d69f (stream Message writer)
2021-08-20 12:59:17.379470 I | rafthttp: stopped streaming with peer b7af8231eb02d69f (writer)
2021-08-20 12:59:17.379488 I | rafthttp: stopped HTTP pipelining with peer b7af8231eb02d69f
2021-08-20 12:59:17.379517 W | rafthttp: lost the TCP streaming connection with peer b7af8231eb02d69f (stream MsgApp v2 reader)
2021-08-20 12:59:17.379528 E | rafthttp: failed to read b7af8231eb02d69f on stream MsgApp v2 (context canceled)
2021-08-20 12:59:17.379530 I | rafthttp: peer b7af8231eb02d69f became inactive (message send to peer failed)
2021-08-20 12:59:17.379535 I | rafthttp: stopped streaming with peer b7af8231eb02d69f (stream MsgApp v2 reader)
2021-08-20 12:59:17.379565 W | rafthttp: lost the TCP streaming connection with peer b7af8231eb02d69f (stream Message reader)
2021-08-20 12:59:17.379577 I | rafthttp: stopped streaming with peer b7af8231eb02d69f (stream Message reader)
2021-08-20 12:59:17.379580 I | rafthttp: stopped peer b7af8231eb02d69f
2021-08-20 12:59:17.379658 E | rafthttp: failed to find member 82a8e79de0ab9ced in cluster 6a4ade671189dc2f
2021-08-20 12:59:17.379676 E | rafthttp: failed to find member b7af8231eb02d69f in cluster 6a4ade671189dc2f
2021-08-20 12:59:17.379694 E | rafthttp: failed to find member 82a8e79de0ab9ced in cluster 6a4ade671189dc2f
2021-08-20 12:59:17.379722 E | rafthttp: failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node b7af8231eb02d69f)
2021-08-20 12:59:17.379733 E | rafthttp: failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 82a8e79de0ab9ced)
2021-08-20 12:59:17.379738 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021-08-20 12:59:17.379746 E | rafthttp: failed to find member b7af8231eb02d69f in cluster 6a4ade671189dc2f
2021-08-20 12:59:17.379771 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021/08/20 12:59:17.388062 [info] [raftstore]: shard 18 handle serve raft stopped
2021/08/20 12:59:17.388076 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:59:17.388078 [info] [raftstore]: shard 8 handle serve raft stopped
2021/08/20 12:59:17.388084 [info] [raftstore]: shard 12 handle serve raft stopped
2021/08/20 12:59:17.388101 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:59:17.388107 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:59:17.388108 [info] [raftstore]: router event loop task stopped
2021/08/20 12:59:17.391203 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 12:59:17.391222 [info] [raftstore]: shard 8 raft tick stopped
2021/08/20 12:59:17.391227 [info] [raftstore]: shard 12 raft tick stopped
2021/08/20 12:59:17.391228 [info] [raftstore]: shard 18 raft tick stopped
2021/08/20 12:59:17.476921 [info] prophet: client start init connection to leader 127.0.0.1:30002
2021/08/20 12:59:17.476936 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:17.477045 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:17.477053 [info] prophet: session 1[127.0.0.1:60682] connected
2021/08/20 12:59:17.477054 [info] prophet: client start connect to leader 127.0.0.1:30002
2021/08/20 12:59:17.477105 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 12:59:17.491928 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:17.491947 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:17.491956 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:17.677456 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:17.677528 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:17.691116 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:17.691130 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:17.691139 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:17.692259 [error] [transport]: session 1[127.0.0.1:59264] read failed with read tcp 127.0.0.1:10001->127.0.0.1:59264: i/o timeout
2021-08-20 12:59:17.706800 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 12:59:17.735181 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 12:59:17.878102 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:17.878206 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:17.892040 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:17.892059 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:17.892070 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:17.892043 [error] [transport]: session 2[127.0.0.1:59268] read failed with read tcp 127.0.0.1:10001->127.0.0.1:59268: i/o timeout
2021/08/20 12:59:17.892095 [error] [transport]: session 1[127.0.0.1:36950] read failed with read tcp 127.0.0.1:10000->127.0.0.1:36950: i/o timeout
2021/08/20 12:59:17.892112 [error] [transport]: session 3[127.0.0.1:41728] read failed with read tcp 127.0.0.1:10002->127.0.0.1:41728: i/o timeout
2021/08/20 12:59:17.892118 [error] [transport]: session 2[127.0.0.1:41718] read failed with read tcp 127.0.0.1:10002->127.0.0.1:41718: i/o timeout
2021/08/20 12:59:18.078834 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:18.078899 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:18.091531 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:18.091545 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:18.091555 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:18.276270 [info] prophet: client start init connection to leader 127.0.0.1:30002
2021/08/20 12:59:18.276395 [info] prophet: client start connect to leader 127.0.0.1:30002
2021/08/20 12:59:18.276407 [info] prophet: watcher init leader connection 127.0.0.1:30002 succeed
2021/08/20 12:59:18.276431 [info] prophet: session 2[127.0.0.1:60772] connected
WARNING: 2021/08/20 12:59:18 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
WARNING: 2021/08/20 12:59:18 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
2021/08/20 12:59:18.279836 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:18.279886 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:18.292027 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:18.292042 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:18.292050 [info] [raftstore]: shard 18 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:18.442+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:59:18.442+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:59:18.442+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 7"}
{"level":"info","ts":"2021-08-20T12:59:18.442+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 6, index: 11] sent MsgVote request to 3 at term 7"}
{"level":"info","ts":"2021-08-20T12:59:18.442+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 6, index: 11] sent MsgVote request to 6 at term 7"}
2021/08/20 12:59:18.442159 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:18.480865 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:18.480910 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:18.491362 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:18.491379 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:18.491387 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:18.681098 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:18.681203 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:18.691593 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:18.691610 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:18.691619 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:18.881950 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:18.882012 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
{"level":"info","ts":"2021-08-20T12:59:18.891+0800","caller":"raft/raft.go:934","msg":"6 is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:59:18.891+0800","caller":"raft/raft.go:724","msg":"6 became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:59:18.891+0800","caller":"raft/raft.go:835","msg":"6 received MsgVoteResp from 6 at term 7"}
{"level":"info","ts":"2021-08-20T12:59:18.891+0800","caller":"raft/raft.go:822","msg":"6 [logterm: 6, index: 11] sent MsgVote request to 3 at term 7"}
{"level":"info","ts":"2021-08-20T12:59:18.891+0800","caller":"raft/raft.go:822","msg":"6 [logterm: 6, index: 11] sent MsgVote request to 10 at term 7"}
2021/08/20 12:59:18.891607 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:18.891623 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:18.891630 [info] [raftstore]: shard 18 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:18.891+0800","caller":"raft/raft.go:989","msg":"10 [logterm: 6, index: 11, vote: 10] rejected MsgVote from 6 [logterm: 6, index: 11] at term 7"}
{"level":"info","ts":"2021-08-20T12:59:18.891+0800","caller":"raft/raft.go:837","msg":"6 received MsgVoteResp rejection from 10 at term 7"}
{"level":"info","ts":"2021-08-20T12:59:18.891+0800","caller":"raft/raft.go:1319","msg":"6 has received 1 MsgVoteResp votes and 1 vote rejections"}
2021/08/20 12:59:19.082359 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:19.082424 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:19.091812 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:19.091827 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:19.091838 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:19.283142 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:19.283181 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:19.291849 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:19.291864 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:19.291875 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:19.484172 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:19.484232 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:19.491557 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:19.491583 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:19.491585 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:19.684533 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:19.684628 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:19.691977 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:19.692038 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:19.692055 [info] [raftstore]: shard 18 raft step stopped
WARNING: 2021/08/20 12:59:19 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
2021/08/20 12:59:19.885260 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:19.885327 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:19.891783 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:19.891799 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:19.891811 [info] [raftstore]: shard 18 raft step stopped
WARNING: 2021/08/20 12:59:20 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
2021/08/20 12:59:20.086153 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:20.086215 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:20.091527 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:20.091543 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:20.091552 [info] [raftstore]: shard 18 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:20.241+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 7"}
{"level":"info","ts":"2021-08-20T12:59:20.241+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 8"}
{"level":"info","ts":"2021-08-20T12:59:20.241+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 8"}
{"level":"info","ts":"2021-08-20T12:59:20.241+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 6, index: 11] sent MsgVote request to 3 at term 8"}
{"level":"info","ts":"2021-08-20T12:59:20.241+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 6, index: 11] sent MsgVote request to 6 at term 8"}
{"level":"info","ts":"2021-08-20T12:59:20.241+0800","caller":"raft/raft.go:870","msg":"6 [term: 7] received a MsgVote message with higher term from 10 [term: 8]"}
{"level":"info","ts":"2021-08-20T12:59:20.241+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 8"}
{"level":"info","ts":"2021-08-20T12:59:20.241+0800","caller":"raft/raft.go:971","msg":"6 [logterm: 6, index: 11, vote: 0] cast MsgVote for 10 [logterm: 6, index: 11] at term 8"}
2021/08/20 12:59:20.241901 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:20.241+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 6 at term 8"}
{"level":"info","ts":"2021-08-20T12:59:20.241+0800","caller":"raft/raft.go:1319","msg":"10 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:59:20.242+0800","caller":"raft/raft.go:776","msg":"10 became leader at term 8"}
2021/08/20 12:59:20.242016 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 12:59:20.242075 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:20.286881 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:20.286943 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:20.291189 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:20.291204 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:20.291214 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:20.441513 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:20.487342 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:20.487403 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:20.491632 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:20.491693 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:20.491697 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:20.641238 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:20.688372 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:20.688451 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:20.691664 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:20.691681 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:20.691689 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:20.841690 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:20.888911 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:20.888995 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:20.891182 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:20.891206 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:20.891209 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:21.041670 [info] [raftstore]: shard 2 raft step stopped
2021-08-20 12:59:21.071360 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 12:59:21.089433 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:21.089483 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:21.091676 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:21.091722 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:21.091725 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:21.241931 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:21.289700 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:21.289794 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:21.291986 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:21.291999 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:21.292005 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:21.441922 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:21.490198 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:21.490277 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:21.491419 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:21.491434 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:21.491445 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:21.641536 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:21.690761 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:21.690847 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:21.692006 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:21.692021 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:21.692033 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:21.841972 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:21.891124 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:21.891190 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:21.891199 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:21.891205 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:21.891213 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:22.041431 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:22.091424 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:22.091469 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:22.091524 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:22.091537 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:22.091546 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:22.241486 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:22.291505 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:22.291518 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:22.291522 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:22.291531 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:22.291615 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
WARNING: 2021/08/20 12:59:22 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
2021/08/20 12:59:22.441800 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:22.491075 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:22.491088 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:22.491097 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:22.492244 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:22.492290 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:22.641435 [info] [raftstore]: shard 2 raft step stopped
WARNING: 2021/08/20 12:59:22 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
2021/08/20 12:59:22.691903 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:22.691924 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:22.691936 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:22.693042 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:22.693098 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021-08-20 12:59:22.706807 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:59:22.737483 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 12:59:22.737514 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021/08/20 12:59:22.841735 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:22.891134 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:22.891157 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:22.891160 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:22.893399 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:22.893481 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:23.041705 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:23.091540 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:23.091555 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:23.091564 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:23.093771 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:23.093831 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:23.242050 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:23.291845 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:23.291859 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:23.291867 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:23.293957 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:23.294018 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:23.442053 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:23.491481 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:23.491497 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:23.491508 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:23.494652 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:23.494711 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:23.642035 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:23.691294 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:23.691311 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:23.691320 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:23.695493 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:23.695555 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:23.841356 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:23.891578 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:23.891653 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:23.891658 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:23.895803 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:23.895871 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:24.041830 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:24.092108 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:24.092121 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:24.092130 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:24.096366 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:24.096431 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:24.241472 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:24.291429 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:24.291495 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:24.291499 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:24.296560 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:24.296624 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:24.441918 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:24.492086 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:24.492107 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:24.492119 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:24.497254 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:24.497319 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:24.641365 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:24.691562 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:24.691580 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:24.691589 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:24.697813 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:24.697878 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:24.841869 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:24.891221 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:24.891237 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:24.891249 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:24.898617 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:24.898679 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:25.041824 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:25.092131 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:25.092147 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:25.092156 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:25.099605 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:25.099680 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:25.241656 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:25.291661 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:25.291677 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:25.291686 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:25.300236 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:25.300305 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:25.441363 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:25.491719 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:25.491751 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:25.491755 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:25.501209 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:25.501278 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:25.641427 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:25.691743 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:25.691757 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:25.691766 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:25.702219 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:25.702283 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:25.841310 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:25.891757 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:25.891771 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:25.891781 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:25.903143 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:25.903206 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:26.041172 [info] [raftstore]: shard 2 raft step stopped
2021-08-20 12:59:26.072389 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 12:59:26.091453 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:26.091468 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:26.091477 [info] [raftstore]: shard 18 raft step stopped
WARNING: 2021/08/20 12:59:26 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
2021/08/20 12:59:26.104108 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 12:59:26.104173 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 12:59:26.191328 [error] [raftstore]: shards pool create shards failed with rpc timeout
2021/08/20 12:59:26.191333 [error] prophet: container 1 heartbeat failed with rpc timeout
2021/08/20 12:59:26.191363 [error] [raftstore]: send store heartbeat failed with rpc timeout
2021/08/20 12:59:26.191365 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:26.191370 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:26.191373 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:26.191357 [error] prophet: session 1[] handle failed with queue: disposed, close session
2021/08/20 12:59:26.191572 [error] [raftstore]: send store heartbeat failed with client is closed
2021/08/20 12:59:26.191585 [info] [raftstore]: timer based tasks stopped
2021/08/20 12:59:26.191619 [info] [transport]: send snapshot worker stopped
2021/08/20 12:59:26.191634 [info] [transport]: transfer stopped
2021/08/20 12:59:26.191635 [info] [transport]: send snapshot worker stopped
2021/08/20 12:59:26.191637 [info] [transport]: send snapshot worker stopped
2021/08/20 12:59:26.191640 [info] [transport]: send snapshot worker stopped
2021/08/20 12:59:26.191642 [info] [transport]: send raft worker stopped
2021/08/20 12:59:26.191654 [info] [transport]: send snapshot worker stopped
2021/08/20 12:59:26.191661 [info] [transport]: send snapshot worker stopped
2021/08/20 12:59:26.191662 [info] [transport]: send snapshot worker stopped
2021/08/20 12:59:26.191663 [info] [transport]: send snapshot worker stopped
2021/08/20 12:59:26.191676 [error] [transport]: session 2[127.0.0.1:37012] read failed with read tcp 127.0.0.1:10000->127.0.0.1:37012: use of closed network connection
2021-08-20 12:59:26.191773 I | etcdserver: 82a8e79de0ab9ced starts leadership transfer from 82a8e79de0ab9ced to b7af8231eb02d69f
{"level":"warn","ts":"2021-08-20T12:59:26.191+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-9cd69929-aa1e-4231-b4e0-fc38c67e3d50/127.0.0.1:40001","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/08/20 12:59:26.191826 [error] prophet: read /electors/leader/expect-prophet-leader from etcd failed with context canceled
2021-08-20 12:59:26.191823 W | etcdserver: read-only range request "key:\"/prophet/schedule/weight/00000000000000000001/leader\" " with result "error:context canceled" took too long (8.9091305s) to execute
{"level":"info","ts":"2021-08-20T12:59:26.191+0800","caller":"raft/raft.go:1278","msg":"82a8e79de0ab9ced [term 3] starts to transfer leadership to b7af8231eb02d69f"}
{"level":"info","ts":"2021-08-20T12:59:26.191+0800","caller":"raft/raft.go:1284","msg":"82a8e79de0ab9ced sends MsgTimeoutNow to b7af8231eb02d69f immediately as b7af8231eb02d69f already has up-to-date log"}
{"level":"warn","ts":"2021-08-20T12:59:26.191+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Unavailable desc = transport is closing"}
WARNING: 2021/08/20 12:59:26 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
2021/08/20 12:59:26.191831 [error] prophet: [prophet-leader/node-1]/loop: check expect leader failed with context canceled
2021-08-20 12:59:26.191874 W | etcdserver: read-only range request "key:\"/electors/leader/expect-prophet-leader\" " with result "error:context canceled" took too long (8.9140448s) to execute
WARNING: 2021/08/20 12:59:26 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40001  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40001: connect: connection refused". Reconnecting...
{"level":"info","ts":"2021-08-20T12:59:26.191+0800","caller":"raft/raft.go:1372","msg":"b7af8231eb02d69f [term 3] received MsgTimeoutNow from 82a8e79de0ab9ced and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T12:59:26.191+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 4"}
WARNING: 2021/08/20 12:59:26 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
{"level":"info","ts":"2021-08-20T12:59:26.191+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 4"}
{"level":"info","ts":"2021-08-20T12:59:26.191+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 3, index: 44] sent MsgVote request to 82a8e79de0ab9ced at term 4"}
{"level":"info","ts":"2021-08-20T12:59:26.191+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 3, index: 44] sent MsgVote request to 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-08-20T12:59:26.191+0800","caller":"raft/node.go:331","msg":"raft.node: b7af8231eb02d69f lost leader 82a8e79de0ab9ced at term 4"}
{"level":"info","ts":"2021-08-20T12:59:26.192+0800","caller":"raft/raft.go:870","msg":"82a8e79de0ab9ced [term: 3] received a MsgVote message with higher term from b7af8231eb02d69f [term: 4]"}
{"level":"info","ts":"2021-08-20T12:59:26.192+0800","caller":"raft/raft.go:711","msg":"82a8e79de0ab9ced became follower at term 4"}
{"level":"info","ts":"2021-08-20T12:59:26.192+0800","caller":"raft/raft.go:971","msg":"82a8e79de0ab9ced [logterm: 3, index: 44, vote: 0] cast MsgVote for b7af8231eb02d69f [logterm: 3, index: 44] at term 4"}
{"level":"info","ts":"2021-08-20T12:59:26.192+0800","caller":"raft/node.go:331","msg":"raft.node: 82a8e79de0ab9ced lost leader 82a8e79de0ab9ced at term 4"}
2021-08-20 12:59:26.192761 W | rafthttp: failed to process raft message (raft: stopped)
{"level":"info","ts":"2021-08-20T12:59:26.193+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from 82a8e79de0ab9ced at term 4"}
{"level":"info","ts":"2021-08-20T12:59:26.193+0800","caller":"raft/raft.go:1319","msg":"b7af8231eb02d69f has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T12:59:26.193+0800","caller":"raft/raft.go:776","msg":"b7af8231eb02d69f became leader at term 4"}
{"level":"info","ts":"2021-08-20T12:59:26.193+0800","caller":"raft/node.go:325","msg":"raft.node: b7af8231eb02d69f elected leader b7af8231eb02d69f at term 4"}
{"level":"info","ts":"2021-08-20T12:59:26.193+0800","caller":"raft/node.go:325","msg":"raft.node: 82a8e79de0ab9ced elected leader b7af8231eb02d69f at term 4"}
{"level":"warn","ts":"2021-08-20T12:59:26.193+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":1,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
2021-08-20 12:59:26.194315 W | etcdserver: failed to reach the peerURL(http://127.0.0.1:50000) of member 93ccda9956d988f4 (Get "http://127.0.0.1:50000/version": dial tcp 127.0.0.1:50000: connect: connection refused)
2021-08-20 12:59:26.194329 W | etcdserver: cannot get the version of member 93ccda9956d988f4 (Get "http://127.0.0.1:50000/version": dial tcp 127.0.0.1:50000: connect: connection refused)
2021/08/20 12:59:26.217412 [warning] prophet: read /prophet/schedule/weight/00000000000000000001/leader from etcd is too slow, cost 8.9348533s
2021/08/20 12:59:26.218639 [info] prophet: load 3 containers, cost 8.9364797s
2021/08/20 12:59:26.218951 [info] prophet: load 4 resources, cost 301.7µs
2021/08/20 12:59:26.219479 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 12:59:26.219542 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 12:59:26.219546 [info] prophet: new watcher 127.0.0.1:60772 added
2021/08/20 12:59:26.219627 [info] [raftstore]: start init event
2021/08/20 12:59:26.219640 [info] prophet: container 7 heartbeat stream binded
2021/08/20 12:59:26.219848 [info] prophet: load 1 jobs
2021/08/20 12:59:26.220139 [info] [raftstore]: dynamic shards pool job started
2021/08/20 12:59:26.221349 [info] prophet: resource with unique 1-0-3 already created
2021/08/20 12:59:26.291671 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:13 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-2"  from 13 to 15 failed with write tcp 127.0.0.1:37012->127.0.0.1:10000: write: broken pipe
2021/08/20 12:59:26.291707 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:11 from:9 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-1"  from 9 to 11 failed with write tcp 127.0.0.1:37012->127.0.0.1:10000: write: broken pipe
2021/08/20 12:59:26.291721 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:21 from:20 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-3"  from 20 to 21 failed with write tcp 127.0.0.1:37012->127.0.0.1:10000: write: broken pipe
2021-08-20 12:59:26.292747 I | etcdserver: 82a8e79de0ab9ced finished leadership transfer from 82a8e79de0ab9ced to b7af8231eb02d69f (took 100.9743ms)
2021-08-20 12:59:26.292796 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:59:26.292809 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 12:59:26.292815 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:59:26.292818 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 12:59:26.292826 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 12:59:26.292830 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 12:59:26.292833 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 12:59:26.292835 I | rafthttp: stopped peer 93ccda9956d988f4
2021-08-20 12:59:26.292837 I | rafthttp: stopping peer b7af8231eb02d69f...
2021-08-20 12:59:26.292978 W | rafthttp: lost the TCP streaming connection with peer 82a8e79de0ab9ced (stream MsgApp v2 reader)
2021-08-20 12:59:26.293057 I | rafthttp: closed the TCP streaming connection with peer b7af8231eb02d69f (stream MsgApp v2 writer)
2021-08-20 12:59:26.293069 I | rafthttp: stopped streaming with peer b7af8231eb02d69f (writer)
2021-08-20 12:59:26.293173 W | rafthttp: lost the TCP streaming connection with peer 82a8e79de0ab9ced (stream Message reader)
2021-08-20 12:59:26.293236 I | rafthttp: closed the TCP streaming connection with peer b7af8231eb02d69f (stream Message writer)
2021-08-20 12:59:26.293246 I | rafthttp: stopped streaming with peer b7af8231eb02d69f (writer)
2021-08-20 12:59:26.293254 I | rafthttp: stopped HTTP pipelining with peer b7af8231eb02d69f
2021-08-20 12:59:26.293288 W | rafthttp: lost the TCP streaming connection with peer b7af8231eb02d69f (stream MsgApp v2 reader)
2021-08-20 12:59:26.293298 E | rafthttp: failed to read b7af8231eb02d69f on stream MsgApp v2 (context canceled)
2021-08-20 12:59:26.293300 I | rafthttp: peer b7af8231eb02d69f became inactive (message send to peer failed)
2021-08-20 12:59:26.293305 I | rafthttp: stopped streaming with peer b7af8231eb02d69f (stream MsgApp v2 reader)
2021-08-20 12:59:26.293332 W | rafthttp: lost the TCP streaming connection with peer b7af8231eb02d69f (stream Message reader)
2021-08-20 12:59:26.293343 I | rafthttp: stopped streaming with peer b7af8231eb02d69f (stream Message reader)
2021-08-20 12:59:26.293345 I | rafthttp: stopped peer b7af8231eb02d69f
2021-08-20 12:59:26.293445 E | rafthttp: failed to find member b7af8231eb02d69f in cluster 6a4ade671189dc2f
2021-08-20 12:59:26.293469 E | rafthttp: failed to find member b7af8231eb02d69f in cluster 6a4ade671189dc2f
2021-08-20 12:59:26.293558 E | rafthttp: failed to dial 82a8e79de0ab9ced on stream MsgApp v2 (peer 82a8e79de0ab9ced failed to find local node b7af8231eb02d69f)
2021-08-20 12:59:26.293573 I | rafthttp: peer 82a8e79de0ab9ced became inactive (message send to peer failed)
2021/08/20 12:59:26.297713 [info] [raftstore]: shard 12 handle serve raft stopped
2021/08/20 12:59:26.297731 [info] [raftstore]: shard 18 handle serve raft stopped
2021/08/20 12:59:26.297733 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 12:59:26.297735 [info] [raftstore]: shard 8 handle serve raft stopped
2021/08/20 12:59:26.297757 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 12:59:26.297759 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 12:59:26.297759 [info] [raftstore]: router event loop task stopped
2021/08/20 12:59:26.298808 [error] prophet: reset watcher conn failed with client is closed, retry later
2021/08/20 12:59:26.304972 [error] prophet: reset leader connection failed with client is closed
2021/08/20 12:59:26.304998 [error] prophet: client read loop stopped
2021/08/20 12:59:26.305002 [error] prophet: container 5 heartbeat failed with client is closed
2021/08/20 12:59:26.305004 [error] [raftstore]: send store heartbeat failed with client is closed
2021/08/20 12:59:26.305191 [error] [raftstore]: send store heartbeat failed with client is closed
2021/08/20 12:59:26.391014 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 12:59:26.391047 [info] [raftstore]: shard 8 raft tick stopped
2021/08/20 12:59:26.391050 [info] [raftstore]: shard 12 raft tick stopped
2021/08/20 12:59:26.391052 [info] [raftstore]: shard 18 raft tick stopped
2021/08/20 12:59:26.392094 [info] prophet: [prophet-leader/node-1]/loop: exit
2021/08/20 12:59:26.441191 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:26.441251 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:16 term:8 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:26.441306 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:26.491485 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:26.491522 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:26.491557 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:13 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:26.491609 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:26.491625 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:26.491626 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:26.491643 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:11 from:9 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:26.491656 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:21 from:20 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:26.641890 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:26.641942 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:16 term:8 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:26.642006 [info] [raftstore]: shard 2 raft step stopped
2021-08-20 12:59:26.665426 W | rafthttp: lost the TCP streaming connection with peer 82a8e79de0ab9ced (stream Message writer)
2021/08/20 12:59:26.691375 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:26.691407 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:26.691411 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:26.691448 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:26.691487 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:11 from:9 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:26.691536 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:21 from:20 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:26.691574 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:13 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-2"  from 13 to 15 failed with not connected
WARNING: 2021/08/20 12:59:26 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
2021-08-20 12:59:26.764654 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 12:59:26.841794 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:26.841862 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:16 term:8 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:26.841914 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:26.891130 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:26.891148 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:26.891152 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:26.891165 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:26.891183 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:13 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:26.891196 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:11 from:9 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:26.891232 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:21 from:20 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:26.892243 [error] [transport]: session 1[127.0.0.1:41714] read failed with read tcp 127.0.0.1:10002->127.0.0.1:41714: i/o timeout
2021/08/20 12:59:27.041383 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.041436 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:16 term:8 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:27.041481 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:27.091720 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:27.091746 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:27.091751 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:27.091758 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.091781 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:13 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:27.091811 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:11 from:9 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:27.091833 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:21 from:20 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:27.130747 [error] [raftstore]: shards pool create shards failed with client is closed
WARNING: 2021/08/20 12:59:27 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40001  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40001: connect: connection refused". Reconnecting...
2021/08/20 12:59:27.241353 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.241407 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:16 term:8 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:27.241449 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:27.292037 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:27.292070 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.292095 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:13 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:27.292137 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:27.292151 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:27.292188 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.292226 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:11 from:9 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:27.292251 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:21 from:20 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:27.441458 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.441504 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:16 term:8 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:27.441549 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:27.491830 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:27.491836 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.491881 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:11 from:9 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:27.491931 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:27.491950 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:27.491956 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.491974 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:21 from:20 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:27.491987 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:13 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:27.641307 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.641351 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:16 term:8 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:27.641399 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:27.691793 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.691840 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:11 from:9 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:27.691854 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:21 from:20 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:27.691887 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:13 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:27.691796 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:27.691931 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:27.691941 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:27.841387 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.841437 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:16 term:8 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:27.841478 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:27.891147 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:27.891200 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:27.891218 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:27.891206 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:27.891244 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:21 from:20 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:27.891269 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:13 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:27.891291 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:11 from:9 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:28.041631 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:28.041675 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:16 term:8 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:28.041722 [info] [raftstore]: shard 2 raft step stopped
{"level":"warn","ts":"2021-08-20T12:59:28.092+0800","caller":"raft/raft.go:1022","msg":"d stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-08-20T12:59:28.092+0800","caller":"raft/raft.go:711","msg":"d became follower at term 6"}
{"level":"warn","ts":"2021-08-20T12:59:28.092+0800","caller":"raft/raft.go:1022","msg":"9 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-08-20T12:59:28.092+0800","caller":"raft/raft.go:711","msg":"9 became follower at term 6"}
2021/08/20 12:59:28.092166 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:28.092175 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:28.092205 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:21 from:20 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:28.130210 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"warn","ts":"2021-08-20T12:59:28.241+0800","caller":"raft/raft.go:1022","msg":"10 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-08-20T12:59:28.241+0800","caller":"raft/raft.go:711","msg":"10 became follower at term 8"}
{"level":"warn","ts":"2021-08-20T12:59:28.291+0800","caller":"raft/raft.go:1022","msg":"14 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-08-20T12:59:28.291+0800","caller":"raft/raft.go:711","msg":"14 became follower at term 6"}
2021/08/20 12:59:28.692337 [error] [transport]: session 3[127.0.0.1:59320] read failed with read tcp 127.0.0.1:10001->127.0.0.1:59320: i/o timeout
WARNING: 2021/08/20 12:59:28 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40001  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40001: connect: connection refused". Reconnecting...
{"level":"info","ts":"2021-08-20T12:59:29.091+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:59:29.091+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:59:29.091+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 7"}
{"level":"info","ts":"2021-08-20T12:59:29.091+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 7"}
{"level":"info","ts":"2021-08-20T12:59:29.091+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 7"}
2021/08/20 12:59:29.091411 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:29.091466 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:7 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:29.130404 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:29.219964 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 12:59:29.219981 [info] prophet: coordinator starts to run schedulers 
{"level":"info","ts":"2021-08-20T12:59:29.491+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:59:29.491+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:59:29.491+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 7"}
{"level":"info","ts":"2021-08-20T12:59:29.492+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 7"}
{"level":"info","ts":"2021-08-20T12:59:29.492+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 7"}
2021/08/20 12:59:29.492097 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:19 containerID:5 > message:<type:MsgVoteMsgVote to:19 from:20 term:7 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 19 failed with write tcp 127.0.0.1:59320->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:29.492207 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:29.492250 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:7 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:29.741+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 8"}
{"level":"info","ts":"2021-08-20T12:59:29.741+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 9"}
{"level":"info","ts":"2021-08-20T12:59:29.741+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 9"}
{"level":"info","ts":"2021-08-20T12:59:29.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 9"}
{"level":"info","ts":"2021-08-20T12:59:29.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 9"}
2021/08/20 12:59:29.741265 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:29.741316 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:9 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:29.741384 [info] [transport]: connected to store 5
2021/08/20 12:59:29.741405 [info] [transport]: session 4[127.0.0.1:60988] connected
2021/08/20 12:59:29.741429 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:29.991+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:59:29.991+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:59:29.991+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 7"}
{"level":"info","ts":"2021-08-20T12:59:29.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 7"}
{"level":"info","ts":"2021-08-20T12:59:29.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 7"}
2021/08/20 12:59:29.991559 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:29.991590 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:29.991630 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:7 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:30.130868 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 12:59:30.194823 W | etcdserver: failed to reach the peerURL(http://127.0.0.1:50000) of member 93ccda9956d988f4 (Get "http://127.0.0.1:50000/version": dial tcp 127.0.0.1:50000: connect: connection refused)
2021-08-20 12:59:30.194846 W | etcdserver: cannot get the version of member 93ccda9956d988f4 (Get "http://127.0.0.1:50000/version": dial tcp 127.0.0.1:50000: connect: connection refused)
2021/08/20 12:59:30.591951 [error] [transport]: session 4[127.0.0.1:60988] read failed with read tcp 127.0.0.1:10001->127.0.0.1:60988: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:30.741+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 9"}
{"level":"info","ts":"2021-08-20T12:59:30.741+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 10"}
{"level":"info","ts":"2021-08-20T12:59:30.741+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 10"}
{"level":"info","ts":"2021-08-20T12:59:30.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 10"}
{"level":"info","ts":"2021-08-20T12:59:30.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 10"}
2021/08/20 12:59:30.741637 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:30.741699 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:10 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:30.891+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 7"}
{"level":"info","ts":"2021-08-20T12:59:30.891+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 8"}
{"level":"info","ts":"2021-08-20T12:59:30.891+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 8"}
{"level":"info","ts":"2021-08-20T12:59:30.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 8"}
{"level":"info","ts":"2021-08-20T12:59:30.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 8"}
2021/08/20 12:59:30.891264 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:10 containerID:5 > message:<type:MsgVoteMsgVote to:10 from:9 term:8 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 10 failed with write tcp 127.0.0.1:60988->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:30.891337 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:30.891362 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:8 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021-08-20 12:59:31.072857 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 12:59:31.130229 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:31.191+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 7"}
{"level":"info","ts":"2021-08-20T12:59:31.191+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 8"}
{"level":"info","ts":"2021-08-20T12:59:31.191+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 8"}
{"level":"info","ts":"2021-08-20T12:59:31.191+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 8"}
{"level":"info","ts":"2021-08-20T12:59:31.191+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 8"}
2021/08/20 12:59:31.192092 [info] [transport]: session 5[127.0.0.1:32950] connected
2021/08/20 12:59:31.192092 [info] [transport]: connected to store 5
2021/08/20 12:59:31.192168 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:31.192201 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:31.192255 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:8 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
WARNING: 2021/08/20 12:59:31 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40001  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40001: connect: connection refused". Reconnecting...
{"level":"info","ts":"2021-08-20T12:59:31.791+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 7"}
{"level":"info","ts":"2021-08-20T12:59:31.791+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 8"}
{"level":"info","ts":"2021-08-20T12:59:31.791+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 8"}
{"level":"info","ts":"2021-08-20T12:59:31.791+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 8"}
{"level":"info","ts":"2021-08-20T12:59:31.791+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 8"}
2021/08/20 12:59:31.791537 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:31.791555 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:31.791601 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:8 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:32.130192 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"warn","ts":"2021-08-20T12:59:32.165+0800","caller":"raft/raft.go:1022","msg":"b7af8231eb02d69f stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-08-20T12:59:32.165+0800","caller":"raft/raft.go:711","msg":"b7af8231eb02d69f became follower at term 4"}
{"level":"info","ts":"2021-08-20T12:59:32.165+0800","caller":"raft/node.go:331","msg":"raft.node: b7af8231eb02d69f lost leader b7af8231eb02d69f at term 4"}
2021/08/20 12:59:32.169517 [info] prophet: [prophet-leader/node-2]/keepalive: exit with etcd leader changed
2021/08/20 12:59:32.169551 [error] prophet: [prophet-leader/node-2]/lease: keep lease exit
2021/08/20 12:59:32.169563 [info] prophet: [prophet-leader/node-2]/lease: exit with context done
{"level":"info","ts":"2021-08-20T12:59:32.191+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 8"}
{"level":"info","ts":"2021-08-20T12:59:32.191+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 9"}
{"level":"info","ts":"2021-08-20T12:59:32.191+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 9"}
{"level":"info","ts":"2021-08-20T12:59:32.191+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 9"}
{"level":"info","ts":"2021-08-20T12:59:32.191+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 9"}
2021/08/20 12:59:32.191465 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:32.191497 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:32.191541 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:9 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:32.491+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 8"}
{"level":"info","ts":"2021-08-20T12:59:32.491+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 9"}
{"level":"info","ts":"2021-08-20T12:59:32.491+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 9"}
{"level":"info","ts":"2021-08-20T12:59:32.491+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 9"}
{"level":"info","ts":"2021-08-20T12:59:32.491+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 9"}
2021/08/20 12:59:32.491529 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:32.491550 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:32.491590 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:9 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:32.541+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 10"}
{"level":"info","ts":"2021-08-20T12:59:32.541+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 11"}
{"level":"info","ts":"2021-08-20T12:59:32.541+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 11"}
{"level":"info","ts":"2021-08-20T12:59:32.541+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 11"}
{"level":"info","ts":"2021-08-20T12:59:32.541+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 11"}
2021/08/20 12:59:32.541351 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:32.541389 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:11 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:32.541441 [info] [raftstore]: shard 2 raft step stopped
2021-08-20 12:59:32.736202 W | rafthttp: lost the TCP streaming connection with peer 82a8e79de0ab9ced (stream MsgApp v2 writer)
2021/08/20 12:59:33.130384 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:33.141670 [error] [transport]: session 5[127.0.0.1:32950] read failed with read tcp 127.0.0.1:10001->127.0.0.1:32950: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:33.191+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 9"}
{"level":"info","ts":"2021-08-20T12:59:33.191+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 10"}
{"level":"info","ts":"2021-08-20T12:59:33.191+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 10"}
{"level":"info","ts":"2021-08-20T12:59:33.191+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 10"}
{"level":"info","ts":"2021-08-20T12:59:33.191+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 10"}
2021/08/20 12:59:33.191341 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:33.191397 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:10 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:33.541+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 11"}
{"level":"info","ts":"2021-08-20T12:59:33.541+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 12"}
{"level":"info","ts":"2021-08-20T12:59:33.542+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 12"}
{"level":"info","ts":"2021-08-20T12:59:33.542+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 12"}
{"level":"info","ts":"2021-08-20T12:59:33.542+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 12"}
2021/08/20 12:59:33.542093 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:33.542143 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:12 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:33.542179 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:6 containerID:5 role:Learner > message:<type:MsgVoteMsgVote to:6 from:16 term:12 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 6 failed with write tcp 127.0.0.1:32950->127.0.0.1:10001: write: broken pipe
{"level":"info","ts":"2021-08-20T12:59:33.591+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 8"}
{"level":"info","ts":"2021-08-20T12:59:33.591+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 9"}
{"level":"info","ts":"2021-08-20T12:59:33.591+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 9"}
{"level":"info","ts":"2021-08-20T12:59:33.591+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 9"}
{"level":"info","ts":"2021-08-20T12:59:33.591+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 9"}
2021/08/20 12:59:33.591994 [info] [transport]: connected to store 5
2021/08/20 12:59:33.592019 [info] [transport]: session 6[127.0.0.1:33196] connected
2021/08/20 12:59:33.592043 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:33.592074 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:33.592103 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:9 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
WARNING: 2021/08/20 12:59:34 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
2021/08/20 12:59:34.130773 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:34.192902 [error] [transport]: session 6[127.0.0.1:33196] read failed with read tcp 127.0.0.1:10001->127.0.0.1:33196: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:34.291+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 9"}
{"level":"info","ts":"2021-08-20T12:59:34.291+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 10"}
{"level":"info","ts":"2021-08-20T12:59:34.291+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 10"}
{"level":"info","ts":"2021-08-20T12:59:34.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 10"}
{"level":"info","ts":"2021-08-20T12:59:34.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 10"}
2021/08/20 12:59:34.291709 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:34.291764 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:10 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:34.591+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 9"}
{"level":"info","ts":"2021-08-20T12:59:34.591+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 10"}
{"level":"info","ts":"2021-08-20T12:59:34.591+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 10"}
{"level":"info","ts":"2021-08-20T12:59:34.591+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 10"}
{"level":"info","ts":"2021-08-20T12:59:34.591+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 10"}
2021/08/20 12:59:34.592043 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:10 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:33196->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:34.592127 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:34.592158 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:10 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:34.691+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 10"}
{"level":"info","ts":"2021-08-20T12:59:34.691+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 11"}
{"level":"info","ts":"2021-08-20T12:59:34.691+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 11"}
{"level":"info","ts":"2021-08-20T12:59:34.691+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 11"}
{"level":"info","ts":"2021-08-20T12:59:34.691+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 11"}
2021/08/20 12:59:34.692097 [info] [transport]: connected to store 5
2021/08/20 12:59:34.692114 [info] [transport]: session 7[127.0.0.1:33304] connected
2021/08/20 12:59:34.692171 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:34.692175 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:34.692241 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:11 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:34.741+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 12"}
{"level":"info","ts":"2021-08-20T12:59:34.742+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 13"}
{"level":"info","ts":"2021-08-20T12:59:34.742+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 13"}
{"level":"info","ts":"2021-08-20T12:59:34.742+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 13"}
{"level":"info","ts":"2021-08-20T12:59:34.742+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 13"}
2021/08/20 12:59:34.742097 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:34.742144 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:13 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:34.742193 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:35.130461 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:35.291+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 10"}
{"level":"info","ts":"2021-08-20T12:59:35.291+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 11"}
{"level":"info","ts":"2021-08-20T12:59:35.291+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 11"}
{"level":"info","ts":"2021-08-20T12:59:35.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 11"}
{"level":"info","ts":"2021-08-20T12:59:35.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 11"}
2021/08/20 12:59:35.292000 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:35.292057 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:35.292109 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:11 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:35.791+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 11"}
{"level":"info","ts":"2021-08-20T12:59:35.791+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 12"}
{"level":"info","ts":"2021-08-20T12:59:35.791+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 12"}
{"level":"info","ts":"2021-08-20T12:59:35.791+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 12"}
{"level":"info","ts":"2021-08-20T12:59:35.791+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 12"}
2021/08/20 12:59:35.791557 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:35.791606 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:35.791650 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:12 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:35.941+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 13"}
{"level":"info","ts":"2021-08-20T12:59:35.941+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 14"}
{"level":"info","ts":"2021-08-20T12:59:35.941+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 14"}
{"level":"info","ts":"2021-08-20T12:59:35.941+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 14"}
{"level":"info","ts":"2021-08-20T12:59:35.941+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 14"}
2021/08/20 12:59:35.941873 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:35.941923 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:14 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:35.941993 [info] [raftstore]: shard 2 raft step stopped
2021-08-20 12:59:36.073046 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 12:59:36.130540 [error] [raftstore]: shards pool create shards failed with client is closed
WARNING: 2021/08/20 12:59:36 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40001  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40001: connect: connection refused". Reconnecting...
{"level":"info","ts":"2021-08-20T12:59:36.365+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 4"}
{"level":"info","ts":"2021-08-20T12:59:36.365+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 5"}
{"level":"info","ts":"2021-08-20T12:59:36.365+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 5"}
{"level":"info","ts":"2021-08-20T12:59:36.365+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 5"}
{"level":"info","ts":"2021-08-20T12:59:36.365+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 5"}
{"level":"info","ts":"2021-08-20T12:59:36.391+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 10"}
{"level":"info","ts":"2021-08-20T12:59:36.391+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 11"}
{"level":"info","ts":"2021-08-20T12:59:36.391+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 11"}
{"level":"info","ts":"2021-08-20T12:59:36.391+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 11"}
{"level":"info","ts":"2021-08-20T12:59:36.392+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 11"}
2021/08/20 12:59:36.392052 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:36.392082 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:36.392122 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:11 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:36.791+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 11"}
{"level":"info","ts":"2021-08-20T12:59:36.791+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 12"}
{"level":"info","ts":"2021-08-20T12:59:36.791+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 12"}
{"level":"info","ts":"2021-08-20T12:59:36.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 12"}
{"level":"info","ts":"2021-08-20T12:59:36.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 12"}
2021/08/20 12:59:36.791705 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:36.791718 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:36.791762 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:12 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:36.991+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 12"}
{"level":"info","ts":"2021-08-20T12:59:36.991+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 13"}
{"level":"info","ts":"2021-08-20T12:59:36.991+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 13"}
{"level":"info","ts":"2021-08-20T12:59:36.991+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 13"}
{"level":"info","ts":"2021-08-20T12:59:36.991+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 13"}
2021/08/20 12:59:36.991338 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:36.991358 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:36.991402 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:13 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:37.130877 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:37.441+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 14"}
{"level":"info","ts":"2021-08-20T12:59:37.441+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 15"}
{"level":"info","ts":"2021-08-20T12:59:37.441+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 15"}
{"level":"info","ts":"2021-08-20T12:59:37.441+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 15"}
{"level":"info","ts":"2021-08-20T12:59:37.441+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 15"}
2021/08/20 12:59:37.441454 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:37.441512 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:15 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:37.441570 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:37.491+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 11"}
{"level":"info","ts":"2021-08-20T12:59:37.491+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 12"}
{"level":"info","ts":"2021-08-20T12:59:37.491+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 12"}
{"level":"info","ts":"2021-08-20T12:59:37.491+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 12"}
{"level":"info","ts":"2021-08-20T12:59:37.491+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 12"}
2021/08/20 12:59:37.492049 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:37.492106 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:37.492157 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:12 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:37.991+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 12"}
{"level":"info","ts":"2021-08-20T12:59:37.991+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 13"}
{"level":"info","ts":"2021-08-20T12:59:37.991+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 13"}
{"level":"info","ts":"2021-08-20T12:59:37.991+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 13"}
{"level":"info","ts":"2021-08-20T12:59:37.991+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 13"}
2021/08/20 12:59:37.991600 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:37.991615 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:37.991663 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:13 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:38.130453 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:38.591+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 13"}
{"level":"info","ts":"2021-08-20T12:59:38.591+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 14"}
{"level":"info","ts":"2021-08-20T12:59:38.591+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 14"}
{"level":"info","ts":"2021-08-20T12:59:38.591+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 14"}
{"level":"info","ts":"2021-08-20T12:59:38.591+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 14"}
2021/08/20 12:59:38.591644 [error] [transport]: session 7[127.0.0.1:33304] read failed with read tcp 127.0.0.1:10001->127.0.0.1:33304: i/o timeout
2021/08/20 12:59:38.591724 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:38.591782 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:14 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:38.841+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 15"}
{"level":"info","ts":"2021-08-20T12:59:38.841+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 16"}
{"level":"info","ts":"2021-08-20T12:59:38.841+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 16"}
{"level":"info","ts":"2021-08-20T12:59:38.841+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 16"}
{"level":"info","ts":"2021-08-20T12:59:38.841+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 16"}
2021/08/20 12:59:38.841960 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:38.842017 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:16 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:38.842052 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:6 containerID:5 role:Learner > message:<type:MsgVoteMsgVote to:6 from:16 term:16 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 6 failed with write tcp 127.0.0.1:33304->127.0.0.1:10001: write: connection reset by peer
{"level":"info","ts":"2021-08-20T12:59:38.991+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 12"}
{"level":"info","ts":"2021-08-20T12:59:38.991+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 13"}
{"level":"info","ts":"2021-08-20T12:59:38.991+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 13"}
{"level":"info","ts":"2021-08-20T12:59:38.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 13"}
{"level":"info","ts":"2021-08-20T12:59:38.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 13"}
2021/08/20 12:59:38.992058 [info] [transport]: connected to store 5
2021/08/20 12:59:38.992066 [info] [transport]: session 8[127.0.0.1:33706] connected
2021/08/20 12:59:38.992124 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:38.992162 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:38.992216 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:13 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:39.130526 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 12:59:39.221069 W | etcdserver: read-only range request "key:\"/prophet/scheduler_config/\" range_end:\"/prophet/scheduler_config0\" limit:1000 " with result "error:context deadline exceeded" took too long (10.0008796s) to execute
{"level":"warn","ts":"2021-08-20T12:59:39.221+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 12:59:39.221101 [error] prophet: read /prophet/scheduler_config/ from etcd failed with context deadline exceeded
2021/08/20 12:59:39.221105 [error] prophet: cannot load schedulers' config, retry times 0, error context deadline exceeded
{"level":"info","ts":"2021-08-20T12:59:39.591+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 14"}
{"level":"info","ts":"2021-08-20T12:59:39.592+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 15"}
{"level":"info","ts":"2021-08-20T12:59:39.592+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 15"}
{"level":"info","ts":"2021-08-20T12:59:39.592+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 15"}
{"level":"info","ts":"2021-08-20T12:59:39.592+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 15"}
2021/08/20 12:59:39.592111 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:39.592132 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:39.592180 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:15 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:39.791+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 13"}
{"level":"info","ts":"2021-08-20T12:59:39.791+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 14"}
{"level":"info","ts":"2021-08-20T12:59:39.791+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 14"}
{"level":"info","ts":"2021-08-20T12:59:39.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 14"}
{"level":"info","ts":"2021-08-20T12:59:39.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 14"}
2021/08/20 12:59:39.791843 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:39.791866 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:39.791908 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:14 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:39.864+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T12:59:39.864+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 6"}
{"level":"info","ts":"2021-08-20T12:59:39.864+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 6"}
{"level":"info","ts":"2021-08-20T12:59:39.864+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 6"}
{"level":"info","ts":"2021-08-20T12:59:39.864+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 6"}
{"level":"info","ts":"2021-08-20T12:59:40.091+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 13"}
{"level":"info","ts":"2021-08-20T12:59:40.091+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 14"}
{"level":"info","ts":"2021-08-20T12:59:40.091+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 14"}
{"level":"info","ts":"2021-08-20T12:59:40.091+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 14"}
{"level":"info","ts":"2021-08-20T12:59:40.091+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 14"}
2021/08/20 12:59:40.091931 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:40.091982 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:40.092034 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:14 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:40.130734 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:40.141+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 16"}
{"level":"info","ts":"2021-08-20T12:59:40.142+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 17"}
{"level":"info","ts":"2021-08-20T12:59:40.142+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 17"}
{"level":"info","ts":"2021-08-20T12:59:40.142+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 17"}
{"level":"info","ts":"2021-08-20T12:59:40.142+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 17"}
2021/08/20 12:59:40.142089 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:40.142125 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:17 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:40.142159 [info] [raftstore]: shard 2 raft step stopped
2021-08-20 12:59:40.220287 W | etcdserver: timed out waiting for read index response (local node might have slow network)
2021/08/20 12:59:40.742877 [error] [transport]: session 8[127.0.0.1:33706] read failed with read tcp 127.0.0.1:10001->127.0.0.1:33706: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:40.891+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 14"}
{"level":"info","ts":"2021-08-20T12:59:40.891+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 15"}
{"level":"info","ts":"2021-08-20T12:59:40.891+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 15"}
{"level":"info","ts":"2021-08-20T12:59:40.891+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 15"}
{"level":"info","ts":"2021-08-20T12:59:40.891+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 15"}
2021/08/20 12:59:40.891423 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:40.891476 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:15 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021-08-20 12:59:41.073448 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
{"level":"info","ts":"2021-08-20T12:59:41.091+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 14"}
{"level":"info","ts":"2021-08-20T12:59:41.091+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 15"}
{"level":"info","ts":"2021-08-20T12:59:41.091+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 15"}
{"level":"info","ts":"2021-08-20T12:59:41.091+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 15"}
{"level":"info","ts":"2021-08-20T12:59:41.091+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 15"}
2021/08/20 12:59:41.091470 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:15 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:33706->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:41.091565 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:41.091607 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:15 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:41.130179 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:41.291+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 15"}
{"level":"info","ts":"2021-08-20T12:59:41.291+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 16"}
{"level":"info","ts":"2021-08-20T12:59:41.291+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 16"}
{"level":"info","ts":"2021-08-20T12:59:41.291+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 16"}
{"level":"info","ts":"2021-08-20T12:59:41.291+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 16"}
2021/08/20 12:59:41.291606 [info] [transport]: connected to store 5
2021/08/20 12:59:41.291612 [info] [transport]: session 9[127.0.0.1:33914] connected
2021/08/20 12:59:41.291664 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:41.291700 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:41.291750 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:16 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:41.841+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 17"}
{"level":"info","ts":"2021-08-20T12:59:41.841+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 18"}
{"level":"info","ts":"2021-08-20T12:59:41.841+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 18"}
{"level":"info","ts":"2021-08-20T12:59:41.841+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 18"}
{"level":"info","ts":"2021-08-20T12:59:41.841+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 18"}
2021/08/20 12:59:41.842006 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:41.842066 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:18 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:41.842138 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:42.130679 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:42.191+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 15"}
{"level":"info","ts":"2021-08-20T12:59:42.191+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 16"}
{"level":"info","ts":"2021-08-20T12:59:42.191+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 16"}
{"level":"info","ts":"2021-08-20T12:59:42.191+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 16"}
{"level":"info","ts":"2021-08-20T12:59:42.191+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 16"}
2021/08/20 12:59:42.191185 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:42.191240 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:42.191283 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:16 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"warn","ts":"2021-08-20T12:59:42.270+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 12:59:42.270196 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/08/20 12:59:42.270200 [error] prophet: [prophet-leader/node-2]/loop: load current leader failed with context deadline exceeded, retry later
2021-08-20 12:59:42.270180 W | etcdserver: read-only range request "key:\"/electors/leader/prophet-leader\" " with result "error:context deadline exceeded" took too long (10.0004045s) to execute
{"level":"info","ts":"2021-08-20T12:59:42.291+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 16"}
{"level":"info","ts":"2021-08-20T12:59:42.291+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 17"}
{"level":"info","ts":"2021-08-20T12:59:42.291+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 17"}
{"level":"info","ts":"2021-08-20T12:59:42.291+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 17"}
{"level":"info","ts":"2021-08-20T12:59:42.291+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 17"}
2021/08/20 12:59:42.291276 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:42.291279 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:42.291334 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:17 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:42.791+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 15"}
{"level":"info","ts":"2021-08-20T12:59:42.791+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 16"}
{"level":"info","ts":"2021-08-20T12:59:42.791+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 16"}
{"level":"info","ts":"2021-08-20T12:59:42.791+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 16"}
{"level":"info","ts":"2021-08-20T12:59:42.791+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 16"}
2021/08/20 12:59:42.791969 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:42.792017 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:42.792080 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:16 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:43.130741 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:43.191126 [error] prophet: container 7 heartbeat failed with rpc timeout
2021/08/20 12:59:43.191149 [error] [raftstore]: send store heartbeat failed with rpc timeout
{"level":"info","ts":"2021-08-20T12:59:43.191+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 16"}
{"level":"info","ts":"2021-08-20T12:59:43.191+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 17"}
{"level":"info","ts":"2021-08-20T12:59:43.191+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 17"}
{"level":"info","ts":"2021-08-20T12:59:43.191+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 17"}
{"level":"info","ts":"2021-08-20T12:59:43.191+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 17"}
2021/08/20 12:59:43.191261 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:43.191289 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:43.191332 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:17 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
WARNING: 2021/08/20 12:59:43 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40001  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40001: connect: connection refused". Reconnecting...
{"level":"info","ts":"2021-08-20T12:59:43.541+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 18"}
{"level":"info","ts":"2021-08-20T12:59:43.541+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 19"}
{"level":"info","ts":"2021-08-20T12:59:43.542+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 19"}
{"level":"info","ts":"2021-08-20T12:59:43.542+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 19"}
{"level":"info","ts":"2021-08-20T12:59:43.542+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 19"}
2021/08/20 12:59:43.542093 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:43.542142 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:19 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:43.542198 [info] [raftstore]: shard 2 raft step stopped
WARNING: 2021/08/20 12:59:43 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
2021/08/20 12:59:44.130595 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:44.143025 [error] [transport]: session 9[127.0.0.1:33914] read failed with read tcp 127.0.0.1:10001->127.0.0.1:33914: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:44.191+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 17"}
{"level":"info","ts":"2021-08-20T12:59:44.191+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 18"}
{"level":"info","ts":"2021-08-20T12:59:44.191+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 18"}
{"level":"info","ts":"2021-08-20T12:59:44.191+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 18"}
{"level":"info","ts":"2021-08-20T12:59:44.191+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 18"}
2021/08/20 12:59:44.191312 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:44.191382 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:18 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:44.391+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 16"}
{"level":"info","ts":"2021-08-20T12:59:44.392+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 17"}
{"level":"info","ts":"2021-08-20T12:59:44.392+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 17"}
{"level":"info","ts":"2021-08-20T12:59:44.392+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 17"}
{"level":"info","ts":"2021-08-20T12:59:44.392+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 17"}
2021/08/20 12:59:44.392134 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:17 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:33914->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:44.392293 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:44.392366 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:17 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:44.792+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 17"}
{"level":"info","ts":"2021-08-20T12:59:44.792+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 18"}
{"level":"info","ts":"2021-08-20T12:59:44.792+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 18"}
{"level":"info","ts":"2021-08-20T12:59:44.792+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 18"}
{"level":"info","ts":"2021-08-20T12:59:44.792+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 18"}
2021/08/20 12:59:44.792209 [info] [transport]: session 10[127.0.0.1:34230] connected
2021/08/20 12:59:44.792212 [info] [transport]: connected to store 5
2021/08/20 12:59:44.792274 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:44.792278 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:44.792333 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:18 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:44.841+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 19"}
{"level":"info","ts":"2021-08-20T12:59:44.841+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 20"}
{"level":"info","ts":"2021-08-20T12:59:44.842+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 20"}
{"level":"info","ts":"2021-08-20T12:59:44.842+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 20"}
{"level":"info","ts":"2021-08-20T12:59:44.842+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 20"}
2021/08/20 12:59:44.842086 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:44.842125 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:20 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:44.842166 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:45.130997 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:45.364+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 6"}
{"level":"info","ts":"2021-08-20T12:59:45.364+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 7"}
{"level":"info","ts":"2021-08-20T12:59:45.364+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 7"}
{"level":"info","ts":"2021-08-20T12:59:45.364+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 7"}
{"level":"info","ts":"2021-08-20T12:59:45.364+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 7"}
2021/08/20 12:59:45.442576 [error] [transport]: session 10[127.0.0.1:34230] read failed with read tcp 127.0.0.1:10001->127.0.0.1:34230: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:45.691+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 18"}
{"level":"info","ts":"2021-08-20T12:59:45.691+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 19"}
{"level":"info","ts":"2021-08-20T12:59:45.691+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 19"}
{"level":"info","ts":"2021-08-20T12:59:45.691+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 19"}
{"level":"info","ts":"2021-08-20T12:59:45.692+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 19"}
2021/08/20 12:59:45.692146 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:45.692204 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:19 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:45.891+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 17"}
{"level":"info","ts":"2021-08-20T12:59:45.891+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 18"}
{"level":"info","ts":"2021-08-20T12:59:45.891+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 18"}
{"level":"info","ts":"2021-08-20T12:59:45.891+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 18"}
{"level":"info","ts":"2021-08-20T12:59:45.891+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 18"}
2021/08/20 12:59:45.891126 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:18 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:34230->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:45.891192 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:45.891221 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:18 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021-08-20 12:59:46.073515 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 12:59:46.130344 [info] [raftstore]: dynamic shards pool job gcAllocating
2021/08/20 12:59:46.130368 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:46.291+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 18"}
{"level":"info","ts":"2021-08-20T12:59:46.291+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 19"}
{"level":"info","ts":"2021-08-20T12:59:46.291+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 19"}
{"level":"info","ts":"2021-08-20T12:59:46.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 19"}
{"level":"info","ts":"2021-08-20T12:59:46.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 19"}
2021/08/20 12:59:46.291871 [info] [transport]: connected to store 5
2021/08/20 12:59:46.291881 [info] [transport]: session 11[127.0.0.1:34372] connected
2021/08/20 12:59:46.291965 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:46.291965 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:46.292036 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:19 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:46.691+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 19"}
{"level":"info","ts":"2021-08-20T12:59:46.691+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 20"}
{"level":"info","ts":"2021-08-20T12:59:46.691+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 20"}
{"level":"info","ts":"2021-08-20T12:59:46.691+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 20"}
{"level":"info","ts":"2021-08-20T12:59:46.691+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 20"}
2021/08/20 12:59:46.692058 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:46.692114 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:46.692184 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:20 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:46.741+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 20"}
{"level":"info","ts":"2021-08-20T12:59:46.741+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 21"}
{"level":"info","ts":"2021-08-20T12:59:46.741+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 21"}
{"level":"info","ts":"2021-08-20T12:59:46.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 21"}
{"level":"info","ts":"2021-08-20T12:59:46.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 21"}
2021/08/20 12:59:46.742086 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:46.742137 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:21 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:46.742192 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:46.991+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 18"}
{"level":"info","ts":"2021-08-20T12:59:46.992+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 19"}
{"level":"info","ts":"2021-08-20T12:59:46.992+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 19"}
{"level":"info","ts":"2021-08-20T12:59:46.992+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 19"}
{"level":"info","ts":"2021-08-20T12:59:46.992+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 19"}
2021/08/20 12:59:46.992153 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:46.992173 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:46.992217 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:19 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:47.130523 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:47.593059 [error] [transport]: session 11[127.0.0.1:34372] read failed with read tcp 127.0.0.1:10001->127.0.0.1:34372: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:47.791+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 19"}
{"level":"info","ts":"2021-08-20T12:59:47.791+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 20"}
{"level":"info","ts":"2021-08-20T12:59:47.791+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 20"}
{"level":"info","ts":"2021-08-20T12:59:47.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 20"}
{"level":"info","ts":"2021-08-20T12:59:47.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 20"}
2021/08/20 12:59:47.791958 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:47.792014 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:20 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:48.130976 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:48.391+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 20"}
{"level":"info","ts":"2021-08-20T12:59:48.391+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 21"}
{"level":"info","ts":"2021-08-20T12:59:48.391+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 21"}
{"level":"info","ts":"2021-08-20T12:59:48.391+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 21"}
{"level":"info","ts":"2021-08-20T12:59:48.391+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 21"}
2021/08/20 12:59:48.391612 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:10 containerID:5 > message:<type:MsgVoteMsgVote to:10 from:9 term:21 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 10 failed with write tcp 127.0.0.1:34372->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:48.391697 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:48.391718 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:21 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:48.541+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 21"}
{"level":"info","ts":"2021-08-20T12:59:48.541+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 22"}
{"level":"info","ts":"2021-08-20T12:59:48.541+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 22"}
{"level":"info","ts":"2021-08-20T12:59:48.541+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 22"}
{"level":"info","ts":"2021-08-20T12:59:48.541+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 22"}
2021/08/20 12:59:48.541164 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:48.541200 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:22 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:48.541261 [info] [transport]: connected to store 5
2021/08/20 12:59:48.541290 [info] [transport]: session 12[127.0.0.1:34570] connected
2021/08/20 12:59:48.541324 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:48.791+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 19"}
{"level":"info","ts":"2021-08-20T12:59:48.791+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 20"}
{"level":"info","ts":"2021-08-20T12:59:48.791+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 20"}
{"level":"info","ts":"2021-08-20T12:59:48.791+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 20"}
{"level":"info","ts":"2021-08-20T12:59:48.791+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 20"}
2021/08/20 12:59:48.791887 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:48.791948 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:48.791987 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:20 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:48.891+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 20"}
{"level":"info","ts":"2021-08-20T12:59:48.891+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 21"}
{"level":"info","ts":"2021-08-20T12:59:48.891+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 21"}
{"level":"info","ts":"2021-08-20T12:59:48.891+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 21"}
{"level":"info","ts":"2021-08-20T12:59:48.891+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 21"}
2021/08/20 12:59:48.892046 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:48.892108 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:48.892151 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:21 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:49.130469 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 12:59:49.222090 W | etcdserver: read-only range request "key:\"/prophet/scheduler_config/\" range_end:\"/prophet/scheduler_config0\" limit:1000 " with result "error:context deadline exceeded" took too long (10.0008203s) to execute
{"level":"warn","ts":"2021-08-20T12:59:49.222+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 12:59:49.222129 [error] prophet: read /prophet/scheduler_config/ from etcd failed with context deadline exceeded
2021/08/20 12:59:49.222137 [error] prophet: cannot load schedulers' config, retry times 1, error context deadline exceeded
2021/08/20 12:59:49.492280 [error] [transport]: session 12[127.0.0.1:34570] read failed with read tcp 127.0.0.1:10001->127.0.0.1:34570: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:49.691+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 21"}
{"level":"info","ts":"2021-08-20T12:59:49.691+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 22"}
{"level":"info","ts":"2021-08-20T12:59:49.691+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 22"}
{"level":"info","ts":"2021-08-20T12:59:49.691+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 22"}
{"level":"info","ts":"2021-08-20T12:59:49.691+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 22"}
2021/08/20 12:59:49.691991 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:49.692050 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:22 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:49.891+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 20"}
{"level":"info","ts":"2021-08-20T12:59:49.891+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 21"}
{"level":"info","ts":"2021-08-20T12:59:49.891+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 21"}
{"level":"info","ts":"2021-08-20T12:59:49.891+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 21"}
{"level":"info","ts":"2021-08-20T12:59:49.891+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 21"}
2021/08/20 12:59:49.891856 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:21 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:34570->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:49.891962 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:49.891995 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:21 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:50.130312 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:50.191+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 21"}
{"level":"info","ts":"2021-08-20T12:59:50.191+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 22"}
{"level":"info","ts":"2021-08-20T12:59:50.191+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 22"}
{"level":"info","ts":"2021-08-20T12:59:50.191+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 22"}
{"level":"info","ts":"2021-08-20T12:59:50.191+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 22"}
2021/08/20 12:59:50.191743 [info] [transport]: session 13[127.0.0.1:34726] connected
2021/08/20 12:59:50.191747 [info] [transport]: connected to store 5
2021/08/20 12:59:50.191817 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:50.191854 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:50.191908 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:22 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:50.241+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 22"}
{"level":"info","ts":"2021-08-20T12:59:50.241+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 23"}
{"level":"info","ts":"2021-08-20T12:59:50.241+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 23"}
{"level":"info","ts":"2021-08-20T12:59:50.241+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 23"}
{"level":"info","ts":"2021-08-20T12:59:50.241+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 23"}
2021/08/20 12:59:50.242031 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:50.242086 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:23 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:50.242126 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:50.842452 [error] [transport]: session 13[127.0.0.1:34726] read failed with read tcp 127.0.0.1:10001->127.0.0.1:34726: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:50.891+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 22"}
{"level":"info","ts":"2021-08-20T12:59:50.891+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 23"}
{"level":"info","ts":"2021-08-20T12:59:50.891+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 23"}
{"level":"info","ts":"2021-08-20T12:59:50.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 23"}
{"level":"info","ts":"2021-08-20T12:59:50.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 23"}
2021/08/20 12:59:50.891493 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:50.891546 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:23 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:50.991+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 21"}
{"level":"info","ts":"2021-08-20T12:59:50.991+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 22"}
{"level":"info","ts":"2021-08-20T12:59:50.991+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 22"}
{"level":"info","ts":"2021-08-20T12:59:50.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 22"}
{"level":"info","ts":"2021-08-20T12:59:50.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 22"}
2021/08/20 12:59:50.991267 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:22 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:34726->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:50.991333 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:50.991366 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:22 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021-08-20 12:59:51.071914 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021-08-20 12:59:51.071934 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 12:59:51.071947 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 12:59:51.074076 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 12:59:51.130438 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:51.191+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 22"}
{"level":"info","ts":"2021-08-20T12:59:51.191+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 23"}
{"level":"info","ts":"2021-08-20T12:59:51.191+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 23"}
{"level":"info","ts":"2021-08-20T12:59:51.191+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 23"}
{"level":"info","ts":"2021-08-20T12:59:51.191+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 23"}
2021/08/20 12:59:51.191877 [info] [transport]: session 14[127.0.0.1:34816] connected
2021/08/20 12:59:51.191877 [info] [transport]: connected to store 5
2021/08/20 12:59:51.191934 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:51.191950 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:51.191986 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:23 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021-08-20 12:59:51.221077 W | etcdserver: timed out waiting for read index response (local node might have slow network)
{"level":"info","ts":"2021-08-20T12:59:51.264+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 7"}
{"level":"info","ts":"2021-08-20T12:59:51.264+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 8"}
{"level":"info","ts":"2021-08-20T12:59:51.264+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 8"}
{"level":"info","ts":"2021-08-20T12:59:51.264+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 8"}
{"level":"info","ts":"2021-08-20T12:59:51.264+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 8"}
{"level":"info","ts":"2021-08-20T12:59:51.341+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 23"}
{"level":"info","ts":"2021-08-20T12:59:51.341+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 24"}
{"level":"info","ts":"2021-08-20T12:59:51.341+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 24"}
{"level":"info","ts":"2021-08-20T12:59:51.341+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 24"}
{"level":"info","ts":"2021-08-20T12:59:51.341+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 24"}
2021/08/20 12:59:51.341385 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:51.341432 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:24 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:51.341476 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:51.942442 [error] [transport]: session 14[127.0.0.1:34816] read failed with read tcp 127.0.0.1:10001->127.0.0.1:34816: i/o timeout
2021/08/20 12:59:52.130583 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:52.291+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 23"}
{"level":"info","ts":"2021-08-20T12:59:52.291+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 24"}
{"level":"info","ts":"2021-08-20T12:59:52.291+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 24"}
{"level":"info","ts":"2021-08-20T12:59:52.291+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 24"}
{"level":"info","ts":"2021-08-20T12:59:52.291+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 24"}
2021/08/20 12:59:52.291269 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:52.291330 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:24 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"warn","ts":"2021-08-20T12:59:52.371+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 12:59:52.371128 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/08/20 12:59:52.371132 [error] prophet: [prophet-leader/node-2]/loop: load current leader failed with context deadline exceeded, retry later
2021-08-20 12:59:52.371114 W | etcdserver: read-only range request "key:\"/electors/leader/prophet-leader\" " with result "error:context deadline exceeded" took too long (9.9999775s) to execute
{"level":"info","ts":"2021-08-20T12:59:52.691+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 23"}
{"level":"info","ts":"2021-08-20T12:59:52.691+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 24"}
{"level":"info","ts":"2021-08-20T12:59:52.691+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 24"}
{"level":"info","ts":"2021-08-20T12:59:52.691+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 24"}
{"level":"info","ts":"2021-08-20T12:59:52.691+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 24"}
2021/08/20 12:59:52.692023 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:19 containerID:5 > message:<type:MsgVoteMsgVote to:19 from:20 term:24 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 19 failed with write tcp 127.0.0.1:34816->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:52.692093 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:52.692122 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:24 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:52.741+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 24"}
{"level":"info","ts":"2021-08-20T12:59:52.741+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 25"}
{"level":"info","ts":"2021-08-20T12:59:52.741+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 25"}
{"level":"info","ts":"2021-08-20T12:59:52.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 25"}
{"level":"info","ts":"2021-08-20T12:59:52.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 25"}
2021/08/20 12:59:52.741933 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:52.741970 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:25 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:52.742040 [info] [transport]: connected to store 5
2021/08/20 12:59:52.742072 [info] [transport]: session 15[127.0.0.1:34960] connected
2021/08/20 12:59:52.742107 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:52.792+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 22"}
{"level":"info","ts":"2021-08-20T12:59:52.792+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 23"}
{"level":"info","ts":"2021-08-20T12:59:52.792+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 23"}
{"level":"info","ts":"2021-08-20T12:59:52.792+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 23"}
{"level":"info","ts":"2021-08-20T12:59:52.792+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 23"}
2021/08/20 12:59:52.792162 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:52.792186 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:52.792232 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:23 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:53.130793 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:53.191052 [error] prophet: container 7 heartbeat failed with rpc timeout
2021/08/20 12:59:53.191071 [error] [raftstore]: send store heartbeat failed with rpc timeout
2021/08/20 12:59:53.392921 [error] [transport]: session 15[127.0.0.1:34960] read failed with read tcp 127.0.0.1:10001->127.0.0.1:34960: i/o timeout
WARNING: 2021/08/20 12:59:53 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40001  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40001: connect: connection refused". Reconnecting...
{"level":"info","ts":"2021-08-20T12:59:53.791+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 24"}
{"level":"info","ts":"2021-08-20T12:59:53.791+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 25"}
{"level":"info","ts":"2021-08-20T12:59:53.791+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 25"}
{"level":"info","ts":"2021-08-20T12:59:53.791+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 25"}
{"level":"info","ts":"2021-08-20T12:59:53.791+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 25"}
{"level":"info","ts":"2021-08-20T12:59:53.791+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 24"}
{"level":"info","ts":"2021-08-20T12:59:53.792+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 25"}
{"level":"info","ts":"2021-08-20T12:59:53.792+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 25"}
{"level":"info","ts":"2021-08-20T12:59:53.792+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 25"}
{"level":"info","ts":"2021-08-20T12:59:53.792+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 25"}
2021/08/20 12:59:53.792095 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:19 containerID:5 > message:<type:MsgVoteMsgVote to:19 from:20 term:25 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 19 failed with write tcp 127.0.0.1:34960->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:53.792161 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:53.792189 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:25 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:53.792213 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:25 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:54.091+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 23"}
{"level":"info","ts":"2021-08-20T12:59:54.091+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 24"}
{"level":"info","ts":"2021-08-20T12:59:54.091+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 24"}
{"level":"info","ts":"2021-08-20T12:59:54.091+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 24"}
{"level":"info","ts":"2021-08-20T12:59:54.091+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 24"}
2021/08/20 12:59:54.091934 [info] [transport]: session 16[127.0.0.1:35088] connected
2021/08/20 12:59:54.091938 [info] [transport]: connected to store 5
2021/08/20 12:59:54.092001 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:54.092035 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:54.092075 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:24 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:54.130765 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:54.541+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 25"}
{"level":"info","ts":"2021-08-20T12:59:54.541+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 26"}
{"level":"info","ts":"2021-08-20T12:59:54.541+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 26"}
{"level":"info","ts":"2021-08-20T12:59:54.541+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 26"}
{"level":"info","ts":"2021-08-20T12:59:54.541+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 26"}
2021/08/20 12:59:54.541183 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:54.541235 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:26 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:54.541292 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:55.130319 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:55.141718 [error] [transport]: session 16[127.0.0.1:35088] read failed with read tcp 127.0.0.1:10001->127.0.0.1:35088: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:55.291+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 24"}
{"level":"info","ts":"2021-08-20T12:59:55.291+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 25"}
{"level":"info","ts":"2021-08-20T12:59:55.291+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 25"}
{"level":"info","ts":"2021-08-20T12:59:55.291+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 25"}
{"level":"info","ts":"2021-08-20T12:59:55.291+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 25"}
2021/08/20 12:59:55.292006 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:55.292059 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:25 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:55.391+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 25"}
{"level":"info","ts":"2021-08-20T12:59:55.391+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 26"}
{"level":"info","ts":"2021-08-20T12:59:55.391+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 26"}
{"level":"info","ts":"2021-08-20T12:59:55.391+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 26"}
{"level":"info","ts":"2021-08-20T12:59:55.391+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 26"}
2021/08/20 12:59:55.391936 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:10 containerID:5 > message:<type:MsgVoteMsgVote to:10 from:9 term:26 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 10 failed with write tcp 127.0.0.1:35088->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:55.392002 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:55.392031 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:26 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:55.591+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 25"}
{"level":"info","ts":"2021-08-20T12:59:55.591+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 26"}
{"level":"info","ts":"2021-08-20T12:59:55.591+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 26"}
{"level":"info","ts":"2021-08-20T12:59:55.591+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 26"}
{"level":"info","ts":"2021-08-20T12:59:55.591+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 26"}
2021/08/20 12:59:55.591450 [info] [transport]: connected to store 5
2021/08/20 12:59:55.591476 [info] [transport]: session 17[127.0.0.1:35220] connected
2021/08/20 12:59:55.591500 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:55.591531 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:55.591575 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:26 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:55.641+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 26"}
{"level":"info","ts":"2021-08-20T12:59:55.641+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 27"}
{"level":"info","ts":"2021-08-20T12:59:55.641+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 27"}
{"level":"info","ts":"2021-08-20T12:59:55.641+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 27"}
{"level":"info","ts":"2021-08-20T12:59:55.641+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 27"}
2021/08/20 12:59:55.641167 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:55.641205 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:27 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:55.641247 [info] [raftstore]: shard 2 raft step stopped
2021-08-20 12:59:56.072945 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 12:59:56.072965 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021-08-20 12:59:56.072993 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 12:59:56.075106 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 12:59:56.130347 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 12:59:56.241587 [error] [transport]: session 17[127.0.0.1:35220] read failed with read tcp 127.0.0.1:10001->127.0.0.1:35220: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:56.391+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 25"}
{"level":"info","ts":"2021-08-20T12:59:56.391+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 26"}
{"level":"info","ts":"2021-08-20T12:59:56.391+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 26"}
{"level":"info","ts":"2021-08-20T12:59:56.391+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 26"}
{"level":"info","ts":"2021-08-20T12:59:56.391+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 26"}
2021/08/20 12:59:56.391739 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:56.391798 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:26 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:56.464+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 8"}
{"level":"info","ts":"2021-08-20T12:59:56.464+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 9"}
{"level":"info","ts":"2021-08-20T12:59:56.464+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 9"}
{"level":"info","ts":"2021-08-20T12:59:56.464+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 9"}
{"level":"info","ts":"2021-08-20T12:59:56.464+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 9"}
{"level":"info","ts":"2021-08-20T12:59:56.591+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 26"}
{"level":"info","ts":"2021-08-20T12:59:56.591+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 27"}
{"level":"info","ts":"2021-08-20T12:59:56.591+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 27"}
{"level":"info","ts":"2021-08-20T12:59:56.591+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 27"}
{"level":"info","ts":"2021-08-20T12:59:56.591+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 27"}
2021/08/20 12:59:56.591285 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:10 containerID:5 > message:<type:MsgVoteMsgVote to:10 from:9 term:27 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 10 failed with write tcp 127.0.0.1:35220->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:56.591370 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:56.591408 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:27 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:56.792+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 26"}
{"level":"info","ts":"2021-08-20T12:59:56.792+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 27"}
{"level":"info","ts":"2021-08-20T12:59:56.792+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 27"}
{"level":"info","ts":"2021-08-20T12:59:56.792+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 27"}
{"level":"info","ts":"2021-08-20T12:59:56.792+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 27"}
2021/08/20 12:59:56.792138 [info] [transport]: connected to store 5
2021/08/20 12:59:56.792143 [info] [transport]: session 18[127.0.0.1:35332] connected
2021/08/20 12:59:56.792243 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:56.792312 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:27 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 12:59:56.792247 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:57.130852 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:57.341+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 27"}
{"level":"info","ts":"2021-08-20T12:59:57.341+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 28"}
{"level":"info","ts":"2021-08-20T12:59:57.341+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 28"}
{"level":"info","ts":"2021-08-20T12:59:57.341+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 28"}
{"level":"info","ts":"2021-08-20T12:59:57.341+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 28"}
2021/08/20 12:59:57.341679 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:57.341733 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:28 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:57.341798 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 12:59:57.942553 [error] [transport]: session 18[127.0.0.1:35332] read failed with read tcp 127.0.0.1:10001->127.0.0.1:35332: i/o timeout
{"level":"info","ts":"2021-08-20T12:59:57.991+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 27"}
{"level":"info","ts":"2021-08-20T12:59:57.991+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 28"}
{"level":"info","ts":"2021-08-20T12:59:57.991+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 28"}
{"level":"info","ts":"2021-08-20T12:59:57.991+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 28"}
{"level":"info","ts":"2021-08-20T12:59:57.991+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 28"}
2021/08/20 12:59:57.991938 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:57.991990 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:28 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:58.091+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 26"}
{"level":"info","ts":"2021-08-20T12:59:58.091+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 27"}
{"level":"info","ts":"2021-08-20T12:59:58.091+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 27"}
{"level":"info","ts":"2021-08-20T12:59:58.091+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 27"}
{"level":"info","ts":"2021-08-20T12:59:58.091+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 27"}
2021/08/20 12:59:58.091382 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:27 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:35332->127.0.0.1:10001: write: broken pipe
2021/08/20 12:59:58.091455 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:58.091485 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:27 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 12:59:58.130971 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T12:59:58.391+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 27"}
{"level":"info","ts":"2021-08-20T12:59:58.391+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 28"}
{"level":"info","ts":"2021-08-20T12:59:58.391+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 28"}
{"level":"info","ts":"2021-08-20T12:59:58.391+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 28"}
{"level":"info","ts":"2021-08-20T12:59:58.391+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 28"}
2021/08/20 12:59:58.391657 [info] [transport]: connected to store 5
2021/08/20 12:59:58.391666 [info] [transport]: session 19[127.0.0.1:35482] connected
2021/08/20 12:59:58.391715 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 12:59:58.391748 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:58.391794 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:28 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:58.541+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 28"}
{"level":"info","ts":"2021-08-20T12:59:58.541+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 29"}
{"level":"info","ts":"2021-08-20T12:59:58.541+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 29"}
{"level":"info","ts":"2021-08-20T12:59:58.541+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 29"}
{"level":"info","ts":"2021-08-20T12:59:58.541+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 29"}
2021/08/20 12:59:58.541265 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:58.541334 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:29 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:58.541386 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:58.991+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 28"}
{"level":"info","ts":"2021-08-20T12:59:58.991+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 29"}
{"level":"info","ts":"2021-08-20T12:59:58.991+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 29"}
{"level":"info","ts":"2021-08-20T12:59:58.991+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 29"}
{"level":"info","ts":"2021-08-20T12:59:58.991+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 29"}
2021/08/20 12:59:58.991602 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:58.991630 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:58.991674 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:29 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 12:59:59.130692 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"warn","ts":"2021-08-20T12:59:59.222+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 12:59:59.222252 [error] prophet: read /prophet/scheduler_config/ from etcd failed with context deadline exceeded
2021/08/20 12:59:59.222256 [error] prophet: cannot load schedulers' config, retry times 2, error context deadline exceeded
2021-08-20 12:59:59.222325 W | etcdserver: read-only range request "key:\"/prophet/scheduler_config/\" range_end:\"/prophet/scheduler_config0\" limit:1000 " with result "error:context deadline exceeded" took too long (10.0000333s) to execute
{"level":"info","ts":"2021-08-20T12:59:59.391+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 27"}
{"level":"info","ts":"2021-08-20T12:59:59.391+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 28"}
{"level":"info","ts":"2021-08-20T12:59:59.391+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 28"}
{"level":"info","ts":"2021-08-20T12:59:59.391+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 28"}
{"level":"info","ts":"2021-08-20T12:59:59.391+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 28"}
2021/08/20 12:59:59.391563 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 12:59:59.391585 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:59.391631 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:28 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T12:59:59.941+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 29"}
{"level":"info","ts":"2021-08-20T12:59:59.941+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 30"}
{"level":"info","ts":"2021-08-20T12:59:59.942+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 30"}
{"level":"info","ts":"2021-08-20T12:59:59.942+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 30"}
{"level":"info","ts":"2021-08-20T12:59:59.942+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 30"}
2021/08/20 12:59:59.942150 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:59.942205 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:30 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 12:59:59.942265 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T12:59:59.991+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 29"}
{"level":"info","ts":"2021-08-20T12:59:59.992+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 30"}
{"level":"info","ts":"2021-08-20T12:59:59.992+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 30"}
{"level":"info","ts":"2021-08-20T12:59:59.992+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 30"}
{"level":"info","ts":"2021-08-20T12:59:59.992+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 30"}
2021/08/20 12:59:59.992086 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 12:59:59.992113 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 12:59:59.992141 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:30 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 13:00:00.130409 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:00.164+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 9"}
{"level":"info","ts":"2021-08-20T13:00:00.164+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 10"}
{"level":"info","ts":"2021-08-20T13:00:00.164+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 10"}
{"level":"info","ts":"2021-08-20T13:00:00.164+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 10"}
{"level":"info","ts":"2021-08-20T13:00:00.164+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-08-20T13:00:00.291+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 28"}
{"level":"info","ts":"2021-08-20T13:00:00.291+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 29"}
{"level":"info","ts":"2021-08-20T13:00:00.291+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 29"}
{"level":"info","ts":"2021-08-20T13:00:00.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 29"}
{"level":"info","ts":"2021-08-20T13:00:00.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 29"}
2021/08/20 13:00:00.291320 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:00.291343 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:00.291376 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:29 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:00.591+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 28"}
{"level":"info","ts":"2021-08-20T13:00:00.591+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 29"}
{"level":"info","ts":"2021-08-20T13:00:00.591+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 29"}
{"level":"info","ts":"2021-08-20T13:00:00.591+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 29"}
{"level":"info","ts":"2021-08-20T13:00:00.591+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 29"}
2021/08/20 13:00:00.591612 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:00.591670 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:00.591714 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:29 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:00.941+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 30"}
{"level":"info","ts":"2021-08-20T13:00:00.941+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 31"}
{"level":"info","ts":"2021-08-20T13:00:00.941+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 31"}
{"level":"info","ts":"2021-08-20T13:00:00.941+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 31"}
{"level":"info","ts":"2021-08-20T13:00:00.941+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 31"}
2021/08/20 13:00:00.941476 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:00.941528 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:31 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:00.941583 [info] [raftstore]: shard 2 raft step stopped
2021-08-20 13:00:01.073711 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:01.073727 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021-08-20 13:00:01.073742 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:01.075870 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 13:00:01.130429 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:01.391+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 29"}
{"level":"info","ts":"2021-08-20T13:00:01.391+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 30"}
{"level":"info","ts":"2021-08-20T13:00:01.392+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 30"}
{"level":"info","ts":"2021-08-20T13:00:01.392+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 30"}
{"level":"info","ts":"2021-08-20T13:00:01.392+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 30"}
2021/08/20 13:00:01.392103 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:01.392119 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:01.392162 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:30 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:01.891+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 30"}
{"level":"info","ts":"2021-08-20T13:00:01.891+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 31"}
{"level":"info","ts":"2021-08-20T13:00:01.891+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 31"}
{"level":"info","ts":"2021-08-20T13:00:01.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 31"}
{"level":"info","ts":"2021-08-20T13:00:01.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 31"}
2021/08/20 13:00:01.891544 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 13:00:01.891620 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:01.891672 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:31 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
WARNING: 2021/08/20 13:00:02 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40000  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40000: connect: connection refused". Reconnecting...
2021/08/20 13:00:02.130778 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:02.141+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 31"}
{"level":"info","ts":"2021-08-20T13:00:02.142+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 32"}
{"level":"info","ts":"2021-08-20T13:00:02.142+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 32"}
{"level":"info","ts":"2021-08-20T13:00:02.142+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 32"}
{"level":"info","ts":"2021-08-20T13:00:02.142+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 32"}
2021/08/20 13:00:02.142131 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:02.142194 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:32 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:02.142256 [info] [raftstore]: shard 2 raft step stopped
2021-08-20 13:00:02.221370 W | etcdserver: timed out waiting for read index response (local node might have slow network)
{"level":"info","ts":"2021-08-20T13:00:02.291+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 29"}
{"level":"info","ts":"2021-08-20T13:00:02.291+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 30"}
{"level":"info","ts":"2021-08-20T13:00:02.291+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 30"}
{"level":"info","ts":"2021-08-20T13:00:02.291+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 30"}
{"level":"info","ts":"2021-08-20T13:00:02.291+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 30"}
2021/08/20 13:00:02.291974 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:02.291995 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:02.292050 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:30 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021-08-20 13:00:02.472979 W | etcdserver: read-only range request "key:\"/electors/leader/prophet-leader\" " with result "error:context deadline exceeded" took too long (10.000638s) to execute
{"level":"warn","ts":"2021-08-20T13:00:02.473+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 13:00:02.473030 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/08/20 13:00:02.473034 [error] prophet: [prophet-leader/node-2]/loop: load current leader failed with context deadline exceeded, retry later
2021/08/20 13:00:02.892389 [error] [transport]: session 19[127.0.0.1:35482] read failed with read tcp 127.0.0.1:10001->127.0.0.1:35482: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:03.091+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 30"}
{"level":"info","ts":"2021-08-20T13:00:03.091+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 31"}
{"level":"info","ts":"2021-08-20T13:00:03.091+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 31"}
{"level":"info","ts":"2021-08-20T13:00:03.091+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 31"}
{"level":"info","ts":"2021-08-20T13:00:03.091+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 31"}
2021/08/20 13:00:03.091694 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:03.091755 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:31 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 13:00:03.130210 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:03.191605 [error] prophet: container 7 heartbeat failed with rpc timeout
2021/08/20 13:00:03.191618 [error] [raftstore]: send store heartbeat failed with rpc timeout
{"level":"info","ts":"2021-08-20T13:00:03.664+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 10"}
{"level":"info","ts":"2021-08-20T13:00:03.664+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 11"}
{"level":"info","ts":"2021-08-20T13:00:03.665+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 11"}
{"level":"info","ts":"2021-08-20T13:00:03.665+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 11"}
{"level":"info","ts":"2021-08-20T13:00:03.665+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-08-20T13:00:03.791+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 31"}
{"level":"info","ts":"2021-08-20T13:00:03.791+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 32"}
{"level":"info","ts":"2021-08-20T13:00:03.791+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 32"}
{"level":"info","ts":"2021-08-20T13:00:03.791+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 32"}
{"level":"info","ts":"2021-08-20T13:00:03.791+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 32"}
2021/08/20 13:00:03.791620 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:10 containerID:5 > message:<type:MsgVoteMsgVote to:10 from:9 term:32 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 10 failed with write tcp 127.0.0.1:35482->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:03.791671 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:03.791696 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:32 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:03.841+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 32"}
{"level":"info","ts":"2021-08-20T13:00:03.841+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 33"}
{"level":"info","ts":"2021-08-20T13:00:03.841+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 33"}
{"level":"info","ts":"2021-08-20T13:00:03.841+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 33"}
{"level":"info","ts":"2021-08-20T13:00:03.841+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 33"}
2021/08/20 13:00:03.841668 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:03.841704 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:33 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:03.841772 [info] [transport]: connected to store 5
2021/08/20 13:00:03.841862 [info] [transport]: session 20[127.0.0.1:35978] connected
2021/08/20 13:00:03.841910 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T13:00:04.091+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 30"}
{"level":"info","ts":"2021-08-20T13:00:04.091+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 31"}
{"level":"info","ts":"2021-08-20T13:00:04.091+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 31"}
{"level":"info","ts":"2021-08-20T13:00:04.091+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 31"}
{"level":"info","ts":"2021-08-20T13:00:04.091+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 31"}
2021/08/20 13:00:04.091475 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:04.091540 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:04.091595 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:31 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 13:00:04.131026 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:04.692243 [error] [transport]: session 20[127.0.0.1:35978] read failed with read tcp 127.0.0.1:10001->127.0.0.1:35978: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:04.891+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 31"}
{"level":"info","ts":"2021-08-20T13:00:04.891+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 32"}
{"level":"info","ts":"2021-08-20T13:00:04.891+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 32"}
{"level":"info","ts":"2021-08-20T13:00:04.892+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 32"}
{"level":"info","ts":"2021-08-20T13:00:04.892+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 32"}
2021/08/20 13:00:04.892141 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:04.892193 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:32 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 13:00:05.131011 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:05.191+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 32"}
{"level":"info","ts":"2021-08-20T13:00:05.191+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 33"}
{"level":"info","ts":"2021-08-20T13:00:05.191+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 33"}
{"level":"info","ts":"2021-08-20T13:00:05.191+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 33"}
{"level":"info","ts":"2021-08-20T13:00:05.191+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 33"}
2021/08/20 13:00:05.191373 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:10 containerID:5 > message:<type:MsgVoteMsgVote to:10 from:9 term:33 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 10 failed with write tcp 127.0.0.1:35978->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:05.191436 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:05.191466 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:33 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:05.241+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 33"}
{"level":"info","ts":"2021-08-20T13:00:05.241+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 34"}
{"level":"info","ts":"2021-08-20T13:00:05.241+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 34"}
{"level":"info","ts":"2021-08-20T13:00:05.241+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 34"}
{"level":"info","ts":"2021-08-20T13:00:05.241+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 34"}
2021/08/20 13:00:05.241464 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:05.241507 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:34 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:05.241576 [info] [transport]: connected to store 5
2021/08/20 13:00:05.241591 [info] [transport]: session 21[127.0.0.1:36102] connected
2021/08/20 13:00:05.241618 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T13:00:05.591+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 31"}
{"level":"info","ts":"2021-08-20T13:00:05.591+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 32"}
{"level":"info","ts":"2021-08-20T13:00:05.591+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 32"}
{"level":"info","ts":"2021-08-20T13:00:05.591+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 32"}
{"level":"info","ts":"2021-08-20T13:00:05.591+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 32"}
2021/08/20 13:00:05.591395 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:05.591423 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:05.591466 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:32 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021-08-20 13:00:06.074402 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021-08-20 13:00:06.074426 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:06.074435 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:06.076576 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 13:00:06.130757 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:06.191920 [error] [transport]: session 21[127.0.0.1:36102] read failed with read tcp 127.0.0.1:10001->127.0.0.1:36102: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:06.341+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 34"}
{"level":"info","ts":"2021-08-20T13:00:06.341+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 35"}
{"level":"info","ts":"2021-08-20T13:00:06.341+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 35"}
{"level":"info","ts":"2021-08-20T13:00:06.341+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 35"}
{"level":"info","ts":"2021-08-20T13:00:06.341+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 35"}
2021/08/20 13:00:06.341720 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:06.341777 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:35 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:06.592+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 32"}
{"level":"info","ts":"2021-08-20T13:00:06.592+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 33"}
{"level":"info","ts":"2021-08-20T13:00:06.592+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 33"}
{"level":"info","ts":"2021-08-20T13:00:06.592+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 33"}
{"level":"info","ts":"2021-08-20T13:00:06.592+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 33"}
2021/08/20 13:00:06.592163 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:19 containerID:5 > message:<type:MsgVoteMsgVote to:19 from:20 term:33 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 19 failed with write tcp 127.0.0.1:36102->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:06.592230 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:06.592263 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:33 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:06.991+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 32"}
{"level":"info","ts":"2021-08-20T13:00:06.991+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 33"}
{"level":"info","ts":"2021-08-20T13:00:06.991+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 33"}
{"level":"info","ts":"2021-08-20T13:00:06.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 33"}
{"level":"info","ts":"2021-08-20T13:00:06.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 33"}
2021/08/20 13:00:06.992016 [info] [transport]: connected to store 5
2021/08/20 13:00:06.992033 [info] [transport]: session 22[127.0.0.1:36260] connected
2021/08/20 13:00:06.992062 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:06.992101 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:06.992153 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:33 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:07.091+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 33"}
{"level":"info","ts":"2021-08-20T13:00:07.091+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 34"}
{"level":"info","ts":"2021-08-20T13:00:07.091+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 34"}
{"level":"info","ts":"2021-08-20T13:00:07.091+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 34"}
{"level":"info","ts":"2021-08-20T13:00:07.091+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 34"}
2021/08/20 13:00:07.091992 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 13:00:07.092007 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:07.092041 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:34 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 13:00:07.130660 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:07.364+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 11"}
{"level":"info","ts":"2021-08-20T13:00:07.364+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 12"}
{"level":"info","ts":"2021-08-20T13:00:07.364+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 12"}
{"level":"info","ts":"2021-08-20T13:00:07.364+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 12"}
{"level":"info","ts":"2021-08-20T13:00:07.364+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 12"}
2021/08/20 13:00:07.692231 [error] [transport]: session 22[127.0.0.1:36260] read failed with read tcp 127.0.0.1:10001->127.0.0.1:36260: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:08.091+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 33"}
{"level":"info","ts":"2021-08-20T13:00:08.091+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 34"}
{"level":"info","ts":"2021-08-20T13:00:08.091+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 34"}
{"level":"info","ts":"2021-08-20T13:00:08.091+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 34"}
{"level":"info","ts":"2021-08-20T13:00:08.091+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 34"}
2021/08/20 13:00:08.091723 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:08.091775 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:34 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 13:00:08.130171 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:08.191+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 33"}
{"level":"info","ts":"2021-08-20T13:00:08.191+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 34"}
{"level":"info","ts":"2021-08-20T13:00:08.191+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 34"}
{"level":"info","ts":"2021-08-20T13:00:08.191+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 34"}
{"level":"info","ts":"2021-08-20T13:00:08.191+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 34"}
2021/08/20 13:00:08.191407 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:34 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:36260->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:08.191498 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:08.191529 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:34 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:08.241+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 35"}
{"level":"info","ts":"2021-08-20T13:00:08.241+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 36"}
{"level":"info","ts":"2021-08-20T13:00:08.241+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 36"}
{"level":"info","ts":"2021-08-20T13:00:08.241+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 36"}
{"level":"info","ts":"2021-08-20T13:00:08.241+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 36"}
2021/08/20 13:00:08.241546 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:08.241606 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:36 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:08.241681 [info] [transport]: connected to store 5
2021/08/20 13:00:08.241694 [info] [transport]: session 23[127.0.0.1:36378] connected
2021/08/20 13:00:08.241718 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T13:00:08.492+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 34"}
{"level":"info","ts":"2021-08-20T13:00:08.492+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 35"}
{"level":"info","ts":"2021-08-20T13:00:08.492+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 35"}
{"level":"info","ts":"2021-08-20T13:00:08.492+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 35"}
{"level":"info","ts":"2021-08-20T13:00:08.492+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 35"}
2021/08/20 13:00:08.492157 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 13:00:08.492188 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:08.492229 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:35 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 13:00:09.092912 [error] [transport]: session 23[127.0.0.1:36378] read failed with read tcp 127.0.0.1:10001->127.0.0.1:36378: i/o timeout
2021/08/20 13:00:09.130515 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:09.191+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 34"}
{"level":"info","ts":"2021-08-20T13:00:09.191+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 35"}
{"level":"info","ts":"2021-08-20T13:00:09.191+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 35"}
{"level":"info","ts":"2021-08-20T13:00:09.191+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 35"}
{"level":"info","ts":"2021-08-20T13:00:09.191+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 35"}
{"level":"info","ts":"2021-08-20T13:00:09.191+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 34"}
{"level":"info","ts":"2021-08-20T13:00:09.191+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 35"}
{"level":"info","ts":"2021-08-20T13:00:09.191+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 35"}
{"level":"info","ts":"2021-08-20T13:00:09.192+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 35"}
{"level":"info","ts":"2021-08-20T13:00:09.192+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 35"}
2021/08/20 13:00:09.192084 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:19 containerID:5 > message:<type:MsgVoteMsgVote to:19 from:20 term:35 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 19 failed with write tcp 127.0.0.1:36378->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:09.192150 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:09.192187 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:35 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 13:00:09.192215 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:35 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021-08-20 13:00:09.222414 W | etcdserver: read-only range request "key:\"/prophet/scheduler_config/\" range_end:\"/prophet/scheduler_config0\" limit:1000 " with result "error:context deadline exceeded" took too long (10.0000202s) to execute
{"level":"warn","ts":"2021-08-20T13:00:09.222+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 13:00:09.222459 [error] prophet: read /prophet/scheduler_config/ from etcd failed with context deadline exceeded
2021/08/20 13:00:09.222464 [error] prophet: cannot load schedulers' config, retry times 3, error context deadline exceeded
{"level":"info","ts":"2021-08-20T13:00:09.891+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 35"}
{"level":"info","ts":"2021-08-20T13:00:09.891+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 36"}
{"level":"info","ts":"2021-08-20T13:00:09.891+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 36"}
{"level":"info","ts":"2021-08-20T13:00:09.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 36"}
{"level":"info","ts":"2021-08-20T13:00:09.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 36"}
2021/08/20 13:00:09.891939 [info] [transport]: connected to store 5
2021/08/20 13:00:09.891952 [info] [transport]: session 24[127.0.0.1:36526] connected
2021/08/20 13:00:09.892005 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 13:00:09.892042 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:09.892087 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:36 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
WARNING: 2021/08/20 13:00:09 grpc: addrConn.createTransport failed to connect to {http://127.0.0.1:40001  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 127.0.0.1:40001: connect: connection refused". Reconnecting...
{"level":"info","ts":"2021-08-20T13:00:10.041+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 36"}
{"level":"info","ts":"2021-08-20T13:00:10.041+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 37"}
{"level":"info","ts":"2021-08-20T13:00:10.041+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 37"}
{"level":"info","ts":"2021-08-20T13:00:10.041+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 37"}
{"level":"info","ts":"2021-08-20T13:00:10.041+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 37"}
2021/08/20 13:00:10.041974 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:10.042031 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:37 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:10.042083 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 13:00:10.130779 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:10.191+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 35"}
{"level":"info","ts":"2021-08-20T13:00:10.191+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 36"}
{"level":"info","ts":"2021-08-20T13:00:10.192+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 36"}
{"level":"info","ts":"2021-08-20T13:00:10.192+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 36"}
{"level":"info","ts":"2021-08-20T13:00:10.192+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 36"}
2021/08/20 13:00:10.192098 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:10.192130 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:10.192176 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:36 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:10.491+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 35"}
{"level":"info","ts":"2021-08-20T13:00:10.491+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 36"}
{"level":"info","ts":"2021-08-20T13:00:10.491+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 36"}
{"level":"info","ts":"2021-08-20T13:00:10.491+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 36"}
{"level":"info","ts":"2021-08-20T13:00:10.491+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 36"}
2021/08/20 13:00:10.491829 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:10.491851 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:10.491895 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:36 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021-08-20 13:00:11.075091 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:11.075126 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021-08-20 13:00:11.075139 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:11.077249 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 13:00:11.092880 [error] [transport]: session 24[127.0.0.1:36526] read failed with read tcp 127.0.0.1:10001->127.0.0.1:36526: i/o timeout
2021/08/20 13:00:11.130453 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:11.591+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 36"}
{"level":"info","ts":"2021-08-20T13:00:11.591+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 37"}
{"level":"info","ts":"2021-08-20T13:00:11.591+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 37"}
{"level":"info","ts":"2021-08-20T13:00:11.591+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 37"}
{"level":"info","ts":"2021-08-20T13:00:11.591+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 37"}
2021/08/20 13:00:11.591218 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:11.591273 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:37 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:11.841+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 37"}
{"level":"info","ts":"2021-08-20T13:00:11.841+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 38"}
{"level":"info","ts":"2021-08-20T13:00:11.841+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 38"}
{"level":"info","ts":"2021-08-20T13:00:11.841+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 38"}
{"level":"info","ts":"2021-08-20T13:00:11.841+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 38"}
2021/08/20 13:00:11.841381 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:11.841435 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:38 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:11.841478 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:6 containerID:5 role:Learner > message:<type:MsgVoteMsgVote to:6 from:16 term:38 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 6 failed with write tcp 127.0.0.1:36526->127.0.0.1:10001: write: broken pipe
{"level":"info","ts":"2021-08-20T13:00:11.991+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 36"}
{"level":"info","ts":"2021-08-20T13:00:11.992+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 37"}
{"level":"info","ts":"2021-08-20T13:00:11.992+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 37"}
{"level":"info","ts":"2021-08-20T13:00:11.992+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 37"}
{"level":"info","ts":"2021-08-20T13:00:11.992+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 37"}
2021/08/20 13:00:11.992133 [info] [transport]: connected to store 5
2021/08/20 13:00:11.992144 [info] [transport]: session 25[127.0.0.1:36726] connected
2021/08/20 13:00:11.992200 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:11.992237 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:11.992286 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:37 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:12.091+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 36"}
{"level":"info","ts":"2021-08-20T13:00:12.091+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 37"}
{"level":"info","ts":"2021-08-20T13:00:12.091+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 37"}
{"level":"info","ts":"2021-08-20T13:00:12.092+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 37"}
{"level":"info","ts":"2021-08-20T13:00:12.092+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 37"}
2021/08/20 13:00:12.092076 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:12.092100 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:12.092138 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:37 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 13:00:12.130802 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:12.264+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 12"}
{"level":"info","ts":"2021-08-20T13:00:12.264+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 13"}
{"level":"info","ts":"2021-08-20T13:00:12.264+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 13"}
{"level":"info","ts":"2021-08-20T13:00:12.264+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 13"}
{"level":"info","ts":"2021-08-20T13:00:12.264+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 13"}
{"level":"warn","ts":"2021-08-20T13:00:12.573+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 13:00:12.574012 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/08/20 13:00:12.574017 [error] prophet: [prophet-leader/node-2]/loop: load current leader failed with context deadline exceeded, retry later
2021-08-20 13:00:12.574088 W | etcdserver: read-only range request "key:\"/electors/leader/prophet-leader\" " with result "error:context canceled" took too long (10.0000426s) to execute
2021/08/20 13:00:12.693166 [error] [transport]: session 25[127.0.0.1:36726] read failed with read tcp 127.0.0.1:10001->127.0.0.1:36726: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:12.791+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 37"}
{"level":"info","ts":"2021-08-20T13:00:12.791+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 38"}
{"level":"info","ts":"2021-08-20T13:00:12.791+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 38"}
{"level":"info","ts":"2021-08-20T13:00:12.791+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 38"}
{"level":"info","ts":"2021-08-20T13:00:12.791+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 38"}
2021/08/20 13:00:12.792048 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:12.792106 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:38 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:12.941+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 38"}
{"level":"info","ts":"2021-08-20T13:00:12.941+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 39"}
{"level":"info","ts":"2021-08-20T13:00:12.941+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 39"}
{"level":"info","ts":"2021-08-20T13:00:12.941+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 39"}
{"level":"info","ts":"2021-08-20T13:00:12.941+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 39"}
2021/08/20 13:00:12.941919 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:12.941975 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:39 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:12.942018 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:6 containerID:5 role:Learner > message:<type:MsgVoteMsgVote to:6 from:16 term:39 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 6 failed with write tcp 127.0.0.1:36726->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:13.130287 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:13.191631 [error] [raftstore]: check shards state failed with rpc timeout
2021-08-20 13:00:13.222041 W | etcdserver: timed out waiting for read index response (local node might have slow network)
{"level":"info","ts":"2021-08-20T13:00:13.291+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 37"}
{"level":"info","ts":"2021-08-20T13:00:13.291+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 38"}
{"level":"info","ts":"2021-08-20T13:00:13.291+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 38"}
{"level":"info","ts":"2021-08-20T13:00:13.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 38"}
{"level":"info","ts":"2021-08-20T13:00:13.291+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 38"}
2021/08/20 13:00:13.291562 [info] [transport]: session 26[127.0.0.1:36844] connected
2021/08/20 13:00:13.291567 [info] [transport]: connected to store 5
2021/08/20 13:00:13.291634 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:13.291700 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:13.291756 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:38 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:13.691+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 37"}
{"level":"info","ts":"2021-08-20T13:00:13.691+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 38"}
{"level":"info","ts":"2021-08-20T13:00:13.691+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 38"}
{"level":"info","ts":"2021-08-20T13:00:13.691+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 38"}
{"level":"info","ts":"2021-08-20T13:00:13.691+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 38"}
2021/08/20 13:00:13.691970 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:13.691988 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:13.692032 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:38 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:13.891+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 38"}
{"level":"info","ts":"2021-08-20T13:00:13.891+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 39"}
{"level":"info","ts":"2021-08-20T13:00:13.891+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 39"}
{"level":"info","ts":"2021-08-20T13:00:13.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 39"}
{"level":"info","ts":"2021-08-20T13:00:13.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 39"}
2021/08/20 13:00:13.891184 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 13:00:13.891207 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:13.891252 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:39 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 13:00:14.130706 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:14.241+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 39"}
{"level":"info","ts":"2021-08-20T13:00:14.242+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 40"}
{"level":"info","ts":"2021-08-20T13:00:14.242+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 40"}
{"level":"info","ts":"2021-08-20T13:00:14.242+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 40"}
{"level":"info","ts":"2021-08-20T13:00:14.242+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 40"}
2021/08/20 13:00:14.242123 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:14.242178 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:40 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:14.242236 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T13:00:14.791+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 38"}
{"level":"info","ts":"2021-08-20T13:00:14.791+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 39"}
{"level":"info","ts":"2021-08-20T13:00:14.791+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 39"}
{"level":"info","ts":"2021-08-20T13:00:14.791+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 39"}
{"level":"info","ts":"2021-08-20T13:00:14.791+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 39"}
2021/08/20 13:00:14.791945 [info] [raftstore]: shard 12 raft step stopped
{"level":"info","ts":"2021-08-20T13:00:14.791+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 38"}
{"level":"info","ts":"2021-08-20T13:00:14.791+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 39"}
{"level":"info","ts":"2021-08-20T13:00:14.791+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 39"}
{"level":"info","ts":"2021-08-20T13:00:14.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 39"}
{"level":"info","ts":"2021-08-20T13:00:14.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 39"}
2021/08/20 13:00:14.791990 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:14.792039 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:39 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 13:00:14.792090 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:14.792113 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:14.792133 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:39 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:14.991+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 39"}
{"level":"info","ts":"2021-08-20T13:00:14.991+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 40"}
{"level":"info","ts":"2021-08-20T13:00:14.991+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 40"}
{"level":"info","ts":"2021-08-20T13:00:14.991+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 40"}
{"level":"info","ts":"2021-08-20T13:00:14.991+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 40"}
2021/08/20 13:00:14.991571 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 13:00:14.991594 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:14.991638 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:40 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 13:00:15.130961 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:15.592434 [error] [transport]: session 26[127.0.0.1:36844] read failed with read tcp 127.0.0.1:10001->127.0.0.1:36844: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:15.641+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 40"}
{"level":"info","ts":"2021-08-20T13:00:15.641+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 41"}
{"level":"info","ts":"2021-08-20T13:00:15.641+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 41"}
{"level":"info","ts":"2021-08-20T13:00:15.641+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 41"}
{"level":"info","ts":"2021-08-20T13:00:15.641+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 41"}
2021/08/20 13:00:15.641197 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:15.641257 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:41 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:15.791+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 39"}
{"level":"info","ts":"2021-08-20T13:00:15.791+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 40"}
{"level":"info","ts":"2021-08-20T13:00:15.791+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 40"}
{"level":"info","ts":"2021-08-20T13:00:15.791+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 40"}
{"level":"info","ts":"2021-08-20T13:00:15.791+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 40"}
2021/08/20 13:00:15.791673 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:40 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:36844->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:15.791754 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:15.791800 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:40 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021-08-20 13:00:16.075661 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:16.075690 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:16.075694 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021-08-20 13:00:16.077824 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 13:00:16.130507 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:16.391+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 40"}
{"level":"info","ts":"2021-08-20T13:00:16.391+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 41"}
{"level":"info","ts":"2021-08-20T13:00:16.391+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 41"}
{"level":"info","ts":"2021-08-20T13:00:16.391+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 41"}
{"level":"info","ts":"2021-08-20T13:00:16.391+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 41"}
2021/08/20 13:00:16.391955 [info] [transport]: connected to store 5
2021/08/20 13:00:16.391963 [info] [transport]: session 27[127.0.0.1:37134] connected
2021/08/20 13:00:16.392049 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 13:00:16.392066 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:16.392125 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:41 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:16.491+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 39"}
{"level":"info","ts":"2021-08-20T13:00:16.491+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 40"}
{"level":"info","ts":"2021-08-20T13:00:16.491+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 40"}
{"level":"info","ts":"2021-08-20T13:00:16.491+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 40"}
{"level":"info","ts":"2021-08-20T13:00:16.491+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 40"}
2021/08/20 13:00:16.491971 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:16.491983 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:16.492045 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:40 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:16.741+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 41"}
{"level":"info","ts":"2021-08-20T13:00:16.741+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 42"}
{"level":"info","ts":"2021-08-20T13:00:16.741+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 42"}
{"level":"info","ts":"2021-08-20T13:00:16.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 42"}
{"level":"info","ts":"2021-08-20T13:00:16.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 42"}
2021/08/20 13:00:16.741624 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:16.741672 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:42 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:16.741723 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 13:00:17.130155 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:17.342010 [error] [transport]: session 27[127.0.0.1:37134] read failed with read tcp 127.0.0.1:10001->127.0.0.1:37134: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:17.464+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 13"}
{"level":"info","ts":"2021-08-20T13:00:17.464+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 14"}
{"level":"info","ts":"2021-08-20T13:00:17.464+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 14"}
{"level":"info","ts":"2021-08-20T13:00:17.464+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 14"}
{"level":"info","ts":"2021-08-20T13:00:17.464+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 14"}
{"level":"info","ts":"2021-08-20T13:00:17.491+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 40"}
{"level":"info","ts":"2021-08-20T13:00:17.491+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 41"}
{"level":"info","ts":"2021-08-20T13:00:17.491+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 41"}
{"level":"info","ts":"2021-08-20T13:00:17.491+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 41"}
{"level":"info","ts":"2021-08-20T13:00:17.491+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 41"}
2021/08/20 13:00:17.491454 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:17.491506 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:41 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:17.691+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 41"}
{"level":"info","ts":"2021-08-20T13:00:17.691+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 42"}
{"level":"info","ts":"2021-08-20T13:00:17.691+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 42"}
{"level":"info","ts":"2021-08-20T13:00:17.691+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 42"}
{"level":"info","ts":"2021-08-20T13:00:17.691+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 42"}
2021/08/20 13:00:17.691951 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:10 containerID:5 > message:<type:MsgVoteMsgVote to:10 from:9 term:42 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 10 failed with write tcp 127.0.0.1:37134->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:17.692029 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:17.692071 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:42 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:17.741+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 42"}
{"level":"info","ts":"2021-08-20T13:00:17.741+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 43"}
{"level":"info","ts":"2021-08-20T13:00:17.741+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 43"}
{"level":"info","ts":"2021-08-20T13:00:17.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 43"}
{"level":"info","ts":"2021-08-20T13:00:17.741+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 43"}
2021/08/20 13:00:17.741993 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:17.742029 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:43 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:17.742105 [info] [transport]: connected to store 5
2021/08/20 13:00:17.742116 [info] [transport]: session 28[127.0.0.1:37260] connected
2021/08/20 13:00:17.742149 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T13:00:17.991+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 40"}
{"level":"info","ts":"2021-08-20T13:00:17.991+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 41"}
{"level":"info","ts":"2021-08-20T13:00:17.991+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 41"}
{"level":"info","ts":"2021-08-20T13:00:17.991+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 41"}
{"level":"info","ts":"2021-08-20T13:00:17.991+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 41"}
2021/08/20 13:00:17.991567 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:17.991590 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:17.991634 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:41 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 13:00:18.130262 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:18.591943 [error] [transport]: session 28[127.0.0.1:37260] read failed with read tcp 127.0.0.1:10001->127.0.0.1:37260: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:18.791+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 42"}
{"level":"info","ts":"2021-08-20T13:00:18.791+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 43"}
{"level":"info","ts":"2021-08-20T13:00:18.791+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 43"}
{"level":"info","ts":"2021-08-20T13:00:18.791+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 43"}
{"level":"info","ts":"2021-08-20T13:00:18.791+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 43"}
2021/08/20 13:00:18.792022 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:18.792081 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:43 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:18.991+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 41"}
{"level":"info","ts":"2021-08-20T13:00:18.991+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 42"}
{"level":"info","ts":"2021-08-20T13:00:18.991+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 42"}
{"level":"info","ts":"2021-08-20T13:00:18.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 42"}
{"level":"info","ts":"2021-08-20T13:00:18.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 42"}
2021/08/20 13:00:18.991985 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:42 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:37260->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:18.992055 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:18.992080 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:42 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:19.041+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 43"}
{"level":"info","ts":"2021-08-20T13:00:19.042+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 44"}
{"level":"info","ts":"2021-08-20T13:00:19.042+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 44"}
{"level":"info","ts":"2021-08-20T13:00:19.042+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 44"}
{"level":"info","ts":"2021-08-20T13:00:19.042+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 44"}
2021/08/20 13:00:19.042101 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:19.042135 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:44 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:19.042198 [info] [transport]: connected to store 5
2021/08/20 13:00:19.042208 [info] [transport]: session 29[127.0.0.1:37384] connected
2021/08/20 13:00:19.042256 [info] [raftstore]: shard 2 raft step stopped
2021/08/20 13:00:19.130752 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:19.223127 W | etcdserver: read-only range request "key:\"/prophet/scheduler_config/\" range_end:\"/prophet/scheduler_config0\" limit:1000 " with result "error:context deadline exceeded" took too long (10.0004839s) to execute
{"level":"warn","ts":"2021-08-20T13:00:19.223+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 13:00:19.223180 [error] prophet: read /prophet/scheduler_config/ from etcd failed with context deadline exceeded
2021/08/20 13:00:19.223184 [error] prophet: cannot load schedulers' config, retry times 4, error context deadline exceeded
2021/08/20 13:00:19.643015 [error] [transport]: session 29[127.0.0.1:37384] read failed with read tcp 127.0.0.1:10001->127.0.0.1:37384: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:19.791+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 41"}
{"level":"info","ts":"2021-08-20T13:00:19.791+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 42"}
{"level":"info","ts":"2021-08-20T13:00:19.791+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 42"}
{"level":"info","ts":"2021-08-20T13:00:19.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 42"}
{"level":"info","ts":"2021-08-20T13:00:19.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 42"}
2021/08/20 13:00:19.791737 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:19.791792 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:42 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 13:00:20.130344 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:20.191+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 43"}
{"level":"info","ts":"2021-08-20T13:00:20.191+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 44"}
{"level":"info","ts":"2021-08-20T13:00:20.191+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 44"}
{"level":"info","ts":"2021-08-20T13:00:20.191+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 44"}
{"level":"info","ts":"2021-08-20T13:00:20.191+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 44"}
2021/08/20 13:00:20.191827 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:10 containerID:5 > message:<type:MsgVoteMsgVote to:10 from:9 term:44 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 10 failed with write tcp 127.0.0.1:37384->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:20.191908 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:20.191951 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:44 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:20.291+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 42"}
{"level":"info","ts":"2021-08-20T13:00:20.291+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 43"}
{"level":"info","ts":"2021-08-20T13:00:20.291+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 43"}
{"level":"info","ts":"2021-08-20T13:00:20.291+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 43"}
{"level":"info","ts":"2021-08-20T13:00:20.291+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 43"}
2021/08/20 13:00:20.291955 [info] [transport]: connected to store 5
2021/08/20 13:00:20.291970 [info] [transport]: session 30[127.0.0.1:37490] connected
2021/08/20 13:00:20.291998 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:20.292015 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:20.292041 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:43 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:20.441+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 44"}
{"level":"info","ts":"2021-08-20T13:00:20.441+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 45"}
{"level":"info","ts":"2021-08-20T13:00:20.441+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 45"}
{"level":"info","ts":"2021-08-20T13:00:20.441+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 45"}
{"level":"info","ts":"2021-08-20T13:00:20.441+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 45"}
2021/08/20 13:00:20.441773 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:20.441816 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:45 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:20.441866 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T13:00:20.564+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 14"}
{"level":"info","ts":"2021-08-20T13:00:20.564+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 15"}
{"level":"info","ts":"2021-08-20T13:00:20.564+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 15"}
{"level":"info","ts":"2021-08-20T13:00:20.564+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 15"}
{"level":"info","ts":"2021-08-20T13:00:20.564+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 15"}
{"level":"info","ts":"2021-08-20T13:00:20.791+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 42"}
{"level":"info","ts":"2021-08-20T13:00:20.791+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 43"}
{"level":"info","ts":"2021-08-20T13:00:20.791+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 43"}
{"level":"info","ts":"2021-08-20T13:00:20.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 43"}
{"level":"info","ts":"2021-08-20T13:00:20.791+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 43"}
2021/08/20 13:00:20.791497 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:20.791518 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:20.791560 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:43 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021-08-20 13:00:21.076206 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021-08-20 13:00:21.076229 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:21.076239 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:21.078372 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 13:00:21.130356 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:21.392267 [error] [transport]: session 30[127.0.0.1:37490] read failed with read tcp 127.0.0.1:10001->127.0.0.1:37490: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:21.541+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 45"}
{"level":"info","ts":"2021-08-20T13:00:21.541+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 46"}
{"level":"info","ts":"2021-08-20T13:00:21.541+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 46"}
{"level":"info","ts":"2021-08-20T13:00:21.541+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 46"}
{"level":"info","ts":"2021-08-20T13:00:21.541+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 46"}
2021/08/20 13:00:21.541736 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:21.541805 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:46 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:21.591+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 43"}
{"level":"info","ts":"2021-08-20T13:00:21.591+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 44"}
{"level":"info","ts":"2021-08-20T13:00:21.591+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 44"}
{"level":"info","ts":"2021-08-20T13:00:21.591+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 44"}
{"level":"info","ts":"2021-08-20T13:00:21.591+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 44"}
2021/08/20 13:00:21.591879 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:44 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:37490->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:21.591944 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:21.591976 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:44 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:21.891+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 44"}
{"level":"info","ts":"2021-08-20T13:00:21.891+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 45"}
{"level":"info","ts":"2021-08-20T13:00:21.891+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 45"}
{"level":"info","ts":"2021-08-20T13:00:21.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 45"}
{"level":"info","ts":"2021-08-20T13:00:21.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 45"}
2021/08/20 13:00:21.891351 [info] [transport]: connected to store 5
2021/08/20 13:00:21.891365 [info] [transport]: session 31[127.0.0.1:37632] connected
2021/08/20 13:00:21.891460 [info] [raftstore]: shard 8 raft step stopped
2021/08/20 13:00:21.891490 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:21.891547 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:45 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
2021/08/20 13:00:22.130705 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:22.491788 [error] [transport]: session 31[127.0.0.1:37632] read failed with read tcp 127.0.0.1:10001->127.0.0.1:37632: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:22.491+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 43"}
{"level":"info","ts":"2021-08-20T13:00:22.491+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 44"}
{"level":"info","ts":"2021-08-20T13:00:22.491+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 44"}
{"level":"info","ts":"2021-08-20T13:00:22.491+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 44"}
{"level":"info","ts":"2021-08-20T13:00:22.491+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 44"}
2021/08/20 13:00:22.491961 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:22.492030 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:44 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021-08-20 13:00:22.675625 W | etcdserver: read-only range request "key:\"/electors/leader/prophet-leader\" " with result "error:context deadline exceeded" took too long (10.0003416s) to execute
{"level":"warn","ts":"2021-08-20T13:00:22.675+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 13:00:22.675686 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/08/20 13:00:22.675690 [error] prophet: [prophet-leader/node-2]/loop: load current leader failed with context deadline exceeded, retry later
2021/08/20 13:00:23.130996 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:23.191+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 44"}
{"level":"info","ts":"2021-08-20T13:00:23.191+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 45"}
{"level":"info","ts":"2021-08-20T13:00:23.191+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 45"}
{"level":"info","ts":"2021-08-20T13:00:23.191+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 45"}
{"level":"info","ts":"2021-08-20T13:00:23.191+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 45"}
2021/08/20 13:00:23.191264 [error] prophet: container 7 heartbeat failed with rpc timeout
2021/08/20 13:00:23.191279 [error] [raftstore]: send store heartbeat failed with rpc timeout
2021/08/20 13:00:23.191315 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:45 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with write tcp 127.0.0.1:37632->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:23.191387 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:23.191417 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:45 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:23.341+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 46"}
{"level":"info","ts":"2021-08-20T13:00:23.341+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 47"}
{"level":"info","ts":"2021-08-20T13:00:23.341+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 47"}
{"level":"info","ts":"2021-08-20T13:00:23.341+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 47"}
{"level":"info","ts":"2021-08-20T13:00:23.341+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 47"}
2021/08/20 13:00:23.341862 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:23.341903 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:47 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:23.341965 [info] [transport]: connected to store 5
2021/08/20 13:00:23.341988 [info] [transport]: session 32[127.0.0.1:37766] connected
2021/08/20 13:00:23.342010 [info] [raftstore]: shard 2 raft step stopped
{"level":"info","ts":"2021-08-20T13:00:23.591+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 45"}
{"level":"info","ts":"2021-08-20T13:00:23.591+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 46"}
{"level":"info","ts":"2021-08-20T13:00:23.591+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 46"}
{"level":"info","ts":"2021-08-20T13:00:23.591+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 46"}
{"level":"info","ts":"2021-08-20T13:00:23.591+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 46"}
2021/08/20 13:00:23.591282 [info] [raftstore]: shard 8 raft step stopped
{"level":"info","ts":"2021-08-20T13:00:23.591+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 44"}
{"level":"info","ts":"2021-08-20T13:00:23.591+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 45"}
{"level":"info","ts":"2021-08-20T13:00:23.591+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 45"}
{"level":"info","ts":"2021-08-20T13:00:23.591+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 45"}
2021/08/20 13:00:23.591325 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:23.591363 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:46 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:23.591+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 45"}
2021/08/20 13:00:23.591461 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:23.591491 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:23.591515 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:45 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 13:00:24.130207 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:24.191+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 45"}
{"level":"info","ts":"2021-08-20T13:00:24.191+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 46"}
{"level":"info","ts":"2021-08-20T13:00:24.191+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 46"}
{"level":"info","ts":"2021-08-20T13:00:24.191+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 46"}
{"level":"info","ts":"2021-08-20T13:00:24.191+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 46"}
2021/08/20 13:00:24.191541 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:24.191562 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:24.191606 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:46 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021-08-20 13:00:24.222729 W | etcdserver: timed out waiting for read index response (local node might have slow network)
2021/08/20 13:00:24.791822 [error] [transport]: session 32[127.0.0.1:37766] read failed with read tcp 127.0.0.1:10001->127.0.0.1:37766: i/o timeout
{"level":"info","ts":"2021-08-20T13:00:24.891+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 46"}
{"level":"info","ts":"2021-08-20T13:00:24.891+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 47"}
{"level":"info","ts":"2021-08-20T13:00:24.891+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 47"}
{"level":"info","ts":"2021-08-20T13:00:24.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 47"}
{"level":"info","ts":"2021-08-20T13:00:24.891+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 47"}
2021/08/20 13:00:24.891744 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:24.891801 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:47 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:25.041+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 47"}
{"level":"info","ts":"2021-08-20T13:00:25.041+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 48"}
{"level":"info","ts":"2021-08-20T13:00:25.041+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 48"}
{"level":"info","ts":"2021-08-20T13:00:25.041+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 48"}
{"level":"info","ts":"2021-08-20T13:00:25.041+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 48"}
2021/08/20 13:00:25.042035 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:25.042090 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:48 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
2021/08/20 13:00:25.042140 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:6 containerID:5 role:Learner > message:<type:MsgVoteMsgVote to:6 from:16 term:48 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 6 failed with write tcp 127.0.0.1:37766->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:25.130655 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:25.391+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 45"}
{"level":"info","ts":"2021-08-20T13:00:25.391+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 46"}
{"level":"info","ts":"2021-08-20T13:00:25.391+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 46"}
{"level":"info","ts":"2021-08-20T13:00:25.391+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 46"}
{"level":"info","ts":"2021-08-20T13:00:25.391+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 46"}
{"level":"info","ts":"2021-08-20T13:00:25.391+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 46"}
{"level":"info","ts":"2021-08-20T13:00:25.391+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 47"}
{"level":"info","ts":"2021-08-20T13:00:25.391+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 47"}
{"level":"info","ts":"2021-08-20T13:00:25.391+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 47"}
{"level":"info","ts":"2021-08-20T13:00:25.391+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 47"}
2021/08/20 13:00:25.391426 [info] [transport]: connected to store 5
2021/08/20 13:00:25.391457 [info] [transport]: session 33[127.0.0.1:37942] connected
2021/08/20 13:00:25.391569 [info] [raftstore]: shard 18 raft step stopped
2021/08/20 13:00:25.391586 [info] [raftstore]: shard 12 raft step stopped
2021/08/20 13:00:25.391615 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:25.391689 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:46 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 13:00:25.391726 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:47 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
2021/08/20 13:00:25.991943 [error] [transport]: session 33[127.0.0.1:37942] read failed with read tcp 127.0.0.1:10001->127.0.0.1:37942: i/o timeout
2021-08-20 13:00:26.076403 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:26.076426 W | rafthttp: health check for peer 82a8e79de0ab9ced could not connect: dial tcp 127.0.0.1:50001: connect: connection refused
2021-08-20 13:00:26.076435 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021-08-20 13:00:26.078575 W | rafthttp: health check for peer 93ccda9956d988f4 could not connect: dial tcp 127.0.0.1:50000: connect: connection refused
2021/08/20 13:00:26.130763 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:26.220166 [info] [raftstore]: dynamic shards pool job gcAllocating
{"level":"info","ts":"2021-08-20T13:00:26.264+0800","caller":"raft/raft.go:934","msg":"b7af8231eb02d69f is starting a new election at term 15"}
{"level":"info","ts":"2021-08-20T13:00:26.264+0800","caller":"raft/raft.go:724","msg":"b7af8231eb02d69f became candidate at term 16"}
{"level":"info","ts":"2021-08-20T13:00:26.264+0800","caller":"raft/raft.go:835","msg":"b7af8231eb02d69f received MsgVoteResp from b7af8231eb02d69f at term 16"}
{"level":"info","ts":"2021-08-20T13:00:26.264+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 82a8e79de0ab9ced at term 16"}
{"level":"info","ts":"2021-08-20T13:00:26.264+0800","caller":"raft/raft.go:822","msg":"b7af8231eb02d69f [logterm: 4, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 16"}
2021/08/20 13:00:26.298258 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:26.298272 [info] [transport]: transfer stopped
2021/08/20 13:00:26.298287 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:26.298289 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:26.298291 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:26.298298 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:26.298301 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:26.298275 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:26.298305 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:26.298308 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:26.298309 [info] [transport]: send raft worker stopped
2021/08/20 13:00:26.298346 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:26.298359 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:26.298346 [error] prophet: session 2[127.0.0.1:60772] read failed with read tcp 127.0.0.1:30002->127.0.0.1:60772: use of closed network connection
2021/08/20 13:00:26.476623 [error] prophet: reset leader connection failed with client is closed
2021/08/20 13:00:26.476682 [error] prophet: client read loop stopped
2021/08/20 13:00:26.476691 [error] prophet: container 7 heartbeat failed with client is closed
2021/08/20 13:00:26.476694 [error] [raftstore]: send store heartbeat failed with client is closed
2021/08/20 13:00:26.476903 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:26.641+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 48"}
{"level":"info","ts":"2021-08-20T13:00:26.641+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 49"}
{"level":"info","ts":"2021-08-20T13:00:26.641+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 49"}
{"level":"info","ts":"2021-08-20T13:00:26.641+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 3 at term 49"}
{"level":"info","ts":"2021-08-20T13:00:26.641+0800","caller":"raft/raft.go:822","msg":"10 [logterm: 8, index: 12] sent MsgVote request to 6 at term 49"}
2021/08/20 13:00:26.641883 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:26.641943 [error] [transport]: shard 2 send msg shardID:2 from:<id:16 containerID:7 role:Learner > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:16 term:49 logTerm:8 index:12 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 > start:"a" end:"b"  from 16 to 3 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:26.692+0800","caller":"raft/raft.go:934","msg":"9 is starting a new election at term 47"}
{"level":"info","ts":"2021-08-20T13:00:26.692+0800","caller":"raft/raft.go:724","msg":"9 became candidate at term 48"}
{"level":"info","ts":"2021-08-20T13:00:26.692+0800","caller":"raft/raft.go:835","msg":"9 received MsgVoteResp from 9 at term 48"}
{"level":"info","ts":"2021-08-20T13:00:26.692+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to a at term 48"}
{"level":"info","ts":"2021-08-20T13:00:26.692+0800","caller":"raft/raft.go:822","msg":"9 [logterm: 6, index: 6] sent MsgVote request to b at term 48"}
2021/08/20 13:00:26.692163 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:10 containerID:5 > message:<type:MsgVoteMsgVote to:10 from:9 term:48 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 10 failed with write tcp 127.0.0.1:37942->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:26.692230 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:26.692258 [error] [transport]: shard 8 send msg shardID:8 from:<id:9 containerID:7 > to:<id:11 containerID:1 > message:<type:MsgVoteMsgVote to:11 from:9 term:48 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" unique:"1-0-1"  from 9 to 11 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:26.991+0800","caller":"raft/raft.go:934","msg":"d is starting a new election at term 47"}
{"level":"info","ts":"2021-08-20T13:00:26.991+0800","caller":"raft/raft.go:724","msg":"d became candidate at term 48"}
{"level":"info","ts":"2021-08-20T13:00:26.991+0800","caller":"raft/raft.go:835","msg":"d received MsgVoteResp from d at term 48"}
{"level":"info","ts":"2021-08-20T13:00:26.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to e at term 48"}
{"level":"info","ts":"2021-08-20T13:00:26.991+0800","caller":"raft/raft.go:822","msg":"d [logterm: 6, index: 6] sent MsgVote request to f at term 48"}
2021/08/20 13:00:26.991987 [error] [transport]: connect to store 5 failed with dial tcp 127.0.0.1:10001: connect: connection refused
2021/08/20 13:00:26.992044 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:14 containerID:5 > message:<type:MsgVoteMsgVote to:14 from:13 term:48 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 14 failed with not connected
2021/08/20 13:00:26.992186 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:26.992262 [error] [transport]: shard 12 send msg shardID:12 from:<id:13 containerID:7 > to:<id:15 containerID:1 > message:<type:MsgVoteMsgVote to:15 from:13 term:48 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" unique:"1-0-2"  from 13 to 15 failed with not connected
{"level":"info","ts":"2021-08-20T13:00:27.091+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 46"}
{"level":"info","ts":"2021-08-20T13:00:27.091+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 47"}
{"level":"info","ts":"2021-08-20T13:00:27.091+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 47"}
{"level":"info","ts":"2021-08-20T13:00:27.091+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 13 at term 47"}
{"level":"info","ts":"2021-08-20T13:00:27.091+0800","caller":"raft/raft.go:822","msg":"14 [logterm: 6, index: 6] sent MsgVote request to 15 at term 47"}
2021/08/20 13:00:27.091911 [error] [transport]: connect to store 5 failed with dial tcp 127.0.0.1:10001: connect: connection refused
2021/08/20 13:00:27.091949 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:19 containerID:5 > message:<type:MsgVoteMsgVote to:19 from:20 term:47 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 19 failed with not connected
2021/08/20 13:00:27.092003 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:27.092027 [error] [transport]: shard 18 send msg shardID:18 from:<id:20 containerID:7 > to:<id:21 containerID:1 > message:<type:MsgVoteMsgVote to:21 from:20 term:47 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" unique:"1-0-3"  from 20 to 21 failed with not connected
2021/08/20 13:00:27.127677 [error] [raftstore]: send store heartbeat failed with client is closed
2021/08/20 13:00:27.130744 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"warn","ts":"2021-08-20T13:00:27.299+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 13:00:27.299314 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"warn","ts":"2021-08-20T13:00:27.299+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/08/20 13:00:27.299393 [error] prophet: read /prophet/scheduler_config/ from etcd failed with context canceled
2021/08/20 13:00:27.299396 [info] prophet: coordinator stops running 
2021/08/20 13:00:27.299398 [info] prophet: coordinator is stopping
2021/08/20 13:00:27.299399 [info] prophet: coordinator has been stopped
{"level":"warn","ts":"2021-08-20T13:00:27.299+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Unavailable desc = transport is closing"}
2021-08-20 13:00:27.299424 I | etcdserver: skipped leadership transfer for stopping non-leader member
{"level":"warn","ts":"2021-08-20T13:00:27.299+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-fd8560b7-5957-49a9-b052-2325e557b8c2/127.0.0.1:40002","attempt":1,"error":"rpc error: code = Canceled desc = context canceled"}
2021/08/20 13:00:27.299444 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context canceled
2021/08/20 13:00:27.299447 [error] prophet: [prophet-leader/node-2]/loop: load current leader failed with context canceled, retry later
2021-08-20 13:00:27.299461 W | etcdserver: read-only range request "key:\"/electors/leader/prophet-leader\" " with result "error:context canceled" took too long (4.5228099s) to execute
WARNING: 2021/08/20 13:00:27 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
2021-08-20 13:00:27.299492 I | rafthttp: stopped HTTP pipelining with peer 82a8e79de0ab9ced
2021-08-20 13:00:27.299520 W | etcdserver: read-only range request "key:\"/prophet/scheduler_config/\" range_end:\"/prophet/scheduler_config0\" limit:1000 " with result "error:context canceled" took too long (8.0761723s) to execute
2021-08-20 13:00:27.299540 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:27.299545 I | rafthttp: stopping peer 82a8e79de0ab9ced...
2021-08-20 13:00:27.299559 I | rafthttp: stopped streaming with peer 82a8e79de0ab9ced (writer)
2021-08-20 13:00:27.299564 I | rafthttp: stopped streaming with peer 82a8e79de0ab9ced (writer)
WARNING: 2021/08/20 13:00:27 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
2021-08-20 13:00:27.299572 I | rafthttp: stopped HTTP pipelining with peer 82a8e79de0ab9ced
2021-08-20 13:00:27.299585 I | rafthttp: stopped streaming with peer 82a8e79de0ab9ced (stream MsgApp v2 reader)
2021-08-20 13:00:27.299592 I | rafthttp: stopped streaming with peer 82a8e79de0ab9ced (stream Message reader)
2021-08-20 13:00:27.299595 I | rafthttp: stopped peer 82a8e79de0ab9ced
2021-08-20 13:00:27.299598 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 13:00:27.299602 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:27.299607 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:27.299615 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:27.299629 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:27.299633 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:27.299636 I | rafthttp: stopped peer 93ccda9956d988f4
2021/08/20 13:00:27.307611 [info] [raftstore]: shard 12 handle serve raft stopped
2021/08/20 13:00:27.307626 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:27.307628 [info] [raftstore]: shard 8 handle serve raft stopped
2021/08/20 13:00:27.307629 [info] [raftstore]: shard 18 handle serve raft stopped
2021/08/20 13:00:27.307650 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:27.307654 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:27.307656 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:27.307670 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:27.307699 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:27.307720 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:27.307722 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:27.307712 [info] [transport]: transfer stopped
2021/08/20 13:00:27.307727 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:27.307727 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:27.307731 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:27.307732 [info] [transport]: send raft worker stopped
2021/08/20 13:00:27.307731 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:27.307725 [info] [transport]: send snapshot worker stopped
--- FAIL: TestShardPool (108.70s)
=== RUN   TestClusterStartAndStop
2021/08/20 13:00:27.308426 [info] prophet: prophet logger set
2021/08/20 13:00:27.308920 [info] [raftstore]: start scan gc snap files
2021/08/20 13:00:27.309158 [info] [raftstore]: start scan gc snap files
2021/08/20 13:00:27.309353 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:27.309368 [info] [raftstore]: begin to start prophet
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:27.309403 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:27.309440 I | embed: name = node-0
2021-08-20 13:00:27.309450 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 13:00:27.309452 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 13:00:27.309453 I | embed: heartbeat = 100ms
2021-08-20 13:00:27.309455 I | embed: election = 3000ms
2021-08-20 13:00:27.309456 I | embed: snapshot count = 100000
2021-08-20 13:00:27.309458 I | embed: advertise client URLs = http://127.0.0.1:40000
2021/08/20 13:00:27.309416 [info] [raftstore]: start scan gc snap files
2021-08-20 13:00:27.313694 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:27.313+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:27.313+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:27.313+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T13:00:27.313+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T13:00:27.313+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:27.315365 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:27.318292 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:27.318457 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
{"level":"info","ts":"2021-08-20T13:00:27.318+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:27.318539 I | embed: listening for peers on 127.0.0.1:50000
2021-08-20 13:00:27.318565 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021/08/20 13:00:27.341533 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 13:00:27.391582 [info] [raftstore]: shard 8 raft tick stopped
2021/08/20 13:00:27.391595 [info] [raftstore]: shard 12 raft tick stopped
2021/08/20 13:00:27.391597 [info] [raftstore]: shard 18 raft tick stopped
2021/08/20 13:00:27.399742 [info] prophet: [prophet-leader/node-2]/loop: exit
2021/08/20 13:00:28.130481 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:28.913+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T13:00:28.913+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T13:00:28.913+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:28.913+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T13:00:28.913+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 13:00:28.914150 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:28.914173 I | embed: ready to serve client requests
2021-08-20 13:00:28.914212 I | etcdserver: setting up the initial cluster version to 3.4
2021/08/20 13:00:28.914236 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 13:00:28.914479 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021-08-20 13:00:28.914778 N | etcdserver/membership: set the initial cluster version to 3.4
2021/08/20 13:00:28.915702 [info] prophet: start system time monitor 
2021/08/20 13:00:28.915715 [info] prophet: net application started
2021/08/20 13:00:28.916146 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 13:00:28.916363 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 13:00:28.916373 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 13:00:28.916614 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 13:00:28.917129 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 13:00:28.917147 [info] prophet: ********node-0 become to leader now********
2021/08/20 13:00:28.917586 [info] prophet: load 0 containers, cost 398.1µs
2021/08/20 13:00:28.917841 [info] prophet: load 0 resources, cost 243.6µs
2021/08/20 13:00:28.919409 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:28.919431 [info] prophet: client read loop started 
2021/08/20 13:00:28.919437 [info] prophet: client started
2021/08/20 13:00:28.919443 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:00:28.919444 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:28.919472 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435628 deployPath:"not set" 
2021/08/20 13:00:28.919474 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:28.919418 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:00:28.919509 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:28.919519 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:28.919522 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 13:00:28.919527 [info] prophet: coordinator starts to run schedulers 
2021/08/20 13:00:28.919543 [info] prophet: session 1[127.0.0.1:46482] connected
2021/08/20 13:00:28.920626 [info] prophet: load 0 jobs
2021/08/20 13:00:28.920933 [info] [raftstore]: create local store with id 1
2021/08/20 13:00:28.921400 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 13:00:28.921411 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 13:00:28.921415 [info] prophet: coordinator starts patrol resources 
2021/08/20 13:00:28.921408 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 13:00:28.921525 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 13:00:28.922924 [info] prophet: container 1 limit added
2021/08/20 13:00:28.922956 [info] [raftstore]: prophet started
2021/08/20 13:00:28.922977 [info] prophet: container 1 heartbeat stream binded
2021/08/20 13:00:28.922984 [info] [transport]: net application started
2021/08/20 13:00:28.922986 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 13:00:28.922988 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:28.922999 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:28.923004 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:28.923005 [info] [raftstore]: shard 2 init last term, last term=<5>
2021/08/20 13:00:28.923091 [info] [raftstore]: raft worker 0/0 start
{"level":"info","ts":"2021-08-20T13:00:28.923+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-08-20T13:00:28.923+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:28.923+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:28.923209 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:28.923+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:28.923+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:28.923+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:28.923+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 13:00:28.923270 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 13:00:28.923296 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 13:00:28.923325 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:28.923334 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:28.923335 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:28.923336 [info] [raftstore]: shards started
2021/08/20 13:00:28.923338 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:28.923345 [info] [raftstore]: net application started
2021/08/20 13:00:28.923346 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 13:00:28.923353 [info] [raftstore]: router started
2021/08/20 13:00:28.923365 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 13:00:28.923384 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:28.923451 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:28.923461 [info] [raftstore]: router event loop task started
2021/08/20 13:00:28.923463 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:28.923482 [info] prophet: session 2[127.0.0.1:46484] connected
2021/08/20 13:00:28.923526 [info] prophet: new watcher 127.0.0.1:46484 added
2021/08/20 13:00:28.923583 [info] [raftstore]: start init event
2021/08/20 13:00:28.924809 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:28.924819 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-08-20T13:00:28.925+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(760405819499705349 10650127570946328820)"}
2021-08-20 13:00:28.925447 I | etcdserver/membership: added member a8d8110646b7405 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 13:00:28.925464 I | rafthttp: starting peer a8d8110646b7405...
2021-08-20 13:00:28.925491 I | rafthttp: started HTTP pipelining with peer a8d8110646b7405
2021-08-20 13:00:28.925725 I | rafthttp: started streaming with peer a8d8110646b7405 (writer)
2021-08-20 13:00:28.925851 I | rafthttp: started streaming with peer a8d8110646b7405 (writer)
2021-08-20 13:00:28.926065 I | rafthttp: started peer a8d8110646b7405
2021-08-20 13:00:28.926080 I | rafthttp: added peer a8d8110646b7405
2021-08-20 13:00:28.926082 I | rafthttp: started streaming with peer a8d8110646b7405 (stream MsgApp v2 reader)
2021-08-20 13:00:28.926092 I | rafthttp: started streaming with peer a8d8110646b7405 (stream Message reader)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:28.926441 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:28.926464 I | embed: name = node-1
2021-08-20 13:00:28.926486 I | embed: data dir = /tmp/cube/node-1/prophet
2021-08-20 13:00:28.926488 I | embed: member dir = /tmp/cube/node-1/prophet/member
2021-08-20 13:00:28.926489 I | embed: heartbeat = 100ms
2021-08-20 13:00:28.926491 I | embed: election = 3000ms
2021-08-20 13:00:28.926493 I | embed: snapshot count = 100000
2021-08-20 13:00:28.926495 I | embed: advertise client URLs = http://127.0.0.1:40001
2021-08-20 13:00:28.931560 I | etcdserver: starting member a8d8110646b7405 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:28.931+0800","caller":"raft/raft.go:1550","msg":"a8d8110646b7405 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:28.931+0800","caller":"raft/raft.go:711","msg":"a8d8110646b7405 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:28.931+0800","caller":"raft/raft.go:388","msg":"newRaft a8d8110646b7405 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 13:00:28.933530 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:28.942081 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:28.942095 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 13:00:28.942101 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:28.942335 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:28.942486 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:28.942701 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 13:00:28.942713 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 13:00:28.942715 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:28.942722 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:28.942786 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:28.942909 I | rafthttp: peer a8d8110646b7405 became active
2021-08-20 13:00:28.942928 I | rafthttp: established a TCP streaming connection with peer a8d8110646b7405 (stream Message writer)
2021-08-20 13:00:28.942933 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 13:00:28.942940 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:28.942947 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:28.943018 I | rafthttp: established a TCP streaming connection with peer a8d8110646b7405 (stream MsgApp v2 writer)
2021-08-20 13:00:28.943125 I | embed: listening for peers on 127.0.0.1:50001
{"level":"info","ts":"2021-08-20T13:00:29.014+0800","caller":"raft/raft.go:870","msg":"a8d8110646b7405 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T13:00:29.014+0800","caller":"raft/raft.go:711","msg":"a8d8110646b7405 became follower at term 2"}
{"level":"info","ts":"2021-08-20T13:00:29.014+0800","caller":"raft/node.go:325","msg":"raft.node: a8d8110646b7405 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:29.016+0800","caller":"raft/raft.go:1550","msg":"a8d8110646b7405 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:29.016590 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:29.016633 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T13:00:29.016+0800","caller":"raft/raft.go:1550","msg":"a8d8110646b7405 switched to configuration voters=(760405819499705349 10650127570946328820)"}
2021-08-20 13:00:29.016999 I | etcdserver/membership: added member a8d8110646b7405 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 13:00:29.017774 I | etcdserver: published {Name:node-1 ClientURLs:[http://127.0.0.1:40001]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:29.017787 I | embed: ready to serve client requests
2021/08/20 13:00:29.017829 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
2021-08-20 13:00:29.018013 N | embed: serving insecure client requests on 127.0.0.1:40001, this is strongly discouraged!
2021/08/20 13:00:29.018790 [info] prophet: start system time monitor 
2021/08/20 13:00:29.018799 [info] prophet: net application started
2021/08/20 13:00:29.019323 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 13:00:29.019338 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:29.019340 [info] prophet: ********node-1 become to follower now********
2021/08/20 13:00:29.019358 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:29.019363 [info] prophet: client read loop started 
2021/08/20 13:00:29.019367 [info] prophet: client started
2021/08/20 13:00:29.019370 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 13:00:29.019371 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:29.019386 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1629435629 deployPath:"not set" 
2021/08/20 13:00:29.019395 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:29.019399 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:29.019403 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:29.019435 [info] prophet: session 3[127.0.0.1:46514] connected
2021/08/20 13:00:29.019530 [info] [raftstore]: create local store with id 5
2021/08/20 13:00:29.020052 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 13:00:29.024175 [info] prophet: container 5 limit added
2021/08/20 13:00:29.024215 [info] [raftstore]: prophet started
2021/08/20 13:00:29.024237 [info] prophet: container 5 heartbeat stream binded
2021/08/20 13:00:29.024248 [info] [transport]: net application started
2021/08/20 13:00:29.024250 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/08/20 13:00:29.024252 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:29.024255 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:29.024256 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:29.024257 [info] [raftstore]: shards started
2021/08/20 13:00:29.024258 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:29.024261 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:29.024262 [info] [raftstore]: net application started
2021/08/20 13:00:29.024264 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/08/20 13:00:29.024275 [info] [raftstore]: router started
2021/08/20 13:00:29.024293 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:29.024361 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:29.024380 [info] [raftstore]: router event loop task started
2021/08/20 13:00:29.024382 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:29.024374 [info] prophet: session 4[127.0.0.1:46516] connected
2021/08/20 13:00:29.024426 [info] prophet: new watcher 127.0.0.1:46516 added
2021/08/20 13:00:29.024484 [info] [raftstore]: start init event
2021/08/20 13:00:29.026112 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:29.026121 [info] [raftstore]: begin to start prophet
2021-08-20 13:00:29.026379 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:00:29.026410 I | rafthttp: established a TCP streaming connection with peer a8d8110646b7405 (stream MsgApp v2 reader)
2021-08-20 13:00:29.026423 I | rafthttp: established a TCP streaming connection with peer a8d8110646b7405 (stream Message reader)
2021-08-20 13:00:29.026436 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:00:29.026757 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:5f79a6cdfaafb171 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:29.026+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cb4b54ee-7bdc-42fa-a4c7-2b7896d254cc/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:29.026877 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:29.041295 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:29.122955 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 13:00:29.1229352 +0800 CST m=+147.238021001, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/08/20 13:00:29.122975 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/08/20 13:00:29.123055 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:29.124194 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:29.124298 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source heartbeat
2021/08/20 13:00:29.124305 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:29.124328 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:29.124404 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:29.130995 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:29.133+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/08/20 13:00:29.133212 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 62 132 61 179 23 105 72 183 178 219 216 16 74 58 137 250 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:29.133224 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:29.133250 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:29.133357 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:29.133448 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/08/20 13:00:29.134353 [info] [transport]: connected to store 5
2021/08/20 13:00:29.134390 [info] [transport]: session 1[127.0.0.1:38172] connected
2021/08/20 13:00:29.134411 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 13:00:29.134428 [info] [raftstore]: shard 2 replicate peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:29.134442 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:29.134446 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:29.134447 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T13:00:29.134+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:29.134+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:29.134+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 13:00:29.134485 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/08/20 13:00:29.134500 [info] [raftstore]: shard 2 added with peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T13:00:29.134+0800","caller":"raft/raft.go:870","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
2021/08/20 13:00:29.134532 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-08-20T13:00:29.134+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 6"}
2021/08/20 13:00:29.134594 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:29.134966 [info] [transport]: connected to store 1
2021/08/20 13:00:29.134998 [info] [transport]: session 1[127.0.0.1:44090] connected
2021/08/20 13:00:29.135052 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:29.135116 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:29.135133 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:29.135123 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:29.135+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:29.135191 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T13:00:29.135+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6)"}
{"level":"error","ts":"2021-08-20T13:00:29.135+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:29.135366 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 82 156 105 180 231 246 65 27 161 112 53 151 253 148 254 173 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:29.135381 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:29.135403 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<9> 
2021/08/20 13:00:29.135450 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:29.135472 [info] prophet: resource 2 ConfVer changed from 2 to 3
{"level":"error","ts":"2021-08-20T13:00:29.135+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:29.135543 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 13:00:29.135649 [info] [transport]: connected to store 5
2021/08/20 13:00:29.135668 [info] [transport]: session 2[127.0.0.1:38176] connected
{"level":"info","ts":"2021-08-20T13:00:29.135+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:29.135+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-08-20T13:00:29.135+0800","caller":"raft/raft.go:1503","msg":"6 [commit: 9, lastindex: 9, lastterm: 6] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:29.135+0800","caller":"raft/raft.go:1420","msg":"6 [commit: 9] restored snapshot [index: 9, term: 6]"}
2021/08/20 13:00:29.135771 [info] [raftstore]: shard 2 peer 6 receiving snapshot, skip further handling
2021/08/20 13:00:29.135834 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:9 >,size=<124>
2021/08/20 13:00:29.135864 [info] [raftstore]: shard 2 send snap complete
2021/08/20 13:00:29.135876 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 13:00:29.136580 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 13:00:29.1229352 +0800 CST m=+147.238021001, startAt:2021-08-20 13:00:29.1229694 +0800 CST m=+147.238055201, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 13.5999ms, 
2021/08/20 13:00:29.191775 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 13:00:29.191794 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 13:00:29.191804 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:9 TruncatedState:{Index:9 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:29.191811 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 start applying snapshot
2021/08/20 13:00:29.191825 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 13:00:29.191946 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply
2021/08/20 13:00:29.191959 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 applying snapshot to set read 9
2021/08/20 13:00:29.191972 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:29.191984 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:29.191988 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 AdvanceApply with 9
2021/08/20 13:00:29.191991 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_9.gz, header is shard:<id:2 epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:9 
2021/08/20 13:00:29.192020 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:9 XXX_unrecognized:[]}
2021/08/20 13:00:29.192040 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply, completed
2021-08-20 13:00:29.527628 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:5f79a6cdfaafb171 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:29.527+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cb4b54ee-7bdc-42fa-a4c7-2b7896d254cc/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:29.527766 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:30.028146 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:8cd8688d1581d56c RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:30.028+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cb4b54ee-7bdc-42fa-a4c7-2b7896d254cc/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:30.028277 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:30.130842 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:30.528835 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:8cd8688d1581d56c RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:30.528+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cb4b54ee-7bdc-42fa-a4c7-2b7896d254cc/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:30.528994 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:31.029429 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:aa0ca415fc1ead6f RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:31.029+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cb4b54ee-7bdc-42fa-a4c7-2b7896d254cc/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:31.029558 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:31.129987 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:31.530125 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:aa0ca415fc1ead6f RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:31.530+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cb4b54ee-7bdc-42fa-a4c7-2b7896d254cc/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:31.530269 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:32.030867 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:ea99de882d45c458 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:32.030+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cb4b54ee-7bdc-42fa-a4c7-2b7896d254cc/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:32.030994 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:32.130205 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:32.531740 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:ea99de882d45c458 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:32.531+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cb4b54ee-7bdc-42fa-a4c7-2b7896d254cc/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:32.531884 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:33.032502 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:bfe806a46689fe7b RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:33.032+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cb4b54ee-7bdc-42fa-a4c7-2b7896d254cc/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:33.032708 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:33.130759 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:33.533058 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:bfe806a46689fe7b RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:33.533+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-cb4b54ee-7bdc-42fa-a4c7-2b7896d254cc/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:33.533183 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-08-20T13:00:34.035+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(760405819499705349 7280016745446526480 10650127570946328820)"}
2021-08-20 13:00:34.035206 I | etcdserver/membership: added member 6507d0a8a73c4e10 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:00:34.035214 I | rafthttp: starting peer 6507d0a8a73c4e10...
2021-08-20 13:00:34.035230 I | rafthttp: started HTTP pipelining with peer 6507d0a8a73c4e10
{"level":"info","ts":"2021-08-20T13:00:34.035+0800","caller":"raft/raft.go:1550","msg":"a8d8110646b7405 switched to configuration voters=(760405819499705349 7280016745446526480 10650127570946328820)"}
2021-08-20 13:00:34.035299 I | etcdserver/membership: added member 6507d0a8a73c4e10 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:00:34.035318 I | rafthttp: starting peer 6507d0a8a73c4e10...
2021-08-20 13:00:34.035328 I | rafthttp: started HTTP pipelining with peer 6507d0a8a73c4e10
2021-08-20 13:00:34.035493 I | rafthttp: started streaming with peer 6507d0a8a73c4e10 (writer)
2021-08-20 13:00:34.035726 I | rafthttp: started streaming with peer 6507d0a8a73c4e10 (writer)
2021-08-20 13:00:34.035938 I | rafthttp: started streaming with peer 6507d0a8a73c4e10 (writer)
2021-08-20 13:00:34.036018 I | rafthttp: started streaming with peer 6507d0a8a73c4e10 (writer)
2021-08-20 13:00:34.036604 I | rafthttp: started peer 6507d0a8a73c4e10
2021-08-20 13:00:34.036627 I | rafthttp: added peer 6507d0a8a73c4e10
2021-08-20 13:00:34.036759 I | rafthttp: started peer 6507d0a8a73c4e10
2021-08-20 13:00:34.036785 I | rafthttp: added peer 6507d0a8a73c4e10
2021-08-20 13:00:34.036911 I | rafthttp: started streaming with peer 6507d0a8a73c4e10 (stream MsgApp v2 reader)
2021-08-20 13:00:34.036999 I | rafthttp: started streaming with peer 6507d0a8a73c4e10 (stream Message reader)
2021-08-20 13:00:34.037052 I | rafthttp: started streaming with peer 6507d0a8a73c4e10 (stream MsgApp v2 reader)
2021-08-20 13:00:34.037136 I | rafthttp: started streaming with peer 6507d0a8a73c4e10 (stream Message reader)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:34.038087 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:34.038189 I | embed: name = node-2
2021-08-20 13:00:34.038244 I | embed: data dir = /tmp/cube/node-2/prophet
2021-08-20 13:00:34.038252 I | embed: member dir = /tmp/cube/node-2/prophet/member
2021-08-20 13:00:34.038256 I | embed: heartbeat = 100ms
2021-08-20 13:00:34.038259 I | embed: election = 3000ms
2021-08-20 13:00:34.038261 I | embed: snapshot count = 100000
2021-08-20 13:00:34.038268 I | embed: advertise client URLs = http://127.0.0.1:40002
2021-08-20 13:00:34.043663 I | etcdserver: starting member 6507d0a8a73c4e10 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:34.043+0800","caller":"raft/raft.go:1550","msg":"6507d0a8a73c4e10 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:34.043+0800","caller":"raft/raft.go:711","msg":"6507d0a8a73c4e10 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:34.043+0800","caller":"raft/raft.go:388","msg":"newRaft 6507d0a8a73c4e10 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 13:00:34.045359 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:34.048307 I | rafthttp: started HTTP pipelining with peer a8d8110646b7405
2021-08-20 13:00:34.048324 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:34.048329 I | rafthttp: starting peer a8d8110646b7405...
2021-08-20 13:00:34.048335 I | rafthttp: started HTTP pipelining with peer a8d8110646b7405
2021-08-20 13:00:34.048550 I | rafthttp: started streaming with peer a8d8110646b7405 (writer)
2021-08-20 13:00:34.048668 I | rafthttp: started streaming with peer a8d8110646b7405 (writer)
2021-08-20 13:00:34.048909 I | rafthttp: started peer a8d8110646b7405
2021-08-20 13:00:34.048922 I | rafthttp: added peer a8d8110646b7405
2021-08-20 13:00:34.048925 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 13:00:34.048930 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:34.048933 I | rafthttp: started streaming with peer a8d8110646b7405 (stream Message reader)
2021-08-20 13:00:34.048939 I | rafthttp: started streaming with peer a8d8110646b7405 (stream MsgApp v2 reader)
2021-08-20 13:00:34.049150 I | rafthttp: peer 6507d0a8a73c4e10 became active
2021-08-20 13:00:34.049173 I | rafthttp: established a TCP streaming connection with peer 6507d0a8a73c4e10 (stream Message writer)
2021-08-20 13:00:34.049201 I | rafthttp: peer a8d8110646b7405 became active
2021-08-20 13:00:34.049222 I | rafthttp: established a TCP streaming connection with peer a8d8110646b7405 (stream MsgApp v2 reader)
2021-08-20 13:00:34.049232 I | rafthttp: established a TCP streaming connection with peer a8d8110646b7405 (stream Message reader)
2021-08-20 13:00:34.049313 I | rafthttp: established a TCP streaming connection with peer 6507d0a8a73c4e10 (stream MsgApp v2 writer)
2021-08-20 13:00:34.049338 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:34.049605 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:34.049994 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 13:00:34.050007 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 13:00:34.050023 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:34.050028 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:34.050055 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:34.050230 I | rafthttp: peer 6507d0a8a73c4e10 became active
2021-08-20 13:00:34.050260 I | rafthttp: established a TCP streaming connection with peer 6507d0a8a73c4e10 (stream Message writer)
2021-08-20 13:00:34.050265 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 13:00:34.050270 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:34.050314 I | embed: listening for peers on 127.0.0.1:50002
2021-08-20 13:00:34.050345 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:34.050483 I | rafthttp: established a TCP streaming connection with peer 6507d0a8a73c4e10 (stream MsgApp v2 writer)
2021-08-20 13:00:34.100934 I | etcdserver: 6507d0a8a73c4e10 initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
{"level":"info","ts":"2021-08-20T13:00:34.114+0800","caller":"raft/raft.go:870","msg":"6507d0a8a73c4e10 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T13:00:34.114+0800","caller":"raft/raft.go:711","msg":"6507d0a8a73c4e10 became follower at term 2"}
{"level":"info","ts":"2021-08-20T13:00:34.114+0800","caller":"raft/node.go:325","msg":"raft.node: 6507d0a8a73c4e10 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:34.116+0800","caller":"raft/raft.go:1550","msg":"6507d0a8a73c4e10 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:34.116288 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:34.116325 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T13:00:34.116+0800","caller":"raft/raft.go:1550","msg":"6507d0a8a73c4e10 switched to configuration voters=(760405819499705349 10650127570946328820)"}
2021-08-20 13:00:34.116707 I | etcdserver/membership: added member a8d8110646b7405 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:34.116+0800","caller":"raft/raft.go:1550","msg":"6507d0a8a73c4e10 switched to configuration voters=(760405819499705349 7280016745446526480 10650127570946328820)"}
2021-08-20 13:00:34.116916 I | etcdserver/membership: added member 6507d0a8a73c4e10 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:00:34.117434 I | etcdserver: published {Name:node-2 ClientURLs:[http://127.0.0.1:40002]} to cluster 6a4ade671189dc2f
2021/08/20 13:00:34.117448 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
2021-08-20 13:00:34.117448 I | embed: ready to serve client requests
2021-08-20 13:00:34.117670 N | embed: serving insecure client requests on 127.0.0.1:40002, this is strongly discouraged!
2021/08/20 13:00:34.118327 [info] prophet: net application started
2021/08/20 13:00:34.118356 [info] prophet: start system time monitor 
2021/08/20 13:00:34.118688 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 13:00:34.118701 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:34.118703 [info] prophet: ********node-2 become to follower now********
2021/08/20 13:00:34.118725 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:34.118739 [info] prophet: client read loop started 
2021/08/20 13:00:34.118749 [info] prophet: client started
2021/08/20 13:00:34.118752 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 13:00:34.118753 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:34.118767 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1629435634 deployPath:"not set" 
2021/08/20 13:00:34.118777 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:34.118773 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:34.118794 [info] prophet: session 5[127.0.0.1:46580] connected
2021/08/20 13:00:34.118801 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:34.118910 [info] [raftstore]: create local store with id 7
2021/08/20 13:00:34.119282 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 13:00:34.121534 [info] prophet: container 7 limit added
2021/08/20 13:00:34.121619 [info] [raftstore]: prophet started
2021/08/20 13:00:34.121638 [info] prophet: container 7 heartbeat stream binded
2021/08/20 13:00:34.121660 [info] [transport]: net application started
2021/08/20 13:00:34.121672 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/08/20 13:00:34.121675 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:34.121678 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:34.121679 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:34.121679 [info] [raftstore]: shards started
2021/08/20 13:00:34.121681 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:34.121688 [info] [raftstore]: net application started
2021/08/20 13:00:34.121689 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/08/20 13:00:34.121696 [info] [raftstore]: router started
2021/08/20 13:00:34.121747 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:34.121754 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:34.121783 [info] [raftstore]: router event loop task started
2021/08/20 13:00:34.121792 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:34.121805 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:34.121812 [info] prophet: session 6[127.0.0.1:46582] connected
2021/08/20 13:00:34.121851 [info] prophet: new watcher 127.0.0.1:46582 added
2021/08/20 13:00:34.121914 [info] [raftstore]: start init event
2021/08/20 13:00:34.130400 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:34.138095 I | rafthttp: established a TCP streaming connection with peer a8d8110646b7405 (stream Message writer)
2021-08-20 13:00:34.138115 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:00:34.138133 I | rafthttp: established a TCP streaming connection with peer 6507d0a8a73c4e10 (stream Message reader)
2021-08-20 13:00:34.138139 I | rafthttp: established a TCP streaming connection with peer 6507d0a8a73c4e10 (stream Message reader)
2021-08-20 13:00:34.138144 I | rafthttp: established a TCP streaming connection with peer 6507d0a8a73c4e10 (stream MsgApp v2 reader)
2021-08-20 13:00:34.138149 I | rafthttp: established a TCP streaming connection with peer 6507d0a8a73c4e10 (stream MsgApp v2 reader)
2021-08-20 13:00:34.138195 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:00:34.138548 I | rafthttp: established a TCP streaming connection with peer a8d8110646b7405 (stream MsgApp v2 writer)
2021/08/20 13:00:34.147932 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:34.149133 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 13:00:34.1491169 +0800 CST m=+152.264202801, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/08/20 13:00:34.149149 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/08/20 13:00:34.149216 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:34.153602 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.153841 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.153858 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.153868 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.153859 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:34.153+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6) learners=(8)"}
2021/08/20 13:00:34.153936 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:34.163+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6) learners=(8)"}
2021/08/20 13:00:34.163645 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 7 171 36 196 147 190 65 254 143 121 13 169 146 148 70 210 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:34.163658 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.163799 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/08/20 13:00:34.165431 [info] prophet: resource 2 send schedule command, step promote learner peer 8 on container 7 to voter, source heartbeat
2021/08/20 13:00:34.165473 [info] [transport]: connected to store 7
2021/08/20 13:00:34.165501 [info] [raftstore]: shard-2 AddNode peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:34.165520 [info] [transport]: session 1[127.0.0.1:48860] connected
2021/08/20 13:00:34.165546 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 13:00:34.165583 [info] [raftstore]: shard 2 replicate peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:34.165588 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.165600 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:34.165614 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:34.165616 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T13:00:34.165+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:34.165+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:34.165+0800","caller":"raft/raft.go:388","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 13:00:34.165681 [info] [raftstore]: shard 2 added with peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T13:00:34.165+0800","caller":"raft/raft.go:870","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:34.165+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 6"}
2021/08/20 13:00:34.165733 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.165742 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.165764 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"info","ts":"2021-08-20T13:00:34.165+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6 8)"}
2021/08/20 13:00:34.165817 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 11 150 144 170 10 184 74 176 178 40 92 233 245 178 10 170 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 8 16 7] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:34.165832 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.165841 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.165841 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:34.165+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6 8)"}
2021/08/20 13:00:34.165904 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:34.165937 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:34.165952 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/08/20 13:00:34.166155 [info] [transport]: connected to store 1
2021/08/20 13:00:34.166197 [info] [transport]: session 2[127.0.0.1:44158] connected
2021/08/20 13:00:34.166339 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:34.166+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:34.166402 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:34.166634 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<11> 
2021/08/20 13:00:34.166819 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 13:00:34.1491169 +0800 CST m=+152.264202801, startAt:2021-08-20 13:00:34.1491448 +0800 CST m=+152.264230601, currentStep:2, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]) finished) finish, takes 17.6627ms, 
2021/08/20 13:00:34.192025 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:34.192+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:34.192126 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 13:00:34.192270 [info] [transport]: connected to store 7
2021/08/20 13:00:34.192283 [info] [transport]: session 2[127.0.0.1:48864] connected
{"level":"info","ts":"2021-08-20T13:00:34.192+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:34.192+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-08-20T13:00:34.192+0800","caller":"raft/raft.go:1503","msg":"8 [commit: 11, lastindex: 11, lastterm: 6] restored snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:34.192+0800","caller":"raft/raft.go:1420","msg":"8 [commit: 11] restored snapshot [index: 11, term: 6]"}
2021/08/20 13:00:34.192420 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/08/20 13:00:34.192708 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:5 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:8 containerID:7 > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:11 >,size=<123>
2021/08/20 13:00:34.192753 [info] [raftstore]: shard 2 send snap complete
2021/08/20 13:00:34.192768 [info] [transport]: shard 2 pending snap sent succ, size=<123>, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 13:00:34.223407 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:46482->127.0.0.1:30000: use of closed network connection
2021/08/20 13:00:34.223420 [error] prophet: client read loop stopped
2021/08/20 13:00:34.223435 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:34.223436 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:34.223439 [error] prophet: session 6[127.0.0.1:46582] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46582: use of closed network connection
2021/08/20 13:00:34.223451 [error] prophet: session 2[127.0.0.1:46484] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46484: use of closed network connection
2021/08/20 13:00:34.223452 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:34.223456 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:34.223459 [error] prophet: session 4[127.0.0.1:46516] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46516: use of closed network connection
2021/08/20 13:00:34.223460 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:34.223463 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:34.223467 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 13:00:34.223469 [error] prophet: session 3[127.0.0.1:46514] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46514: use of closed network connection
2021/08/20 13:00:34.223476 [error] prophet: session 5[127.0.0.1:46580] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46580: use of closed network connection
2021/08/20 13:00:34.223495 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:34.223579 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 13:00:34.223495 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 13:00:34.223616 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:34.223640 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 13:00:34.224439 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 13:00:34.224488 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 13:00:34.224504 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 13:00:34.224509 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 13:00:34.224520 [info] prophet: coordinator is stopping
2021/08/20 13:00:34.224523 [info] prophet: drive push operator has been stopped 
2021-08-20 13:00:34.224524 I | etcdserver: 93ccda9956d988f4 starts leadership transfer from 93ccda9956d988f4 to a8d8110646b7405
2021/08/20 13:00:34.224522 [info] prophet: patrol resources has been stopped 
2021/08/20 13:00:34.224529 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/08/20 13:00:34.224533 [info] prophet: coordinator has been stopped
{"level":"info","ts":"2021-08-20T13:00:34.224+0800","caller":"raft/raft.go:1278","msg":"93ccda9956d988f4 [term 2] starts to transfer leadership to a8d8110646b7405"}
2021/08/20 13:00:34.224550 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/08/20 13:00:34.224553 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
{"level":"info","ts":"2021-08-20T13:00:34.224+0800","caller":"raft/raft.go:1284","msg":"93ccda9956d988f4 sends MsgTimeoutNow to a8d8110646b7405 immediately as a8d8110646b7405 already has up-to-date log"}
2021/08/20 13:00:34.224567 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
{"level":"info","ts":"2021-08-20T13:00:34.224+0800","caller":"raft/raft.go:1372","msg":"a8d8110646b7405 [term 2] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T13:00:34.224+0800","caller":"raft/raft.go:724","msg":"a8d8110646b7405 became candidate at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.224+0800","caller":"raft/raft.go:835","msg":"a8d8110646b7405 received MsgVoteResp from a8d8110646b7405 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.224+0800","caller":"raft/raft.go:822","msg":"a8d8110646b7405 [logterm: 2, index: 30] sent MsgVote request to 6507d0a8a73c4e10 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.224+0800","caller":"raft/raft.go:822","msg":"a8d8110646b7405 [logterm: 2, index: 30] sent MsgVote request to 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.224+0800","caller":"raft/node.go:331","msg":"raft.node: a8d8110646b7405 lost leader 93ccda9956d988f4 at term 3"}
2021/08/20 13:00:34.224973 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/08/20 13:00:34.224987 [info] prophet: [prophet-leader/node-2]/campaign: start
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/raft.go:870","msg":"6507d0a8a73c4e10 [term: 2] received a MsgVote message with higher term from a8d8110646b7405 [term: 3]"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/raft.go:711","msg":"6507d0a8a73c4e10 became follower at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/raft.go:971","msg":"6507d0a8a73c4e10 [logterm: 2, index: 30, vote: 0] cast MsgVote for a8d8110646b7405 [logterm: 2, index: 30] at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/raft.go:870","msg":"93ccda9956d988f4 [term: 2] received a MsgVote message with higher term from a8d8110646b7405 [term: 3]"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/node.go:331","msg":"raft.node: 6507d0a8a73c4e10 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/raft.go:971","msg":"93ccda9956d988f4 [logterm: 2, index: 30, vote: 0] cast MsgVote for a8d8110646b7405 [logterm: 2, index: 30] at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/node.go:331","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/raft.go:835","msg":"a8d8110646b7405 received MsgVoteResp from 6507d0a8a73c4e10 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/raft.go:1319","msg":"a8d8110646b7405 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/raft.go:776","msg":"a8d8110646b7405 became leader at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/node.go:325","msg":"raft.node: a8d8110646b7405 elected leader a8d8110646b7405 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/node.go:325","msg":"raft.node: 6507d0a8a73c4e10 elected leader a8d8110646b7405 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:34.225+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader a8d8110646b7405 at term 3"}
{"level":"warn","ts":"2021-08-20T13:00:34.225+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-a595d7ad-aa42-4df8-a12a-a9f0c32670b2/127.0.0.1:40001","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
2021/08/20 13:00:34.233389 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/08/20 13:00:34.250335 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/08/20 13:00:34.250347 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/08/20 13:00:34.251405 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/08/20 13:00:34.253003 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/08/20 13:00:34.253017 [info] prophet: ********node-1 become to leader now********
2021/08/20 13:00:34.254916 [info] prophet: load 3 containers, cost 1.8048ms
2021/08/20 13:00:34.255181 [info] prophet: load 1 resources, cost 252µs
2021/08/20 13:00:34.255770 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:00:34.255811 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:00:34.256028 [info] prophet: load 0 jobs
2021-08-20 13:00:34.325434 I | etcdserver: 93ccda9956d988f4 finished leadership transfer from 93ccda9956d988f4 to a8d8110646b7405 (took 100.9075ms)
2021/08/20 13:00:34.325444 [info] prophet: [prophet-leader/node-0]/loop: exit
2021-08-20 13:00:34.325466 I | rafthttp: stopping peer a8d8110646b7405...
2021-08-20 13:00:34.325661 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:34.325742 I | rafthttp: closed the TCP streaming connection with peer a8d8110646b7405 (stream MsgApp v2 writer)
2021-08-20 13:00:34.325756 I | rafthttp: stopped streaming with peer a8d8110646b7405 (writer)
2021-08-20 13:00:34.325882 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:34.325995 I | rafthttp: closed the TCP streaming connection with peer a8d8110646b7405 (stream Message writer)
2021-08-20 13:00:34.326009 I | rafthttp: stopped streaming with peer a8d8110646b7405 (writer)
2021-08-20 13:00:34.326028 I | rafthttp: stopped HTTP pipelining with peer a8d8110646b7405
2021-08-20 13:00:34.326078 W | rafthttp: lost the TCP streaming connection with peer a8d8110646b7405 (stream MsgApp v2 reader)
2021-08-20 13:00:34.326090 E | rafthttp: failed to read a8d8110646b7405 on stream MsgApp v2 (context canceled)
2021-08-20 13:00:34.326092 I | rafthttp: peer a8d8110646b7405 became inactive (message send to peer failed)
2021-08-20 13:00:34.326099 I | rafthttp: stopped streaming with peer a8d8110646b7405 (stream MsgApp v2 reader)
2021-08-20 13:00:34.326133 W | rafthttp: lost the TCP streaming connection with peer a8d8110646b7405 (stream Message reader)
2021-08-20 13:00:34.326146 I | rafthttp: stopped streaming with peer a8d8110646b7405 (stream Message reader)
2021-08-20 13:00:34.326149 I | rafthttp: stopped peer a8d8110646b7405
2021-08-20 13:00:34.326151 I | rafthttp: stopping peer 6507d0a8a73c4e10...
2021-08-20 13:00:34.326256 I | rafthttp: closed the TCP streaming connection with peer 6507d0a8a73c4e10 (stream MsgApp v2 writer)
2021-08-20 13:00:34.326267 I | rafthttp: stopped streaming with peer 6507d0a8a73c4e10 (writer)
2021-08-20 13:00:34.326295 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:34.326375 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:34.326511 I | rafthttp: closed the TCP streaming connection with peer 6507d0a8a73c4e10 (stream Message writer)
2021-08-20 13:00:34.326523 I | rafthttp: stopped streaming with peer 6507d0a8a73c4e10 (writer)
2021-08-20 13:00:34.326531 I | rafthttp: stopped HTTP pipelining with peer 6507d0a8a73c4e10
2021-08-20 13:00:34.326559 W | rafthttp: lost the TCP streaming connection with peer 6507d0a8a73c4e10 (stream MsgApp v2 reader)
2021-08-20 13:00:34.326570 E | rafthttp: failed to read 6507d0a8a73c4e10 on stream MsgApp v2 (context canceled)
2021-08-20 13:00:34.326571 I | rafthttp: peer 6507d0a8a73c4e10 became inactive (message send to peer failed)
2021-08-20 13:00:34.326576 I | rafthttp: stopped streaming with peer 6507d0a8a73c4e10 (stream MsgApp v2 reader)
2021-08-20 13:00:34.326617 W | rafthttp: lost the TCP streaming connection with peer 6507d0a8a73c4e10 (stream Message reader)
2021-08-20 13:00:34.326627 I | rafthttp: stopped streaming with peer 6507d0a8a73c4e10 (stream Message reader)
2021-08-20 13:00:34.326629 I | rafthttp: stopped peer 6507d0a8a73c4e10
2021-08-20 13:00:34.326700 E | rafthttp: failed to find member a8d8110646b7405 in cluster 6a4ade671189dc2f
2021-08-20 13:00:34.326738 E | rafthttp: failed to find member a8d8110646b7405 in cluster 6a4ade671189dc2f
2021-08-20 13:00:34.326762 E | rafthttp: failed to find member 6507d0a8a73c4e10 in cluster 6a4ade671189dc2f
2021-08-20 13:00:34.326789 E | rafthttp: failed to find member 6507d0a8a73c4e10 in cluster 6a4ade671189dc2f
2021-08-20 13:00:34.326802 E | rafthttp: failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node a8d8110646b7405)
2021-08-20 13:00:34.326805 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021-08-20 13:00:34.326830 E | rafthttp: failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node 6507d0a8a73c4e10)
2021-08-20 13:00:34.326850 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021/08/20 13:00:34.333203 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:34.333229 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:34.333239 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:34.333242 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:34.333245 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:34.333272 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.333281 [info] [transport]: transfer stopped
2021/08/20 13:00:34.333301 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.333309 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.333312 [error] [transport]: session 1[127.0.0.1:44090] read failed with read tcp 127.0.0.1:10000->127.0.0.1:44090: use of closed network connection
2021/08/20 13:00:34.333318 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.333321 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.333323 [info] [transport]: send raft worker stopped
2021/08/20 13:00:34.333325 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.333326 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.333328 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.333341 [error] [transport]: session 2[127.0.0.1:44158] read failed with read tcp 127.0.0.1:10000->127.0.0.1:44158: use of closed network connection
2021/08/20 13:00:34.334302 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/08/20 13:00:34.334320 [info] prophet: coordinator stops running 
2021/08/20 13:00:34.334324 [info] prophet: coordinator is stopping
2021/08/20 13:00:34.334325 [info] prophet: coordinator has been stopped
2021/08/20 13:00:34.334327 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
2021/08/20 13:00:34.334333 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
2021/08/20 13:00:34.334337 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021-08-20 13:00:34.334376 I | etcdserver: a8d8110646b7405 starts leadership transfer from a8d8110646b7405 to 6507d0a8a73c4e10
{"level":"info","ts":"2021-08-20T13:00:34.334+0800","caller":"raft/raft.go:1278","msg":"a8d8110646b7405 [term 3] starts to transfer leadership to 6507d0a8a73c4e10"}
{"level":"info","ts":"2021-08-20T13:00:34.334+0800","caller":"raft/raft.go:1284","msg":"a8d8110646b7405 sends MsgTimeoutNow to 6507d0a8a73c4e10 immediately as 6507d0a8a73c4e10 already has up-to-date log"}
{"level":"info","ts":"2021-08-20T13:00:34.334+0800","caller":"raft/raft.go:1372","msg":"6507d0a8a73c4e10 [term 3] received MsgTimeoutNow from a8d8110646b7405 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T13:00:34.334+0800","caller":"raft/raft.go:724","msg":"6507d0a8a73c4e10 became candidate at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.334+0800","caller":"raft/raft.go:835","msg":"6507d0a8a73c4e10 received MsgVoteResp from 6507d0a8a73c4e10 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.334+0800","caller":"raft/raft.go:822","msg":"6507d0a8a73c4e10 [logterm: 3, index: 34] sent MsgVote request to a8d8110646b7405 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.334+0800","caller":"raft/raft.go:822","msg":"6507d0a8a73c4e10 [logterm: 3, index: 34] sent MsgVote request to 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.334+0800","caller":"raft/node.go:331","msg":"raft.node: 6507d0a8a73c4e10 lost leader a8d8110646b7405 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.335+0800","caller":"raft/raft.go:870","msg":"a8d8110646b7405 [term: 3] received a MsgVote message with higher term from 6507d0a8a73c4e10 [term: 4]"}
{"level":"info","ts":"2021-08-20T13:00:34.335+0800","caller":"raft/raft.go:711","msg":"a8d8110646b7405 became follower at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.335+0800","caller":"raft/raft.go:971","msg":"a8d8110646b7405 [logterm: 3, index: 34, vote: 0] cast MsgVote for 6507d0a8a73c4e10 [logterm: 3, index: 34] at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.335+0800","caller":"raft/node.go:331","msg":"raft.node: a8d8110646b7405 lost leader a8d8110646b7405 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.336+0800","caller":"raft/raft.go:835","msg":"6507d0a8a73c4e10 received MsgVoteResp from a8d8110646b7405 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.336+0800","caller":"raft/raft.go:1319","msg":"6507d0a8a73c4e10 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T13:00:34.336+0800","caller":"raft/raft.go:776","msg":"6507d0a8a73c4e10 became leader at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.336+0800","caller":"raft/node.go:325","msg":"raft.node: 6507d0a8a73c4e10 elected leader 6507d0a8a73c4e10 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:34.336+0800","caller":"raft/node.go:325","msg":"raft.node: a8d8110646b7405 elected leader 6507d0a8a73c4e10 at term 4"}
2021/08/20 13:00:34.391037 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 13:00:34.424541 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:34.424549 [error] prophet: reset leader connection failed with client is closed
2021/08/20 13:00:34.424598 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 13:00:34.424614 [error] prophet: client read loop stopped
2021-08-20 13:00:34.435243 I | etcdserver: a8d8110646b7405 finished leadership transfer from a8d8110646b7405 to 6507d0a8a73c4e10 (took 100.8659ms)
2021/08/20 13:00:34.435252 [info] prophet: [prophet-leader/node-1]/loop: exit
2021-08-20 13:00:34.435289 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:34.435295 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 13:00:34.435641 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:00:34.435654 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:34.435991 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:00:34.436003 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:34.436030 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:34.436046 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:34.436050 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:34.436064 I | rafthttp: stopped peer 93ccda9956d988f4
2021-08-20 13:00:34.436074 I | rafthttp: stopping peer 6507d0a8a73c4e10...
2021-08-20 13:00:34.436163 I | rafthttp: closed the TCP streaming connection with peer 6507d0a8a73c4e10 (stream MsgApp v2 writer)
2021-08-20 13:00:34.436175 I | rafthttp: stopped streaming with peer 6507d0a8a73c4e10 (writer)
2021-08-20 13:00:34.436255 W | rafthttp: lost the TCP streaming connection with peer a8d8110646b7405 (stream MsgApp v2 reader)
2021-08-20 13:00:34.436283 I | rafthttp: closed the TCP streaming connection with peer 6507d0a8a73c4e10 (stream Message writer)
2021-08-20 13:00:34.436286 I | rafthttp: stopped streaming with peer 6507d0a8a73c4e10 (writer)
2021-08-20 13:00:34.436294 I | rafthttp: stopped HTTP pipelining with peer 6507d0a8a73c4e10
2021-08-20 13:00:34.436315 W | rafthttp: lost the TCP streaming connection with peer 6507d0a8a73c4e10 (stream MsgApp v2 reader)
2021-08-20 13:00:34.436331 W | rafthttp: lost the TCP streaming connection with peer a8d8110646b7405 (stream Message reader)
2021-08-20 13:00:34.436357 E | rafthttp: failed to read 6507d0a8a73c4e10 on stream MsgApp v2 (context canceled)
2021-08-20 13:00:34.436377 I | rafthttp: peer 6507d0a8a73c4e10 became inactive (message send to peer failed)
2021-08-20 13:00:34.436387 I | rafthttp: stopped streaming with peer 6507d0a8a73c4e10 (stream MsgApp v2 reader)
2021-08-20 13:00:34.436434 W | rafthttp: lost the TCP streaming connection with peer 6507d0a8a73c4e10 (stream Message reader)
2021-08-20 13:00:34.436452 I | rafthttp: stopped streaming with peer 6507d0a8a73c4e10 (stream Message reader)
2021-08-20 13:00:34.436456 I | rafthttp: stopped peer 6507d0a8a73c4e10
2021-08-20 13:00:34.436497 E | rafthttp: failed to find member 6507d0a8a73c4e10 in cluster 6a4ade671189dc2f
2021-08-20 13:00:34.436546 E | rafthttp: failed to find member 6507d0a8a73c4e10 in cluster 6a4ade671189dc2f
2021-08-20 13:00:34.436566 E | rafthttp: failed to dial a8d8110646b7405 on stream MsgApp v2 (peer a8d8110646b7405 failed to find local node 6507d0a8a73c4e10)
2021-08-20 13:00:34.436570 I | rafthttp: peer a8d8110646b7405 became inactive (message send to peer failed)
2021/08/20 13:00:34.445131 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:34.445159 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:34.445163 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:34.445161 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:34.445165 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:34.445197 [info] [transport]: transfer stopped
2021/08/20 13:00:34.445234 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.445259 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.445262 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.445265 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.445280 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.445287 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.445301 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.445306 [info] [transport]: send raft worker stopped
2021/08/20 13:00:34.445308 [error] [transport]: session 1[127.0.0.1:38172] read failed with read tcp 127.0.0.1:10001->127.0.0.1:38172: use of closed network connection
2021/08/20 13:00:34.445316 [error] [transport]: session 2[127.0.0.1:38176] read failed with read tcp 127.0.0.1:10001->127.0.0.1:38176: use of closed network connection
2021/08/20 13:00:34.445304 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:34.491011 [info] [raftstore]: shard 2 raft tick stopped
2021-08-20 13:00:34.544177 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021/08/20 13:00:34.624842 [error] prophet: reset leader connection failed with client is closed
2021/08/20 13:00:34.624903 [error] prophet: client read loop stopped
2021-08-20 13:00:34.644889 W | rafthttp: failed to process raft message (raft: stopped)
2021-08-20 13:00:34.744749 W | rafthttp: lost the TCP streaming connection with peer a8d8110646b7405 (stream Message writer)
2021-08-20 13:00:34.744860 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 13:00:34.792486 [error] [transport]: session 2[127.0.0.1:48864] read failed with read tcp 127.0.0.1:10002->127.0.0.1:48864: i/o timeout
2021/08/20 13:00:34.793606 [error] [transport]: session 1[127.0.0.1:48860] read failed with read tcp 127.0.0.1:10002->127.0.0.1:48860: i/o timeout
2021/08/20 13:00:35.122727 [error] [raftstore]: send store heartbeat failed with client is closed
2021/08/20 13:00:35.130056 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"warn","ts":"2021-08-20T13:00:35.445+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-99b4d1e2-b6e2-4bc3-a535-280fb8bd074c/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 13:00:35.445777 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"warn","ts":"2021-08-20T13:00:35.445+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-99b4d1e2-b6e2-4bc3-a535-280fb8bd074c/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Unavailable desc = transport is closing"}
2021/08/20 13:00:35.445870 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
WARNING: 2021/08/20 13:00:35 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
2021-08-20 13:00:35.445881 W | etcdserver: 6507d0a8a73c4e10 failed to transfer leadership (etcdserver: unhealthy cluster)
2021-08-20 13:00:35.445949 I | rafthttp: stopped HTTP pipelining with peer a8d8110646b7405
2021-08-20 13:00:35.445967 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:35.445969 I | rafthttp: stopping peer a8d8110646b7405...
2021-08-20 13:00:35.446061 I | rafthttp: closed the TCP streaming connection with peer a8d8110646b7405 (stream MsgApp v2 writer)
2021-08-20 13:00:35.446072 I | rafthttp: stopped streaming with peer a8d8110646b7405 (writer)
2021-08-20 13:00:35.446076 I | rafthttp: stopped streaming with peer a8d8110646b7405 (writer)
2021-08-20 13:00:35.446099 I | rafthttp: stopped HTTP pipelining with peer a8d8110646b7405
2021-08-20 13:00:35.446103 I | rafthttp: stopped streaming with peer a8d8110646b7405 (stream MsgApp v2 reader)
2021-08-20 13:00:35.446107 I | rafthttp: stopped streaming with peer a8d8110646b7405 (stream Message reader)
2021-08-20 13:00:35.446109 I | rafthttp: stopped peer a8d8110646b7405
2021-08-20 13:00:35.446111 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 13:00:35.446187 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:00:35.446201 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:35.446204 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:35.446226 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:35.446243 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:35.446248 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:35.446251 I | rafthttp: stopped peer 93ccda9956d988f4
2021/08/20 13:00:35.452002 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:35.452022 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:35.452024 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:35.452027 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:35.452027 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:35.452063 [info] [transport]: transfer stopped
2021/08/20 13:00:35.452098 [info] [transport]: send snapshot worker stopped
--- PASS: TestClusterStartAndStop (8.14s)
2021/08/20 13:00:35.452117 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:35.452111 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:35.452123 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:35.452113 [info] [transport]: send snapshot worker stopped
=== RUN   TestIssue123
2021/08/20 13:00:35.452115 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:35.452130 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:35.452130 [info] [transport]: send raft worker stopped
2021/08/20 13:00:35.452130 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:35.452852 [info] prophet: prophet logger set
2021/08/20 13:00:35.453197 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:35.453209 [info] [raftstore]: begin to start prophet
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021/08/20 13:00:35.453236 [info] [raftstore]: start scan gc snap files
2021-08-20 13:00:35.453248 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:35.453281 I | embed: name = node-0
2021-08-20 13:00:35.453291 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 13:00:35.453293 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 13:00:35.453295 I | embed: heartbeat = 100ms
2021-08-20 13:00:35.453296 I | embed: election = 3000ms
2021-08-20 13:00:35.453297 I | embed: snapshot count = 100000
2021-08-20 13:00:35.453301 I | embed: advertise client URLs = http://127.0.0.1:40000
2021-08-20 13:00:35.457369 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:35.457+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:35.457+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:35.457+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T13:00:35.457+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T13:00:35.457+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:35.459117 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:35.462051 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:35.462173 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
{"level":"info","ts":"2021-08-20T13:00:35.462+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:35.462300 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:35.462318 I | embed: listening for peers on 127.0.0.1:50000
2021/08/20 13:00:36.130124 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:36.657+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T13:00:36.657+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T13:00:36.657+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:36.657+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T13:00:36.657+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 13:00:36.657768 I | etcdserver: setting up the initial cluster version to 3.4
2021-08-20 13:00:36.658470 N | etcdserver/membership: set the initial cluster version to 3.4
2021-08-20 13:00:36.658510 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:36.658523 I | embed: ready to serve client requests
2021/08/20 13:00:36.658550 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 13:00:36.658776 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021/08/20 13:00:36.659788 [info] prophet: net application started
2021/08/20 13:00:36.659839 [info] prophet: start system time monitor 
2021/08/20 13:00:36.660171 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 13:00:36.660378 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 13:00:36.660388 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 13:00:36.661526 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 13:00:36.661784 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 13:00:36.661798 [info] prophet: ********node-0 become to leader now********
2021/08/20 13:00:36.662208 [info] prophet: load 0 containers, cost 364.9µs
2021/08/20 13:00:36.662369 [info] prophet: load 0 resources, cost 148.5µs
2021/08/20 13:00:36.662984 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:36.663033 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:36.663041 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:00:36.663046 [info] prophet: client started
2021/08/20 13:00:36.663047 [info] prophet: session 1[127.0.0.1:46740] connected
2021/08/20 13:00:36.663050 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:00:36.663051 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:36.663047 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 13:00:36.663053 [info] prophet: client read loop started 
2021/08/20 13:00:36.663054 [info] prophet: coordinator starts to run schedulers 
2021/08/20 13:00:36.663057 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:36.663066 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435636 deployPath:"not set" 
2021/08/20 13:00:36.663069 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:36.663377 [info] prophet: load 0 jobs
2021/08/20 13:00:36.663655 [info] [raftstore]: create local store with id 1
2021/08/20 13:00:36.664233 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 13:00:36.664239 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 13:00:36.664252 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 13:00:36.664272 [info] prophet: coordinator starts patrol resources 
2021/08/20 13:00:36.664451 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 13:00:36.665711 [info] prophet: container 1 limit added
2021/08/20 13:00:36.665783 [info] [raftstore]: prophet started
2021/08/20 13:00:36.665833 [info] [transport]: net application started
2021/08/20 13:00:36.665835 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 13:00:36.665838 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:36.665851 [info] prophet: container 1 heartbeat stream binded
2021/08/20 13:00:36.665859 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.665867 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:36.665876 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.665878 [info] [raftstore]: shard 2 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.665+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-08-20T13:00:36.665+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.665+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.665934 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.665+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.665+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.665+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.665+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 13:00:36.665968 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 13:00:36.665986 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 13:00:36.665998 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.666006 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:36.666007 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:36.666008 [info] [raftstore]: shards started
2021/08/20 13:00:36.666010 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:36.666016 [info] [raftstore]: net application started
2021/08/20 13:00:36.666018 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 13:00:36.666024 [info] [raftstore]: router started
2021/08/20 13:00:36.666060 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:36.666068 [info] [raftstore]: router event loop task started
2021/08/20 13:00:36.666116 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:36.666126 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:36.666127 [info] prophet: session 2[127.0.0.1:46742] connected
2021/08/20 13:00:36.666161 [info] prophet: new watcher 127.0.0.1:46742 added
2021/08/20 13:00:36.666214 [info] [raftstore]: start init event
2021/08/20 13:00:36.667775 [info] [raftstore]: dynamic shards pool job started
2021/08/20 13:00:36.668042 [info] prophet: resource 5 created with peers [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.668522 [info] [raftstore]: shard 5 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.668536 [info] [raftstore]: shard 5 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.668537 [info] [raftstore]: shard 5 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.668+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(6)"}
{"level":"info","ts":"2021-08-20T13:00:36.668+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.668+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [6], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.668580 [info] [raftstore]: shard 5 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.668+0800","caller":"raft/raft.go:934","msg":"6 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.668+0800","caller":"raft/raft.go:724","msg":"6 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.668+0800","caller":"raft/raft.go:835","msg":"6 received MsgVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.668+0800","caller":"raft/raft.go:776","msg":"6 became leader at term 6"}
2021/08/20 13:00:36.668619 [info] [raftstore]: shard 5 added with peer {ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.668643 [info] [raftstore]: create init shard id:5 start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" epoch:<confVer:3 > state:WaittingCreate peers:<id:6 containerID:1 > unique:"1-0-1" 
2021/08/20 13:00:36.668656 [error] [raftstore]: >>>>>>>>>>>> shard 5 peer 6 add registration job by doCreate
2021/08/20 13:00:36.668661 [error] [raftstore]: >>>>>>>>>>>> shard 5 peer 6 add registration job by doCreate, completed
2021/08/20 13:00:36.668676 [info] [raftstore]: shard 5 ********become leader now********
2021/08/20 13:00:36.668700 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 13:00:36.670367 [info] prophet: resource 7 created with peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.670818 [info] [raftstore]: shard 7 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.670833 [info] [raftstore]: shard 7 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.670835 [info] [raftstore]: shard 7 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.670+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(8)"}
{"level":"info","ts":"2021-08-20T13:00:36.670+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.670+0800","caller":"raft/raft.go:388","msg":"newRaft 8 [peers: [8], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.670869 [info] [raftstore]: shard 7 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.670+0800","caller":"raft/raft.go:934","msg":"8 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.670+0800","caller":"raft/raft.go:724","msg":"8 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.670+0800","caller":"raft/raft.go:835","msg":"8 received MsgVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.670+0800","caller":"raft/raft.go:776","msg":"8 became leader at term 6"}
2021/08/20 13:00:36.670910 [info] [raftstore]: shard 7 added with peer {ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.670934 [info] [raftstore]: create init shard id:7 start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" epoch:<confVer:3 > state:WaittingCreate peers:<id:8 containerID:1 > unique:"1-0-2" 
2021/08/20 13:00:36.670940 [error] [raftstore]: >>>>>>>>>>>> shard 7 peer 8 add registration job by doCreate
2021/08/20 13:00:36.670944 [error] [raftstore]: >>>>>>>>>>>> shard 7 peer 8 add registration job by doCreate, completed
2021/08/20 13:00:36.670954 [info] [raftstore]: shard 7 ********become leader now********
2021/08/20 13:00:36.671734 [info] prophet: resource 9 created with peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.672270 [info] [raftstore]: shard 9 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.672284 [info] [raftstore]: shard 9 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.672286 [info] [raftstore]: shard 9 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.672+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=(10)"}
{"level":"info","ts":"2021-08-20T13:00:36.672+0800","caller":"raft/raft.go:711","msg":"a became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.672+0800","caller":"raft/raft.go:388","msg":"newRaft a [peers: [a], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.672314 [info] [raftstore]: shard 9 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.672+0800","caller":"raft/raft.go:934","msg":"a is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.672+0800","caller":"raft/raft.go:724","msg":"a became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.672+0800","caller":"raft/raft.go:835","msg":"a received MsgVoteResp from a at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.672+0800","caller":"raft/raft.go:776","msg":"a became leader at term 6"}
2021/08/20 13:00:36.672342 [info] [raftstore]: shard 9 added with peer {ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.672369 [info] [raftstore]: create init shard id:9 start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:1 > unique:"1-0-3" 
2021/08/20 13:00:36.672383 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 10 add registration job by doCreate
2021/08/20 13:00:36.672386 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 10 add registration job by doCreate, completed
2021/08/20 13:00:36.672392 [info] [raftstore]: shard 9 ********become leader now********
2021/08/20 13:00:36.673721 [info] prophet: resource 11 created with peers [{ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.674183 [info] [raftstore]: shard 11 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.674197 [info] [raftstore]: shard 11 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.674199 [info] [raftstore]: shard 11 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.674+0800","caller":"raft/raft.go:1550","msg":"c switched to configuration voters=(12)"}
{"level":"info","ts":"2021-08-20T13:00:36.674+0800","caller":"raft/raft.go:711","msg":"c became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.674+0800","caller":"raft/raft.go:388","msg":"newRaft c [peers: [c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.674225 [info] [raftstore]: shard 11 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.674+0800","caller":"raft/raft.go:934","msg":"c is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.674+0800","caller":"raft/raft.go:724","msg":"c became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.674+0800","caller":"raft/raft.go:835","msg":"c received MsgVoteResp from c at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.674+0800","caller":"raft/raft.go:776","msg":"c became leader at term 6"}
2021/08/20 13:00:36.674258 [info] [raftstore]: shard 11 added with peer {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.674279 [info] [raftstore]: create init shard id:11 start:"b\000\000\000\000\000\000\000\004" end:"b\000\000\000\000\000\000\000\005" epoch:<confVer:3 > state:WaittingCreate peers:<id:12 containerID:1 > unique:"1-0-4" 
2021/08/20 13:00:36.674291 [error] [raftstore]: >>>>>>>>>>>> shard 11 peer 12 add registration job by doCreate
2021/08/20 13:00:36.674294 [error] [raftstore]: >>>>>>>>>>>> shard 11 peer 12 add registration job by doCreate, completed
2021/08/20 13:00:36.674301 [info] [raftstore]: shard 11 ********become leader now********
2021/08/20 13:00:36.675322 [info] prophet: resource 13 created with peers [{ID:14 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.675781 [info] [raftstore]: shard 13 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.675793 [info] [raftstore]: shard 13 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.675794 [info] [raftstore]: shard 13 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.675+0800","caller":"raft/raft.go:1550","msg":"e switched to configuration voters=(14)"}
{"level":"info","ts":"2021-08-20T13:00:36.675+0800","caller":"raft/raft.go:711","msg":"e became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.675+0800","caller":"raft/raft.go:388","msg":"newRaft e [peers: [e], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.675823 [info] [raftstore]: shard 13 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.675+0800","caller":"raft/raft.go:934","msg":"e is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.675+0800","caller":"raft/raft.go:724","msg":"e became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.675+0800","caller":"raft/raft.go:835","msg":"e received MsgVoteResp from e at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.675+0800","caller":"raft/raft.go:776","msg":"e became leader at term 6"}
2021/08/20 13:00:36.675860 [info] [raftstore]: shard 13 added with peer {ID:14 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:14 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.675869 [info] [raftstore]: shard 13 ********become leader now********
2021/08/20 13:00:36.675878 [error] [raftstore]: >>>>>>>>>>>> shard 13 peer 14 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.675905 [error] [raftstore]: >>>>>>>>>>>> shard 13 peer 14 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.675880 [info] [raftstore]: create init shard id:13 start:"b\000\000\000\000\000\000\000\005" end:"b\000\000\000\000\000\000\000\006" epoch:<confVer:3 > state:WaittingCreate peers:<id:14 containerID:1 > unique:"1-0-5" 
2021/08/20 13:00:36.675950 [error] [raftstore]: >>>>>>>>>>>> shard 13 peer 14 add registration job by doCreate
2021/08/20 13:00:36.675962 [error] [raftstore]: >>>>>>>>>>>> shard 13 peer 14 add registration job by doCreate, completed
2021/08/20 13:00:36.677250 [info] prophet: resource 15 created with peers [{ID:16 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.678620 [info] [raftstore]: shard 15 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.678633 [info] [raftstore]: shard 15 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.678634 [info] [raftstore]: shard 15 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.678+0800","caller":"raft/raft.go:1550","msg":"10 switched to configuration voters=(16)"}
{"level":"info","ts":"2021-08-20T13:00:36.678+0800","caller":"raft/raft.go:711","msg":"10 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.678+0800","caller":"raft/raft.go:388","msg":"newRaft 10 [peers: [10], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.678671 [info] [raftstore]: shard 15 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.678+0800","caller":"raft/raft.go:934","msg":"10 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.678+0800","caller":"raft/raft.go:724","msg":"10 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.678+0800","caller":"raft/raft.go:835","msg":"10 received MsgVoteResp from 10 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.678+0800","caller":"raft/raft.go:776","msg":"10 became leader at term 6"}
2021/08/20 13:00:36.678709 [info] [raftstore]: shard 15 added with peer {ID:16 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:16 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.678732 [info] [raftstore]: create init shard id:15 start:"b\000\000\000\000\000\000\000\006" end:"b\000\000\000\000\000\000\000\007" epoch:<confVer:3 > state:WaittingCreate peers:<id:16 containerID:1 > unique:"1-0-6" 
2021/08/20 13:00:36.678737 [error] [raftstore]: >>>>>>>>>>>> shard 15 peer 16 add registration job by doCreate
2021/08/20 13:00:36.678742 [error] [raftstore]: >>>>>>>>>>>> shard 15 peer 16 add registration job by doCreate, completed
2021/08/20 13:00:36.678758 [info] [raftstore]: shard 15 ********become leader now********
2021/08/20 13:00:36.679786 [info] prophet: resource 17 created with peers [{ID:18 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.680285 [info] [raftstore]: shard 17 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.680303 [info] [raftstore]: shard 17 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.680306 [info] [raftstore]: shard 17 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.680+0800","caller":"raft/raft.go:1550","msg":"12 switched to configuration voters=(18)"}
{"level":"info","ts":"2021-08-20T13:00:36.680+0800","caller":"raft/raft.go:711","msg":"12 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.680+0800","caller":"raft/raft.go:388","msg":"newRaft 12 [peers: [12], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.680361 [info] [raftstore]: shard 17 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.680+0800","caller":"raft/raft.go:934","msg":"12 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.680+0800","caller":"raft/raft.go:724","msg":"12 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.680+0800","caller":"raft/raft.go:835","msg":"12 received MsgVoteResp from 12 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.680+0800","caller":"raft/raft.go:776","msg":"12 became leader at term 6"}
2021/08/20 13:00:36.680388 [info] [raftstore]: shard 17 added with peer {ID:18 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:18 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.680412 [info] [raftstore]: create init shard id:17 start:"b\000\000\000\000\000\000\000\007" end:"b\000\000\000\000\000\000\000\010" epoch:<confVer:3 > state:WaittingCreate peers:<id:18 containerID:1 > unique:"1-0-7" 
2021/08/20 13:00:36.680424 [error] [raftstore]: >>>>>>>>>>>> shard 17 peer 18 add registration job by doCreate
2021/08/20 13:00:36.680428 [error] [raftstore]: >>>>>>>>>>>> shard 17 peer 18 add registration job by doCreate, completed
2021/08/20 13:00:36.680431 [info] [raftstore]: shard 17 ********become leader now********
2021/08/20 13:00:36.681554 [info] prophet: resource 19 created with peers [{ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.682180 [info] [raftstore]: shard 19 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.682195 [info] [raftstore]: shard 19 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.682197 [info] [raftstore]: shard 19 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.682+0800","caller":"raft/raft.go:1550","msg":"14 switched to configuration voters=(20)"}
{"level":"info","ts":"2021-08-20T13:00:36.682+0800","caller":"raft/raft.go:711","msg":"14 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.682+0800","caller":"raft/raft.go:388","msg":"newRaft 14 [peers: [14], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.682227 [info] [raftstore]: shard 19 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.682+0800","caller":"raft/raft.go:934","msg":"14 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.682+0800","caller":"raft/raft.go:724","msg":"14 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.682+0800","caller":"raft/raft.go:835","msg":"14 received MsgVoteResp from 14 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.682+0800","caller":"raft/raft.go:776","msg":"14 became leader at term 6"}
2021/08/20 13:00:36.682265 [info] [raftstore]: shard 19 added with peer {ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.682274 [info] [raftstore]: shard 19 ********become leader now********
2021/08/20 13:00:36.682283 [error] [raftstore]: >>>>>>>>>>>> shard 19 peer 20 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.682288 [info] [raftstore]: create init shard id:19 start:"b\000\000\000\000\000\000\000\010" end:"b\000\000\000\000\000\000\000\t" epoch:<confVer:3 > state:WaittingCreate peers:<id:20 containerID:1 > unique:"1-0-8" 
2021/08/20 13:00:36.682292 [error] [raftstore]: >>>>>>>>>>>> shard 19 peer 20 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.682293 [error] [raftstore]: >>>>>>>>>>>> shard 19 peer 20 add registration job by doCreate
2021/08/20 13:00:36.682298 [error] [raftstore]: >>>>>>>>>>>> shard 19 peer 20 add registration job by doCreate, completed
2021/08/20 13:00:36.683309 [info] prophet: resource 21 created with peers [{ID:22 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.683872 [info] [raftstore]: shard 21 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.683885 [info] [raftstore]: shard 21 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.683886 [info] [raftstore]: shard 21 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.683+0800","caller":"raft/raft.go:1550","msg":"16 switched to configuration voters=(22)"}
{"level":"info","ts":"2021-08-20T13:00:36.683+0800","caller":"raft/raft.go:711","msg":"16 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.683+0800","caller":"raft/raft.go:388","msg":"newRaft 16 [peers: [16], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.683913 [info] [raftstore]: shard 21 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.683+0800","caller":"raft/raft.go:934","msg":"16 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.683+0800","caller":"raft/raft.go:724","msg":"16 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.683+0800","caller":"raft/raft.go:835","msg":"16 received MsgVoteResp from 16 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.683+0800","caller":"raft/raft.go:776","msg":"16 became leader at term 6"}
2021/08/20 13:00:36.683947 [info] [raftstore]: shard 21 added with peer {ID:22 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:22 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.683980 [info] [raftstore]: create init shard id:21 start:"b\000\000\000\000\000\000\000\t" end:"b\000\000\000\000\000\000\000\n" epoch:<confVer:3 > state:WaittingCreate peers:<id:22 containerID:1 > unique:"1-0-9" 
2021/08/20 13:00:36.683985 [error] [raftstore]: >>>>>>>>>>>> shard 21 peer 22 add registration job by doCreate
2021/08/20 13:00:36.683988 [error] [raftstore]: >>>>>>>>>>>> shard 21 peer 22 add registration job by doCreate, completed
2021/08/20 13:00:36.683995 [info] [raftstore]: shard 21 ********become leader now********
2021/08/20 13:00:36.685553 [info] prophet: resource 23 created with peers [{ID:24 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.686064 [info] [raftstore]: shard 23 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.686076 [info] [raftstore]: shard 23 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.686078 [info] [raftstore]: shard 23 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.686+0800","caller":"raft/raft.go:1550","msg":"18 switched to configuration voters=(24)"}
{"level":"info","ts":"2021-08-20T13:00:36.686+0800","caller":"raft/raft.go:711","msg":"18 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.686+0800","caller":"raft/raft.go:388","msg":"newRaft 18 [peers: [18], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.686109 [info] [raftstore]: shard 23 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.686+0800","caller":"raft/raft.go:934","msg":"18 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.686+0800","caller":"raft/raft.go:724","msg":"18 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.686+0800","caller":"raft/raft.go:835","msg":"18 received MsgVoteResp from 18 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.686+0800","caller":"raft/raft.go:776","msg":"18 became leader at term 6"}
2021/08/20 13:00:36.686145 [info] [raftstore]: shard 23 added with peer {ID:24 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:24 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.686166 [info] [raftstore]: create init shard id:23 start:"b\000\000\000\000\000\000\000\n" end:"b\000\000\000\000\000\000\000\013" epoch:<confVer:3 > state:WaittingCreate peers:<id:24 containerID:1 > unique:"1-0-10" 
2021/08/20 13:00:36.686178 [info] [raftstore]: shard 23 ********become leader now********
2021/08/20 13:00:36.686178 [error] [raftstore]: >>>>>>>>>>>> shard 23 peer 24 add registration job by doCreate
2021/08/20 13:00:36.686184 [error] [raftstore]: >>>>>>>>>>>> shard 23 peer 24 add registration job by doCreate, completed
2021/08/20 13:00:36.687052 [info] prophet: resource 25 created with peers [{ID:26 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.687599 [info] [raftstore]: shard 25 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.687612 [info] [raftstore]: shard 25 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.687614 [info] [raftstore]: shard 25 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.687+0800","caller":"raft/raft.go:1550","msg":"1a switched to configuration voters=(26)"}
{"level":"info","ts":"2021-08-20T13:00:36.687+0800","caller":"raft/raft.go:711","msg":"1a became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.687+0800","caller":"raft/raft.go:388","msg":"newRaft 1a [peers: [1a], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.687642 [info] [raftstore]: shard 25 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.687+0800","caller":"raft/raft.go:934","msg":"1a is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.687+0800","caller":"raft/raft.go:724","msg":"1a became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.687+0800","caller":"raft/raft.go:835","msg":"1a received MsgVoteResp from 1a at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.687+0800","caller":"raft/raft.go:776","msg":"1a became leader at term 6"}
2021/08/20 13:00:36.687668 [info] [raftstore]: shard 25 added with peer {ID:26 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:26 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.687681 [info] [raftstore]: shard 25 ********become leader now********
2021/08/20 13:00:36.687691 [info] [raftstore]: create init shard id:25 start:"b\000\000\000\000\000\000\000\013" end:"b\000\000\000\000\000\000\000\014" epoch:<confVer:3 > state:WaittingCreate peers:<id:26 containerID:1 > unique:"1-0-11" 
2021/08/20 13:00:36.687691 [error] [raftstore]: >>>>>>>>>>>> shard 25 peer 26 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.687700 [error] [raftstore]: >>>>>>>>>>>> shard 25 peer 26 add registration job by doCreate
2021/08/20 13:00:36.687704 [error] [raftstore]: >>>>>>>>>>>> shard 25 peer 26 add registration job by doCreate, completed
2021/08/20 13:00:36.688487 [info] prophet: resource 27 created with peers [{ID:28 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.689028 [info] [raftstore]: shard 27 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.689042 [info] [raftstore]: shard 27 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.689044 [info] [raftstore]: shard 27 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.689+0800","caller":"raft/raft.go:1550","msg":"1c switched to configuration voters=(28)"}
{"level":"info","ts":"2021-08-20T13:00:36.689+0800","caller":"raft/raft.go:711","msg":"1c became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.689+0800","caller":"raft/raft.go:388","msg":"newRaft 1c [peers: [1c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.689082 [info] [raftstore]: shard 27 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.689+0800","caller":"raft/raft.go:934","msg":"1c is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.689+0800","caller":"raft/raft.go:724","msg":"1c became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.689+0800","caller":"raft/raft.go:835","msg":"1c received MsgVoteResp from 1c at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.689+0800","caller":"raft/raft.go:776","msg":"1c became leader at term 6"}
2021/08/20 13:00:36.689116 [info] [raftstore]: shard 27 added with peer {ID:28 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:28 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.689140 [info] [raftstore]: create init shard id:27 start:"b\000\000\000\000\000\000\000\014" end:"b\000\000\000\000\000\000\000\r" epoch:<confVer:3 > state:WaittingCreate peers:<id:28 containerID:1 > unique:"1-0-12" 
2021/08/20 13:00:36.689146 [error] [raftstore]: >>>>>>>>>>>> shard 27 peer 28 add registration job by doCreate
2021/08/20 13:00:36.689149 [error] [raftstore]: >>>>>>>>>>>> shard 27 peer 28 add registration job by doCreate, completed
2021/08/20 13:00:36.689162 [info] [raftstore]: shard 27 ********become leader now********
2021/08/20 13:00:36.690146 [info] prophet: resource 29 created with peers [{ID:30 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.690640 [info] [raftstore]: shard 29 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.690656 [info] [raftstore]: shard 29 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.690657 [info] [raftstore]: shard 29 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.690+0800","caller":"raft/raft.go:1550","msg":"1e switched to configuration voters=(30)"}
{"level":"info","ts":"2021-08-20T13:00:36.690+0800","caller":"raft/raft.go:711","msg":"1e became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.690+0800","caller":"raft/raft.go:388","msg":"newRaft 1e [peers: [1e], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.690685 [info] [raftstore]: shard 29 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.690+0800","caller":"raft/raft.go:934","msg":"1e is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.690+0800","caller":"raft/raft.go:724","msg":"1e became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.690+0800","caller":"raft/raft.go:835","msg":"1e received MsgVoteResp from 1e at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.690+0800","caller":"raft/raft.go:776","msg":"1e became leader at term 6"}
2021/08/20 13:00:36.690730 [info] [raftstore]: shard 29 added with peer {ID:30 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:30 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.690752 [info] [raftstore]: create init shard id:29 start:"b\000\000\000\000\000\000\000\r" end:"b\000\000\000\000\000\000\000\016" epoch:<confVer:3 > state:WaittingCreate peers:<id:30 containerID:1 > unique:"1-0-13" 
2021/08/20 13:00:36.690764 [error] [raftstore]: >>>>>>>>>>>> shard 29 peer 30 add registration job by doCreate
2021/08/20 13:00:36.690769 [error] [raftstore]: >>>>>>>>>>>> shard 29 peer 30 add registration job by doCreate, completed
2021/08/20 13:00:36.690777 [info] [raftstore]: shard 29 ********become leader now********
2021/08/20 13:00:36.691613 [info] prophet: resource 31 created with peers [{ID:32 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.692160 [info] [raftstore]: shard 31 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.692173 [info] [raftstore]: shard 31 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.692174 [info] [raftstore]: shard 31 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.692+0800","caller":"raft/raft.go:1550","msg":"20 switched to configuration voters=(32)"}
{"level":"info","ts":"2021-08-20T13:00:36.692+0800","caller":"raft/raft.go:711","msg":"20 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.692+0800","caller":"raft/raft.go:388","msg":"newRaft 20 [peers: [20], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.692210 [info] [raftstore]: shard 31 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.692+0800","caller":"raft/raft.go:934","msg":"20 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.692+0800","caller":"raft/raft.go:724","msg":"20 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.692+0800","caller":"raft/raft.go:835","msg":"20 received MsgVoteResp from 20 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.692+0800","caller":"raft/raft.go:776","msg":"20 became leader at term 6"}
2021/08/20 13:00:36.692235 [info] [raftstore]: shard 31 added with peer {ID:32 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:32 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.692258 [info] [raftstore]: create init shard id:31 start:"b\000\000\000\000\000\000\000\016" end:"b\000\000\000\000\000\000\000\017" epoch:<confVer:3 > state:WaittingCreate peers:<id:32 containerID:1 > unique:"1-0-14" 
2021/08/20 13:00:36.692270 [error] [raftstore]: >>>>>>>>>>>> shard 31 peer 32 add registration job by doCreate
2021/08/20 13:00:36.692270 [info] [raftstore]: shard 31 ********become leader now********
2021/08/20 13:00:36.692274 [error] [raftstore]: >>>>>>>>>>>> shard 31 peer 32 add registration job by doCreate, completed
2021/08/20 13:00:36.693112 [info] prophet: resource 33 created with peers [{ID:34 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.694305 [info] [raftstore]: shard 33 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.694320 [info] [raftstore]: shard 33 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.694321 [info] [raftstore]: shard 33 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.694+0800","caller":"raft/raft.go:1550","msg":"22 switched to configuration voters=(34)"}
{"level":"info","ts":"2021-08-20T13:00:36.694+0800","caller":"raft/raft.go:711","msg":"22 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.694+0800","caller":"raft/raft.go:388","msg":"newRaft 22 [peers: [22], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.694349 [info] [raftstore]: shard 33 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.694+0800","caller":"raft/raft.go:934","msg":"22 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.694+0800","caller":"raft/raft.go:724","msg":"22 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.694+0800","caller":"raft/raft.go:835","msg":"22 received MsgVoteResp from 22 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.694+0800","caller":"raft/raft.go:776","msg":"22 became leader at term 6"}
2021/08/20 13:00:36.694385 [info] [raftstore]: shard 33 added with peer {ID:34 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:34 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.694394 [info] [raftstore]: shard 33 ********become leader now********
2021/08/20 13:00:36.694407 [info] [raftstore]: create init shard id:33 start:"b\000\000\000\000\000\000\000\017" end:"b\000\000\000\000\000\000\000\020" epoch:<confVer:3 > state:WaittingCreate peers:<id:34 containerID:1 > unique:"1-0-15" 
2021/08/20 13:00:36.694421 [error] [raftstore]: >>>>>>>>>>>> shard 33 peer 34 add registration job by doCreate
2021/08/20 13:00:36.694425 [error] [raftstore]: >>>>>>>>>>>> shard 33 peer 34 add registration job by doCreate, completed
2021/08/20 13:00:36.694411 [error] [raftstore]: >>>>>>>>>>>> shard 33 peer 34 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.695508 [info] prophet: resource 35 created with peers [{ID:36 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.695994 [info] [raftstore]: shard 35 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.696008 [info] [raftstore]: shard 35 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.696010 [info] [raftstore]: shard 35 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.696+0800","caller":"raft/raft.go:1550","msg":"24 switched to configuration voters=(36)"}
{"level":"info","ts":"2021-08-20T13:00:36.696+0800","caller":"raft/raft.go:711","msg":"24 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.696+0800","caller":"raft/raft.go:388","msg":"newRaft 24 [peers: [24], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.696049 [info] [raftstore]: shard 35 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.696+0800","caller":"raft/raft.go:934","msg":"24 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.696+0800","caller":"raft/raft.go:724","msg":"24 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.696+0800","caller":"raft/raft.go:835","msg":"24 received MsgVoteResp from 24 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.696+0800","caller":"raft/raft.go:776","msg":"24 became leader at term 6"}
2021/08/20 13:00:36.696088 [info] [raftstore]: shard 35 added with peer {ID:36 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:36 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.696108 [info] [raftstore]: create init shard id:35 start:"b\000\000\000\000\000\000\000\020" end:"b\000\000\000\000\000\000\000\021" epoch:<confVer:3 > state:WaittingCreate peers:<id:36 containerID:1 > unique:"1-0-16" 
2021/08/20 13:00:36.696114 [error] [raftstore]: >>>>>>>>>>>> shard 35 peer 36 add registration job by doCreate
2021/08/20 13:00:36.696119 [error] [raftstore]: >>>>>>>>>>>> shard 35 peer 36 add registration job by doCreate, completed
2021/08/20 13:00:36.696134 [info] [raftstore]: shard 35 ********become leader now********
2021/08/20 13:00:36.697057 [info] prophet: resource 37 created with peers [{ID:38 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.697642 [info] [raftstore]: shard 37 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.697656 [info] [raftstore]: shard 37 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.697658 [info] [raftstore]: shard 37 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.697+0800","caller":"raft/raft.go:1550","msg":"26 switched to configuration voters=(38)"}
{"level":"info","ts":"2021-08-20T13:00:36.697+0800","caller":"raft/raft.go:711","msg":"26 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.697+0800","caller":"raft/raft.go:388","msg":"newRaft 26 [peers: [26], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.697684 [info] [raftstore]: shard 37 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.697+0800","caller":"raft/raft.go:934","msg":"26 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.697+0800","caller":"raft/raft.go:724","msg":"26 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.697+0800","caller":"raft/raft.go:835","msg":"26 received MsgVoteResp from 26 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.697+0800","caller":"raft/raft.go:776","msg":"26 became leader at term 6"}
2021/08/20 13:00:36.697740 [info] [raftstore]: shard 37 added with peer {ID:38 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:38 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.697762 [info] [raftstore]: create init shard id:37 start:"b\000\000\000\000\000\000\000\021" end:"b\000\000\000\000\000\000\000\022" epoch:<confVer:3 > state:WaittingCreate peers:<id:38 containerID:1 > unique:"1-0-17" 
2021/08/20 13:00:36.697766 [error] [raftstore]: >>>>>>>>>>>> shard 37 peer 38 add registration job by doCreate
2021/08/20 13:00:36.697770 [error] [raftstore]: >>>>>>>>>>>> shard 37 peer 38 add registration job by doCreate, completed
2021/08/20 13:00:36.697776 [info] [raftstore]: shard 37 ********become leader now********
2021/08/20 13:00:36.698635 [info] prophet: resource 39 created with peers [{ID:40 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.699174 [info] [raftstore]: shard 39 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.699195 [info] [raftstore]: shard 39 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.699196 [info] [raftstore]: shard 39 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.699+0800","caller":"raft/raft.go:1550","msg":"28 switched to configuration voters=(40)"}
{"level":"info","ts":"2021-08-20T13:00:36.699+0800","caller":"raft/raft.go:711","msg":"28 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.699+0800","caller":"raft/raft.go:388","msg":"newRaft 28 [peers: [28], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.699241 [info] [raftstore]: shard 39 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.699+0800","caller":"raft/raft.go:934","msg":"28 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.699+0800","caller":"raft/raft.go:724","msg":"28 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.699+0800","caller":"raft/raft.go:835","msg":"28 received MsgVoteResp from 28 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.699+0800","caller":"raft/raft.go:776","msg":"28 became leader at term 6"}
2021/08/20 13:00:36.699279 [info] [raftstore]: shard 39 added with peer {ID:40 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:40 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.699300 [info] [raftstore]: create init shard id:39 start:"b\000\000\000\000\000\000\000\022" end:"b\000\000\000\000\000\000\000\023" epoch:<confVer:3 > state:WaittingCreate peers:<id:40 containerID:1 > unique:"1-0-18" 
2021/08/20 13:00:36.699312 [error] [raftstore]: >>>>>>>>>>>> shard 39 peer 40 add registration job by doCreate
2021/08/20 13:00:36.699315 [error] [raftstore]: >>>>>>>>>>>> shard 39 peer 40 add registration job by doCreate, completed
2021/08/20 13:00:36.699323 [info] [raftstore]: shard 39 ********become leader now********
2021/08/20 13:00:36.700128 [info] prophet: resource 41 created with peers [{ID:42 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.700638 [info] [raftstore]: shard 41 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.700652 [info] [raftstore]: shard 41 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.700654 [info] [raftstore]: shard 41 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.700+0800","caller":"raft/raft.go:1550","msg":"2a switched to configuration voters=(42)"}
{"level":"info","ts":"2021-08-20T13:00:36.700+0800","caller":"raft/raft.go:711","msg":"2a became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.700+0800","caller":"raft/raft.go:388","msg":"newRaft 2a [peers: [2a], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.700695 [info] [raftstore]: shard 41 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.700+0800","caller":"raft/raft.go:934","msg":"2a is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.700+0800","caller":"raft/raft.go:724","msg":"2a became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.700+0800","caller":"raft/raft.go:835","msg":"2a received MsgVoteResp from 2a at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.700+0800","caller":"raft/raft.go:776","msg":"2a became leader at term 6"}
2021/08/20 13:00:36.700729 [info] [raftstore]: shard 41 added with peer {ID:42 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:42 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.700751 [info] [raftstore]: create init shard id:41 start:"b\000\000\000\000\000\000\000\023" end:"b\000\000\000\000\000\000\000\024" epoch:<confVer:3 > state:WaittingCreate peers:<id:42 containerID:1 > unique:"1-0-19" 
2021/08/20 13:00:36.700757 [error] [raftstore]: >>>>>>>>>>>> shard 41 peer 42 add registration job by doCreate
2021/08/20 13:00:36.700761 [error] [raftstore]: >>>>>>>>>>>> shard 41 peer 42 add registration job by doCreate, completed
2021/08/20 13:00:36.700776 [info] [raftstore]: shard 41 ********become leader now********
2021/08/20 13:00:36.701823 [info] prophet: resource 43 created with peers [{ID:44 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.702304 [info] [raftstore]: shard 43 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.702317 [info] [raftstore]: shard 43 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.702318 [info] [raftstore]: shard 43 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.702+0800","caller":"raft/raft.go:1550","msg":"2c switched to configuration voters=(44)"}
{"level":"info","ts":"2021-08-20T13:00:36.702+0800","caller":"raft/raft.go:711","msg":"2c became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.702+0800","caller":"raft/raft.go:388","msg":"newRaft 2c [peers: [2c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.702348 [info] [raftstore]: shard 43 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.702+0800","caller":"raft/raft.go:934","msg":"2c is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.702+0800","caller":"raft/raft.go:724","msg":"2c became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.702+0800","caller":"raft/raft.go:835","msg":"2c received MsgVoteResp from 2c at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.702+0800","caller":"raft/raft.go:776","msg":"2c became leader at term 6"}
2021/08/20 13:00:36.702375 [info] [raftstore]: shard 43 added with peer {ID:44 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:44 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.702399 [info] [raftstore]: create init shard id:43 start:"b\000\000\000\000\000\000\000\024" end:"b\000\000\000\000\000\000\000\025" epoch:<confVer:3 > state:WaittingCreate peers:<id:44 containerID:1 > unique:"1-0-20" 
2021/08/20 13:00:36.702411 [error] [raftstore]: >>>>>>>>>>>> shard 43 peer 44 add registration job by doCreate
2021/08/20 13:00:36.702414 [error] [raftstore]: >>>>>>>>>>>> shard 43 peer 44 add registration job by doCreate, completed
2021/08/20 13:00:36.702423 [info] [raftstore]: shard 43 ********become leader now********
2021/08/20 13:00:36.768674 [info] prophet: resource 45 created with peers [{ID:46 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.769135 [info] [raftstore]: shard 45 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.769151 [info] [raftstore]: shard 45 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.769153 [info] [raftstore]: shard 45 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.769+0800","caller":"raft/raft.go:1550","msg":"2e switched to configuration voters=(46)"}
{"level":"info","ts":"2021-08-20T13:00:36.769+0800","caller":"raft/raft.go:711","msg":"2e became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.769+0800","caller":"raft/raft.go:388","msg":"newRaft 2e [peers: [2e], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.769208 [info] [raftstore]: shard 45 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.769+0800","caller":"raft/raft.go:934","msg":"2e is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.769+0800","caller":"raft/raft.go:724","msg":"2e became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.769+0800","caller":"raft/raft.go:835","msg":"2e received MsgVoteResp from 2e at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.769+0800","caller":"raft/raft.go:776","msg":"2e became leader at term 6"}
2021/08/20 13:00:36.769253 [info] [raftstore]: shard 45 added with peer {ID:46 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:46 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.769286 [info] [raftstore]: create init shard id:45 start:"b\000\000\000\000\000\000\000\025" end:"b\000\000\000\000\000\000\000\026" epoch:<confVer:3 > state:WaittingCreate peers:<id:46 containerID:1 > unique:"1-0-21" 
2021/08/20 13:00:36.769301 [error] [raftstore]: >>>>>>>>>>>> shard 45 peer 46 add registration job by doCreate
2021/08/20 13:00:36.769305 [error] [raftstore]: >>>>>>>>>>>> shard 45 peer 46 add registration job by doCreate, completed
2021/08/20 13:00:36.769335 [info] [raftstore]: shard 45 ********become leader now********
2021/08/20 13:00:36.770800 [info] prophet: resource 47 created with peers [{ID:48 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.771266 [info] [raftstore]: shard 47 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.771279 [info] [raftstore]: shard 47 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.771281 [info] [raftstore]: shard 47 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.771+0800","caller":"raft/raft.go:1550","msg":"30 switched to configuration voters=(48)"}
{"level":"info","ts":"2021-08-20T13:00:36.771+0800","caller":"raft/raft.go:711","msg":"30 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.771+0800","caller":"raft/raft.go:388","msg":"newRaft 30 [peers: [30], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.771317 [info] [raftstore]: shard 47 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.771+0800","caller":"raft/raft.go:934","msg":"30 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.771+0800","caller":"raft/raft.go:724","msg":"30 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.771+0800","caller":"raft/raft.go:835","msg":"30 received MsgVoteResp from 30 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.771+0800","caller":"raft/raft.go:776","msg":"30 became leader at term 6"}
2021/08/20 13:00:36.771364 [info] [raftstore]: shard 47 added with peer {ID:48 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:48 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.771384 [info] [raftstore]: create init shard id:47 start:"b\000\000\000\000\000\000\000\026" end:"b\000\000\000\000\000\000\000\027" epoch:<confVer:3 > state:WaittingCreate peers:<id:48 containerID:1 > unique:"1-0-22" 
2021/08/20 13:00:36.771396 [error] [raftstore]: >>>>>>>>>>>> shard 47 peer 48 add registration job by doCreate
2021/08/20 13:00:36.771401 [info] [raftstore]: shard 47 ********become leader now********
2021/08/20 13:00:36.771416 [error] [raftstore]: >>>>>>>>>>>> shard 47 peer 48 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.771426 [error] [raftstore]: >>>>>>>>>>>> shard 47 peer 48 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.771463 [error] [raftstore]: >>>>>>>>>>>> shard 47 peer 48 add registration job by doCreate, completed
2021/08/20 13:00:36.772921 [info] prophet: resource 49 created with peers [{ID:50 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.773367 [info] [raftstore]: shard 49 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.773386 [info] [raftstore]: shard 49 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.773388 [info] [raftstore]: shard 49 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.773+0800","caller":"raft/raft.go:1550","msg":"32 switched to configuration voters=(50)"}
{"level":"info","ts":"2021-08-20T13:00:36.773+0800","caller":"raft/raft.go:711","msg":"32 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.773+0800","caller":"raft/raft.go:388","msg":"newRaft 32 [peers: [32], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.773438 [info] [raftstore]: shard 49 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.773+0800","caller":"raft/raft.go:934","msg":"32 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.773+0800","caller":"raft/raft.go:724","msg":"32 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.773+0800","caller":"raft/raft.go:835","msg":"32 received MsgVoteResp from 32 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.773+0800","caller":"raft/raft.go:776","msg":"32 became leader at term 6"}
2021/08/20 13:00:36.773487 [info] [raftstore]: shard 49 added with peer {ID:50 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:50 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.773510 [info] [raftstore]: shard 49 ********become leader now********
2021/08/20 13:00:36.773513 [info] [raftstore]: create init shard id:49 start:"b\000\000\000\000\000\000\000\027" end:"b\000\000\000\000\000\000\000\030" epoch:<confVer:3 > state:WaittingCreate peers:<id:50 containerID:1 > unique:"1-0-23" 
2021/08/20 13:00:36.773520 [error] [raftstore]: >>>>>>>>>>>> shard 49 peer 50 add registration job by doCreate
2021/08/20 13:00:36.773540 [error] [raftstore]: >>>>>>>>>>>> shard 49 peer 50 add registration job by doCreate, completed
2021/08/20 13:00:36.773520 [error] [raftstore]: >>>>>>>>>>>> shard 49 peer 50 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.775046 [info] prophet: resource 51 created with peers [{ID:52 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.775509 [info] [raftstore]: shard 51 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.775522 [info] [raftstore]: shard 51 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.775523 [info] [raftstore]: shard 51 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.775+0800","caller":"raft/raft.go:1550","msg":"34 switched to configuration voters=(52)"}
{"level":"info","ts":"2021-08-20T13:00:36.775+0800","caller":"raft/raft.go:711","msg":"34 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.775+0800","caller":"raft/raft.go:388","msg":"newRaft 34 [peers: [34], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.775552 [info] [raftstore]: shard 51 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.775+0800","caller":"raft/raft.go:934","msg":"34 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.775+0800","caller":"raft/raft.go:724","msg":"34 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.775+0800","caller":"raft/raft.go:835","msg":"34 received MsgVoteResp from 34 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.775+0800","caller":"raft/raft.go:776","msg":"34 became leader at term 6"}
2021/08/20 13:00:36.775581 [info] [raftstore]: shard 51 added with peer {ID:52 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:52 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.775626 [info] [raftstore]: create init shard id:51 start:"b\000\000\000\000\000\000\000\030" end:"b\000\000\000\000\000\000\000\031" epoch:<confVer:3 > state:WaittingCreate peers:<id:52 containerID:1 > unique:"1-0-24" 
2021/08/20 13:00:36.775645 [error] [raftstore]: >>>>>>>>>>>> shard 51 peer 52 add registration job by doCreate
2021/08/20 13:00:36.775649 [error] [raftstore]: >>>>>>>>>>>> shard 51 peer 52 add registration job by doCreate, completed
2021/08/20 13:00:36.775672 [info] [raftstore]: shard 51 ********become leader now********
2021/08/20 13:00:36.777664 [info] prophet: resource 53 created with peers [{ID:54 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.778126 [info] [raftstore]: shard 53 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.778139 [info] [raftstore]: shard 53 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.778141 [info] [raftstore]: shard 53 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.778+0800","caller":"raft/raft.go:1550","msg":"36 switched to configuration voters=(54)"}
{"level":"info","ts":"2021-08-20T13:00:36.778+0800","caller":"raft/raft.go:711","msg":"36 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.778+0800","caller":"raft/raft.go:388","msg":"newRaft 36 [peers: [36], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.778183 [info] [raftstore]: shard 53 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.778+0800","caller":"raft/raft.go:934","msg":"36 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.778+0800","caller":"raft/raft.go:724","msg":"36 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.778+0800","caller":"raft/raft.go:835","msg":"36 received MsgVoteResp from 36 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.778+0800","caller":"raft/raft.go:776","msg":"36 became leader at term 6"}
2021/08/20 13:00:36.778209 [info] [raftstore]: shard 53 added with peer {ID:54 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:54 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.778234 [info] [raftstore]: create init shard id:53 start:"b\000\000\000\000\000\000\000\031" end:"b\000\000\000\000\000\000\000\032" epoch:<confVer:3 > state:WaittingCreate peers:<id:54 containerID:1 > unique:"1-0-25" 
2021/08/20 13:00:36.778238 [info] [raftstore]: shard 53 ********become leader now********
2021/08/20 13:00:36.778239 [error] [raftstore]: >>>>>>>>>>>> shard 53 peer 54 add registration job by doCreate
2021/08/20 13:00:36.778245 [error] [raftstore]: >>>>>>>>>>>> shard 53 peer 54 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.778267 [error] [raftstore]: >>>>>>>>>>>> shard 53 peer 54 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.778276 [error] [raftstore]: >>>>>>>>>>>> shard 53 peer 54 add registration job by doCreate, completed
2021/08/20 13:00:36.779597 [info] prophet: resource 55 created with peers [{ID:56 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.780123 [info] [raftstore]: shard 55 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.780137 [info] [raftstore]: shard 55 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.780138 [info] [raftstore]: shard 55 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.780+0800","caller":"raft/raft.go:1550","msg":"38 switched to configuration voters=(56)"}
{"level":"info","ts":"2021-08-20T13:00:36.780+0800","caller":"raft/raft.go:711","msg":"38 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.780+0800","caller":"raft/raft.go:388","msg":"newRaft 38 [peers: [38], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.780167 [info] [raftstore]: shard 55 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.780+0800","caller":"raft/raft.go:934","msg":"38 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.780+0800","caller":"raft/raft.go:724","msg":"38 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.780+0800","caller":"raft/raft.go:835","msg":"38 received MsgVoteResp from 38 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.780+0800","caller":"raft/raft.go:776","msg":"38 became leader at term 6"}
2021/08/20 13:00:36.780213 [info] [raftstore]: shard 55 added with peer {ID:56 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:56 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.780234 [info] [raftstore]: create init shard id:55 start:"b\000\000\000\000\000\000\000\032" end:"b\000\000\000\000\000\000\000\033" epoch:<confVer:3 > state:WaittingCreate peers:<id:56 containerID:1 > unique:"1-0-26" 
2021/08/20 13:00:36.780246 [error] [raftstore]: >>>>>>>>>>>> shard 55 peer 56 add registration job by doCreate
2021/08/20 13:00:36.780250 [error] [raftstore]: >>>>>>>>>>>> shard 55 peer 56 add registration job by doCreate, completed
2021/08/20 13:00:36.780260 [info] [raftstore]: shard 55 ********become leader now********
2021/08/20 13:00:36.781860 [info] prophet: resource 57 created with peers [{ID:58 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.782401 [info] [raftstore]: shard 57 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.782413 [info] [raftstore]: shard 57 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.782415 [info] [raftstore]: shard 57 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.782+0800","caller":"raft/raft.go:1550","msg":"3a switched to configuration voters=(58)"}
{"level":"info","ts":"2021-08-20T13:00:36.782+0800","caller":"raft/raft.go:711","msg":"3a became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.782+0800","caller":"raft/raft.go:388","msg":"newRaft 3a [peers: [3a], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.782443 [info] [raftstore]: shard 57 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.782+0800","caller":"raft/raft.go:934","msg":"3a is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.782+0800","caller":"raft/raft.go:724","msg":"3a became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.782+0800","caller":"raft/raft.go:835","msg":"3a received MsgVoteResp from 3a at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.782+0800","caller":"raft/raft.go:776","msg":"3a became leader at term 6"}
2021/08/20 13:00:36.782470 [info] [raftstore]: shard 57 added with peer {ID:58 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:58 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.782494 [info] [raftstore]: create init shard id:57 start:"b\000\000\000\000\000\000\000\033" end:"b\000\000\000\000\000\000\000\034" epoch:<confVer:3 > state:WaittingCreate peers:<id:58 containerID:1 > unique:"1-0-27" 
2021/08/20 13:00:36.782507 [error] [raftstore]: >>>>>>>>>>>> shard 57 peer 58 add registration job by doCreate
2021/08/20 13:00:36.782511 [error] [raftstore]: >>>>>>>>>>>> shard 57 peer 58 add registration job by doCreate, completed
2021/08/20 13:00:36.782537 [info] [raftstore]: shard 57 ********become leader now********
2021/08/20 13:00:36.783927 [info] prophet: resource 59 created with peers [{ID:60 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.784376 [info] [raftstore]: shard 59 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.784390 [info] [raftstore]: shard 59 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.784391 [info] [raftstore]: shard 59 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.784+0800","caller":"raft/raft.go:1550","msg":"3c switched to configuration voters=(60)"}
{"level":"info","ts":"2021-08-20T13:00:36.784+0800","caller":"raft/raft.go:711","msg":"3c became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.784+0800","caller":"raft/raft.go:388","msg":"newRaft 3c [peers: [3c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.784420 [info] [raftstore]: shard 59 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.784+0800","caller":"raft/raft.go:934","msg":"3c is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.784+0800","caller":"raft/raft.go:724","msg":"3c became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.784+0800","caller":"raft/raft.go:835","msg":"3c received MsgVoteResp from 3c at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.784+0800","caller":"raft/raft.go:776","msg":"3c became leader at term 6"}
2021/08/20 13:00:36.784448 [info] [raftstore]: shard 59 added with peer {ID:60 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:60 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.784463 [info] [raftstore]: shard 59 ********become leader now********
2021/08/20 13:00:36.784472 [error] [raftstore]: >>>>>>>>>>>> shard 59 peer 60 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.784473 [info] [raftstore]: create init shard id:59 start:"b\000\000\000\000\000\000\000\034" end:"b\000\000\000\000\000\000\000\035" epoch:<confVer:3 > state:WaittingCreate peers:<id:60 containerID:1 > unique:"1-0-28" 
2021/08/20 13:00:36.784479 [error] [raftstore]: >>>>>>>>>>>> shard 59 peer 60 add registration job by doCreate
2021/08/20 13:00:36.784482 [error] [raftstore]: >>>>>>>>>>>> shard 59 peer 60 add registration job by doCreate, completed
2021/08/20 13:00:36.786431 [info] prophet: resource 61 created with peers [{ID:62 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.786918 [info] [raftstore]: shard 61 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.786930 [info] [raftstore]: shard 61 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.786931 [info] [raftstore]: shard 61 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.786+0800","caller":"raft/raft.go:1550","msg":"3e switched to configuration voters=(62)"}
{"level":"info","ts":"2021-08-20T13:00:36.786+0800","caller":"raft/raft.go:711","msg":"3e became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.786+0800","caller":"raft/raft.go:388","msg":"newRaft 3e [peers: [3e], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.786958 [info] [raftstore]: shard 61 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.786+0800","caller":"raft/raft.go:934","msg":"3e is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.786+0800","caller":"raft/raft.go:724","msg":"3e became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.786+0800","caller":"raft/raft.go:835","msg":"3e received MsgVoteResp from 3e at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.786+0800","caller":"raft/raft.go:776","msg":"3e became leader at term 6"}
2021/08/20 13:00:36.786983 [info] [raftstore]: shard 61 added with peer {ID:62 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:62 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.787005 [info] [raftstore]: create init shard id:61 start:"b\000\000\000\000\000\000\000\035" end:"b\000\000\000\000\000\000\000\036" epoch:<confVer:3 > state:WaittingCreate peers:<id:62 containerID:1 > unique:"1-0-29" 
2021/08/20 13:00:36.787018 [error] [raftstore]: >>>>>>>>>>>> shard 61 peer 62 add registration job by doCreate
2021/08/20 13:00:36.787021 [error] [raftstore]: >>>>>>>>>>>> shard 61 peer 62 add registration job by doCreate, completed
2021/08/20 13:00:36.787028 [info] [raftstore]: shard 61 ********become leader now********
2021/08/20 13:00:36.788375 [info] prophet: resource 63 created with peers [{ID:64 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.788784 [info] [raftstore]: shard 63 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.788803 [info] [raftstore]: shard 63 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.788804 [info] [raftstore]: shard 63 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.788+0800","caller":"raft/raft.go:1550","msg":"40 switched to configuration voters=(64)"}
{"level":"info","ts":"2021-08-20T13:00:36.788+0800","caller":"raft/raft.go:711","msg":"40 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.788+0800","caller":"raft/raft.go:388","msg":"newRaft 40 [peers: [40], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.788843 [info] [raftstore]: shard 63 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.788+0800","caller":"raft/raft.go:934","msg":"40 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.788+0800","caller":"raft/raft.go:724","msg":"40 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.788+0800","caller":"raft/raft.go:835","msg":"40 received MsgVoteResp from 40 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.788+0800","caller":"raft/raft.go:776","msg":"40 became leader at term 6"}
2021/08/20 13:00:36.788882 [info] [raftstore]: shard 63 added with peer {ID:64 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:64 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.788908 [info] [raftstore]: create init shard id:63 start:"b\000\000\000\000\000\000\000\036" end:"b\000\000\000\000\000\000\000\037" epoch:<confVer:3 > state:WaittingCreate peers:<id:64 containerID:1 > unique:"1-0-30" 
2021/08/20 13:00:36.788926 [error] [raftstore]: >>>>>>>>>>>> shard 63 peer 64 add registration job by doCreate
2021/08/20 13:00:36.788930 [info] [raftstore]: shard 63 ********become leader now********
2021/08/20 13:00:36.788946 [error] [raftstore]: >>>>>>>>>>>> shard 63 peer 64 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.788949 [error] [raftstore]: >>>>>>>>>>>> shard 63 peer 64 add registration job by doCreate, completed
2021/08/20 13:00:36.790514 [info] prophet: resource 65 created with peers [{ID:66 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.790954 [info] [raftstore]: shard 65 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.790967 [info] [raftstore]: shard 65 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.790968 [info] [raftstore]: shard 65 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.790+0800","caller":"raft/raft.go:1550","msg":"42 switched to configuration voters=(66)"}
{"level":"info","ts":"2021-08-20T13:00:36.790+0800","caller":"raft/raft.go:711","msg":"42 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.790+0800","caller":"raft/raft.go:388","msg":"newRaft 42 [peers: [42], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.791004 [info] [raftstore]: shard 65 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.791+0800","caller":"raft/raft.go:934","msg":"42 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.791+0800","caller":"raft/raft.go:724","msg":"42 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.791+0800","caller":"raft/raft.go:835","msg":"42 received MsgVoteResp from 42 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.791+0800","caller":"raft/raft.go:776","msg":"42 became leader at term 6"}
2021/08/20 13:00:36.791029 [info] [raftstore]: shard 65 added with peer {ID:66 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:66 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.791048 [info] [raftstore]: shard 65 ********become leader now********
2021/08/20 13:00:36.791055 [error] [raftstore]: >>>>>>>>>>>> shard 65 peer 66 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.791055 [info] [raftstore]: create init shard id:65 start:"b\000\000\000\000\000\000\000\037" end:"b\000\000\000\000\000\000\000 " epoch:<confVer:3 > state:WaittingCreate peers:<id:66 containerID:1 > unique:"1-0-31" 
2021/08/20 13:00:36.791061 [error] [raftstore]: >>>>>>>>>>>> shard 65 peer 66 add registration job by doCreate
2021/08/20 13:00:36.791064 [error] [raftstore]: >>>>>>>>>>>> shard 65 peer 66 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.791080 [error] [raftstore]: >>>>>>>>>>>> shard 65 peer 66 add registration job by doCreate, completed
2021/08/20 13:00:36.792411 [info] prophet: resource 67 created with peers [{ID:68 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.792846 [info] [raftstore]: shard 67 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.792858 [info] [raftstore]: shard 67 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.792860 [info] [raftstore]: shard 67 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.792+0800","caller":"raft/raft.go:1550","msg":"44 switched to configuration voters=(68)"}
{"level":"info","ts":"2021-08-20T13:00:36.792+0800","caller":"raft/raft.go:711","msg":"44 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.792+0800","caller":"raft/raft.go:388","msg":"newRaft 44 [peers: [44], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.792890 [info] [raftstore]: shard 67 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.792+0800","caller":"raft/raft.go:934","msg":"44 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.792+0800","caller":"raft/raft.go:724","msg":"44 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.792+0800","caller":"raft/raft.go:835","msg":"44 received MsgVoteResp from 44 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.792+0800","caller":"raft/raft.go:776","msg":"44 became leader at term 6"}
2021/08/20 13:00:36.792925 [info] [raftstore]: shard 67 added with peer {ID:68 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:68 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.792948 [info] [raftstore]: create init shard id:67 start:"b\000\000\000\000\000\000\000 " end:"b\000\000\000\000\000\000\000!" epoch:<confVer:3 > state:WaittingCreate peers:<id:68 containerID:1 > unique:"1-0-32" 
2021/08/20 13:00:36.792953 [error] [raftstore]: >>>>>>>>>>>> shard 67 peer 68 add registration job by doCreate
2021/08/20 13:00:36.792958 [error] [raftstore]: >>>>>>>>>>>> shard 67 peer 68 add registration job by doCreate, completed
2021/08/20 13:00:36.792979 [info] [raftstore]: shard 67 ********become leader now********
2021/08/20 13:00:36.794897 [info] prophet: resource 69 created with peers [{ID:70 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.795382 [info] [raftstore]: shard 69 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.795397 [info] [raftstore]: shard 69 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.795399 [info] [raftstore]: shard 69 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.795+0800","caller":"raft/raft.go:1550","msg":"46 switched to configuration voters=(70)"}
{"level":"info","ts":"2021-08-20T13:00:36.795+0800","caller":"raft/raft.go:711","msg":"46 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.795+0800","caller":"raft/raft.go:388","msg":"newRaft 46 [peers: [46], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.795451 [info] [raftstore]: shard 69 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.795+0800","caller":"raft/raft.go:934","msg":"46 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.795+0800","caller":"raft/raft.go:724","msg":"46 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.795+0800","caller":"raft/raft.go:835","msg":"46 received MsgVoteResp from 46 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.795+0800","caller":"raft/raft.go:776","msg":"46 became leader at term 6"}
2021/08/20 13:00:36.795495 [info] [raftstore]: shard 69 added with peer {ID:70 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:70 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.795519 [info] [raftstore]: create init shard id:69 start:"b\000\000\000\000\000\000\000!" end:"b\000\000\000\000\000\000\000\"" epoch:<confVer:3 > state:WaittingCreate peers:<id:70 containerID:1 > unique:"1-0-33" 
2021/08/20 13:00:36.795526 [error] [raftstore]: >>>>>>>>>>>> shard 69 peer 70 add registration job by doCreate
2021/08/20 13:00:36.795538 [error] [raftstore]: >>>>>>>>>>>> shard 69 peer 70 add registration job by doCreate, completed
2021/08/20 13:00:36.795580 [info] [raftstore]: shard 69 ********become leader now********
2021/08/20 13:00:36.797106 [info] prophet: resource 71 created with peers [{ID:72 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.797546 [info] [raftstore]: shard 71 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.797558 [info] [raftstore]: shard 71 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.797560 [info] [raftstore]: shard 71 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.797+0800","caller":"raft/raft.go:1550","msg":"48 switched to configuration voters=(72)"}
{"level":"info","ts":"2021-08-20T13:00:36.797+0800","caller":"raft/raft.go:711","msg":"48 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.797+0800","caller":"raft/raft.go:388","msg":"newRaft 48 [peers: [48], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.797589 [info] [raftstore]: shard 71 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.797+0800","caller":"raft/raft.go:934","msg":"48 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.797+0800","caller":"raft/raft.go:724","msg":"48 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.797+0800","caller":"raft/raft.go:835","msg":"48 received MsgVoteResp from 48 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.797+0800","caller":"raft/raft.go:776","msg":"48 became leader at term 6"}
2021/08/20 13:00:36.797617 [info] [raftstore]: shard 71 added with peer {ID:72 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:72 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.797641 [info] [raftstore]: create init shard id:71 start:"b\000\000\000\000\000\000\000\"" end:"b\000\000\000\000\000\000\000#" epoch:<confVer:3 > state:WaittingCreate peers:<id:72 containerID:1 > unique:"1-0-34" 
2021/08/20 13:00:36.797647 [error] [raftstore]: >>>>>>>>>>>> shard 71 peer 72 add registration job by doCreate
2021/08/20 13:00:36.797649 [error] [raftstore]: >>>>>>>>>>>> shard 71 peer 72 add registration job by doCreate, completed
2021/08/20 13:00:36.797669 [info] [raftstore]: shard 71 ********become leader now********
2021/08/20 13:00:36.799152 [info] prophet: resource 73 created with peers [{ID:74 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.799678 [info] [raftstore]: shard 73 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.799695 [info] [raftstore]: shard 73 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.799697 [info] [raftstore]: shard 73 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.799+0800","caller":"raft/raft.go:1550","msg":"4a switched to configuration voters=(74)"}
{"level":"info","ts":"2021-08-20T13:00:36.799+0800","caller":"raft/raft.go:711","msg":"4a became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.799+0800","caller":"raft/raft.go:388","msg":"newRaft 4a [peers: [4a], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.799728 [info] [raftstore]: shard 73 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.799+0800","caller":"raft/raft.go:934","msg":"4a is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.799+0800","caller":"raft/raft.go:724","msg":"4a became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.799+0800","caller":"raft/raft.go:835","msg":"4a received MsgVoteResp from 4a at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.799+0800","caller":"raft/raft.go:776","msg":"4a became leader at term 6"}
2021/08/20 13:00:36.799756 [info] [raftstore]: shard 73 added with peer {ID:74 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:74 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.799781 [info] [raftstore]: create init shard id:73 start:"b\000\000\000\000\000\000\000#" end:"b\000\000\000\000\000\000\000$" epoch:<confVer:3 > state:WaittingCreate peers:<id:74 containerID:1 > unique:"1-0-35" 
2021/08/20 13:00:36.799786 [error] [raftstore]: >>>>>>>>>>>> shard 73 peer 74 add registration job by doCreate
2021/08/20 13:00:36.799789 [error] [raftstore]: >>>>>>>>>>>> shard 73 peer 74 add registration job by doCreate, completed
2021/08/20 13:00:36.799808 [info] [raftstore]: shard 73 ********become leader now********
2021/08/20 13:00:36.801148 [info] prophet: resource 75 created with peers [{ID:76 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.802257 [info] [raftstore]: shard 75 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.802272 [info] [raftstore]: shard 75 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.802273 [info] [raftstore]: shard 75 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.802+0800","caller":"raft/raft.go:1550","msg":"4c switched to configuration voters=(76)"}
{"level":"info","ts":"2021-08-20T13:00:36.802+0800","caller":"raft/raft.go:711","msg":"4c became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.802+0800","caller":"raft/raft.go:388","msg":"newRaft 4c [peers: [4c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.802308 [info] [raftstore]: shard 75 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.802+0800","caller":"raft/raft.go:934","msg":"4c is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.802+0800","caller":"raft/raft.go:724","msg":"4c became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.802+0800","caller":"raft/raft.go:835","msg":"4c received MsgVoteResp from 4c at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.802+0800","caller":"raft/raft.go:776","msg":"4c became leader at term 6"}
2021/08/20 13:00:36.802334 [info] [raftstore]: shard 75 added with peer {ID:76 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:76 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.802348 [info] [raftstore]: create init shard id:75 start:"b\000\000\000\000\000\000\000$" end:"b\000\000\000\000\000\000\000%" epoch:<confVer:3 > state:WaittingCreate peers:<id:76 containerID:1 > unique:"1-0-36" 
2021/08/20 13:00:36.802361 [error] [raftstore]: >>>>>>>>>>>> shard 75 peer 76 add registration job by doCreate
2021/08/20 13:00:36.802364 [error] [raftstore]: >>>>>>>>>>>> shard 75 peer 76 add registration job by doCreate, completed
2021/08/20 13:00:36.802402 [info] [raftstore]: shard 75 ********become leader now********
2021/08/20 13:00:36.803968 [info] prophet: resource 77 created with peers [{ID:78 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.804458 [info] [raftstore]: shard 77 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.804473 [info] [raftstore]: shard 77 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.804474 [info] [raftstore]: shard 77 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.804+0800","caller":"raft/raft.go:1550","msg":"4e switched to configuration voters=(78)"}
{"level":"info","ts":"2021-08-20T13:00:36.804+0800","caller":"raft/raft.go:711","msg":"4e became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.804+0800","caller":"raft/raft.go:388","msg":"newRaft 4e [peers: [4e], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.804527 [info] [raftstore]: shard 77 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.804+0800","caller":"raft/raft.go:934","msg":"4e is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.804+0800","caller":"raft/raft.go:724","msg":"4e became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.804+0800","caller":"raft/raft.go:835","msg":"4e received MsgVoteResp from 4e at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.804+0800","caller":"raft/raft.go:776","msg":"4e became leader at term 6"}
2021/08/20 13:00:36.804560 [info] [raftstore]: shard 77 added with peer {ID:78 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:78 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.804587 [info] [raftstore]: create init shard id:77 start:"b\000\000\000\000\000\000\000%" end:"b\000\000\000\000\000\000\000&" epoch:<confVer:3 > state:WaittingCreate peers:<id:78 containerID:1 > unique:"1-0-37" 
2021/08/20 13:00:36.804599 [info] [raftstore]: shard 77 ********become leader now********
2021/08/20 13:00:36.804602 [error] [raftstore]: >>>>>>>>>>>> shard 77 peer 78 add registration job by doCreate
2021/08/20 13:00:36.804607 [error] [raftstore]: >>>>>>>>>>>> shard 77 peer 78 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.804634 [error] [raftstore]: >>>>>>>>>>>> shard 77 peer 78 skip with no delegates, 1 commits, result <nil>
2021/08/20 13:00:36.804642 [error] [raftstore]: >>>>>>>>>>>> shard 77 peer 78 add registration job by doCreate, completed
2021/08/20 13:00:36.806124 [info] prophet: resource 79 created with peers [{ID:80 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.806644 [info] [raftstore]: shard 79 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.806660 [info] [raftstore]: shard 79 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.806661 [info] [raftstore]: shard 79 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.806+0800","caller":"raft/raft.go:1550","msg":"50 switched to configuration voters=(80)"}
{"level":"info","ts":"2021-08-20T13:00:36.806+0800","caller":"raft/raft.go:711","msg":"50 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.806+0800","caller":"raft/raft.go:388","msg":"newRaft 50 [peers: [50], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.806705 [info] [raftstore]: shard 79 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.806+0800","caller":"raft/raft.go:934","msg":"50 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.806+0800","caller":"raft/raft.go:724","msg":"50 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.806+0800","caller":"raft/raft.go:835","msg":"50 received MsgVoteResp from 50 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.806+0800","caller":"raft/raft.go:776","msg":"50 became leader at term 6"}
2021/08/20 13:00:36.806731 [info] [raftstore]: shard 79 added with peer {ID:80 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:80 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.806752 [info] [raftstore]: create init shard id:79 start:"b\000\000\000\000\000\000\000&" end:"b\000\000\000\000\000\000\000'" epoch:<confVer:3 > state:WaittingCreate peers:<id:80 containerID:1 > unique:"1-0-38" 
2021/08/20 13:00:36.806758 [error] [raftstore]: >>>>>>>>>>>> shard 79 peer 80 add registration job by doCreate
2021/08/20 13:00:36.806760 [error] [raftstore]: >>>>>>>>>>>> shard 79 peer 80 add registration job by doCreate, completed
2021/08/20 13:00:36.806766 [info] [raftstore]: shard 79 ********become leader now********
2021/08/20 13:00:36.808228 [info] prophet: resource 81 created with peers [{ID:82 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.809277 [info] [raftstore]: shard 81 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.809290 [info] [raftstore]: shard 81 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.809292 [info] [raftstore]: shard 81 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.809+0800","caller":"raft/raft.go:1550","msg":"52 switched to configuration voters=(82)"}
{"level":"info","ts":"2021-08-20T13:00:36.809+0800","caller":"raft/raft.go:711","msg":"52 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.809+0800","caller":"raft/raft.go:388","msg":"newRaft 52 [peers: [52], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.809319 [info] [raftstore]: shard 81 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.809+0800","caller":"raft/raft.go:934","msg":"52 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.809+0800","caller":"raft/raft.go:724","msg":"52 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.809+0800","caller":"raft/raft.go:835","msg":"52 received MsgVoteResp from 52 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.809+0800","caller":"raft/raft.go:776","msg":"52 became leader at term 6"}
2021/08/20 13:00:36.809344 [info] [raftstore]: shard 81 added with peer {ID:82 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:82 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.809367 [info] [raftstore]: create init shard id:81 start:"b\000\000\000\000\000\000\000'" end:"b\000\000\000\000\000\000\000(" epoch:<confVer:3 > state:WaittingCreate peers:<id:82 containerID:1 > unique:"1-0-39" 
2021/08/20 13:00:36.809381 [error] [raftstore]: >>>>>>>>>>>> shard 81 peer 82 add registration job by doCreate
2021/08/20 13:00:36.809393 [error] [raftstore]: >>>>>>>>>>>> shard 81 peer 82 add registration job by doCreate, completed
2021/08/20 13:00:36.809404 [info] [raftstore]: shard 81 ********become leader now********
2021/08/20 13:00:36.811046 [info] prophet: resource 83 created with peers [{ID:84 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:36.811575 [info] [raftstore]: shard 83 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:36.811589 [info] [raftstore]: shard 83 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:36.811590 [info] [raftstore]: shard 83 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:36.811+0800","caller":"raft/raft.go:1550","msg":"54 switched to configuration voters=(84)"}
{"level":"info","ts":"2021-08-20T13:00:36.811+0800","caller":"raft/raft.go:711","msg":"54 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.811+0800","caller":"raft/raft.go:388","msg":"newRaft 54 [peers: [54], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:36.811617 [info] [raftstore]: shard 83 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:36.811+0800","caller":"raft/raft.go:934","msg":"54 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:36.811+0800","caller":"raft/raft.go:724","msg":"54 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.811+0800","caller":"raft/raft.go:835","msg":"54 received MsgVoteResp from 54 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:36.811+0800","caller":"raft/raft.go:776","msg":"54 became leader at term 6"}
2021/08/20 13:00:36.811642 [info] [raftstore]: shard 83 added with peer {ID:84 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:84 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:36.811655 [info] [raftstore]: create init shard id:83 start:"b\000\000\000\000\000\000\000(" end:"b\000\000\000\000\000\000\000)" epoch:<confVer:3 > state:WaittingCreate peers:<id:84 containerID:1 > unique:"1-0-40" 
2021/08/20 13:00:36.811659 [error] [raftstore]: >>>>>>>>>>>> shard 83 peer 84 add registration job by doCreate
2021/08/20 13:00:36.811662 [error] [raftstore]: >>>>>>>>>>>> shard 83 peer 84 add registration job by doCreate, completed
2021/08/20 13:00:36.811667 [info] [raftstore]: shard 83 ********become leader now********
2021/08/20 13:00:36.811761 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:46740->127.0.0.1:30000: use of closed network connection
2021/08/20 13:00:36.811763 [error] prophet: client read loop stopped
2021/08/20 13:00:36.811809 [error] prophet: session 2[127.0.0.1:46742] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46742: use of closed network connection
2021/08/20 13:00:36.811820 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:36.811824 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:36.812582 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 13:00:36.812609 [info] prophet: drive push operator has been stopped 
2021/08/20 13:00:36.812587 [error] prophet: save resource 83 to storage failed with election: not leader
2021/08/20 13:00:36.812617 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 13:00:36.812621 [error] prophet: session 1[] handle failed with queue: disposed, close session
2021/08/20 13:00:36.812627 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 13:00:36.812628 [info] prophet: coordinator is stopping
2021/08/20 13:00:36.812629 [info] prophet: watcher  removed
2021/08/20 13:00:36.812631 [info] prophet: patrol resources has been stopped 
2021/08/20 13:00:36.812632 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 13:00:36.812634 [info] prophet: coordinator has been stopped
2021-08-20 13:00:36.812647 I | etcdserver: skipped leadership transfer for single voting member cluster
2021/08/20 13:00:36.815900 [info] [raftstore]: shard 67 handle serve raft stopped
2021/08/20 13:00:36.815910 [info] [raftstore]: shard 73 handle serve raft stopped
2021/08/20 13:00:36.815913 [info] [raftstore]: shard 43 handle serve raft stopped
2021/08/20 13:00:36.815914 [info] [raftstore]: shard 17 handle serve raft stopped
2021/08/20 13:00:36.815915 [info] [raftstore]: shard 21 handle serve raft stopped
2021/08/20 13:00:36.815917 [info] [raftstore]: shard 7 handle serve raft stopped
2021/08/20 13:00:36.815918 [info] [raftstore]: shard 77 handle serve raft stopped
2021/08/20 13:00:36.815919 [info] [raftstore]: shard 39 handle serve raft stopped
2021/08/20 13:00:36.815920 [info] [raftstore]: shard 45 handle serve raft stopped
2021/08/20 13:00:36.815921 [info] [raftstore]: shard 51 handle serve raft stopped
2021/08/20 13:00:36.815922 [info] [raftstore]: shard 23 handle serve raft stopped
2021/08/20 13:00:36.815923 [info] [raftstore]: shard 15 handle serve raft stopped
2021/08/20 13:00:36.815924 [info] [raftstore]: shard 25 handle serve raft stopped
2021/08/20 13:00:36.815925 [info] [raftstore]: shard 53 handle serve raft stopped
2021/08/20 13:00:36.815926 [info] [raftstore]: shard 55 handle serve raft stopped
2021/08/20 13:00:36.815927 [info] [raftstore]: shard 31 handle serve raft stopped
2021/08/20 13:00:36.815928 [info] [raftstore]: shard 79 handle serve raft stopped
2021/08/20 13:00:36.815930 [info] [raftstore]: shard 47 handle serve raft stopped
2021/08/20 13:00:36.815931 [info] [raftstore]: shard 33 handle serve raft stopped
2021/08/20 13:00:36.815932 [info] [raftstore]: shard 63 handle serve raft stopped
2021/08/20 13:00:36.815933 [info] [raftstore]: shard 5 handle serve raft stopped
2021/08/20 13:00:36.815934 [info] [raftstore]: shard 59 handle serve raft stopped
2021/08/20 13:00:36.815935 [info] [raftstore]: shard 41 handle serve raft stopped
2021/08/20 13:00:36.815936 [info] [raftstore]: shard 69 handle serve raft stopped
2021/08/20 13:00:36.815937 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:36.815938 [info] [raftstore]: shard 29 handle serve raft stopped
2021/08/20 13:00:36.815939 [info] [raftstore]: shard 49 handle serve raft stopped
2021/08/20 13:00:36.815940 [info] [raftstore]: shard 11 handle serve raft stopped
2021/08/20 13:00:36.815941 [info] [raftstore]: shard 35 handle serve raft stopped
2021/08/20 13:00:36.815944 [info] [raftstore]: shard 81 handle serve raft stopped
2021/08/20 13:00:36.815945 [info] [raftstore]: shard 75 handle serve raft stopped
2021/08/20 13:00:36.815946 [info] [raftstore]: shard 37 handle serve raft stopped
2021/08/20 13:00:36.815947 [info] [raftstore]: shard 19 handle serve raft stopped
2021/08/20 13:00:36.815948 [info] [raftstore]: shard 27 handle serve raft stopped
2021/08/20 13:00:36.815949 [info] [raftstore]: shard 9 handle serve raft stopped
2021/08/20 13:00:36.815950 [info] [raftstore]: shard 57 handle serve raft stopped
2021/08/20 13:00:36.815952 [info] [raftstore]: shard 71 handle serve raft stopped
2021/08/20 13:00:36.815953 [info] [raftstore]: shard 13 handle serve raft stopped
2021/08/20 13:00:36.815954 [info] [raftstore]: shard 65 handle serve raft stopped
2021/08/20 13:00:36.815955 [info] [raftstore]: shard 83 handle serve raft stopped
2021/08/20 13:00:36.815956 [info] [raftstore]: shard 61 handle serve raft stopped
2021/08/20 13:00:36.815973 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:36.815983 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:36.815973 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:36.815976 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:36.816019 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:36.816028 [info] [transport]: transfer stopped
2021/08/20 13:00:36.816032 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:36.816034 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:36.816036 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:36.816038 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:36.816043 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:36.816045 [info] [transport]: send raft worker stopped
2021/08/20 13:00:36.816032 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:36.816047 [info] [transport]: send snapshot worker stopped
--- PASS: TestIssue123 (1.36s)
=== RUN   TestAddShardWithMultiGroups
2021/08/20 13:00:36.816994 [info] prophet: prophet logger set
2021/08/20 13:00:36.817358 [info] [raftstore]: start scan gc snap files
2021/08/20 13:00:36.817675 [info] [raftstore]: start scan gc snap files
2021/08/20 13:00:36.817928 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:36.817943 [info] [raftstore]: begin to start prophet
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:36.817986 I | embed: pprof is enabled under /debug/pprof
2021/08/20 13:00:36.818008 [info] [raftstore]: start scan gc snap files
2021-08-20 13:00:36.818028 I | embed: name = node-0
2021-08-20 13:00:36.818044 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 13:00:36.818047 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 13:00:36.818049 I | embed: heartbeat = 100ms
2021-08-20 13:00:36.818051 I | embed: election = 3000ms
2021-08-20 13:00:36.818053 I | embed: snapshot count = 100000
2021-08-20 13:00:36.818057 I | embed: advertise client URLs = http://127.0.0.1:40000
2021-08-20 13:00:36.822818 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:36.822+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:36.822+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:36.822+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T13:00:36.822+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T13:00:36.822+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:36.824707 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:36.828065 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:36.828192 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
{"level":"info","ts":"2021-08-20T13:00:36.828+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:36.828331 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:36.828404 I | embed: listening for peers on 127.0.0.1:50000
2021/08/20 13:00:36.840995 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 13:00:36.841010 [info] [raftstore]: shard 5 raft tick stopped
2021/08/20 13:00:36.841012 [info] [raftstore]: shard 7 raft tick stopped
2021/08/20 13:00:36.841013 [info] [raftstore]: shard 9 raft tick stopped
2021/08/20 13:00:36.841015 [info] [raftstore]: shard 11 raft tick stopped
2021/08/20 13:00:36.841016 [info] [raftstore]: shard 13 raft tick stopped
2021/08/20 13:00:36.841017 [info] [raftstore]: shard 15 raft tick stopped
2021/08/20 13:00:36.841018 [info] [raftstore]: shard 17 raft tick stopped
2021/08/20 13:00:36.841019 [info] [raftstore]: shard 19 raft tick stopped
2021/08/20 13:00:36.841020 [info] [raftstore]: shard 21 raft tick stopped
2021/08/20 13:00:36.841021 [info] [raftstore]: shard 23 raft tick stopped
2021/08/20 13:00:36.841022 [info] [raftstore]: shard 25 raft tick stopped
2021/08/20 13:00:36.841023 [info] [raftstore]: shard 27 raft tick stopped
2021/08/20 13:00:36.841024 [info] [raftstore]: shard 29 raft tick stopped
2021/08/20 13:00:36.841026 [info] [raftstore]: shard 45 raft tick stopped
2021/08/20 13:00:36.841027 [info] [raftstore]: shard 47 raft tick stopped
2021/08/20 13:00:36.841028 [info] [raftstore]: shard 49 raft tick stopped
2021/08/20 13:00:36.841029 [info] [raftstore]: shard 51 raft tick stopped
2021/08/20 13:00:36.841031 [info] [raftstore]: shard 53 raft tick stopped
2021/08/20 13:00:36.841038 [info] [raftstore]: shard 55 raft tick stopped
2021/08/20 13:00:36.841039 [info] [raftstore]: shard 57 raft tick stopped
2021/08/20 13:00:36.841040 [info] [raftstore]: shard 59 raft tick stopped
2021/08/20 13:00:36.841041 [info] [raftstore]: shard 61 raft tick stopped
2021/08/20 13:00:36.841042 [info] [raftstore]: shard 63 raft tick stopped
2021/08/20 13:00:36.891580 [info] [raftstore]: shard 31 raft tick stopped
2021/08/20 13:00:36.891595 [info] [raftstore]: shard 33 raft tick stopped
2021/08/20 13:00:36.891597 [info] [raftstore]: shard 35 raft tick stopped
2021/08/20 13:00:36.891598 [info] [raftstore]: shard 37 raft tick stopped
2021/08/20 13:00:36.891599 [info] [raftstore]: shard 39 raft tick stopped
2021/08/20 13:00:36.891600 [info] [raftstore]: shard 41 raft tick stopped
2021/08/20 13:00:36.891601 [info] [raftstore]: shard 43 raft tick stopped
2021/08/20 13:00:36.891603 [info] [raftstore]: shard 65 raft tick stopped
2021/08/20 13:00:36.891604 [info] [raftstore]: shard 67 raft tick stopped
2021/08/20 13:00:36.891605 [info] [raftstore]: shard 69 raft tick stopped
2021/08/20 13:00:36.891606 [info] [raftstore]: shard 71 raft tick stopped
2021/08/20 13:00:36.891607 [info] [raftstore]: shard 73 raft tick stopped
2021/08/20 13:00:36.891608 [info] [raftstore]: shard 75 raft tick stopped
2021/08/20 13:00:36.891609 [info] [raftstore]: shard 77 raft tick stopped
2021/08/20 13:00:36.891611 [info] [raftstore]: shard 79 raft tick stopped
2021/08/20 13:00:36.891612 [info] [raftstore]: shard 81 raft tick stopped
2021/08/20 13:00:36.891613 [info] [raftstore]: shard 83 raft tick stopped
2021/08/20 13:00:36.913494 [info] prophet: [prophet-leader/node-0]/loop: exit
2021/08/20 13:00:37.129999 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:38.130791 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:38.445944 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"info","ts":"2021-08-20T13:00:39.023+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T13:00:39.023+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T13:00:39.023+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:39.023+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T13:00:39.023+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 13:00:39.023587 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:39.023609 I | embed: ready to serve client requests
2021-08-20 13:00:39.023614 I | etcdserver: setting up the initial cluster version to 3.4
2021/08/20 13:00:39.023627 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 13:00:39.023913 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021-08-20 13:00:39.024176 N | etcdserver/membership: set the initial cluster version to 3.4
2021/08/20 13:00:39.025013 [info] prophet: net application started
2021/08/20 13:00:39.025030 [info] prophet: start system time monitor 
2021/08/20 13:00:39.025574 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 13:00:39.025769 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 13:00:39.025779 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 13:00:39.026011 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 13:00:39.026509 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 13:00:39.026528 [info] prophet: ********node-0 become to leader now********
2021/08/20 13:00:39.026972 [info] prophet: load 0 containers, cost 364.6µs
2021/08/20 13:00:39.027153 [info] prophet: load 0 resources, cost 171µs
2021/08/20 13:00:39.027786 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:39.027844 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:00:39.027863 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 13:00:39.027865 [info] prophet: coordinator starts to run schedulers 
2021/08/20 13:00:39.027872 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:39.027875 [info] prophet: session 1[127.0.0.1:46748] connected
2021/08/20 13:00:39.027847 [info] prophet: client read loop started 
2021/08/20 13:00:39.027942 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:39.027848 [info] prophet: client started
2021/08/20 13:00:39.027950 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:00:39.027952 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:39.027966 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435639 deployPath:"not set" 
2021/08/20 13:00:39.027977 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:39.028268 [info] prophet: load 0 jobs
2021/08/20 13:00:39.028559 [info] [raftstore]: create local store with id 1
2021/08/20 13:00:39.030193 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 13:00:39.030209 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 13:00:39.030237 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 13:00:39.030241 [info] prophet: coordinator starts patrol resources 
2021/08/20 13:00:39.030475 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 13:00:39.030497 [info] [raftstore]: create init shard id:4 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:5 containerID:1 > group:1 
2021/08/20 13:00:39.031663 [info] prophet: container 1 limit added
2021/08/20 13:00:39.031711 [info] [raftstore]: prophet started
2021/08/20 13:00:39.031725 [info] prophet: container 1 heartbeat stream binded
2021/08/20 13:00:39.031742 [info] [transport]: net application started
2021/08/20 13:00:39.031744 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 13:00:39.031747 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:39.031760 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:39.031764 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:39.031765 [info] [raftstore]: shard 2 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:39.031804 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:39.031809 [info] [raftstore]: raft worker 1/0 start
2021/08/20 13:00:39.031831 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 13:00:39.031861 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 13:00:39.031881 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 13:00:39.031890 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:39.031895 [info] [raftstore]: shard 4 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:39.031898 [info] [raftstore]: shard 4 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:39.031899 [info] [raftstore]: shard 4 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:1550","msg":"5 switched to configuration voters=(5)"}
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:711","msg":"5 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:388","msg":"newRaft 5 [peers: [5], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:39.031929 [info] [raftstore]: shard 4 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:934","msg":"5 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:724","msg":"5 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:835","msg":"5 received MsgVoteResp from 5 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:39.031+0800","caller":"raft/raft.go:776","msg":"5 became leader at term 6"}
2021/08/20 13:00:39.031947 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 5 add registration job by startShards
2021/08/20 13:00:39.031953 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 5 add registration job by startShards, completed
2021/08/20 13:00:39.031959 [info] [raftstore]: shard 4 added with peer {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-1-0
2021/08/20 13:00:39.031962 [info] [raftstore]: starts with 2 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:39.031962 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:39.031963 [info] [raftstore]: shards started
2021/08/20 13:00:39.031964 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:39.031970 [info] [raftstore]: net application started
2021/08/20 13:00:39.031981 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 13:00:39.031988 [info] [raftstore]: router started
2021/08/20 13:00:39.031976 [info] [raftstore]: shard 4 ********become leader now********
2021/08/20 13:00:39.032019 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:39.032094 [info] [raftstore]: router event loop task started
2021/08/20 13:00:39.032125 [info] prophet: session 2[127.0.0.1:46750] connected
2021/08/20 13:00:39.032129 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:39.032138 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:39.032175 [info] prophet: new watcher 127.0.0.1:46750 added
2021/08/20 13:00:39.032219 [info] [raftstore]: start init event
2021/08/20 13:00:39.033550 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:39.033559 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-08-20T13:00:39.034+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(772680865137736189 10650127570946328820)"}
2021-08-20 13:00:39.034197 I | etcdserver/membership: added member ab91d272b46b9fd [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 13:00:39.034211 I | rafthttp: starting peer ab91d272b46b9fd...
2021-08-20 13:00:39.034225 I | rafthttp: started HTTP pipelining with peer ab91d272b46b9fd
2021-08-20 13:00:39.034455 I | rafthttp: started streaming with peer ab91d272b46b9fd (writer)
2021-08-20 13:00:39.034579 I | rafthttp: started streaming with peer ab91d272b46b9fd (writer)
2021-08-20 13:00:39.034776 I | rafthttp: started peer ab91d272b46b9fd
2021-08-20 13:00:39.034791 I | rafthttp: started streaming with peer ab91d272b46b9fd (stream MsgApp v2 reader)
2021-08-20 13:00:39.034797 I | rafthttp: started streaming with peer ab91d272b46b9fd (stream Message reader)
2021-08-20 13:00:39.034806 I | rafthttp: added peer ab91d272b46b9fd
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:39.035148 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:39.035172 I | embed: name = node-1
2021-08-20 13:00:39.035182 I | embed: data dir = /tmp/cube/node-1/prophet
2021-08-20 13:00:39.035185 I | embed: member dir = /tmp/cube/node-1/prophet/member
2021-08-20 13:00:39.035186 I | embed: heartbeat = 100ms
2021-08-20 13:00:39.035187 I | embed: election = 3000ms
2021-08-20 13:00:39.035189 I | embed: snapshot count = 100000
2021-08-20 13:00:39.035191 I | embed: advertise client URLs = http://127.0.0.1:40001
2021-08-20 13:00:39.039227 I | etcdserver: starting member ab91d272b46b9fd in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:39.039+0800","caller":"raft/raft.go:1550","msg":"ab91d272b46b9fd switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:39.039+0800","caller":"raft/raft.go:711","msg":"ab91d272b46b9fd became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:39.039+0800","caller":"raft/raft.go:388","msg":"newRaft ab91d272b46b9fd [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 13:00:39.041039 W | auth: simple token is not cryptographically signed
2021/08/20 13:00:39.042049 [info] [raftstore]: shard 2 ********become leader now********
2021-08-20 13:00:39.044035 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:39.044049 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 13:00:39.044056 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:39.044278 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:39.044428 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:39.044636 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 13:00:39.044649 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 13:00:39.044653 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:39.044654 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:39.044665 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:39.044835 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 13:00:39.044863 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:39.044893 I | rafthttp: peer ab91d272b46b9fd became active
2021-08-20 13:00:39.044925 I | rafthttp: established a TCP streaming connection with peer ab91d272b46b9fd (stream Message writer)
2021-08-20 13:00:39.044932 I | rafthttp: established a TCP streaming connection with peer ab91d272b46b9fd (stream MsgApp v2 writer)
2021-08-20 13:00:39.044936 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:39.044940 I | embed: listening for peers on 127.0.0.1:50001
{"level":"info","ts":"2021-08-20T13:00:39.045+0800","caller":"raft/raft.go:870","msg":"ab91d272b46b9fd [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T13:00:39.045+0800","caller":"raft/raft.go:711","msg":"ab91d272b46b9fd became follower at term 2"}
{"level":"info","ts":"2021-08-20T13:00:39.045+0800","caller":"raft/node.go:325","msg":"raft.node: ab91d272b46b9fd elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:39.046+0800","caller":"raft/raft.go:1550","msg":"ab91d272b46b9fd switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:39.046539 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:39.046587 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T13:00:39.046+0800","caller":"raft/raft.go:1550","msg":"ab91d272b46b9fd switched to configuration voters=(772680865137736189 10650127570946328820)"}
2021-08-20 13:00:39.047020 I | etcdserver/membership: added member ab91d272b46b9fd [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 13:00:39.047937 I | etcdserver: published {Name:node-1 ClientURLs:[http://127.0.0.1:40001]} to cluster 6a4ade671189dc2f
2021/08/20 13:00:39.047949 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
2021-08-20 13:00:39.047949 I | embed: ready to serve client requests
2021-08-20 13:00:39.048231 N | embed: serving insecure client requests on 127.0.0.1:40001, this is strongly discouraged!
2021/08/20 13:00:39.050245 [info] prophet: start system time monitor 
2021/08/20 13:00:39.050265 [info] prophet: net application started
2021/08/20 13:00:39.051353 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 13:00:39.051367 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:39.051371 [info] prophet: ********node-1 become to follower now********
2021/08/20 13:00:39.051388 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:39.051411 [info] prophet: client read loop started 
2021/08/20 13:00:39.051417 [info] prophet: client started
2021/08/20 13:00:39.051432 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:39.051435 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 13:00:39.051436 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:39.051438 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:39.051464 [info] prophet: session 3[127.0.0.1:46782] connected
2021/08/20 13:00:39.051479 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1629435639 deployPath:"not set" 
2021/08/20 13:00:39.051482 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:39.051589 [info] [raftstore]: create local store with id 7
2021/08/20 13:00:39.052096 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 13:00:39.054527 [info] prophet: container 7 limit added
2021/08/20 13:00:39.054596 [info] prophet: container 7 heartbeat stream binded
2021/08/20 13:00:39.054605 [info] [raftstore]: prophet started
2021/08/20 13:00:39.054637 [info] [transport]: net application started
2021/08/20 13:00:39.054647 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/08/20 13:00:39.054651 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:39.054654 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:39.054655 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:39.054656 [info] [raftstore]: shards started
2021/08/20 13:00:39.054657 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:39.054661 [info] [raftstore]: net application started
2021/08/20 13:00:39.054663 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/08/20 13:00:39.054669 [info] [raftstore]: router started
2021/08/20 13:00:39.054682 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:39.054709 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:39.054727 [info] [raftstore]: raft worker 1/0 start
2021/08/20 13:00:39.054773 [info] prophet: session 4[127.0.0.1:46784] connected
2021/08/20 13:00:39.054788 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:39.054790 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:39.054792 [info] [raftstore]: router event loop task started
2021/08/20 13:00:39.054827 [info] prophet: new watcher 127.0.0.1:46784 added
2021/08/20 13:00:39.054891 [info] [raftstore]: start init event
2021/08/20 13:00:39.056106 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:39.056118 [info] [raftstore]: begin to start prophet
2021-08-20 13:00:39.056566 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:2b8c8af41a1b2fbb RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:39.056+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-759c2181-0009-4cab-8ba8-067d1e34bac5/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:39.056665 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:39.131096 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 13:00:39.1310746 +0800 CST m=+157.246160501, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/08/20 13:00:39.131119 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/08/20 13:00:39.131133 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:39.131184 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:39.132264 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:39.132362 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/08/20 13:00:39.132381 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:39.132388 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:39.132429 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021-08-20 13:00:39.135810 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:00:39.135836 I | rafthttp: established a TCP streaming connection with peer ab91d272b46b9fd (stream MsgApp v2 reader)
2021-08-20 13:00:39.135841 I | rafthttp: established a TCP streaming connection with peer ab91d272b46b9fd (stream Message reader)
2021-08-20 13:00:39.135876 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
{"level":"info","ts":"2021-08-20T13:00:39.142+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3) learners=(8)"}
2021/08/20 13:00:39.142453 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 50 191 154 5 183 249 70 30 136 231 140 162 13 69 134 190 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:39.142464 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:39.142485 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:39.142618 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:39.142656 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/08/20 13:00:39.143568 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:39.143599 [info] [transport]: connected to store 7
2021/08/20 13:00:39.143621 [info] [transport]: session 1[127.0.0.1:38442] connected
2021/08/20 13:00:39.143654 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 13:00:39.143669 [info] [raftstore]: shard 2 replicate peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:39.143681 [info] prophet: resource 2 send schedule command, step promote learner peer 8 on container 7 to voter, source heartbeat
2021/08/20 13:00:39.143685 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:39.143712 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:39.143726 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T13:00:39.143+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:39.143+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:39.143+0800","caller":"raft/raft.go:388","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 13:00:39.143751 [info] [raftstore]: shard-2 AddNode peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:39.143804 [info] [raftstore]: shard 2 added with peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T13:00:39.143+0800","caller":"raft/raft.go:870","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:39.143+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 6"}
2021/08/20 13:00:39.143952 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:39.144385 [info] [transport]: connected to store 1
2021/08/20 13:00:39.144403 [info] [transport]: session 1[127.0.0.1:44360] connected
2021/08/20 13:00:39.144441 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:39.144508 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:39.144521 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:39.144522 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:39.144+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:39.144581 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T13:00:39.144+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 8)"}
{"level":"error","ts":"2021-08-20T13:00:39.144+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:39.144753 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 73 115 202 10 238 247 74 131 137 41 250 181 76 161 193 114 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 8 16 7] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:39.144763 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:39.144789 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<9> 
2021/08/20 13:00:39.144828 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:39.144840 [info] prophet: resource 2 ConfVer changed from 2 to 3
{"level":"error","ts":"2021-08-20T13:00:39.144+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:39.144882 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 13:00:39.144992 [info] [transport]: session 2[127.0.0.1:38446] connected
2021/08/20 13:00:39.144999 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-08-20T13:00:39.145+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:39.145+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(3 8)"}
{"level":"info","ts":"2021-08-20T13:00:39.145+0800","caller":"raft/raft.go:1503","msg":"8 [commit: 9, lastindex: 9, lastterm: 6] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:39.145+0800","caller":"raft/raft.go:1420","msg":"8 [commit: 9] restored snapshot [index: 9, term: 6]"}
2021/08/20 13:00:39.145139 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/08/20 13:00:39.145426 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:8 containerID:7 > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:9 >,size=<126>
2021/08/20 13:00:39.145455 [info] [raftstore]: shard 2 send snap complete
2021/08/20 13:00:39.145461 [info] [transport]: shard 2 pending snap sent succ, size=<126>, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 13:00:39.145973 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 13:00:39.1310746 +0800 CST m=+157.246160501, startAt:2021-08-20 13:00:39.1311126 +0800 CST m=+157.246198501, currentStep:2, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]) finished) finish, takes 14.842ms, 
2021/08/20 13:00:39.292030 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 13:00:39.292053 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 13:00:39.292064 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:9 TruncatedState:{Index:9 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:39.292072 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 start applying snapshot
2021/08/20 13:00:39.292087 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 13:00:39.292213 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 add registration job by handleRaftReadyApply
2021/08/20 13:00:39.292227 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 applying snapshot to set read 9
2021/08/20 13:00:39.292245 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:39.292259 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:39.292265 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 AdvanceApply with 9
2021/08/20 13:00:39.292289 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_9.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:2 version:1 > peers:<id:8 containerID:7 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:9 
2021/08/20 13:00:39.292314 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:9 XXX_unrecognized:[]}
2021/08/20 13:00:39.292317 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 add registration job by handleRaftReadyApply, completed
2021-08-20 13:00:39.556911 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:2b8c8af41a1b2fbb RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:39.557+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-759c2181-0009-4cab-8ba8-067d1e34bac5/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:39.557085 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:40.057306 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:e411c5b0b76539af RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:40.057+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-759c2181-0009-4cab-8ba8-067d1e34bac5/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:40.057441 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:40.130627 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:40.558646 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:e411c5b0b76539af RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:40.558+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-759c2181-0009-4cab-8ba8-067d1e34bac5/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:40.558787 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:41.059240 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:7fe4fe00aaeec704 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:41.059+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-759c2181-0009-4cab-8ba8-067d1e34bac5/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:41.059369 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:41.130235 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:41.560153 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:7fe4fe00aaeec704 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:41.560+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-759c2181-0009-4cab-8ba8-067d1e34bac5/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:41.560296 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:42.060511 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:3f0d03572fe755d6 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:42.060+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-759c2181-0009-4cab-8ba8-067d1e34bac5/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:42.060638 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:42.130912 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:42.561594 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:3f0d03572fe755d6 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:42.561+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-759c2181-0009-4cab-8ba8-067d1e34bac5/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:42.561738 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:43.062161 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:47329283c8c4358d RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:43.062+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-759c2181-0009-4cab-8ba8-067d1e34bac5/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:43.062303 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:43.130548 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:43.562550 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:47329283c8c4358d RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:43.562+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-759c2181-0009-4cab-8ba8-067d1e34bac5/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:43.562696 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-08-20T13:00:44.064+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(163047344906581398 772680865137736189 10650127570946328820)"}
2021-08-20 13:00:44.064663 I | etcdserver/membership: added member 24342b242ba3596 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:00:44.064671 I | rafthttp: starting peer 24342b242ba3596...
2021-08-20 13:00:44.064678 I | rafthttp: started HTTP pipelining with peer 24342b242ba3596
{"level":"info","ts":"2021-08-20T13:00:44.064+0800","caller":"raft/raft.go:1550","msg":"ab91d272b46b9fd switched to configuration voters=(163047344906581398 772680865137736189 10650127570946328820)"}
2021-08-20 13:00:44.064717 I | etcdserver/membership: added member 24342b242ba3596 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:00:44.064734 I | rafthttp: starting peer 24342b242ba3596...
2021-08-20 13:00:44.064743 I | rafthttp: started HTTP pipelining with peer 24342b242ba3596
2021-08-20 13:00:44.064935 I | rafthttp: started streaming with peer 24342b242ba3596 (writer)
2021-08-20 13:00:44.065023 I | rafthttp: started streaming with peer 24342b242ba3596 (writer)
2021-08-20 13:00:44.065095 I | rafthttp: started streaming with peer 24342b242ba3596 (writer)
2021-08-20 13:00:44.065201 I | rafthttp: started streaming with peer 24342b242ba3596 (writer)
2021-08-20 13:00:44.065717 I | rafthttp: started peer 24342b242ba3596
2021-08-20 13:00:44.065732 I | rafthttp: started streaming with peer 24342b242ba3596 (stream MsgApp v2 reader)
2021-08-20 13:00:44.065742 I | rafthttp: started streaming with peer 24342b242ba3596 (stream Message reader)
2021-08-20 13:00:44.065749 I | rafthttp: started peer 24342b242ba3596
2021-08-20 13:00:44.065760 I | rafthttp: added peer 24342b242ba3596
2021-08-20 13:00:44.065763 I | rafthttp: added peer 24342b242ba3596
2021-08-20 13:00:44.065780 I | rafthttp: started streaming with peer 24342b242ba3596 (stream Message reader)
2021-08-20 13:00:44.065816 I | rafthttp: started streaming with peer 24342b242ba3596 (stream MsgApp v2 reader)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:44.066210 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:44.066250 I | embed: name = node-2
2021-08-20 13:00:44.066261 I | embed: data dir = /tmp/cube/node-2/prophet
2021-08-20 13:00:44.066263 I | embed: member dir = /tmp/cube/node-2/prophet/member
2021-08-20 13:00:44.066264 I | embed: heartbeat = 100ms
2021-08-20 13:00:44.066266 I | embed: election = 3000ms
2021-08-20 13:00:44.066267 I | embed: snapshot count = 100000
2021-08-20 13:00:44.066269 I | embed: advertise client URLs = http://127.0.0.1:40002
2021-08-20 13:00:44.070516 I | etcdserver: starting member 24342b242ba3596 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:44.070+0800","caller":"raft/raft.go:1550","msg":"24342b242ba3596 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:44.070+0800","caller":"raft/raft.go:711","msg":"24342b242ba3596 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:44.070+0800","caller":"raft/raft.go:388","msg":"newRaft 24342b242ba3596 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 13:00:44.072293 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:44.075501 I | rafthttp: started HTTP pipelining with peer ab91d272b46b9fd
2021-08-20 13:00:44.075518 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:44.075522 I | rafthttp: starting peer ab91d272b46b9fd...
2021-08-20 13:00:44.075536 I | rafthttp: started HTTP pipelining with peer ab91d272b46b9fd
2021-08-20 13:00:44.075705 I | rafthttp: started streaming with peer ab91d272b46b9fd (writer)
2021-08-20 13:00:44.075892 I | rafthttp: started streaming with peer ab91d272b46b9fd (writer)
2021-08-20 13:00:44.076375 I | rafthttp: started peer ab91d272b46b9fd
2021-08-20 13:00:44.076388 I | rafthttp: added peer ab91d272b46b9fd
2021-08-20 13:00:44.076391 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 13:00:44.076393 I | rafthttp: started streaming with peer ab91d272b46b9fd (stream MsgApp v2 reader)
2021-08-20 13:00:44.076397 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:44.076405 I | rafthttp: started streaming with peer ab91d272b46b9fd (stream Message reader)
2021-08-20 13:00:44.076578 I | rafthttp: peer 24342b242ba3596 became active
2021-08-20 13:00:44.076596 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:44.076603 I | rafthttp: peer ab91d272b46b9fd became active
2021-08-20 13:00:44.076615 I | rafthttp: established a TCP streaming connection with peer ab91d272b46b9fd (stream Message reader)
2021-08-20 13:00:44.076626 I | rafthttp: established a TCP streaming connection with peer 24342b242ba3596 (stream Message writer)
2021-08-20 13:00:44.076661 I | rafthttp: established a TCP streaming connection with peer ab91d272b46b9fd (stream MsgApp v2 reader)
2021-08-20 13:00:44.076845 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:44.076893 I | rafthttp: established a TCP streaming connection with peer 24342b242ba3596 (stream MsgApp v2 writer)
2021-08-20 13:00:44.077192 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 13:00:44.077206 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 13:00:44.077210 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:44.077217 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:44.077227 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:44.077429 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 13:00:44.077476 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:44.077484 I | rafthttp: peer 24342b242ba3596 became active
2021-08-20 13:00:44.077491 I | embed: listening for peers on 127.0.0.1:50002
2021-08-20 13:00:44.077518 I | rafthttp: established a TCP streaming connection with peer 24342b242ba3596 (stream Message writer)
2021-08-20 13:00:44.077569 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:44.077666 I | rafthttp: established a TCP streaming connection with peer 24342b242ba3596 (stream MsgApp v2 writer)
2021-08-20 13:00:44.098149 I | etcdserver: ab91d272b46b9fd initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
{"level":"info","ts":"2021-08-20T13:00:44.123+0800","caller":"raft/raft.go:870","msg":"24342b242ba3596 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T13:00:44.123+0800","caller":"raft/raft.go:711","msg":"24342b242ba3596 became follower at term 2"}
{"level":"info","ts":"2021-08-20T13:00:44.123+0800","caller":"raft/node.go:325","msg":"raft.node: 24342b242ba3596 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:44.125+0800","caller":"raft/raft.go:1550","msg":"24342b242ba3596 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:44.125133 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:44.125177 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T13:00:44.125+0800","caller":"raft/raft.go:1550","msg":"24342b242ba3596 switched to configuration voters=(772680865137736189 10650127570946328820)"}
2021-08-20 13:00:44.125559 I | etcdserver/membership: added member ab91d272b46b9fd [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:44.125+0800","caller":"raft/raft.go:1550","msg":"24342b242ba3596 switched to configuration voters=(163047344906581398 772680865137736189 10650127570946328820)"}
2021-08-20 13:00:44.125780 I | etcdserver/membership: added member 24342b242ba3596 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:00:44.126271 I | etcdserver: published {Name:node-2 ClientURLs:[http://127.0.0.1:40002]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:44.126288 I | embed: ready to serve client requests
2021/08/20 13:00:44.126307 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
2021-08-20 13:00:44.126539 N | embed: serving insecure client requests on 127.0.0.1:40002, this is strongly discouraged!
2021/08/20 13:00:44.127272 [info] prophet: start system time monitor 
2021/08/20 13:00:44.127282 [info] prophet: net application started
2021-08-20 13:00:44.127333 I | etcdserver: 24342b242ba3596 initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
2021/08/20 13:00:44.127693 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 13:00:44.127702 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:44.127704 [info] prophet: ********node-2 become to follower now********
2021/08/20 13:00:44.127728 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:44.127736 [info] prophet: client read loop started 
2021/08/20 13:00:44.127786 [info] prophet: client started
2021/08/20 13:00:44.127803 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 13:00:44.127805 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:44.127787 [info] prophet: session 5[127.0.0.1:46850] connected
2021/08/20 13:00:44.127810 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:44.127836 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:44.127818 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1629435644 deployPath:"not set" 
2021/08/20 13:00:44.127842 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:44.127956 [info] [raftstore]: create local store with id 9
2021/08/20 13:00:44.128276 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 13:00:44.130109 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:44.130613 [info] prophet: container 9 limit added
2021/08/20 13:00:44.130672 [info] [raftstore]: prophet started
2021/08/20 13:00:44.130687 [info] prophet: container 9 heartbeat stream binded
2021/08/20 13:00:44.130716 [info] [transport]: net application started
2021/08/20 13:00:44.130730 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/08/20 13:00:44.130736 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:44.130740 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:44.130742 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:44.130743 [info] [raftstore]: shards started
2021/08/20 13:00:44.130744 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:44.130747 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:44.130750 [info] [raftstore]: net application started
2021/08/20 13:00:44.130752 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/08/20 13:00:44.130761 [info] [raftstore]: router started
2021/08/20 13:00:44.130783 [info] [raftstore]: raft worker 1/0 start
2021/08/20 13:00:44.130796 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:44.130846 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:44.130858 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:44.130869 [info] [raftstore]: router event loop task started
2021/08/20 13:00:44.130869 [info] prophet: session 6[127.0.0.1:46852] connected
2021/08/20 13:00:44.130895 [info] prophet: new watcher 127.0.0.1:46852 added
2021/08/20 13:00:44.130970 [info] [raftstore]: start init event
2021/08/20 13:00:44.160372 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 13:00:44.1603524 +0800 CST m=+162.275438201, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 10 on container 9, promote learner peer 10 on container 9 to voter]), 
2021/08/20 13:00:44.160393 [info] prophet: resource 2 send schedule command, step add learner peer 10 on container 9, source create
2021/08/20 13:00:44.160440 [info] prophet: resource 4 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:4(1,1), createAt:2021-08-20 13:00:44.1604321 +0800 CST m=+162.275518001, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 11 on container 7, promote learner peer 11 on container 7 to voter]), 
2021/08/20 13:00:44.160455 [info] prophet: resource 4 send schedule command, step add learner peer 11 on container 7, source create
2021/08/20 13:00:44.160532 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.160551 [info] [raftstore]: shard-4 AddLearnerNode peer {ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.162695 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.162706 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.162816 [info] [raftstore]: shard 4 do apply change peer changeType:AddLearnerNode peer:<id:11 containerID:7 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.162835 [info] [raftstore]: shard-4 add learner peer {ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.162858 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:10 containerID:9 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.162872 [info] [raftstore]: shard-2 add learner peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:44.162+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 8) learners=(10)"}
2021/08/20 13:00:44.162918 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:10 containerID:9 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.162942 [info] [raftstore]: shard-2 add learner peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.162926 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:10 XXX_unrecognized:[]}] Context:[10 32 10 16 112 45 218 102 62 145 65 84 161 210 233 80 63 5 132 36 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 10 16 9 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.162961 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:44.162+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(3 8) learners=(10)"}
2021/08/20 13:00:44.163026 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.163046 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/08/20 13:00:44.163883 [info] [transport]: connected to store 9
2021/08/20 13:00:44.163925 [info] [transport]: session 1[127.0.0.1:49122] connected
2021/08/20 13:00:44.163953 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 13:00:44.163976 [info] [raftstore]: shard 2 replicate peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.163998 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.164011 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.164012 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T13:00:44.164+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:44.164+0800","caller":"raft/raft.go:711","msg":"a became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:44.164+0800","caller":"raft/raft.go:388","msg":"newRaft a [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 13:00:44.164006 [info] prophet: resource 2 send schedule command, step promote learner peer 10 on container 9 to voter, source heartbeat
2021/08/20 13:00:44.164087 [info] [raftstore]: shard 2 added with peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T13:00:44.164+0800","caller":"raft/raft.go:870","msg":"a [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
2021/08/20 13:00:44.164180 [info] [raftstore]: shard-2 AddNode peer {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-08-20T13:00:44.164+0800","caller":"raft/raft.go:711","msg":"a became follower at term 6"}
2021/08/20 13:00:44.164259 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 10 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:44.164864 [info] [transport]: connected to store 1
2021/08/20 13:00:44.164878 [info] [transport]: session 2[127.0.0.1:44420] connected
2021/08/20 13:00:44.164933 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.165042 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 10 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:44.165095 [info] [raftstore]: shard 2 do apply change peer peer:<id:10 containerID:9 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.165113 [info] [raftstore]: shard-2 add peer {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.165119 [info] [raftstore]: shard 2 do apply change peer peer:<id:10 containerID:9 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.165126 [info] [raftstore]: shard-2 add peer {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T13:00:44.165+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:44.165154 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T13:00:44.165+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 8 10)"}
{"level":"error","ts":"2021-08-20T13:00:44.165+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:44.165282 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:10 XXX_unrecognized:[]}] Context:[10 32 10 16 221 179 69 178 212 157 66 115 160 210 126 64 240 250 20 168 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 10 16 9] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.165299 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:44.165+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(3 8 10)"}
2021/08/20 13:00:44.165378 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 10 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:44.165382 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/08/20 13:00:44.165394 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T13:00:44.165+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:44.165560 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<11> 
2021-08-20 13:00:44.166202 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:00:44.166222 I | rafthttp: established a TCP streaming connection with peer ab91d272b46b9fd (stream Message writer)
2021-08-20 13:00:44.166224 I | rafthttp: established a TCP streaming connection with peer 24342b242ba3596 (stream Message reader)
2021-08-20 13:00:44.166229 I | rafthttp: established a TCP streaming connection with peer 24342b242ba3596 (stream MsgApp v2 reader)
2021-08-20 13:00:44.166241 I | rafthttp: established a TCP streaming connection with peer 24342b242ba3596 (stream Message reader)
2021-08-20 13:00:44.166245 I | rafthttp: established a TCP streaming connection with peer 24342b242ba3596 (stream MsgApp v2 reader)
2021/08/20 13:00:44.166290 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 13:00:44.1603524 +0800 CST m=+162.275438201, startAt:2021-08-20 13:00:44.1603871 +0800 CST m=+162.275472901, currentStep:2, steps:[add learner peer 10 on container 9, promote learner peer 10 on container 9 to voter]) finished) finish, takes 5.8831ms, 
2021-08-20 13:00:44.166552 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:00:44.166687 I | rafthttp: established a TCP streaming connection with peer ab91d272b46b9fd (stream MsgApp v2 writer)
{"level":"info","ts":"2021-08-20T13:00:44.171+0800","caller":"raft/raft.go:1550","msg":"5 switched to configuration voters=(5) learners=(11)"}
2021/08/20 13:00:44.171967 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:11 XXX_unrecognized:[]}] Context:[10 32 10 16 166 208 248 144 246 171 74 112 165 254 70 53 253 42 33 148 16 4 26 4 8 5 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 11 16 7 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.171980 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddLearnerNode Peer:{ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.172036 [info] [raftstore]: shard 4 target peer doesn't exist, peer=<{ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 13:00:44.172037 [info] [raftstore]: shard 4 replicate peer {ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.172061 [info] prophet: resource 4 ConfVer changed from 1 to 2
2021/08/20 13:00:44.172062 [info] [raftstore]: shard 4 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.172068 [info] [raftstore]: shard 4 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.172069 [info] [raftstore]: shard 4 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T13:00:44.172+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:44.172+0800","caller":"raft/raft.go:711","msg":"b became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:44.172+0800","caller":"raft/raft.go:388","msg":"newRaft b [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 13:00:44.172127 [info] [raftstore]: shard 4 added with peer {ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-1-0
{"level":"info","ts":"2021-08-20T13:00:44.172+0800","caller":"raft/raft.go:870","msg":"b [term: 0] received a MsgHeartbeat message with higher term from 5 [term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:44.172+0800","caller":"raft/raft.go:711","msg":"b became follower at term 6"}
2021/08/20 13:00:44.172203 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:44.172251 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:44.172+0800","caller":"raft/log.go:354","msg":"5 >>>>>>>>>>>>>>>> [1:8:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:44.172323 [info] [raftstore]: shard 4 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.172559 [info] [raftstore]: shard 4 snapshot created, epoch=<confVer:2 version:1 > term=<6> index=<7> 
2021/08/20 13:00:44.175068 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:44.175405 [info] prophet: resource 4 send schedule command, step promote learner peer 11 on container 7 to voter, source heartbeat
2021/08/20 13:00:44.175446 [info] [raftstore]: shard-4 AddNode peer {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.182008 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddNode Peer:{ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T13:00:44.182+0800","caller":"raft/log.go:354","msg":"5 >>>>>>>>>>>>>>>> [1:9:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1090\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).ProposeConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChangeInternal\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:262\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:232\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).propose\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:141\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleRequest\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:187\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:447\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:44.182127 [info] [transport]: shard 4 start send pending snap, epoch=<confVer:2 version:1 > term=<6> index=<7>
{"level":"info","ts":"2021-08-20T13:00:44.182+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 7, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:44.182+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(5 11)"}
{"level":"info","ts":"2021-08-20T13:00:44.182+0800","caller":"raft/raft.go:1503","msg":"b [commit: 7, lastindex: 7, lastterm: 6] restored snapshot [index: 7, term: 6]"}
2021/08/20 13:00:44.182344 [info] [raftstore]: shard 4 do apply change peer peer:<id:11 containerID:7 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:44.182+0800","caller":"raft/raft.go:1420","msg":"b [commit: 7] restored snapshot [index: 7, term: 6]"}
2021/08/20 13:00:44.182394 [info] [raftstore]: shard 4 peer 11 receiving snapshot, skip further handling
2021/08/20 13:00:44.182396 [info] [raftstore]: shard-4 add peer {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.182510 [info] [raftstore]: shard 4 try to send snap, header=<shard:<id:4 start:"a" end:"b" epoch:<confVer:2 version:1 > peers:<id:5 containerID:1 > peers:<id:11 containerID:7 role:Learner > group:1 > from:<id:5 containerID:1 > to:<id:11 containerID:7 role:Learner > term:6 index:7 >,size=<126>
2021/08/20 13:00:44.182546 [info] [raftstore]: shard 4 send snap complete
2021/08/20 13:00:44.182559 [info] [transport]: shard 4 pending snap sent succ, size=<126>, epoch=<confVer:2 version:1 > term=<6> index=<7>
{"level":"info","ts":"2021-08-20T13:00:44.191+0800","caller":"raft/raft.go:1550","msg":"5 switched to configuration voters=(5 11)"}
2021/08/20 13:00:44.191938 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:11 XXX_unrecognized:[]}] Context:[10 32 10 16 102 59 159 228 124 50 72 173 149 62 75 67 43 254 102 207 16 4 26 4 8 5 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 11 16 7] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.191949 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddNode Peer:{ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.192020 [info] [raftstore]: shard 4 begin to apply snapshot
2021/08/20 13:00:44.192040 [info] [raftstore]: shard 4 clear 0 meta keys and 0 raft keys
2021/08/20 13:00:44.192050 [info] [raftstore]: shard 4 apply snapshot state completed, apply state {AppliedIndex:7 TruncatedState:{Index:7 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.192058 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 start applying snapshot
2021/08/20 13:00:44.192062 [info] [raftstore]: shard 4 begin apply snapshot data
2021/08/20 13:00:44.192120 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 add registration job by handleRaftReadyApply
2021/08/20 13:00:44.192133 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 applying snapshot to set read 7
2021/08/20 13:00:44.192146 [info] [raftstore]: shard 4 snapshot is applied, shard=<{ID:4 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:1 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.192067 [info] prophet: resource 4 ConfVer changed from 2 to 3
2021/08/20 13:00:44.192169 [info] [raftstore]: shard 4 shard changed after apply snapshot, from=<{ID:4 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:1 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:4 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:1 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.192175 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 AdvanceApply with 7
2021/08/20 13:00:44.192260 [info] [raftstore]: shard 4 delete exists snap gz file /tmp/cube/node-1/snapshots/4_6_7.gz, header is shard:<id:4 start:"a" end:"b" epoch:<confVer:2 version:1 > peers:<id:5 containerID:1 > peers:<id:11 containerID:7 role:Learner > group:1 > from:<> to:<> term:6 index:7 
2021/08/20 13:00:44.192311 [info] [raftstore]: shard 4 apply snapshot data complete, {Term:6 Vote:0 Commit:7 XXX_unrecognized:[]}
2021/08/20 13:00:44.192326 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 11 add registration job by handleRaftReadyApply, completed
2021/08/20 13:00:44.193494 [info] prophet: resource 4 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:4(1,1), createAt:2021-08-20 13:00:44.1604321 +0800 CST m=+162.275518001, startAt:2021-08-20 13:00:44.1604515 +0800 CST m=+162.275537401, currentStep:2, steps:[add learner peer 11 on container 7, promote learner peer 11 on container 7 to voter]) finished) finish, takes 33.0333ms, 
2021/08/20 13:00:44.241791 [info] [raftstore]: shard 4 do apply change peer peer:<id:11 containerID:7 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.241815 [info] [raftstore]: shard-4 add peer {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:44.241+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(5 11)"}
2021/08/20 13:00:44.241870 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddNode Peer:{ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.260839 [info] prophet: resource 4 add operator add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:4(1,3), createAt:2021-08-20 13:00:44.2608198 +0800 CST m=+162.375905701, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 12 on container 9, promote learner peer 12 on container 9 to voter]), 
2021/08/20 13:00:44.260860 [info] prophet: resource 4 send schedule command, step add learner peer 12 on container 9, source create
2021/08/20 13:00:44.260945 [info] [raftstore]: shard-4 AddLearnerNode peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.262039 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.262249 [info] [raftstore]: shard 4 do apply change peer changeType:AddLearnerNode peer:<id:12 containerID:9 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.262266 [info] [raftstore]: shard 4 do apply change peer changeType:AddLearnerNode peer:<id:12 containerID:9 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.262276 [info] [raftstore]: shard-4 add learner peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.262266 [info] [raftstore]: shard-4 add learner peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:44.262+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(5 11) learners=(12)"}
2021/08/20 13:00:44.262389 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:44.272+0800","caller":"raft/raft.go:1550","msg":"5 switched to configuration voters=(5 11) learners=(12)"}
2021/08/20 13:00:44.272396 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:12 XXX_unrecognized:[]}] Context:[10 32 10 16 3 240 205 178 31 87 65 217 181 220 178 125 131 172 130 36 16 4 26 4 8 5 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 12 16 9 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.272408 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.272470 [info] [raftstore]: shard 4 target peer doesn't exist, peer=<{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 13:00:44.272491 [info] [raftstore]: shard 4 replicate peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.272494 [info] prophet: resource 4 ConfVer changed from 3 to 4
2021/08/20 13:00:44.272498 [info] [raftstore]: shard 4 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.272502 [info] [raftstore]: shard 4 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.272504 [info] [raftstore]: shard 4 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T13:00:44.272+0800","caller":"raft/raft.go:1550","msg":"c switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:44.272+0800","caller":"raft/raft.go:711","msg":"c became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:44.272+0800","caller":"raft/raft.go:388","msg":"newRaft c [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 13:00:44.272568 [info] [raftstore]: shard 4 added with peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-1-0
{"level":"info","ts":"2021-08-20T13:00:44.272+0800","caller":"raft/raft.go:870","msg":"c [term: 0] received a MsgHeartbeat message with higher term from 5 [term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:44.272+0800","caller":"raft/raft.go:711","msg":"c became follower at term 6"}
2021/08/20 13:00:44.272637 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 12 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:44.272770 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 12 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:44.272+0800","caller":"raft/log.go:354","msg":"5 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:44.272855 [info] [raftstore]: shard 4 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.273244 [info] [raftstore]: shard 4 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<9> 
2021/08/20 13:00:44.273771 [info] prophet: resource 4 send schedule command, step promote learner peer 12 on container 9 to voter, source heartbeat
2021/08/20 13:00:44.273843 [info] [raftstore]: shard-4 AddNode peer {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.282359 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T13:00:44.282+0800","caller":"raft/log.go:354","msg":"5 >>>>>>>>>>>>>>>> [1:11:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1090\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).ProposeConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChangeInternal\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:262\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).proposeConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:232\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).propose\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:141\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleRequest\n\t/root/projects/matrixcube/raftstore/peer_event_proposal.go:98\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:187\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:447\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:44.282486 [info] [transport]: shard 4 start send pending snap, epoch=<confVer:4 version:1 > term=<6> index=<9>
2021/08/20 13:00:44.282587 [info] [raftstore]: shard 4 try to send snap, header=<shard:<id:4 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:5 containerID:1 > peers:<id:11 containerID:7 > peers:<id:12 containerID:9 role:Learner > group:1 > from:<id:5 containerID:1 > to:<id:12 containerID:9 role:Learner > term:6 index:9 >,size=<127>
2021/08/20 13:00:44.282619 [info] [raftstore]: shard 4 send snap complete
2021/08/20 13:00:44.282624 [info] [raftstore]: shard 4 do apply change peer peer:<id:12 containerID:9 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.282626 [info] [transport]: shard 4 pending snap sent succ, size=<127>, epoch=<confVer:4 version:1 > term=<6> index=<9>
2021/08/20 13:00:44.282635 [info] [raftstore]: shard-4 add peer {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.282653 [info] [transport]: connected to store 9
2021/08/20 13:00:44.282662 [info] [transport]: session 2[127.0.0.1:49134] connected
{"level":"info","ts":"2021-08-20T13:00:44.282+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:44.282+0800","caller":"raft/raft.go:1550","msg":"c switched to configuration voters=(5 11 12)"}
{"level":"info","ts":"2021-08-20T13:00:44.282+0800","caller":"raft/raft.go:1503","msg":"c [commit: 9, lastindex: 9, lastterm: 6] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:44.282+0800","caller":"raft/raft.go:1420","msg":"c [commit: 9] restored snapshot [index: 9, term: 6]"}
2021/08/20 13:00:44.282829 [info] [raftstore]: shard 4 begin to apply snapshot
2021/08/20 13:00:44.282843 [info] [raftstore]: shard 4 clear 0 meta keys and 0 raft keys
2021/08/20 13:00:44.282850 [info] [raftstore]: shard 4 do apply change peer peer:<id:12 containerID:9 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.282850 [info] [raftstore]: shard 4 apply snapshot state completed, apply state {AppliedIndex:9 TruncatedState:{Index:9 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.282860 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 12 start applying snapshot
2021/08/20 13:00:44.282862 [info] [raftstore]: shard-4 add peer {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:44.282+0800","caller":"raft/raft.go:1550","msg":"5 switched to configuration voters=(5 11 12)"}
2021/08/20 13:00:44.282863 [info] [raftstore]: shard 4 begin apply snapshot data
{"level":"info","ts":"2021-08-20T13:00:44.282+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(5 11 12)"}
2021/08/20 13:00:44.282893 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:12 XXX_unrecognized:[]}] Context:[10 32 10 16 67 231 175 54 22 213 66 107 147 190 163 67 194 26 2 122 16 4 26 4 8 5 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 12 16 9] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.282930 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.282918 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.283006 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 12 add registration job by handleRaftReadyApply
2021/08/20 13:00:44.283011 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 12 applying snapshot to set read 9
2021/08/20 13:00:44.283023 [info] [raftstore]: shard 4 delete exists snap gz file /tmp/cube/node-2/snapshots/4_6_9.gz, header is shard:<id:4 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:12 containerID:9 role:Learner > peers:<id:5 containerID:1 > group:1 > from:<> to:<> term:6 index:9 
2021/08/20 13:00:44.283066 [info] [raftstore]: shard 4 apply snapshot data complete, {Term:6 Vote:0 Commit:9 XXX_unrecognized:[]}
2021/08/20 13:00:44.283082 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 12 add registration job by handleRaftReadyApply, completed
2021/08/20 13:00:44.283023 [info] [raftstore]: shard 4 snapshot is applied, shard=<{ID:4 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:1 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.283101 [info] [raftstore]: shard 4 shard changed after apply snapshot, from=<{ID:4 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:1 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:4 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:1 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.283118 [error] [raftstore]: >>>>>>>>>>>> shard 4 peer 12 AdvanceApply with 9
2021/08/20 13:00:44.283027 [info] prophet: resource 4 ConfVer changed from 4 to 5
2021/08/20 13:00:44.283176 [info] [raftstore]: shard 4 do apply change peer peer:<id:12 containerID:9 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.283186 [info] [raftstore]: shard-4 add peer {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:44.283+0800","caller":"raft/raft.go:1550","msg":"c switched to configuration voters=(5 11 12)"}
2021/08/20 13:00:44.283244 [info] [raftstore]: shard 4 applied changes [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.284237 [info] prophet: resource 4 operator(add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:4(1,3), createAt:2021-08-20 13:00:44.2608198 +0800 CST m=+162.375905701, startAt:2021-08-20 13:00:44.2608548 +0800 CST m=+162.375940601, currentStep:2, steps:[add learner peer 12 on container 9, promote learner peer 12 on container 9 to voter]) finished) finish, takes 23.373ms, 
2021/08/20 13:00:44.291648 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 10 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:44.291+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:44.291710 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 13:00:44.292340 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:5 version:1 > peers:<id:3 containerID:1 > peers:<id:8 containerID:7 > peers:<id:10 containerID:9 > > from:<id:3 containerID:1 > to:<id:10 containerID:9 role:Learner > term:6 index:11 >,size=<125>
{"level":"info","ts":"2021-08-20T13:00:44.292+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:44.292+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=(3 8 10)"}
{"level":"info","ts":"2021-08-20T13:00:44.292+0800","caller":"raft/raft.go:1503","msg":"a [commit: 11, lastindex: 11, lastterm: 6] restored snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:44.292+0800","caller":"raft/raft.go:1420","msg":"a [commit: 11] restored snapshot [index: 11, term: 6]"}
2021/08/20 13:00:44.293487 [info] [raftstore]: shard 2 send snap complete
2021/08/20 13:00:44.293517 [info] [transport]: shard 2 pending snap sent succ, size=<125>, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 13:00:44.294824 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 13:00:44.294856 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 13:00:44.294918 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:11 TruncatedState:{Index:11 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.294952 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 10 start applying snapshot
2021/08/20 13:00:44.294988 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 13:00:44.295108 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 10 add registration job by handleRaftReadyApply
2021/08/20 13:00:44.295120 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 10 applying snapshot to set read 11
2021/08/20 13:00:44.295139 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.295179 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.295210 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 10 AdvanceApply with 11
2021/08/20 13:00:44.295227 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_11.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:10 containerID:9 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:11 
2021/08/20 13:00:44.295577 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:11 XXX_unrecognized:[]}
2021/08/20 13:00:44.295593 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 10 add registration job by handleRaftReadyApply, completed
2021/08/20 13:00:44.333495 [info] prophet: resource 13 created with peers [{ID:14 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:44.334934 [info] [raftstore]: shard 13 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.334950 [info] [raftstore]: shard 13 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.334951 [info] [raftstore]: shard 13 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:44.334+0800","caller":"raft/raft.go:1550","msg":"f switched to configuration voters=(14 15 16)"}
{"level":"info","ts":"2021-08-20T13:00:44.334+0800","caller":"raft/raft.go:711","msg":"f became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:388","msg":"newRaft f [peers: [e,f,10], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:44.334935 [info] [raftstore]: shard 13 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.335053 [info] [raftstore]: shard 13 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.335055 [info] [raftstore]: shard 13 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:1550","msg":"e switched to configuration voters=(14 15 16)"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:711","msg":"e became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:388","msg":"newRaft e [peers: [e,f,10], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:44.335080 [info] [raftstore]: shard 13 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:934","msg":"e is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:724","msg":"e became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:835","msg":"e received MsgVoteResp from e at term 6"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:822","msg":"e [logterm: 5, index: 5] sent MsgVote request to f at term 6"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:822","msg":"e [logterm: 5, index: 5] sent MsgVote request to 10 at term 6"}
2021/08/20 13:00:44.335110 [info] [raftstore]: shard 13 added with peer {ID:14 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:14 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-1-0
2021/08/20 13:00:44.334935 [info] [raftstore]: shard 13 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:44.335143 [info] [raftstore]: create init shard id:13 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:14 containerID:9 > peers:<id:15 containerID:7 > peers:<id:16 containerID:1 > group:1 unique:"abc" 
2021/08/20 13:00:44.335149 [error] [raftstore]: >>>>>>>>>>>> shard 13 peer 14 add registration job by doCreate
2021/08/20 13:00:44.335032 [info] [raftstore]: shard 13 added with peer {ID:15 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:14 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-1-0
2021/08/20 13:00:44.335170 [error] [raftstore]: >>>>>>>>>>>> shard 13 peer 14 add registration job by doCreate, completed
2021/08/20 13:00:44.335175 [info] [raftstore]: create init shard id:13 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:14 containerID:9 > peers:<id:15 containerID:7 > peers:<id:16 containerID:1 > group:1 unique:"abc" 
2021/08/20 13:00:44.335187 [error] [raftstore]: >>>>>>>>>>>> shard 13 peer 15 add registration job by doCreate
2021/08/20 13:00:44.335192 [error] [raftstore]: >>>>>>>>>>>> shard 13 peer 15 add registration job by doCreate, completed
2021/08/20 13:00:44.335150 [info] [raftstore]: shard 13 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:44.335197 [info] [raftstore]: shard 13 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:1550","msg":"10 switched to configuration voters=(14 15 16)"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:711","msg":"10 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:388","msg":"newRaft 10 [peers: [e,f,10], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:44.335290 [info] [raftstore]: shard 13 added with peer {ID:16 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:14 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-1-0
2021/08/20 13:00:44.335307 [info] [raftstore]: create init shard id:13 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:14 containerID:9 > peers:<id:15 containerID:7 > peers:<id:16 containerID:1 > group:1 unique:"abc" 
2021/08/20 13:00:44.335322 [error] [raftstore]: >>>>>>>>>>>> shard 13 peer 16 add registration job by doCreate
2021/08/20 13:00:44.335326 [error] [raftstore]: >>>>>>>>>>>> shard 13 peer 16 add registration job by doCreate, completed
2021/08/20 13:00:44.335767 [info] [transport]: session 3[127.0.0.1:38516] connected
2021/08/20 13:00:44.335768 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:870","msg":"10 [term: 5] received a MsgVote message with higher term from e [term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:870","msg":"f [term: 5] received a MsgVote message with higher term from e [term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:711","msg":"10 became follower at term 6"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:711","msg":"f became follower at term 6"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:971","msg":"10 [logterm: 5, index: 5, vote: 0] cast MsgVote for e [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:971","msg":"f [logterm: 5, index: 5, vote: 0] cast MsgVote for e [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:835","msg":"e received MsgVoteResp from 10 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:1319","msg":"e has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T13:00:44.335+0800","caller":"raft/raft.go:776","msg":"e became leader at term 6"}
2021/08/20 13:00:44.335954 [info] [raftstore]: shard 13 ********become leader now********
2021/08/20 13:00:44.336301 [info] [transport]: connected to store 9
2021/08/20 13:00:44.336315 [info] [transport]: session 3[127.0.0.1:49138] connected
2021/08/20 13:00:44.435915 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:46748->127.0.0.1:30000: use of closed network connection
2021/08/20 13:00:44.435934 [error] prophet: client read loop stopped
2021/08/20 13:00:44.435941 [error] prophet: session 4[127.0.0.1:46784] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46784: use of closed network connection
2021/08/20 13:00:44.435956 [error] prophet: session 2[127.0.0.1:46750] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46750: use of closed network connection
2021/08/20 13:00:44.435965 [error] prophet: session 5[127.0.0.1:46850] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46850: use of closed network connection
2021/08/20 13:00:44.435970 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:44.435974 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:44.435978 [error] prophet: session 3[127.0.0.1:46782] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46782: use of closed network connection
2021/08/20 13:00:44.435981 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 13:00:44.435984 [error] prophet: session 6[127.0.0.1:46852] read failed with read tcp 127.0.0.1:30000->127.0.0.1:46852: use of closed network connection
2021/08/20 13:00:44.435985 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 13:00:44.435991 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:44.435995 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:44.435997 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:44.435998 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:44.436009 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:44.436011 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:44.436083 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 13:00:44.436101 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 13:00:44.437006 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 13:00:44.437039 [info] prophet: drive push operator has been stopped 
2021/08/20 13:00:44.437041 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/08/20 13:00:44.437053 [info] prophet: coordinator is stopping
2021/08/20 13:00:44.437080 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/08/20 13:00:44.437106 [info] prophet: patrol resources has been stopped 
2021/08/20 13:00:44.437081 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 13:00:44.437113 [info] prophet: coordinator has been stopped
2021-08-20 13:00:44.437108 I | etcdserver: 93ccda9956d988f4 starts leadership transfer from 93ccda9956d988f4 to ab91d272b46b9fd
2021/08/20 13:00:44.437126 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/08/20 13:00:44.437128 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/08/20 13:00:44.437083 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 13:00:44.437089 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:1278","msg":"93ccda9956d988f4 [term 2] starts to transfer leadership to ab91d272b46b9fd"}
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:1284","msg":"93ccda9956d988f4 sends MsgTimeoutNow to ab91d272b46b9fd immediately as ab91d272b46b9fd already has up-to-date log"}
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:1372","msg":"ab91d272b46b9fd [term 2] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:724","msg":"ab91d272b46b9fd became candidate at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:835","msg":"ab91d272b46b9fd received MsgVoteResp from ab91d272b46b9fd at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:822","msg":"ab91d272b46b9fd [logterm: 2, index: 36] sent MsgVote request to 24342b242ba3596 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:822","msg":"ab91d272b46b9fd [logterm: 2, index: 36] sent MsgVote request to 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/node.go:331","msg":"raft.node: ab91d272b46b9fd lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:912","msg":"ab91d272b46b9fd [term: 3] ignored a MsgReadIndexResp message with lower term from 93ccda9956d988f4 [term: 2]"}
2021/08/20 13:00:44.437635 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/08/20 13:00:44.437646 [info] prophet: [prophet-leader/node-2]/campaign: start
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:870","msg":"24342b242ba3596 [term: 2] received a MsgVote message with higher term from ab91d272b46b9fd [term: 3]"}
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:711","msg":"24342b242ba3596 became follower at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/raft.go:971","msg":"24342b242ba3596 [logterm: 2, index: 36, vote: 0] cast MsgVote for ab91d272b46b9fd [logterm: 2, index: 36] at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/node.go:331","msg":"raft.node: 24342b242ba3596 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.437+0800","caller":"raft/raft.go:870","msg":"93ccda9956d988f4 [term: 2] received a MsgVote message with higher term from ab91d272b46b9fd [term: 3]"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/raft.go:971","msg":"93ccda9956d988f4 [logterm: 2, index: 36, vote: 0] cast MsgVote for ab91d272b46b9fd [logterm: 2, index: 36] at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/node.go:331","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/raft.go:835","msg":"ab91d272b46b9fd received MsgVoteResp from 24342b242ba3596 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/raft.go:1319","msg":"ab91d272b46b9fd has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/raft.go:776","msg":"ab91d272b46b9fd became leader at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/node.go:325","msg":"raft.node: ab91d272b46b9fd elected leader ab91d272b46b9fd at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader ab91d272b46b9fd at term 3"}
{"level":"info","ts":"2021-08-20T13:00:44.438+0800","caller":"raft/node.go:325","msg":"raft.node: 24342b242ba3596 elected leader ab91d272b46b9fd at term 3"}
{"level":"warn","ts":"2021-08-20T13:00:44.438+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-982568ee-81eb-436f-a071-4be27bfd1a85/127.0.0.1:40001","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
2021/08/20 13:00:44.442239 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/08/20 13:00:44.442257 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/08/20 13:00:44.465952 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/08/20 13:00:44.465967 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/08/20 13:00:44.467160 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/08/20 13:00:44.468252 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/08/20 13:00:44.468272 [info] prophet: ********node-1 become to leader now********
2021/08/20 13:00:44.470000 [info] prophet: load 3 containers, cost 1.6337ms
2021/08/20 13:00:44.470256 [info] prophet: load 2 resources, cost 245.4µs
2021/08/20 13:00:44.470803 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:00:44.470819 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:00:44.471090 [info] prophet: load 0 jobs
2021/08/20 13:00:44.537740 [info] prophet: [prophet-leader/node-0]/loop: exit
2021-08-20 13:00:44.537759 I | etcdserver: 93ccda9956d988f4 finished leadership transfer from 93ccda9956d988f4 to ab91d272b46b9fd (took 100.6515ms)
2021-08-20 13:00:44.537804 I | rafthttp: stopping peer ab91d272b46b9fd...
2021-08-20 13:00:44.537985 I | rafthttp: closed the TCP streaming connection with peer ab91d272b46b9fd (stream MsgApp v2 writer)
2021-08-20 13:00:44.537998 I | rafthttp: stopped streaming with peer ab91d272b46b9fd (writer)
2021-08-20 13:00:44.538004 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:44.538145 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:44.538196 I | rafthttp: closed the TCP streaming connection with peer ab91d272b46b9fd (stream Message writer)
2021-08-20 13:00:44.538210 I | rafthttp: stopped streaming with peer ab91d272b46b9fd (writer)
2021-08-20 13:00:44.538222 I | rafthttp: stopped HTTP pipelining with peer ab91d272b46b9fd
2021-08-20 13:00:44.538281 W | rafthttp: lost the TCP streaming connection with peer ab91d272b46b9fd (stream MsgApp v2 reader)
2021-08-20 13:00:44.538298 E | rafthttp: failed to read ab91d272b46b9fd on stream MsgApp v2 (context canceled)
2021-08-20 13:00:44.538300 I | rafthttp: peer ab91d272b46b9fd became inactive (message send to peer failed)
2021-08-20 13:00:44.538309 I | rafthttp: stopped streaming with peer ab91d272b46b9fd (stream MsgApp v2 reader)
2021-08-20 13:00:44.538328 W | rafthttp: lost the TCP streaming connection with peer ab91d272b46b9fd (stream Message reader)
2021-08-20 13:00:44.538345 I | rafthttp: stopped streaming with peer ab91d272b46b9fd (stream Message reader)
2021-08-20 13:00:44.538358 I | rafthttp: stopped peer ab91d272b46b9fd
2021-08-20 13:00:44.538362 I | rafthttp: stopping peer 24342b242ba3596...
2021-08-20 13:00:44.538501 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:44.538512 I | rafthttp: closed the TCP streaming connection with peer 24342b242ba3596 (stream MsgApp v2 writer)
2021-08-20 13:00:44.538515 I | rafthttp: stopped streaming with peer 24342b242ba3596 (writer)
2021-08-20 13:00:44.538639 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:44.538657 I | rafthttp: closed the TCP streaming connection with peer 24342b242ba3596 (stream Message writer)
2021-08-20 13:00:44.538660 I | rafthttp: stopped streaming with peer 24342b242ba3596 (writer)
2021-08-20 13:00:44.538668 I | rafthttp: stopped HTTP pipelining with peer 24342b242ba3596
2021-08-20 13:00:44.538695 W | rafthttp: lost the TCP streaming connection with peer 24342b242ba3596 (stream MsgApp v2 reader)
2021-08-20 13:00:44.538709 E | rafthttp: failed to read 24342b242ba3596 on stream MsgApp v2 (context canceled)
2021-08-20 13:00:44.538711 I | rafthttp: peer 24342b242ba3596 became inactive (message send to peer failed)
2021-08-20 13:00:44.538717 I | rafthttp: stopped streaming with peer 24342b242ba3596 (stream MsgApp v2 reader)
2021-08-20 13:00:44.538735 W | rafthttp: lost the TCP streaming connection with peer 24342b242ba3596 (stream Message reader)
2021-08-20 13:00:44.538750 I | rafthttp: stopped streaming with peer 24342b242ba3596 (stream Message reader)
2021-08-20 13:00:44.538753 I | rafthttp: stopped peer 24342b242ba3596
2021-08-20 13:00:44.538814 E | rafthttp: failed to find member 24342b242ba3596 in cluster 6a4ade671189dc2f
2021-08-20 13:00:44.538833 E | rafthttp: failed to find member ab91d272b46b9fd in cluster 6a4ade671189dc2f
2021-08-20 13:00:44.538861 E | rafthttp: failed to find member ab91d272b46b9fd in cluster 6a4ade671189dc2f
2021-08-20 13:00:44.538889 E | rafthttp: failed to find member 24342b242ba3596 in cluster 6a4ade671189dc2f
2021-08-20 13:00:44.538909 E | rafthttp: failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node ab91d272b46b9fd)
2021-08-20 13:00:44.538925 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021-08-20 13:00:44.538934 E | rafthttp: failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 24342b242ba3596)
2021-08-20 13:00:44.538937 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021/08/20 13:00:44.541849 [info] [raftstore]: shard 4 handle serve raft stopped
2021/08/20 13:00:44.541860 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:44.541863 [info] [raftstore]: shard 13 handle serve raft stopped
2021/08/20 13:00:44.541872 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:44.541880 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:44.541882 [info] [raftstore]: raft worker worker 1/0 exit
2021/08/20 13:00:44.541884 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:44.541884 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:44.541914 [info] [transport]: transfer stopped
2021/08/20 13:00:44.541950 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.541975 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.541980 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.541984 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.541986 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.541989 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.541989 [error] [transport]: session 2[127.0.0.1:44420] read failed with read tcp 127.0.0.1:10000->127.0.0.1:44420: use of closed network connection
2021/08/20 13:00:44.541993 [error] [transport]: session 1[127.0.0.1:44360] read failed with read tcp 127.0.0.1:10000->127.0.0.1:44360: use of closed network connection
2021/08/20 13:00:44.541993 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.541991 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.541994 [info] [transport]: send raft worker stopped
2021/08/20 13:00:44.542875 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/08/20 13:00:44.542930 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
2021/08/20 13:00:44.542934 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/08/20 13:00:44.542948 [info] prophet: coordinator stops running 
2021/08/20 13:00:44.542938 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
2021/08/20 13:00:44.542951 [info] prophet: coordinator is stopping
2021-08-20 13:00:44.542949 I | etcdserver: ab91d272b46b9fd starts leadership transfer from ab91d272b46b9fd to 24342b242ba3596
2021/08/20 13:00:44.542954 [info] prophet: coordinator has been stopped
{"level":"info","ts":"2021-08-20T13:00:44.542+0800","caller":"raft/raft.go:1278","msg":"ab91d272b46b9fd [term 3] starts to transfer leadership to 24342b242ba3596"}
{"level":"info","ts":"2021-08-20T13:00:44.542+0800","caller":"raft/raft.go:1284","msg":"ab91d272b46b9fd sends MsgTimeoutNow to 24342b242ba3596 immediately as 24342b242ba3596 already has up-to-date log"}
{"level":"info","ts":"2021-08-20T13:00:44.543+0800","caller":"raft/raft.go:1372","msg":"24342b242ba3596 [term 3] received MsgTimeoutNow from ab91d272b46b9fd and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T13:00:44.543+0800","caller":"raft/raft.go:724","msg":"24342b242ba3596 became candidate at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.543+0800","caller":"raft/raft.go:835","msg":"24342b242ba3596 received MsgVoteResp from 24342b242ba3596 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.543+0800","caller":"raft/raft.go:822","msg":"24342b242ba3596 [logterm: 3, index: 40] sent MsgVote request to ab91d272b46b9fd at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.543+0800","caller":"raft/raft.go:822","msg":"24342b242ba3596 [logterm: 3, index: 40] sent MsgVote request to 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.543+0800","caller":"raft/node.go:331","msg":"raft.node: 24342b242ba3596 lost leader ab91d272b46b9fd at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.543+0800","caller":"raft/raft.go:870","msg":"ab91d272b46b9fd [term: 3] received a MsgVote message with higher term from 24342b242ba3596 [term: 4]"}
{"level":"info","ts":"2021-08-20T13:00:44.543+0800","caller":"raft/raft.go:711","msg":"ab91d272b46b9fd became follower at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.543+0800","caller":"raft/raft.go:971","msg":"ab91d272b46b9fd [logterm: 3, index: 40, vote: 0] cast MsgVote for 24342b242ba3596 [logterm: 3, index: 40] at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.543+0800","caller":"raft/node.go:331","msg":"raft.node: ab91d272b46b9fd lost leader ab91d272b46b9fd at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.544+0800","caller":"raft/raft.go:835","msg":"24342b242ba3596 received MsgVoteResp from ab91d272b46b9fd at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.544+0800","caller":"raft/raft.go:1319","msg":"24342b242ba3596 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T13:00:44.544+0800","caller":"raft/raft.go:776","msg":"24342b242ba3596 became leader at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.544+0800","caller":"raft/node.go:325","msg":"raft.node: 24342b242ba3596 elected leader 24342b242ba3596 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:44.544+0800","caller":"raft/node.go:325","msg":"raft.node: ab91d272b46b9fd elected leader 24342b242ba3596 at term 4"}
2021/08/20 13:00:44.591891 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 13:00:44.591903 [info] [raftstore]: shard 4 raft tick stopped
2021/08/20 13:00:44.591917 [info] [raftstore]: shard 13 raft tick stopped
2021/08/20 13:00:44.636854 [error] prophet: reset leader connection failed with client is closed
2021/08/20 13:00:44.636870 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:44.636895 [error] prophet: client read loop stopped
2021/08/20 13:00:44.636930 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021-08-20 13:00:44.643480 I | etcdserver: ab91d272b46b9fd finished leadership transfer from ab91d272b46b9fd to 24342b242ba3596 (took 100.5283ms)
2021/08/20 13:00:44.643491 [info] prophet: [prophet-leader/node-1]/loop: exit
2021-08-20 13:00:44.643543 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:44.643558 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 13:00:44.643714 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:00:44.643731 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:44.643889 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:00:44.643902 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:44.643926 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:44.643948 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:44.643952 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:44.643961 I | rafthttp: stopped peer 93ccda9956d988f4
2021-08-20 13:00:44.643969 I | rafthttp: stopping peer 24342b242ba3596...
2021-08-20 13:00:44.644123 W | rafthttp: lost the TCP streaming connection with peer ab91d272b46b9fd (stream MsgApp v2 reader)
2021-08-20 13:00:44.644440 I | rafthttp: closed the TCP streaming connection with peer 24342b242ba3596 (stream MsgApp v2 writer)
2021-08-20 13:00:44.644452 I | rafthttp: stopped streaming with peer 24342b242ba3596 (writer)
2021-08-20 13:00:44.644567 I | rafthttp: closed the TCP streaming connection with peer 24342b242ba3596 (stream Message writer)
2021-08-20 13:00:44.644577 I | rafthttp: stopped streaming with peer 24342b242ba3596 (writer)
2021-08-20 13:00:44.644599 W | rafthttp: lost the TCP streaming connection with peer ab91d272b46b9fd (stream Message reader)
2021-08-20 13:00:44.644604 I | rafthttp: stopped HTTP pipelining with peer 24342b242ba3596
2021-08-20 13:00:44.644659 W | rafthttp: lost the TCP streaming connection with peer 24342b242ba3596 (stream MsgApp v2 reader)
2021-08-20 13:00:44.644673 E | rafthttp: failed to read 24342b242ba3596 on stream MsgApp v2 (context canceled)
2021-08-20 13:00:44.644675 I | rafthttp: peer 24342b242ba3596 became inactive (message send to peer failed)
2021-08-20 13:00:44.644685 I | rafthttp: stopped streaming with peer 24342b242ba3596 (stream MsgApp v2 reader)
2021-08-20 13:00:44.644714 W | rafthttp: lost the TCP streaming connection with peer 24342b242ba3596 (stream Message reader)
2021-08-20 13:00:44.644726 I | rafthttp: stopped streaming with peer 24342b242ba3596 (stream Message reader)
2021-08-20 13:00:44.644729 I | rafthttp: stopped peer 24342b242ba3596
2021-08-20 13:00:44.644810 E | rafthttp: failed to find member 24342b242ba3596 in cluster 6a4ade671189dc2f
2021-08-20 13:00:44.644852 E | rafthttp: failed to find member 24342b242ba3596 in cluster 6a4ade671189dc2f
2021-08-20 13:00:44.644880 E | rafthttp: failed to dial ab91d272b46b9fd on stream MsgApp v2 (peer ab91d272b46b9fd failed to find local node 24342b242ba3596)
2021-08-20 13:00:44.644896 I | rafthttp: peer ab91d272b46b9fd became inactive (message send to peer failed)
2021/08/20 13:00:44.655256 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:44.655273 [info] [raftstore]: shard 4 handle serve raft stopped
2021/08/20 13:00:44.655278 [info] [raftstore]: shard 13 handle serve raft stopped
2021/08/20 13:00:44.655296 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:44.655301 [info] [raftstore]: raft worker worker 1/0 exit
2021/08/20 13:00:44.655303 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:44.655304 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:44.655305 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:44.655337 [info] [transport]: transfer stopped
2021/08/20 13:00:44.655397 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.655403 [error] [transport]: session 1[127.0.0.1:38442] read failed with read tcp 127.0.0.1:10001->127.0.0.1:38442: use of closed network connection
2021/08/20 13:00:44.655405 [error] [transport]: session 2[127.0.0.1:38446] read failed with read tcp 127.0.0.1:10001->127.0.0.1:38446: use of closed network connection
2021/08/20 13:00:44.655425 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.655427 [error] [transport]: session 3[127.0.0.1:38516] read failed with read tcp 127.0.0.1:10001->127.0.0.1:38516: use of closed network connection
2021/08/20 13:00:44.655433 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.655437 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.655438 [info] [transport]: send raft worker stopped
2021/08/20 13:00:44.655442 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.655438 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.655436 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.655433 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:44.690994 [info] [raftstore]: shard 13 raft tick stopped
2021/08/20 13:00:44.740971 [error] [raftstore]: shard 13 heartbeat to prophet failed with client is closed
2021/08/20 13:00:44.740981 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 13:00:44.740999 [info] [raftstore]: shard 4 raft tick stopped
2021-08-20 13:00:44.771191 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021/08/20 13:00:44.837421 [error] prophet: reset leader connection failed with client is closed
2021/08/20 13:00:44.837465 [error] prophet: client read loop stopped
2021/08/20 13:00:44.841788 [error] [raftstore]: shard 13 heartbeat to prophet failed with client is closed
2021-08-20 13:00:44.870999 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 13:00:44.891602 [error] [transport]: shard 13 send msg shardID:13 group:1 from:<id:14 containerID:9 > to:<id:15 containerID:7 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:14 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"abc"  from 14 to 15 failed with write tcp 127.0.0.1:38516->127.0.0.1:10001: write: broken pipe
2021/08/20 13:00:44.891667 [error] [transport]: shard 13 send msg shardID:13 group:1 from:<id:14 containerID:9 > to:<id:16 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:16 from:14 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"abc"  from 14 to 16 failed with write tcp 127.0.0.1:44420->127.0.0.1:10000: write: broken pipe
2021/08/20 13:00:44.941745 [error] [raftstore]: shard 13 heartbeat to prophet failed with client is closed
2021-08-20 13:00:44.970948 W | rafthttp: lost the TCP streaming connection with peer ab91d272b46b9fd (stream Message writer)
2021-08-20 13:00:44.970989 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 13:00:45.041703 [error] [raftstore]: shard 13 heartbeat to prophet failed with client is closed
2021/08/20 13:00:45.092025 [error] [transport]: session 3[127.0.0.1:49138] read failed with read tcp 127.0.0.1:10002->127.0.0.1:49138: i/o timeout
2021/08/20 13:00:45.092057 [error] [transport]: connect to store 7 failed with dial tcp 127.0.0.1:10001: connect: connection refused
2021/08/20 13:00:45.092065 [error] [transport]: session 1[127.0.0.1:49122] read failed with read tcp 127.0.0.1:10002->127.0.0.1:49122: i/o timeout
2021/08/20 13:00:45.092082 [error] [transport]: session 2[127.0.0.1:49134] read failed with read tcp 127.0.0.1:10002->127.0.0.1:49134: i/o timeout
2021/08/20 13:00:45.092097 [error] [transport]: shard 13 send msg shardID:13 group:1 from:<id:14 containerID:9 > to:<id:15 containerID:7 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:14 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"abc"  from 14 to 15 failed with not connected
2021/08/20 13:00:45.092154 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:45.092187 [error] [transport]: shard 13 send msg shardID:13 group:1 from:<id:14 containerID:9 > to:<id:16 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:16 from:14 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"abc"  from 14 to 16 failed with not connected
2021/08/20 13:00:45.130657 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:45.131908 [error] [raftstore]: send store heartbeat failed with client is closed
2021/08/20 13:00:45.141192 [error] [raftstore]: shard 13 heartbeat to prophet failed with client is closed
2021/08/20 13:00:45.241142 [error] [raftstore]: shard 13 heartbeat to prophet failed with client is closed
2021/08/20 13:00:45.291270 [error] [transport]: connect to store 7 failed with dial tcp 127.0.0.1:10001: connect: connection refused
2021/08/20 13:00:45.291322 [error] [transport]: shard 13 send msg shardID:13 group:1 from:<id:14 containerID:9 > to:<id:15 containerID:7 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:14 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"abc"  from 14 to 15 failed with not connected
2021/08/20 13:00:45.291375 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:45.291402 [error] [transport]: shard 13 send msg shardID:13 group:1 from:<id:14 containerID:9 > to:<id:16 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:16 from:14 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"abc"  from 14 to 16 failed with not connected
2021/08/20 13:00:45.341329 [error] [raftstore]: shard 13 heartbeat to prophet failed with client is closed
2021/08/20 13:00:45.441146 [error] [raftstore]: shard 13 heartbeat to prophet failed with client is closed
2021/08/20 13:00:45.491479 [error] [transport]: connect to store 7 failed with dial tcp 127.0.0.1:10001: connect: connection refused
2021/08/20 13:00:45.491525 [error] [transport]: shard 13 send msg shardID:13 group:1 from:<id:14 containerID:9 > to:<id:15 containerID:7 > message:<type:MsgHeartbeatMsgHeartbeat to:15 from:14 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"abc"  from 14 to 15 failed with not connected
2021/08/20 13:00:45.491571 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/08/20 13:00:45.491596 [error] [transport]: shard 13 send msg shardID:13 group:1 from:<id:14 containerID:9 > to:<id:16 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:16 from:14 term:6 logTerm:0 index:0 commit:6 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:3 > unique:"abc"  from 14 to 16 failed with not connected
2021/08/20 13:00:45.541291 [error] [raftstore]: shard 13 heartbeat to prophet failed with client is closed
2021/08/20 13:00:45.630815 [error] [raftstore]: shard 13 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-08-20T13:00:45.655+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-ad473fa7-6767-48d4-9b2a-772db9c9d5d1/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 13:00:45.655978 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"warn","ts":"2021-08-20T13:00:45.656+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-ad473fa7-6767-48d4-9b2a-772db9c9d5d1/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021-08-20 13:00:45.656051 W | etcdserver: 24342b242ba3596 failed to transfer leadership (etcdserver: unhealthy cluster)
2021/08/20 13:00:45.656055 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
WARNING: 2021/08/20 13:00:45 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
2021-08-20 13:00:45.656113 I | rafthttp: stopped HTTP pipelining with peer ab91d272b46b9fd
2021-08-20 13:00:45.656142 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:45.656146 I | rafthttp: stopping peer ab91d272b46b9fd...
2021-08-20 13:00:45.656232 I | rafthttp: closed the TCP streaming connection with peer ab91d272b46b9fd (stream MsgApp v2 writer)
2021-08-20 13:00:45.656247 I | rafthttp: stopped streaming with peer ab91d272b46b9fd (writer)
2021-08-20 13:00:45.656252 I | rafthttp: stopped streaming with peer ab91d272b46b9fd (writer)
2021-08-20 13:00:45.656259 I | rafthttp: stopped HTTP pipelining with peer ab91d272b46b9fd
2021-08-20 13:00:45.656265 I | rafthttp: stopped streaming with peer ab91d272b46b9fd (stream MsgApp v2 reader)
2021-08-20 13:00:45.656273 I | rafthttp: stopped streaming with peer ab91d272b46b9fd (stream Message reader)
2021-08-20 13:00:45.656287 I | rafthttp: stopped peer ab91d272b46b9fd
2021-08-20 13:00:45.656290 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 13:00:45.656381 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:00:45.656395 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:45.656399 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:45.656407 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:45.656411 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:45.656416 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:45.656419 I | rafthttp: stopped peer 93ccda9956d988f4
2021/08/20 13:00:45.661391 [info] [raftstore]: shard 4 handle serve raft stopped
2021/08/20 13:00:45.661402 [info] [raftstore]: shard 13 handle serve raft stopped
2021/08/20 13:00:45.661408 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:45.661430 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:45.661435 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:45.661438 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:45.661440 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:45.661440 [info] [raftstore]: raft worker worker 1/0 exit
2021/08/20 13:00:45.661471 [info] [transport]: transfer stopped
--- PASS: TestAddShardWithMultiGroups (8.85s)
2021/08/20 13:00:45.661513 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:45.661521 [info] [transport]: send snapshot worker stopped
=== RUN   TestAppliedRules
2021/08/20 13:00:45.661526 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:45.661529 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:45.661531 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:45.661534 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:45.661536 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:45.661539 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:45.661540 [info] [transport]: send raft worker stopped
2021/08/20 13:00:45.662477 [info] prophet: prophet logger set
2021/08/20 13:00:45.662929 [info] [raftstore]: start scan gc snap files
2021/08/20 13:00:45.663138 [info] [raftstore]: start scan gc snap files
2021/08/20 13:00:45.663360 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:45.663371 [info] [raftstore]: begin to start prophet
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:45.663418 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:45.663449 I | embed: name = node-0
2021-08-20 13:00:45.663451 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 13:00:45.663453 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 13:00:45.663455 I | embed: heartbeat = 100ms
2021-08-20 13:00:45.663457 I | embed: election = 3000ms
2021-08-20 13:00:45.663458 I | embed: snapshot count = 100000
2021-08-20 13:00:45.663461 I | embed: advertise client URLs = http://127.0.0.1:40000
2021/08/20 13:00:45.663421 [info] [raftstore]: start scan gc snap files
2021-08-20 13:00:45.667794 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:45.667+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:45.667+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:45.667+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T13:00:45.667+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T13:00:45.667+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:45.669541 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:45.672522 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:45.672620 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
{"level":"info","ts":"2021-08-20T13:00:45.672+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:45.672800 I | embed: listening for peers on 127.0.0.1:50000
2021-08-20 13:00:45.672887 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021/08/20 13:00:45.691643 [info] [raftstore]: shard 13 raft tick stopped
2021/08/20 13:00:45.741982 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 13:00:45.741994 [info] [raftstore]: shard 4 raft tick stopped
2021/08/20 13:00:46.130335 [info] [raftstore]: dynamic shards pool job gcAllocating
2021/08/20 13:00:46.130364 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:47.130886 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:48.130949 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:48.656307 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"info","ts":"2021-08-20T13:00:48.668+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T13:00:48.668+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T13:00:48.668+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:48.668+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T13:00:48.668+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 13:00:48.668894 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:48.668915 I | embed: ready to serve client requests
2021-08-20 13:00:48.668927 I | etcdserver: setting up the initial cluster version to 3.4
2021/08/20 13:00:48.668954 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 13:00:48.669212 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021-08-20 13:00:48.669458 N | etcdserver/membership: set the initial cluster version to 3.4
2021/08/20 13:00:48.670312 [info] prophet: net application started
2021/08/20 13:00:48.670326 [info] prophet: start system time monitor 
2021/08/20 13:00:48.670748 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 13:00:48.670906 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 13:00:48.670917 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 13:00:48.671204 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 13:00:48.671642 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 13:00:48.671656 [info] prophet: ********node-0 become to leader now********
2021/08/20 13:00:48.672080 [info] prophet: load 0 containers, cost 333.6µs
2021/08/20 13:00:48.672285 [info] prophet: load 0 resources, cost 194.6µs
2021/08/20 13:00:48.672842 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:48.672854 [info] prophet: client started
2021/08/20 13:00:48.672858 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:00:48.672860 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:48.672875 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435648 deployPath:"not set" 
2021/08/20 13:00:48.672877 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:48.672842 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:00:48.672901 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 13:00:48.672902 [info] prophet: coordinator starts to run schedulers 
2021/08/20 13:00:48.672850 [info] prophet: client read loop started 
2021/08/20 13:00:48.672941 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:48.672963 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:48.672968 [info] prophet: session 1[127.0.0.1:47020] connected
2021/08/20 13:00:48.673313 [info] prophet: load 0 jobs
2021/08/20 13:00:48.673602 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 13:00:48.673622 [info] prophet: coordinator starts patrol resources 
2021/08/20 13:00:48.674044 [info] [raftstore]: create local store with id 1
2021/08/20 13:00:48.674463 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 13:00:48.674474 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 13:00:48.674627 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 13:00:48.675915 [info] prophet: container 1 limit added
2021/08/20 13:00:48.675988 [info] [raftstore]: prophet started
2021/08/20 13:00:48.676023 [info] prophet: container 1 heartbeat stream binded
2021/08/20 13:00:48.676050 [info] [transport]: net application started
2021/08/20 13:00:48.676065 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 13:00:48.676078 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:48.676096 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:48.676110 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:48.676112 [info] [raftstore]: shard 2 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:48.676+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
2021/08/20 13:00:48.676161 [info] [raftstore]: raft worker 0/0 start
{"level":"info","ts":"2021-08-20T13:00:48.676+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:48.676+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:48.676179 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:48.676+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:48.676+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:48.676+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:48.676+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 13:00:48.676236 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 13:00:48.676260 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 13:00:48.676294 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:48.676307 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:48.676308 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:48.676309 [info] [raftstore]: shards started
2021/08/20 13:00:48.676311 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:48.676319 [info] [raftstore]: net application started
2021/08/20 13:00:48.676331 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 13:00:48.676350 [info] [raftstore]: router started
2021/08/20 13:00:48.676368 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:48.676382 [info] [raftstore]: router event loop task started
2021/08/20 13:00:48.676459 [info] prophet: session 2[127.0.0.1:47022] connected
2021/08/20 13:00:48.676466 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:48.676478 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:48.676533 [info] prophet: new watcher 127.0.0.1:47022 added
2021/08/20 13:00:48.676589 [info] [raftstore]: start init event
2021/08/20 13:00:48.677028 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:48.677039 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-08-20T13:00:48.677+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 15649205452587914306)"}
2021-08-20 13:00:48.678033 I | etcdserver/membership: added member d92d2572329bd442 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 13:00:48.678040 I | rafthttp: starting peer d92d2572329bd442...
2021-08-20 13:00:48.678056 I | rafthttp: started HTTP pipelining with peer d92d2572329bd442
2021-08-20 13:00:48.678213 I | rafthttp: started streaming with peer d92d2572329bd442 (writer)
2021-08-20 13:00:48.678276 I | rafthttp: started streaming with peer d92d2572329bd442 (writer)
2021-08-20 13:00:48.678333 I | rafthttp: started peer d92d2572329bd442
2021-08-20 13:00:48.678347 I | rafthttp: added peer d92d2572329bd442
2021-08-20 13:00:48.678351 I | rafthttp: started streaming with peer d92d2572329bd442 (stream Message reader)
2021-08-20 13:00:48.678362 I | rafthttp: started streaming with peer d92d2572329bd442 (stream MsgApp v2 reader)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:48.678700 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:48.678722 I | embed: name = node-1
2021-08-20 13:00:48.678732 I | embed: data dir = /tmp/cube/node-1/prophet
2021-08-20 13:00:48.678734 I | embed: member dir = /tmp/cube/node-1/prophet/member
2021-08-20 13:00:48.678735 I | embed: heartbeat = 100ms
2021-08-20 13:00:48.678736 I | embed: election = 3000ms
2021-08-20 13:00:48.678738 I | embed: snapshot count = 100000
2021-08-20 13:00:48.678740 I | embed: advertise client URLs = http://127.0.0.1:40001
2021-08-20 13:00:48.682561 I | etcdserver: starting member d92d2572329bd442 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:48.682+0800","caller":"raft/raft.go:1550","msg":"d92d2572329bd442 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:48.682+0800","caller":"raft/raft.go:711","msg":"d92d2572329bd442 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:48.682+0800","caller":"raft/raft.go:388","msg":"newRaft d92d2572329bd442 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 13:00:48.684249 W | auth: simple token is not cryptographically signed
2021/08/20 13:00:48.686248 [info] [raftstore]: shard 2 ********become leader now********
2021-08-20 13:00:48.687328 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:48.687342 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 13:00:48.687348 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:48.687536 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:48.687604 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:48.687618 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 13:00:48.687624 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 13:00:48.687628 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:48.687640 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:48.687704 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:48.687876 I | rafthttp: peer d92d2572329bd442 became active
2021-08-20 13:00:48.687898 I | rafthttp: established a TCP streaming connection with peer d92d2572329bd442 (stream Message writer)
2021-08-20 13:00:48.687902 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 13:00:48.687912 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:48.687919 I | embed: listening for peers on 127.0.0.1:50001
2021-08-20 13:00:48.687927 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:48.687937 I | rafthttp: established a TCP streaming connection with peer d92d2572329bd442 (stream MsgApp v2 writer)
{"level":"info","ts":"2021-08-20T13:00:48.688+0800","caller":"raft/raft.go:870","msg":"d92d2572329bd442 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T13:00:48.688+0800","caller":"raft/raft.go:711","msg":"d92d2572329bd442 became follower at term 2"}
{"level":"info","ts":"2021-08-20T13:00:48.688+0800","caller":"raft/node.go:325","msg":"raft.node: d92d2572329bd442 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:48.689+0800","caller":"raft/raft.go:1550","msg":"d92d2572329bd442 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:48.689583 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:48.689619 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T13:00:48.689+0800","caller":"raft/raft.go:1550","msg":"d92d2572329bd442 switched to configuration voters=(10650127570946328820 15649205452587914306)"}
2021-08-20 13:00:48.689960 I | etcdserver/membership: added member d92d2572329bd442 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 13:00:48.691165 I | etcdserver: published {Name:node-1 ClientURLs:[http://127.0.0.1:40001]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:48.691184 I | embed: ready to serve client requests
2021/08/20 13:00:48.691173 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
2021-08-20 13:00:48.691365 N | embed: serving insecure client requests on 127.0.0.1:40001, this is strongly discouraged!
2021/08/20 13:00:48.691997 [info] prophet: net application started
2021/08/20 13:00:48.692008 [info] prophet: start system time monitor 
2021/08/20 13:00:48.692442 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 13:00:48.692452 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:48.692454 [info] prophet: ********node-1 become to follower now********
2021/08/20 13:00:48.692472 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:48.692485 [info] prophet: client read loop started 
2021/08/20 13:00:48.692513 [info] prophet: client started
2021/08/20 13:00:48.692525 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 13:00:48.692526 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:48.692537 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1629435648 deployPath:"not set" 
2021/08/20 13:00:48.692544 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:48.692513 [info] prophet: session 3[127.0.0.1:47054] connected
2021/08/20 13:00:48.692521 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:48.692580 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:48.692606 [info] [raftstore]: create local store with id 5
2021/08/20 13:00:48.693058 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 13:00:48.695391 [info] prophet: container 5 limit added
2021/08/20 13:00:48.695438 [info] prophet: container 5 heartbeat stream binded
2021/08/20 13:00:48.695442 [info] [raftstore]: prophet started
2021/08/20 13:00:48.695481 [info] [transport]: net application started
2021/08/20 13:00:48.695491 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/08/20 13:00:48.695493 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:48.695501 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:48.695502 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:48.695502 [info] [raftstore]: shards started
2021/08/20 13:00:48.695504 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:48.695508 [info] [raftstore]: net application started
2021/08/20 13:00:48.695509 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/08/20 13:00:48.695511 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:48.695518 [info] [raftstore]: router started
2021/08/20 13:00:48.695532 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:48.695587 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:48.695601 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:48.695539 [info] [raftstore]: router event loop task started
2021/08/20 13:00:48.695607 [info] prophet: session 4[127.0.0.1:47056] connected
2021/08/20 13:00:48.695646 [info] prophet: new watcher 127.0.0.1:47056 added
2021/08/20 13:00:48.695716 [info] [raftstore]: start init event
2021/08/20 13:00:48.697279 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:48.697288 [info] [raftstore]: begin to start prophet
2021-08-20 13:00:48.697746 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:ca279a82060aa352 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:48.697+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-206402e2-bdc2-493e-a96e-6bf6f5c2ff21/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:48.697847 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:48.774427 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 13:00:48.77441 +0800 CST m=+166.889495801, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/08/20 13:00:48.774448 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/08/20 13:00:48.774531 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:48.776705 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:48.776777 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source heartbeat
2021/08/20 13:00:48.776794 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:48.776801 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:48.776828 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021-08-20 13:00:48.779140 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:00:48.779159 I | rafthttp: established a TCP streaming connection with peer d92d2572329bd442 (stream Message reader)
2021-08-20 13:00:48.779163 I | rafthttp: established a TCP streaming connection with peer d92d2572329bd442 (stream MsgApp v2 reader)
2021-08-20 13:00:48.779167 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
{"level":"info","ts":"2021-08-20T13:00:48.786+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/08/20 13:00:48.786641 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 228 60 39 231 167 203 70 157 145 174 16 196 62 107 17 254 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:48.786651 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:48.786668 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:48.786708 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:48.786779 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:48.786887 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/08/20 13:00:48.787101 [info] [transport]: connected to store 5
2021/08/20 13:00:48.787110 [info] [transport]: session 1[127.0.0.1:38712] connected
2021/08/20 13:00:48.787184 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 13:00:48.787204 [info] [raftstore]: shard 2 replicate peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:48.787240 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:48.787264 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:48.787267 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T13:00:48.787+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:48.787+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:48.787+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 13:00:48.787354 [info] [raftstore]: shard 2 added with peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T13:00:48.787+0800","caller":"raft/raft.go:870","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:48.787+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 6"}
2021/08/20 13:00:48.787474 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:48.788440 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/08/20 13:00:48.788513 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:48.788912 [info] [transport]: connected to store 1
2021/08/20 13:00:48.788933 [info] [transport]: session 1[127.0.0.1:44630] connected
2021/08/20 13:00:48.788972 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:48.789045 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:48.789067 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:48.789052 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:48.789+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:48.789133 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T13:00:48.789+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6)"}
{"level":"error","ts":"2021-08-20T13:00:48.789+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:48.789306 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 80 101 203 157 197 96 73 233 191 10 101 55 27 160 204 91 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:48.789323 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:48.789357 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<9> 
2021/08/20 13:00:48.789393 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:48.789419 [info] prophet: resource 2 ConfVer changed from 2 to 3
{"level":"error","ts":"2021-08-20T13:00:48.789+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:48.789473 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 13:00:48.789546 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:9 >,size=<126>
2021/08/20 13:00:48.789577 [info] [transport]: connected to store 5
2021/08/20 13:00:48.789592 [info] [transport]: session 2[127.0.0.1:38716] connected
{"level":"info","ts":"2021-08-20T13:00:48.789+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:48.789+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-08-20T13:00:48.789+0800","caller":"raft/raft.go:1503","msg":"6 [commit: 9, lastindex: 9, lastterm: 6] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:48.789+0800","caller":"raft/raft.go:1420","msg":"6 [commit: 9] restored snapshot [index: 9, term: 6]"}
2021/08/20 13:00:48.789691 [info] [raftstore]: shard 2 peer 6 receiving snapshot, skip further handling
2021/08/20 13:00:48.789852 [info] [raftstore]: shard 2 send snap complete
2021/08/20 13:00:48.789865 [info] [transport]: shard 2 pending snap sent succ, size=<126>, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 13:00:48.791514 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 13:00:48.77441 +0800 CST m=+166.889495801, startAt:2021-08-20 13:00:48.7744419 +0800 CST m=+166.889527801, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 17.0527ms, 
2021/08/20 13:00:48.941504 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 13:00:48.941523 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 13:00:48.941531 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:9 TruncatedState:{Index:9 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:48.941539 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 start applying snapshot
2021/08/20 13:00:48.941552 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 13:00:48.941681 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply
2021/08/20 13:00:48.941695 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 applying snapshot to set read 9
2021/08/20 13:00:48.941709 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:48.941723 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:48.941727 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 AdvanceApply with 9
2021/08/20 13:00:48.941733 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_9.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:9 
2021/08/20 13:00:48.941759 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:9 XXX_unrecognized:[]}
2021/08/20 13:00:48.941763 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply, completed
2021/08/20 13:00:49.028097 [info] prophet: watcher  removed
2021/08/20 13:00:49.028112 [info] prophet: watcher  removed
2021/08/20 13:00:49.028113 [info] prophet: watcher  removed
2021/08/20 13:00:49.130717 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:49.198247 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:6249a5adf7ce8570 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:49.198+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-206402e2-bdc2-493e-a96e-6bf6f5c2ff21/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:49.198375 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:49.699107 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:6249a5adf7ce8570 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:49.699+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-206402e2-bdc2-493e-a96e-6bf6f5c2ff21/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:49.699230 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:50.130486 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:50.200070 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:240f54be3a4eee71 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:50.200+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-206402e2-bdc2-493e-a96e-6bf6f5c2ff21/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:50.200216 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:50.700778 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:240f54be3a4eee71 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:50.700+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-206402e2-bdc2-493e-a96e-6bf6f5c2ff21/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:50.700923 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:51.130995 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:51.201756 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:73f178369cfde12c RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:51.201+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-206402e2-bdc2-493e-a96e-6bf6f5c2ff21/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:51.201913 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:51.702110 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:73f178369cfde12c RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:51.702+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-206402e2-bdc2-493e-a96e-6bf6f5c2ff21/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:51.702236 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:52.130638 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:52.203181 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:28423ff572306d05 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:52.203+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-206402e2-bdc2-493e-a96e-6bf6f5c2ff21/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:52.203329 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:00:52.704470 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:28423ff572306d05 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:52.704+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-206402e2-bdc2-493e-a96e-6bf6f5c2ff21/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:52.704596 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:53.130683 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:00:53.205722 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:41243706bcb3f2a6 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:53.205+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-206402e2-bdc2-493e-a96e-6bf6f5c2ff21/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:53.205884 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-08-20T13:00:53.707+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(4693937213702140582 10650127570946328820 15649205452587914306)"}
{"level":"info","ts":"2021-08-20T13:00:53.707+0800","caller":"raft/raft.go:1550","msg":"d92d2572329bd442 switched to configuration voters=(4693937213702140582 10650127570946328820 15649205452587914306)"}
2021-08-20 13:00:53.707210 I | etcdserver/membership: added member 41243706bcb3f2a6 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:00:53.707217 I | rafthttp: starting peer 41243706bcb3f2a6...
2021-08-20 13:00:53.707225 I | rafthttp: started HTTP pipelining with peer 41243706bcb3f2a6
2021-08-20 13:00:53.707234 I | etcdserver/membership: added member 41243706bcb3f2a6 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:00:53.707255 I | rafthttp: starting peer 41243706bcb3f2a6...
2021-08-20 13:00:53.707263 I | rafthttp: started HTTP pipelining with peer 41243706bcb3f2a6
2021-08-20 13:00:53.707417 I | rafthttp: started streaming with peer 41243706bcb3f2a6 (writer)
2021-08-20 13:00:53.707438 I | rafthttp: started streaming with peer 41243706bcb3f2a6 (writer)
2021-08-20 13:00:53.707519 I | rafthttp: started streaming with peer 41243706bcb3f2a6 (writer)
2021-08-20 13:00:53.707549 I | rafthttp: started peer 41243706bcb3f2a6
2021-08-20 13:00:53.707555 I | rafthttp: added peer 41243706bcb3f2a6
2021-08-20 13:00:53.707564 I | rafthttp: started peer 41243706bcb3f2a6
2021-08-20 13:00:53.707567 I | rafthttp: started streaming with peer 41243706bcb3f2a6 (stream Message reader)
2021-08-20 13:00:53.707577 I | rafthttp: started streaming with peer 41243706bcb3f2a6 (stream MsgApp v2 reader)
2021-08-20 13:00:53.707614 I | rafthttp: started streaming with peer 41243706bcb3f2a6 (writer)
2021-08-20 13:00:53.707633 I | rafthttp: started streaming with peer 41243706bcb3f2a6 (stream MsgApp v2 reader)
2021-08-20 13:00:53.707643 I | rafthttp: started streaming with peer 41243706bcb3f2a6 (stream Message reader)
2021-08-20 13:00:53.707660 I | rafthttp: added peer 41243706bcb3f2a6
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:53.707918 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:53.707945 I | embed: name = node-2
2021-08-20 13:00:53.707956 I | embed: data dir = /tmp/cube/node-2/prophet
2021-08-20 13:00:53.707958 I | embed: member dir = /tmp/cube/node-2/prophet/member
2021-08-20 13:00:53.707960 I | embed: heartbeat = 100ms
2021-08-20 13:00:53.707961 I | embed: election = 3000ms
2021-08-20 13:00:53.707962 I | embed: snapshot count = 100000
2021-08-20 13:00:53.707965 I | embed: advertise client URLs = http://127.0.0.1:40002
2021-08-20 13:00:53.712669 I | etcdserver: starting member 41243706bcb3f2a6 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:53.712+0800","caller":"raft/raft.go:1550","msg":"41243706bcb3f2a6 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:53.712+0800","caller":"raft/raft.go:711","msg":"41243706bcb3f2a6 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:53.712+0800","caller":"raft/raft.go:388","msg":"newRaft 41243706bcb3f2a6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 13:00:53.714715 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:53.717812 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:53.717829 I | rafthttp: started HTTP pipelining with peer d92d2572329bd442
2021-08-20 13:00:53.717833 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 13:00:53.717839 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:53.718024 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:53.718089 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:53.718331 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 13:00:53.718346 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 13:00:53.718349 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:53.718363 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:53.718381 I | rafthttp: starting peer d92d2572329bd442...
2021-08-20 13:00:53.718409 I | rafthttp: started HTTP pipelining with peer d92d2572329bd442
2021-08-20 13:00:53.718527 I | rafthttp: peer 41243706bcb3f2a6 became active
2021-08-20 13:00:53.718544 I | rafthttp: established a TCP streaming connection with peer 41243706bcb3f2a6 (stream Message writer)
2021-08-20 13:00:53.718547 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 13:00:53.718550 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:53.718555 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:53.718568 I | rafthttp: established a TCP streaming connection with peer 41243706bcb3f2a6 (stream MsgApp v2 writer)
2021-08-20 13:00:53.718600 I | rafthttp: started streaming with peer d92d2572329bd442 (writer)
2021-08-20 13:00:53.718670 I | rafthttp: started streaming with peer d92d2572329bd442 (writer)
2021-08-20 13:00:53.718830 I | rafthttp: started peer d92d2572329bd442
2021-08-20 13:00:53.718847 I | rafthttp: added peer d92d2572329bd442
2021-08-20 13:00:53.718850 I | rafthttp: started streaming with peer d92d2572329bd442 (stream Message reader)
2021-08-20 13:00:53.718854 I | rafthttp: started streaming with peer d92d2572329bd442 (stream MsgApp v2 reader)
2021-08-20 13:00:53.718903 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:53.719000 I | rafthttp: peer 41243706bcb3f2a6 became active
2021-08-20 13:00:53.719021 I | rafthttp: established a TCP streaming connection with peer 41243706bcb3f2a6 (stream MsgApp v2 writer)
2021-08-20 13:00:53.719025 I | rafthttp: established a TCP streaming connection with peer 41243706bcb3f2a6 (stream Message writer)
2021-08-20 13:00:53.719027 I | rafthttp: peer d92d2572329bd442 became active
2021-08-20 13:00:53.719031 I | rafthttp: established a TCP streaming connection with peer d92d2572329bd442 (stream MsgApp v2 reader)
2021-08-20 13:00:53.719053 I | rafthttp: established a TCP streaming connection with peer d92d2572329bd442 (stream Message reader)
2021-08-20 13:00:53.719160 I | embed: listening for peers on 127.0.0.1:50002
2021-08-20 13:00:53.729352 I | etcdserver: d92d2572329bd442 initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
{"level":"info","ts":"2021-08-20T13:00:53.768+0800","caller":"raft/raft.go:870","msg":"41243706bcb3f2a6 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T13:00:53.768+0800","caller":"raft/raft.go:711","msg":"41243706bcb3f2a6 became follower at term 2"}
{"level":"info","ts":"2021-08-20T13:00:53.768+0800","caller":"raft/node.go:325","msg":"raft.node: 41243706bcb3f2a6 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 13:00:53.768979 I | etcdserver: 41243706bcb3f2a6 initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
{"level":"info","ts":"2021-08-20T13:00:53.769+0800","caller":"raft/raft.go:1550","msg":"41243706bcb3f2a6 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:53.769632 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:53.769694 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T13:00:53.770+0800","caller":"raft/raft.go:1550","msg":"41243706bcb3f2a6 switched to configuration voters=(10650127570946328820 15649205452587914306)"}
2021-08-20 13:00:53.770118 I | etcdserver/membership: added member d92d2572329bd442 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:53.770+0800","caller":"raft/raft.go:1550","msg":"41243706bcb3f2a6 switched to configuration voters=(4693937213702140582 10650127570946328820 15649205452587914306)"}
2021-08-20 13:00:53.770380 I | etcdserver/membership: added member 41243706bcb3f2a6 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:00:53.770764 I | etcdserver: published {Name:node-2 ClientURLs:[http://127.0.0.1:40002]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:53.770780 I | embed: ready to serve client requests
2021/08/20 13:00:53.770814 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
2021-08-20 13:00:53.770969 N | embed: serving insecure client requests on 127.0.0.1:40002, this is strongly discouraged!
2021/08/20 13:00:53.771605 [info] prophet: net application started
2021/08/20 13:00:53.771653 [info] prophet: start system time monitor 
2021/08/20 13:00:53.771961 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 13:00:53.771972 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:53.771975 [info] prophet: ********node-2 become to follower now********
2021/08/20 13:00:53.771992 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:53.772005 [info] prophet: client read loop started 
2021/08/20 13:00:53.772010 [info] prophet: client started
2021/08/20 13:00:53.772013 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 13:00:53.772014 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:53.772027 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1629435653 deployPath:"not set" 
2021/08/20 13:00:53.772038 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:53.772040 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:53.772043 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:53.772071 [info] prophet: session 5[127.0.0.1:47118] connected
2021/08/20 13:00:53.772155 [info] [raftstore]: create local store with id 7
2021/08/20 13:00:53.772538 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 13:00:53.774610 [info] prophet: container 7 limit added
2021/08/20 13:00:53.774686 [info] [raftstore]: prophet started
2021/08/20 13:00:53.774728 [info] [transport]: net application started
2021/08/20 13:00:53.774739 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/08/20 13:00:53.774741 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:53.774744 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:53.774746 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:53.774746 [info] [raftstore]: shards started
2021/08/20 13:00:53.774748 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:53.774752 [info] [raftstore]: net application started
2021/08/20 13:00:53.774753 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/08/20 13:00:53.774762 [info] [raftstore]: router started
2021/08/20 13:00:53.774778 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:53.774782 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:53.774689 [info] prophet: container 7 heartbeat stream binded
2021/08/20 13:00:53.774792 [info] [raftstore]: router event loop task started
2021/08/20 13:00:53.774859 [info] prophet: session 6[127.0.0.1:47120] connected
2021/08/20 13:00:53.774876 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:53.774879 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:53.774931 [info] prophet: new watcher 127.0.0.1:47120 added
2021/08/20 13:00:53.775002 [info] [raftstore]: start init event
2021/08/20 13:00:53.805449 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 13:00:53.8054275 +0800 CST m=+171.920513301, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/08/20 13:00:53.805472 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/08/20 13:00:53.805556 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:53.806674 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.806877 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.806893 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.806910 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.806933 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:53.806+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6) learners=(8)"}
2021/08/20 13:00:53.806963 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 142 171 162 67 59 23 66 150 171 29 101 183 55 50 159 64 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:53.806986 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:53.806+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6) learners=(8)"}
2021/08/20 13:00:53.807013 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.807073 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/08/20 13:00:53.807273 [info] [transport]: connected to store 7
2021/08/20 13:00:53.807317 [info] [transport]: session 1[127.0.0.1:49390] connected
2021/08/20 13:00:53.807358 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 13:00:53.807376 [info] [raftstore]: shard 2 replicate peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:53.807391 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:53.807394 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:53.807397 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T13:00:53.807+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:53.807+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:53.807+0800","caller":"raft/raft.go:388","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 13:00:53.807463 [info] [raftstore]: shard 2 added with peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T13:00:53.807+0800","caller":"raft/raft.go:870","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:53.807+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 6"}
2021/08/20 13:00:53.807544 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
2021-08-20 13:00:53.807821 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:00:53.807839 I | rafthttp: established a TCP streaming connection with peer 41243706bcb3f2a6 (stream Message reader)
2021-08-20 13:00:53.807890 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:00:53.807919 I | rafthttp: established a TCP streaming connection with peer 41243706bcb3f2a6 (stream MsgApp v2 reader)
2021-08-20 13:00:53.807947 I | rafthttp: established a TCP streaming connection with peer d92d2572329bd442 (stream Message writer)
2021-08-20 13:00:53.807967 I | rafthttp: established a TCP streaming connection with peer 41243706bcb3f2a6 (stream Message reader)
2021-08-20 13:00:53.808311 I | rafthttp: established a TCP streaming connection with peer d92d2572329bd442 (stream MsgApp v2 writer)
2021-08-20 13:00:53.808454 I | rafthttp: established a TCP streaming connection with peer 41243706bcb3f2a6 (stream MsgApp v2 reader)
2021/08/20 13:00:53.811158 [info] prophet: resource 2 send schedule command, step promote learner peer 8 on container 7 to voter, source heartbeat
2021/08/20 13:00:53.811248 [info] [raftstore]: shard-2 AddNode peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:53.812609 [info] [transport]: connected to store 1
2021/08/20 13:00:53.812632 [info] [transport]: session 2[127.0.0.1:44696] connected
2021/08/20 13:00:53.812688 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.812783 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:53.812+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:53.812824 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"error","ts":"2021-08-20T13:00:53.812+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.(*raft).bcastAppend.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:538\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).bcastAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:534\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1175\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:53.813014 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.813036 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.813036 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<10> 
2021/08/20 13:00:53.813039 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.813045 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:53.813+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6 8)"}
{"level":"error","ts":"2021-08-20T13:00:53.813+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:53.813151 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 217 77 46 46 220 131 69 167 171 116 189 159 80 27 164 38 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 8 16 7] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:53.813161 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:00:53.813+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6 8)"}
2021/08/20 13:00:53.813208 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.813277 [info] prophet: resource 2 ConfVer changed from 4 to 5
{"level":"error","ts":"2021-08-20T13:00:53.813+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:53.813282 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:53.813356 [info] [raftstore]: shard 2 snapshot epoch 4/5 stale, generate again.
2021/08/20 13:00:53.813382 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:53.813567 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<11> 
2021/08/20 13:00:53.814156 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 13:00:53.8054275 +0800 CST m=+171.920513301, startAt:2021-08-20 13:00:53.805466 +0800 CST m=+171.920551801, currentStep:2, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]) finished) finish, takes 8.6799ms, 
2021/08/20 13:00:53.817567 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:53.877722 [info] prophet: placement rule {"group_id":"g1","id":"id1","start_key":"","end_key":"","role":"voter","count":3,"label_constraints":[{"key":"c","op":"in","values":["0","1"]}]} updated
2021/08/20 13:00:53.877842 [info] prophet: resource 9 created with peers [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:53.879031 [info] [raftstore]: shard 9 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:53.879046 [info] [raftstore]: shard 9 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:53.879047 [info] [raftstore]: shard 9 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:53.879048 [info] [raftstore]: shard 9 init last term, last term=<5>
2021/08/20 13:00:53.879052 [info] [raftstore]: shard 9 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:53.879054 [info] [raftstore]: shard 9 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(10 11)"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:711","msg":"b became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=(10 11)"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:388","msg":"newRaft b [peers: [a,b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:711","msg":"a became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:388","msg":"newRaft a [peers: [a,b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:53.879145 [info] [raftstore]: shard 9 added with peer {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:53.879149 [info] [raftstore]: shard 9 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:934","msg":"a is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:724","msg":"a became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:835","msg":"a received MsgVoteResp from a at term 6"}
2021/08/20 13:00:53.879161 [info] [raftstore]: create init shard id:9 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:5 > peers:<id:11 containerID:1 > unique:"abc" ruleGroups:"g1" 
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:822","msg":"a [logterm: 5, index: 5] sent MsgVote request to b at term 6"}
2021/08/20 13:00:53.879167 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 11 add registration job by doCreate
2021/08/20 13:00:53.879172 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 11 add registration job by doCreate, completed
2021/08/20 13:00:53.879179 [info] [raftstore]: shard 9 added with peer {ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:53.879202 [info] [raftstore]: create init shard id:9 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:5 > peers:<id:11 containerID:1 > unique:"abc" ruleGroups:"g1" 
2021/08/20 13:00:53.879208 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 10 add registration job by doCreate
2021/08/20 13:00:53.879218 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 10 add registration job by doCreate, completed
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:870","msg":"b [term: 5] received a MsgVote message with higher term from a [term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:711","msg":"b became follower at term 6"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:971","msg":"b [logterm: 5, index: 5, vote: 0] cast MsgVote for a [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:835","msg":"a received MsgVoteResp from b at term 6"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:1319","msg":"a has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T13:00:53.879+0800","caller":"raft/raft.go:776","msg":"a became leader at term 6"}
2021/08/20 13:00:53.879408 [info] [raftstore]: shard 9 ********become leader now********
2021/08/20 13:00:53.941349 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:53.941+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:53.941451 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 13:00:53.941621 [info] [transport]: connected to store 7
2021/08/20 13:00:53.941653 [info] [transport]: session 2[127.0.0.1:49402] connected
{"level":"info","ts":"2021-08-20T13:00:53.941+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:53.941+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-08-20T13:00:53.941+0800","caller":"raft/raft.go:1503","msg":"8 [commit: 11, lastindex: 11, lastterm: 6] restored snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:53.941+0800","caller":"raft/raft.go:1420","msg":"8 [commit: 11] restored snapshot [index: 11, term: 6]"}
2021/08/20 13:00:53.941774 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:5 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:8 containerID:7 > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:11 >,size=<125>
2021/08/20 13:00:53.941782 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/08/20 13:00:53.941812 [info] [raftstore]: shard 2 send snap complete
2021/08/20 13:00:53.941827 [info] [transport]: shard 2 pending snap sent succ, size=<125>, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 13:00:53.979921 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:47020->127.0.0.1:30000: use of closed network connection
2021/08/20 13:00:53.979934 [error] prophet: client read loop stopped
2021/08/20 13:00:53.979943 [error] prophet: session 6[127.0.0.1:47120] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47120: use of closed network connection
2021/08/20 13:00:53.979952 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:53.979956 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:53.979963 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:53.979956 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:53.979954 [error] prophet: session 2[127.0.0.1:47022] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47022: use of closed network connection
2021/08/20 13:00:53.979987 [error] prophet: session 3[127.0.0.1:47054] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47054: use of closed network connection
2021/08/20 13:00:53.979991 [error] prophet: session 4[127.0.0.1:47056] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47056: use of closed network connection
2021/08/20 13:00:53.979994 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 13:00:53.980003 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:53.980028 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:53.980010 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 13:00:53.980032 [error] prophet: session 5[127.0.0.1:47118] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47118: use of closed network connection
2021/08/20 13:00:53.980021 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:53.980060 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:53.980125 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 13:00:53.980128 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 13:00:53.981111 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 13:00:53.981129 [info] prophet: patrol resources has been stopped 
2021/08/20 13:00:53.981139 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 13:00:53.981151 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 13:00:53.981165 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 13:00:53.981167 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/08/20 13:00:53.981170 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/08/20 13:00:53.981158 [info] prophet: drive push operator has been stopped 
2021/08/20 13:00:53.981159 [info] prophet: coordinator is stopping
2021/08/20 13:00:53.981195 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/08/20 13:00:53.981196 [info] prophet: coordinator has been stopped
2021/08/20 13:00:53.981189 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021-08-20 13:00:53.981208 I | etcdserver: 93ccda9956d988f4 starts leadership transfer from 93ccda9956d988f4 to d92d2572329bd442
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:1278","msg":"93ccda9956d988f4 [term 2] starts to transfer leadership to d92d2572329bd442"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:1284","msg":"93ccda9956d988f4 sends MsgTimeoutNow to d92d2572329bd442 immediately as d92d2572329bd442 already has up-to-date log"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:1372","msg":"d92d2572329bd442 [term 2] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:724","msg":"d92d2572329bd442 became candidate at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:835","msg":"d92d2572329bd442 received MsgVoteResp from d92d2572329bd442 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:822","msg":"d92d2572329bd442 [logterm: 2, index: 33] sent MsgVote request to 41243706bcb3f2a6 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:822","msg":"d92d2572329bd442 [logterm: 2, index: 33] sent MsgVote request to 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/node.go:331","msg":"raft.node: d92d2572329bd442 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:912","msg":"d92d2572329bd442 [term: 3] ignored a MsgReadIndexResp message with lower term from 93ccda9956d988f4 [term: 2]"}
2021/08/20 13:00:53.981772 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/08/20 13:00:53.981782 [info] prophet: [prophet-leader/node-2]/campaign: start
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:870","msg":"41243706bcb3f2a6 [term: 2] received a MsgVote message with higher term from d92d2572329bd442 [term: 3]"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:711","msg":"41243706bcb3f2a6 became follower at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:870","msg":"93ccda9956d988f4 [term: 2] received a MsgVote message with higher term from d92d2572329bd442 [term: 3]"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:971","msg":"41243706bcb3f2a6 [logterm: 2, index: 33, vote: 0] cast MsgVote for d92d2572329bd442 [logterm: 2, index: 33] at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/node.go:331","msg":"raft.node: 41243706bcb3f2a6 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/raft.go:971","msg":"93ccda9956d988f4 [logterm: 2, index: 33, vote: 0] cast MsgVote for d92d2572329bd442 [logterm: 2, index: 33] at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.981+0800","caller":"raft/node.go:331","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.982+0800","caller":"raft/raft.go:835","msg":"d92d2572329bd442 received MsgVoteResp from 41243706bcb3f2a6 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.982+0800","caller":"raft/raft.go:1319","msg":"d92d2572329bd442 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T13:00:53.982+0800","caller":"raft/raft.go:776","msg":"d92d2572329bd442 became leader at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.982+0800","caller":"raft/node.go:325","msg":"raft.node: d92d2572329bd442 elected leader d92d2572329bd442 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.982+0800","caller":"raft/node.go:325","msg":"raft.node: 41243706bcb3f2a6 elected leader d92d2572329bd442 at term 3"}
{"level":"info","ts":"2021-08-20T13:00:53.982+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader d92d2572329bd442 at term 3"}
{"level":"warn","ts":"2021-08-20T13:00:53.982+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-b93c0362-b78f-47d7-8515-20d90429560d/127.0.0.1:40001","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
2021/08/20 13:00:53.985498 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
2021/08/20 13:00:53.986188 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/08/20 13:00:53.986731 [info] prophet: [prophet-leader/node-2]/campaign: completed, start keepalive
2021/08/20 13:00:53.986746 [info] prophet: ********node-2 become to leader now********
2021/08/20 13:00:53.989027 [info] prophet: load 3 containers, cost 2.1994ms
2021/08/20 13:00:53.989371 [info] prophet: load 2 resources, cost 331.5µs
2021/08/20 13:00:53.990005 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:00:53.990012 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:00:53.990349 [info] prophet: load 0 jobs
2021/08/20 13:00:54.006204 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/08/20 13:00:54.006215 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/08/20 13:00:54.007118 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/08/20 13:00:54.008595 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/08/20 13:00:54.008608 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
2021-08-20 13:00:54.081647 I | etcdserver: 93ccda9956d988f4 finished leadership transfer from 93ccda9956d988f4 to d92d2572329bd442 (took 100.4383ms)
2021/08/20 13:00:54.081665 [info] prophet: [prophet-leader/node-0]/loop: exit
2021-08-20 13:00:54.081692 I | rafthttp: stopping peer d92d2572329bd442...
2021-08-20 13:00:54.081857 I | rafthttp: closed the TCP streaming connection with peer d92d2572329bd442 (stream MsgApp v2 writer)
2021-08-20 13:00:54.081871 I | rafthttp: stopped streaming with peer d92d2572329bd442 (writer)
2021-08-20 13:00:54.081895 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:54.082014 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:54.082028 I | rafthttp: closed the TCP streaming connection with peer d92d2572329bd442 (stream Message writer)
2021-08-20 13:00:54.082031 I | rafthttp: stopped streaming with peer d92d2572329bd442 (writer)
2021-08-20 13:00:54.082058 I | rafthttp: stopped HTTP pipelining with peer d92d2572329bd442
2021-08-20 13:00:54.082103 W | rafthttp: lost the TCP streaming connection with peer d92d2572329bd442 (stream MsgApp v2 reader)
2021-08-20 13:00:54.082120 E | rafthttp: failed to read d92d2572329bd442 on stream MsgApp v2 (context canceled)
2021-08-20 13:00:54.082123 I | rafthttp: peer d92d2572329bd442 became inactive (message send to peer failed)
2021-08-20 13:00:54.082131 I | rafthttp: stopped streaming with peer d92d2572329bd442 (stream MsgApp v2 reader)
2021-08-20 13:00:54.082162 W | rafthttp: lost the TCP streaming connection with peer d92d2572329bd442 (stream Message reader)
2021-08-20 13:00:54.082189 I | rafthttp: stopped streaming with peer d92d2572329bd442 (stream Message reader)
2021-08-20 13:00:54.082192 I | rafthttp: stopped peer d92d2572329bd442
2021-08-20 13:00:54.082194 I | rafthttp: stopping peer 41243706bcb3f2a6...
2021-08-20 13:00:54.082351 I | rafthttp: closed the TCP streaming connection with peer 41243706bcb3f2a6 (stream MsgApp v2 writer)
2021-08-20 13:00:54.082376 I | rafthttp: stopped streaming with peer 41243706bcb3f2a6 (writer)
2021-08-20 13:00:54.082410 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:54.082523 I | rafthttp: closed the TCP streaming connection with peer 41243706bcb3f2a6 (stream Message writer)
2021-08-20 13:00:54.082536 I | rafthttp: stopped streaming with peer 41243706bcb3f2a6 (writer)
2021-08-20 13:00:54.082541 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:54.082554 I | rafthttp: stopped HTTP pipelining with peer 41243706bcb3f2a6
2021-08-20 13:00:54.082588 W | rafthttp: lost the TCP streaming connection with peer 41243706bcb3f2a6 (stream MsgApp v2 reader)
2021-08-20 13:00:54.082600 E | rafthttp: failed to read 41243706bcb3f2a6 on stream MsgApp v2 (context canceled)
2021-08-20 13:00:54.082601 I | rafthttp: peer 41243706bcb3f2a6 became inactive (message send to peer failed)
2021-08-20 13:00:54.082607 I | rafthttp: stopped streaming with peer 41243706bcb3f2a6 (stream MsgApp v2 reader)
2021-08-20 13:00:54.082631 W | rafthttp: lost the TCP streaming connection with peer 41243706bcb3f2a6 (stream Message reader)
2021-08-20 13:00:54.082644 I | rafthttp: stopped streaming with peer 41243706bcb3f2a6 (stream Message reader)
2021-08-20 13:00:54.082647 I | rafthttp: stopped peer 41243706bcb3f2a6
2021-08-20 13:00:54.082749 E | rafthttp: failed to find member 41243706bcb3f2a6 in cluster 6a4ade671189dc2f
2021-08-20 13:00:54.082767 E | rafthttp: failed to find member d92d2572329bd442 in cluster 6a4ade671189dc2f
2021-08-20 13:00:54.082792 E | rafthttp: failed to find member 41243706bcb3f2a6 in cluster 6a4ade671189dc2f
2021-08-20 13:00:54.082819 E | rafthttp: failed to find member d92d2572329bd442 in cluster 6a4ade671189dc2f
2021-08-20 13:00:54.082848 E | rafthttp: failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node 41243706bcb3f2a6)
2021-08-20 13:00:54.082858 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021-08-20 13:00:54.082860 E | rafthttp: failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node d92d2572329bd442)
2021-08-20 13:00:54.082864 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021/08/20 13:00:54.087218 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:54.087231 [info] [raftstore]: shard 9 handle serve raft stopped
2021/08/20 13:00:54.087248 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:54.087252 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:54.087255 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:54.087258 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:54.087289 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.087303 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.087308 [info] [transport]: send raft worker stopped
2021/08/20 13:00:54.087294 [info] [transport]: transfer stopped
2021/08/20 13:00:54.087319 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.087300 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.087301 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.087302 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.087304 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.087305 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.087341 [error] [transport]: session 1[127.0.0.1:44630] read failed with read tcp 127.0.0.1:10000->127.0.0.1:44630: use of closed network connection
2021/08/20 13:00:54.087343 [error] [transport]: session 2[127.0.0.1:44696] read failed with read tcp 127.0.0.1:10000->127.0.0.1:44696: use of closed network connection
2021-08-20 13:00:54.088274 W | etcdserver: failed to apply request "header:<ID:15294922945052977678 > lease_revoke:<id:54427b61eedaaa0a>" with response "size:27" took (19.6µs) to execute, err is lease not found
2021-08-20 13:00:54.088355 W | etcdserver: failed to apply request "header:<ID:15294922945052977678 > lease_revoke:<id:54427b61eedaaa0a>" with response "size:26" took (17.7µs) to execute, err is lease not found
{"level":"warn","ts":"2021-08-20T13:00:54.088+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-b93c0362-b78f-47d7-8515-20d90429560d/127.0.0.1:40001","attempt":0,"error":"rpc error: code = NotFound desc = etcdserver: requested lease not found"}
2021/08/20 13:00:54.088418 [info] prophet: [prophet-leader/node-1]/lease: close failed with etcdserver: requested lease not found
2021-08-20 13:00:54.088486 I | etcdserver: d92d2572329bd442 starts leadership transfer from d92d2572329bd442 to 41243706bcb3f2a6
{"level":"info","ts":"2021-08-20T13:00:54.088+0800","caller":"raft/raft.go:1278","msg":"d92d2572329bd442 [term 3] starts to transfer leadership to 41243706bcb3f2a6"}
{"level":"info","ts":"2021-08-20T13:00:54.088+0800","caller":"raft/raft.go:1284","msg":"d92d2572329bd442 sends MsgTimeoutNow to 41243706bcb3f2a6 immediately as 41243706bcb3f2a6 already has up-to-date log"}
{"level":"info","ts":"2021-08-20T13:00:54.088+0800","caller":"raft/raft.go:1372","msg":"41243706bcb3f2a6 [term 3] received MsgTimeoutNow from d92d2572329bd442 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T13:00:54.088+0800","caller":"raft/raft.go:724","msg":"41243706bcb3f2a6 became candidate at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.088+0800","caller":"raft/raft.go:835","msg":"41243706bcb3f2a6 received MsgVoteResp from 41243706bcb3f2a6 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.088+0800","caller":"raft/raft.go:822","msg":"41243706bcb3f2a6 [logterm: 3, index: 40] sent MsgVote request to 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.088+0800","caller":"raft/raft.go:822","msg":"41243706bcb3f2a6 [logterm: 3, index: 40] sent MsgVote request to d92d2572329bd442 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.088+0800","caller":"raft/node.go:331","msg":"raft.node: 41243706bcb3f2a6 lost leader d92d2572329bd442 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.089+0800","caller":"raft/raft.go:870","msg":"d92d2572329bd442 [term: 3] received a MsgVote message with higher term from 41243706bcb3f2a6 [term: 4]"}
{"level":"info","ts":"2021-08-20T13:00:54.089+0800","caller":"raft/raft.go:711","msg":"d92d2572329bd442 became follower at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.089+0800","caller":"raft/raft.go:971","msg":"d92d2572329bd442 [logterm: 3, index: 40, vote: 0] cast MsgVote for 41243706bcb3f2a6 [logterm: 3, index: 40] at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.089+0800","caller":"raft/node.go:331","msg":"raft.node: d92d2572329bd442 lost leader d92d2572329bd442 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.089+0800","caller":"raft/raft.go:835","msg":"41243706bcb3f2a6 received MsgVoteResp from d92d2572329bd442 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.089+0800","caller":"raft/raft.go:1319","msg":"41243706bcb3f2a6 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T13:00:54.089+0800","caller":"raft/raft.go:776","msg":"41243706bcb3f2a6 became leader at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.089+0800","caller":"raft/node.go:325","msg":"raft.node: 41243706bcb3f2a6 elected leader 41243706bcb3f2a6 at term 4"}
{"level":"info","ts":"2021-08-20T13:00:54.089+0800","caller":"raft/node.go:325","msg":"raft.node: d92d2572329bd442 elected leader 41243706bcb3f2a6 at term 4"}
2021/08/20 13:00:54.090341 [info] prophet: [prophet-leader/node-2]/keepalive: exit with etcd leader changed
2021/08/20 13:00:54.090367 [error] prophet: [prophet-leader/node-2]/lease: keep lease exit
2021/08/20 13:00:54.090378 [info] prophet: [prophet-leader/node-2]/lease: exit with context done
2021/08/20 13:00:54.106500 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/08/20 13:00:54.130072 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:54.141612 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 13:00:54.141636 [info] [raftstore]: shard 9 raft tick stopped
2021/08/20 13:00:54.180370 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:54.180385 [error] prophet: reset leader connection failed with client is closed
2021/08/20 13:00:54.180421 [error] prophet: client read loop stopped
2021/08/20 13:00:54.180500 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021-08-20 13:00:54.189057 I | etcdserver: d92d2572329bd442 finished leadership transfer from d92d2572329bd442 to 41243706bcb3f2a6 (took 100.5686ms)
2021-08-20 13:00:54.189111 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:54.189126 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 13:00:54.189291 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:00:54.189303 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:54.189450 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:00:54.189462 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:54.189487 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:54.189492 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:54.189495 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:54.189506 I | rafthttp: stopped peer 93ccda9956d988f4
2021-08-20 13:00:54.189516 I | rafthttp: stopping peer 41243706bcb3f2a6...
2021-08-20 13:00:54.189661 I | rafthttp: closed the TCP streaming connection with peer 41243706bcb3f2a6 (stream MsgApp v2 writer)
2021-08-20 13:00:54.189683 I | rafthttp: stopped streaming with peer 41243706bcb3f2a6 (writer)
2021-08-20 13:00:54.189703 W | rafthttp: lost the TCP streaming connection with peer d92d2572329bd442 (stream MsgApp v2 reader)
2021-08-20 13:00:54.189833 I | rafthttp: closed the TCP streaming connection with peer 41243706bcb3f2a6 (stream Message writer)
2021-08-20 13:00:54.189845 I | rafthttp: stopped streaming with peer 41243706bcb3f2a6 (writer)
2021-08-20 13:00:54.189852 W | rafthttp: lost the TCP streaming connection with peer d92d2572329bd442 (stream Message reader)
2021-08-20 13:00:54.189914 I | rafthttp: stopped HTTP pipelining with peer 41243706bcb3f2a6
2021-08-20 13:00:54.189954 W | rafthttp: lost the TCP streaming connection with peer 41243706bcb3f2a6 (stream MsgApp v2 reader)
2021-08-20 13:00:54.189971 E | rafthttp: failed to read 41243706bcb3f2a6 on stream MsgApp v2 (context canceled)
2021-08-20 13:00:54.189973 I | rafthttp: peer 41243706bcb3f2a6 became inactive (message send to peer failed)
2021-08-20 13:00:54.189981 I | rafthttp: stopped streaming with peer 41243706bcb3f2a6 (stream MsgApp v2 reader)
2021-08-20 13:00:54.190044 W | rafthttp: lost the TCP streaming connection with peer 41243706bcb3f2a6 (stream Message reader)
2021-08-20 13:00:54.190060 I | rafthttp: stopped streaming with peer 41243706bcb3f2a6 (stream Message reader)
2021-08-20 13:00:54.190063 I | rafthttp: stopped peer 41243706bcb3f2a6
2021-08-20 13:00:54.190135 E | rafthttp: failed to find member 41243706bcb3f2a6 in cluster 6a4ade671189dc2f
2021-08-20 13:00:54.190182 E | rafthttp: failed to find member 41243706bcb3f2a6 in cluster 6a4ade671189dc2f
2021-08-20 13:00:54.190236 E | rafthttp: failed to dial d92d2572329bd442 on stream MsgApp v2 (peer d92d2572329bd442 failed to find local node 41243706bcb3f2a6)
2021-08-20 13:00:54.190251 I | rafthttp: peer d92d2572329bd442 became inactive (message send to peer failed)
2021/08/20 13:00:54.196325 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:54.196340 [info] [raftstore]: shard 9 handle serve raft stopped
2021/08/20 13:00:54.196373 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:54.196373 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:54.196378 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:54.196382 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:54.196415 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.196426 [info] [transport]: transfer stopped
2021/08/20 13:00:54.196428 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.196431 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.196432 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.196434 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.196437 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.196442 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.196444 [info] [transport]: send raft worker stopped
2021/08/20 13:00:54.196426 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:54.196482 [error] [transport]: session 1[127.0.0.1:38712] read failed with read tcp 127.0.0.1:10001->127.0.0.1:38712: use of closed network connection
2021/08/20 13:00:54.196495 [error] [transport]: session 2[127.0.0.1:38716] read failed with read tcp 127.0.0.1:10001->127.0.0.1:38716: use of closed network connection
2021-08-20 13:00:54.213709 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021/08/20 13:00:54.241870 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 13:00:54.241883 [info] [raftstore]: shard 9 raft tick stopped
2021-08-20 13:00:54.313710 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 13:00:54.381545 [error] prophet: reset leader connection failed with client is closed
2021/08/20 13:00:54.381583 [error] prophet: client read loop stopped
2021-08-20 13:00:54.412883 W | rafthttp: failed to process raft message (raft: stopped)
2021-08-20 13:00:54.412966 W | rafthttp: lost the TCP streaming connection with peer d92d2572329bd442 (stream Message writer)
2021/08/20 13:00:54.541719 [error] [transport]: session 2[127.0.0.1:49402] read failed with read tcp 127.0.0.1:10002->127.0.0.1:49402: i/o timeout
2021/08/20 13:00:54.542844 [error] [transport]: session 1[127.0.0.1:49390] read failed with read tcp 127.0.0.1:10002->127.0.0.1:49390: i/o timeout
2021/08/20 13:00:54.775168 [error] [raftstore]: send store heartbeat failed with client is closed
2021/08/20 13:00:55.130391 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"warn","ts":"2021-08-20T13:00:55.197+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-1e4a64ba-68c1-4d1e-9104-ad7bfad1522a/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 13:00:55.197592 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
2021/08/20 13:00:55.197651 [info] prophet: coordinator stops running 
2021/08/20 13:00:55.197665 [info] prophet: coordinator is stopping
2021/08/20 13:00:55.197667 [info] prophet: coordinator has been stopped
{"level":"warn","ts":"2021-08-20T13:00:55.197+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-1e4a64ba-68c1-4d1e-9104-ad7bfad1522a/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/08/20 13:00:55.197679 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context canceled
2021/08/20 13:00:55.197682 [error] prophet: [prophet-leader/node-2]/loop: load current leader failed with context canceled, retry later
2021-08-20 13:00:55.197691 W | etcdserver: 41243706bcb3f2a6 failed to transfer leadership (etcdserver: unhealthy cluster)
2021-08-20 13:00:55.197698 W | etcdserver: read-only range request "key:\"/electors/leader/prophet-leader\" " with result "error:context canceled" took too long (1.0067629s) to execute
WARNING: 2021/08/20 13:00:55 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
2021-08-20 13:00:55.197744 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:55.197772 I | rafthttp: stopped HTTP pipelining with peer d92d2572329bd442
2021-08-20 13:00:55.197776 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 13:00:55.197953 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:00:55.197969 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:55.197989 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:55.197997 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:55.198003 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:55.198008 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:55.198012 I | rafthttp: stopped peer 93ccda9956d988f4
2021-08-20 13:00:55.198015 I | rafthttp: stopping peer d92d2572329bd442...
2021-08-20 13:00:55.198173 I | rafthttp: closed the TCP streaming connection with peer d92d2572329bd442 (stream MsgApp v2 writer)
2021-08-20 13:00:55.198187 I | rafthttp: stopped streaming with peer d92d2572329bd442 (writer)
2021-08-20 13:00:55.198208 I | rafthttp: stopped streaming with peer d92d2572329bd442 (writer)
2021-08-20 13:00:55.198242 I | rafthttp: stopped HTTP pipelining with peer d92d2572329bd442
2021-08-20 13:00:55.198267 I | rafthttp: stopped streaming with peer d92d2572329bd442 (stream MsgApp v2 reader)
2021-08-20 13:00:55.198273 I | rafthttp: stopped streaming with peer d92d2572329bd442 (stream Message reader)
2021-08-20 13:00:55.198284 I | rafthttp: stopped peer d92d2572329bd442
2021/08/20 13:00:55.205529 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:55.205558 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:55.205562 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:55.205566 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:55.205573 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:55.205615 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.205623 [info] [transport]: transfer stopped
2021/08/20 13:00:55.205629 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.205630 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.205634 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.205642 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.205645 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.205647 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.205648 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.205649 [info] [transport]: send raft worker stopped
--- PASS: TestAppliedRules (9.54s)
=== RUN   TestSplit
2021/08/20 13:00:55.206528 [info] prophet: prophet logger set
2021/08/20 13:00:55.206912 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:55.206923 [info] [raftstore]: begin to start prophet
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:55.206961 I | embed: pprof is enabled under /debug/pprof
2021/08/20 13:00:55.206991 [info] [raftstore]: start scan gc snap files
2021-08-20 13:00:55.206993 I | embed: name = node-0
2021-08-20 13:00:55.207042 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 13:00:55.207044 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 13:00:55.207046 I | embed: heartbeat = 100ms
2021-08-20 13:00:55.207047 I | embed: election = 3000ms
2021-08-20 13:00:55.207049 I | embed: snapshot count = 100000
2021-08-20 13:00:55.207052 I | embed: advertise client URLs = http://127.0.0.1:40000
2021-08-20 13:00:55.211076 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:55.211+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:55.211+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:55.211+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T13:00:55.211+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T13:00:55.211+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:55.212796 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:55.215756 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:55.215881 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
{"level":"info","ts":"2021-08-20T13:00:55.215+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:55.216007 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:55.216025 I | embed: listening for peers on 127.0.0.1:50000
2021/08/20 13:00:55.297908 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"info","ts":"2021-08-20T13:00:55.611+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T13:00:55.611+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T13:00:55.611+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:55.612+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T13:00:55.612+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 13:00:55.612101 I | etcdserver: setting up the initial cluster version to 3.4
2021-08-20 13:00:55.612675 N | etcdserver/membership: set the initial cluster version to 3.4
2021-08-20 13:00:55.612705 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:55.612708 I | embed: ready to serve client requests
2021/08/20 13:00:55.612754 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 13:00:55.612931 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021/08/20 13:00:55.613874 [info] prophet: net application started
2021/08/20 13:00:55.613893 [info] prophet: start system time monitor 
2021/08/20 13:00:55.614226 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 13:00:55.614396 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 13:00:55.614408 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 13:00:55.614622 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 13:00:55.615123 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 13:00:55.615136 [info] prophet: ********node-0 become to leader now********
2021/08/20 13:00:55.615575 [info] prophet: load 0 containers, cost 351.3µs
2021/08/20 13:00:55.615748 [info] prophet: load 0 resources, cost 164.3µs
2021/08/20 13:00:55.616341 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:55.616357 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:00:55.616361 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 13:00:55.616362 [info] prophet: coordinator starts to run schedulers 
2021/08/20 13:00:55.616366 [info] prophet: client read loop started 
2021/08/20 13:00:55.616367 [info] prophet: client started
2021/08/20 13:00:55.616373 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:00:55.616374 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:55.616390 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435655 deployPath:"not set" 
2021/08/20 13:00:55.616392 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:55.616408 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:55.616421 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:55.616430 [info] prophet: session 1[127.0.0.1:47278] connected
2021/08/20 13:00:55.616736 [info] prophet: load 0 jobs
2021/08/20 13:00:55.617001 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 13:00:55.617015 [info] prophet: coordinator starts patrol resources 
2021/08/20 13:00:55.617479 [info] [raftstore]: create local store with id 1
2021/08/20 13:00:55.617947 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 13:00:55.617956 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 13:00:55.618145 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 13:00:55.619356 [info] prophet: container 1 limit added
2021/08/20 13:00:55.619402 [info] [raftstore]: prophet started
2021/08/20 13:00:55.619412 [info] prophet: container 1 heartbeat stream binded
2021/08/20 13:00:55.619432 [info] [transport]: net application started
2021/08/20 13:00:55.619434 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 13:00:55.619436 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:55.619447 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:55.619452 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:55.619452 [info] [raftstore]: shard 2 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:55.619+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-08-20T13:00:55.619+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:55.619+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:55.619490 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:55.619+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:55.619+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:55.619+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:55.619+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 13:00:55.619516 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 13:00:55.619538 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 13:00:55.619539 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:55.619548 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:55.619556 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 13:00:55.619557 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:55.619559 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:55.619559 [info] [raftstore]: shards started
2021/08/20 13:00:55.619561 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:55.619566 [info] [raftstore]: net application started
2021/08/20 13:00:55.619567 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 13:00:55.619573 [info] [raftstore]: router started
2021/08/20 13:00:55.619608 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:55.619652 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:55.619663 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:55.619677 [info] prophet: session 2[127.0.0.1:47280] connected
2021/08/20 13:00:55.619684 [info] [raftstore]: router event loop task started
2021/08/20 13:00:55.619685 [info] prophet: new watcher 127.0.0.1:47280 added
2021/08/20 13:00:55.619738 [info] [raftstore]: start init event
2021/08/20 13:00:55.729853 [info] [raftstore]: shard 2 start split check job from [122 0 0 0 0 0 0 0 0] to [122 0 0 0 0 0 0 0 1]
2021/08/20 13:00:55.729890 [info] [raftstore]: shard 2 try to split, size 60 bytes splitKeys [[122 0 0 0 0 0 0 0 0 107 101 121 50] [122 0 0 0 0 0 0 0 0 107 101 121 51]]
2021/08/20 13:00:55.729941 [info] prophet: alloc ids [6] for resource 5 split
2021/08/20 13:00:55.729955 [info] prophet: alloc ids [8] for resource 7 split
2021/08/20 13:00:55.750633 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/08/20 13:00:55.750656 [info] [raftstore]: shard 5 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:55.750660 [info] [raftstore]: shard 5 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:55.750661 [info] [raftstore]: shard 5 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(6)"}
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [6], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:55.750701 [info] [raftstore]: shard 5 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:934","msg":"6 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:724","msg":"6 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:835","msg":"6 received MsgVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:776","msg":"6 became leader at term 6"}
2021/08/20 13:00:55.750730 [error] [raftstore]: >>>>>>>>>>>> shard 5 peer 6 add registration job by doApplySplit
2021/08/20 13:00:55.750754 [error] [raftstore]: >>>>>>>>>>>> shard 5 peer 6 add registration job by doApplySplit, completed
2021/08/20 13:00:55.750773 [info] [raftstore]: shard 5 added with peer {ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:55.750786 [info] [raftstore]: shard 7 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:55.750790 [info] [raftstore]: shard 7 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:55.750791 [info] [raftstore]: shard 7 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(8)"}
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:388","msg":"newRaft 8 [peers: [8], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:55.750818 [info] [raftstore]: shard 7 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:934","msg":"8 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:724","msg":"8 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:835","msg":"8 received MsgVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:55.750+0800","caller":"raft/raft.go:776","msg":"8 became leader at term 6"}
2021/08/20 13:00:55.750843 [error] [raftstore]: >>>>>>>>>>>> shard 7 peer 8 add registration job by doApplySplit
2021/08/20 13:00:55.750860 [info] [raftstore]: shard 7 added with peer {ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:55.750861 [error] [raftstore]: >>>>>>>>>>>> shard 7 peer 8 add registration job by doApplySplit, completed
2021/08/20 13:00:55.750873 [info] [raftstore]: shard 2 new shard added, new shards [{ID:5 Start:[107 101 121 50] End:[107 101 121 51] Epoch:{ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 Start:[107 101 121 51] End:[] Epoch:{ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:55.750902 [info] [raftstore]: shard 5 ********become leader now********
2021/08/20 13:00:55.750933 [info] [raftstore]: shard 7 ********become leader now********
2021/08/20 13:00:55.751000 [info] prophet: resource 2 version changed from 1 to 3
2021/08/20 13:00:55.820317 [info] [raftstore]: shard 5 start split check job from [122 0 0 0 0 0 0 0 0 107 101 121 50] to [122 0 0 0 0 0 0 0 0 107 101 121 51]
2021/08/20 13:00:55.820355 [info] [raftstore]: shard 7 start split check job from [122 0 0 0 0 0 0 0 0 107 101 121 51] to [122 0 0 0 0 0 0 0 1]
2021/08/20 13:00:55.821676 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:47278->127.0.0.1:30000: use of closed network connection
2021/08/20 13:00:55.821685 [error] prophet: client read loop stopped
2021/08/20 13:00:55.821686 [error] prophet: session 1[127.0.0.1:47278] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47278: use of closed network connection
2021/08/20 13:00:55.821707 [error] prophet: session 2[127.0.0.1:47280] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47280: use of closed network connection
2021/08/20 13:00:55.821721 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:55.821743 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:55.821876 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 13:00:55.821909 [info] prophet: drive push operator has been stopped 
2021/08/20 13:00:55.821918 [info] prophet: coordinator is stopping
2021/08/20 13:00:55.821918 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 13:00:55.821923 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 13:00:55.821930 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 13:00:55.821933 [info] prophet: patrol resources has been stopped 
2021/08/20 13:00:55.821935 [info] prophet: coordinator has been stopped
2021-08-20 13:00:55.821948 I | etcdserver: skipped leadership transfer for single voting member cluster
2021/08/20 13:00:55.830415 [info] [raftstore]: shard 5 handle serve raft stopped
2021/08/20 13:00:55.830428 [info] [raftstore]: shard 7 handle serve raft stopped
2021/08/20 13:00:55.830430 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:55.830465 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:55.830465 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:55.830468 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:55.830473 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:55.830505 [info] [transport]: transfer stopped
--- PASS: TestSplit (0.62s)
=== RUN   TestCustomSplit
2021/08/20 13:00:55.830558 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.830564 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.830567 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.830570 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.830573 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.830581 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.830586 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.830591 [info] [transport]: send raft worker stopped
2021/08/20 13:00:55.830592 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:55.831584 [info] prophet: prophet logger set
2021/08/20 13:00:55.831863 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:55.831875 [info] [raftstore]: begin to start prophet
2021/08/20 13:00:55.831888 [info] [raftstore]: start scan gc snap files
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:55.831913 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:55.831946 I | embed: name = node-0
2021-08-20 13:00:55.831956 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 13:00:55.831958 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 13:00:55.831959 I | embed: heartbeat = 100ms
2021-08-20 13:00:55.831960 I | embed: election = 3000ms
2021-08-20 13:00:55.831961 I | embed: snapshot count = 100000
2021-08-20 13:00:55.831964 I | embed: advertise client URLs = http://127.0.0.1:40000
2021-08-20 13:00:55.835891 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:55.835+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:55.835+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:55.835+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T13:00:55.835+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T13:00:55.835+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:55.837587 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:55.840906 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021/08/20 13:00:55.840996 [info] [raftstore]: shard 5 raft tick stopped
2021/08/20 13:00:55.841007 [info] [raftstore]: shard 7 raft tick stopped
2021-08-20 13:00:55.841016 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
{"level":"info","ts":"2021-08-20T13:00:55.841+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:55.841166 I | embed: listening for peers on 127.0.0.1:50000
2021-08-20 13:00:55.841207 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021/08/20 13:00:55.891990 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 13:00:55.922978 [info] prophet: [prophet-leader/node-0]/loop: exit
2021/08/20 13:00:56.130633 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:57.009648 [info] prophet: [prophet-leader/node-1]/loop: exit
2021/08/20 13:00:57.130977 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:57.237+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T13:00:57.237+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T13:00:57.237+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:57.237+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T13:00:57.237+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 13:00:57.237249 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:57.237271 I | embed: ready to serve client requests
2021/08/20 13:00:57.237284 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 13:00:57.237283 I | etcdserver: setting up the initial cluster version to 3.4
2021-08-20 13:00:57.237561 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021-08-20 13:00:57.237929 N | etcdserver/membership: set the initial cluster version to 3.4
2021/08/20 13:00:57.238891 [info] prophet: net application started
2021/08/20 13:00:57.238936 [info] prophet: start system time monitor 
2021/08/20 13:00:57.239363 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 13:00:57.239535 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 13:00:57.239547 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 13:00:57.239781 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 13:00:57.240367 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 13:00:57.240384 [info] prophet: ********node-0 become to leader now********
2021/08/20 13:00:57.240791 [info] prophet: load 0 containers, cost 315.8µs
2021/08/20 13:00:57.240953 [info] prophet: load 0 resources, cost 151.3µs
2021/08/20 13:00:57.241591 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:00:57.241603 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 13:00:57.241604 [info] prophet: coordinator starts to run schedulers 
2021/08/20 13:00:57.241592 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:57.241593 [info] prophet: client started
2021/08/20 13:00:57.241688 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:00:57.241690 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:57.241704 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435657 deployPath:"not set" 
2021/08/20 13:00:57.241705 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:57.241598 [info] prophet: client read loop started 
2021/08/20 13:00:57.241745 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:57.241748 [info] prophet: session 1[127.0.0.1:47286] connected
2021/08/20 13:00:57.241754 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:57.242051 [info] prophet: load 0 jobs
2021/08/20 13:00:57.242255 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 13:00:57.242280 [info] prophet: coordinator starts patrol resources 
2021/08/20 13:00:57.243814 [info] [raftstore]: create local store with id 1
2021/08/20 13:00:57.243990 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 13:00:57.244002 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 13:00:57.244173 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 13:00:57.245441 [info] prophet: container 1 limit added
2021/08/20 13:00:57.245483 [info] [raftstore]: prophet started
2021/08/20 13:00:57.245535 [info] [transport]: net application started
2021/08/20 13:00:57.245544 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 13:00:57.245547 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:57.245559 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:57.245570 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:57.245571 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:57.245571 [info] prophet: container 1 heartbeat stream binded
2021/08/20 13:00:57.245572 [info] [raftstore]: shard 2 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:57.245+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-08-20T13:00:57.245+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:57.245+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:57.245640 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:57.245+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:57.245+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:57.245+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:57.245+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 13:00:57.245700 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 13:00:57.245722 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 13:00:57.245740 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:57.245741 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:57.245742 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:57.245743 [info] [raftstore]: shards started
2021/08/20 13:00:57.245745 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:57.245751 [info] [raftstore]: net application started
2021/08/20 13:00:57.245760 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 13:00:57.245767 [info] [raftstore]: router started
2021/08/20 13:00:57.245785 [info] [raftstore]: shard 2 ********become leader now********
2021/08/20 13:00:57.245791 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:57.245814 [info] [raftstore]: router event loop task started
2021/08/20 13:00:57.245848 [info] prophet: session 2[127.0.0.1:47288] connected
2021/08/20 13:00:57.245850 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:57.245870 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:57.245933 [info] prophet: new watcher 127.0.0.1:47288 added
2021/08/20 13:00:57.246013 [info] [raftstore]: start init event
2021/08/20 13:00:57.355663 [info] [raftstore]: shard 2 start split check job from [122 0 0 0 0 0 0 0 0] to [122 0 0 0 0 0 0 0 1]
2021/08/20 13:00:57.355699 [info] [raftstore]: shard 2 try to split, size 60 bytes splitKeys [[122 0 0 0 0 0 0 0 0 107 101 121 50]]
2021/08/20 13:00:57.355760 [info] prophet: alloc ids [6] for resource 5 split
2021/08/20 13:00:57.375801 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/08/20 13:00:57.375822 [info] [raftstore]: shard 5 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:57.375827 [info] [raftstore]: shard 5 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:57.375828 [info] [raftstore]: shard 5 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:57.375+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(6)"}
{"level":"info","ts":"2021-08-20T13:00:57.375+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:57.375+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [6], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:57.375875 [info] [raftstore]: shard 5 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:57.375+0800","caller":"raft/raft.go:934","msg":"6 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:57.375+0800","caller":"raft/raft.go:724","msg":"6 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:57.375+0800","caller":"raft/raft.go:835","msg":"6 received MsgVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:57.375+0800","caller":"raft/raft.go:776","msg":"6 became leader at term 6"}
2021/08/20 13:00:57.375914 [error] [raftstore]: >>>>>>>>>>>> shard 5 peer 6 add registration job by doApplySplit
2021/08/20 13:00:57.375937 [error] [raftstore]: >>>>>>>>>>>> shard 5 peer 6 add registration job by doApplySplit, completed
2021/08/20 13:00:57.375972 [info] [raftstore]: shard 5 added with peer {ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:57.375981 [info] [raftstore]: shard 2 new shard added, new shards [{ID:5 Start:[107 101 121 50] End:[] Epoch:{ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:57.375993 [info] [raftstore]: shard 5 ********become leader now********
2021/08/20 13:00:57.376084 [info] prophet: resource 2 version changed from 1 to 2
2021/08/20 13:00:57.445974 [info] [raftstore]: shard 2 start split check job from [122 0 0 0 0 0 0 0 0] to [122 0 0 0 0 0 0 0 0 107 101 121 50]
2021/08/20 13:00:57.446001 [info] [raftstore]: shard 5 start split check job from [122 0 0 0 0 0 0 0 0 107 101 121 50] to [122 0 0 0 0 0 0 0 1]
2021/08/20 13:00:57.449369 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:47286->127.0.0.1:30000: use of closed network connection
2021/08/20 13:00:57.449381 [error] prophet: client read loop stopped
2021/08/20 13:00:57.449386 [error] prophet: session 1[127.0.0.1:47286] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47286: use of closed network connection
2021/08/20 13:00:57.449420 [error] prophet: watcher read events failed with EOF
2021/08/20 13:00:57.449422 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:00:57.449430 [error] prophet: session 2[127.0.0.1:47288] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47288: use of closed network connection
2021/08/20 13:00:57.449604 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 13:00:57.449666 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 13:00:57.449684 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/08/20 13:00:57.449691 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 13:00:57.449694 [info] prophet: patrol resources has been stopped 
2021/08/20 13:00:57.449716 [info] prophet: drive push operator has been stopped 
2021-08-20 13:00:57.449723 I | etcdserver: skipped leadership transfer for single voting member cluster
2021/08/20 13:00:57.449737 [info] prophet: coordinator is stopping
2021/08/20 13:00:57.449739 [info] prophet: coordinator has been stopped
2021/08/20 13:00:57.456115 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:00:57.456128 [info] [raftstore]: shard 5 handle serve raft stopped
2021/08/20 13:00:57.456144 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:00:57.456147 [info] [raftstore]: router event loop task stopped
2021/08/20 13:00:57.456146 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:00:57.456153 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:00:57.456181 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:57.456190 [info] [transport]: transfer stopped
2021/08/20 13:00:57.456191 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:57.456194 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:57.456196 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:57.456196 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:57.456198 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:57.456200 [info] [transport]: send snapshot worker stopped
2021/08/20 13:00:57.456203 [info] [transport]: send raft worker stopped
2021/08/20 13:00:57.456202 [info] [transport]: send snapshot worker stopped
--- PASS: TestCustomSplit (1.63s)
=== RUN   TestSpeedupAddShard
2021/08/20 13:00:57.457160 [info] prophet: prophet logger set
2021/08/20 13:00:57.457486 [info] [raftstore]: start scan gc snap files
2021/08/20 13:00:57.457675 [info] [raftstore]: start scan gc snap files
2021/08/20 13:00:57.457935 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:57.457949 [info] [raftstore]: begin to start prophet
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021/08/20 13:00:57.457978 [info] [raftstore]: start scan gc snap files
2021-08-20 13:00:57.458005 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:57.458067 I | embed: name = node-0
2021-08-20 13:00:57.458085 I | embed: data dir = /tmp/cube/node-0/prophet
2021-08-20 13:00:57.458089 I | embed: member dir = /tmp/cube/node-0/prophet/member
2021-08-20 13:00:57.458091 I | embed: heartbeat = 100ms
2021-08-20 13:00:57.458094 I | embed: election = 3000ms
2021-08-20 13:00:57.458096 I | embed: snapshot count = 100000
2021-08-20 13:00:57.458100 I | embed: advertise client URLs = http://127.0.0.1:40000
2021-08-20 13:00:57.463111 I | etcdserver: starting member 93ccda9956d988f4 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:57.463+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:57.463+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:57.463+0800","caller":"raft/raft.go:388","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-08-20T13:00:57.463+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-08-20T13:00:57.463+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:57.464967 W | auth: simple token is not cryptographically signed
2021-08-20 13:00:57.468814 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:57.468943 I | etcdserver: 93ccda9956d988f4 as single-node; fast-forwarding 29 ticks (election ticks 30)
{"level":"info","ts":"2021-08-20T13:00:57.468+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:57.469019 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:57.469105 I | embed: listening for peers on 127.0.0.1:50000
2021/08/20 13:00:57.541553 [info] [raftstore]: shard 2 raft tick stopped
2021/08/20 13:00:57.541565 [info] [raftstore]: shard 5 raft tick stopped
2021/08/20 13:00:57.549895 [info] prophet: [prophet-leader/node-0]/loop: exit
2021/08/20 13:00:58.130610 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:00:59.130687 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:00:59.563+0800","caller":"raft/raft.go:934","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-08-20T13:00:59.563+0800","caller":"raft/raft.go:724","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-08-20T13:00:59.563+0800","caller":"raft/raft.go:835","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:59.563+0800","caller":"raft/raft.go:776","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-08-20T13:00:59.563+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
2021-08-20 13:00:59.563972 I | etcdserver: setting up the initial cluster version to 3.4
2021-08-20 13:00:59.564681 N | etcdserver/membership: set the initial cluster version to 3.4
2021-08-20 13:00:59.564709 I | etcdserver: published {Name:node-0 ClientURLs:[http://127.0.0.1:40000]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:59.564715 I | embed: ready to serve client requests
2021/08/20 13:00:59.564734 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
2021-08-20 13:00:59.564951 N | embed: serving insecure client requests on 127.0.0.1:40000, this is strongly discouraged!
2021/08/20 13:00:59.565753 [info] prophet: net application started
2021/08/20 13:00:59.565771 [info] prophet: start system time monitor 
2021/08/20 13:00:59.566175 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/08/20 13:00:59.566371 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/08/20 13:00:59.566380 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/08/20 13:00:59.566595 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/08/20 13:00:59.567122 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/08/20 13:00:59.567133 [info] prophet: ********node-0 become to leader now********
2021/08/20 13:00:59.567534 [info] prophet: load 0 containers, cost 319.8µs
2021/08/20 13:00:59.567777 [info] prophet: load 0 resources, cost 230.2µs
2021/08/20 13:00:59.568407 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:59.568419 [info] prophet: client read loop started 
2021/08/20 13:00:59.568422 [info] prophet: client started
2021/08/20 13:00:59.568425 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:00:59.568426 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:59.568441 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1629435659 deployPath:"not set" 
2021/08/20 13:00:59.568443 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:59.568411 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:00:59.568453 [info] prophet: coordinator has finished cluster information preparation 
2021/08/20 13:00:59.568454 [info] prophet: coordinator starts to run schedulers 
2021/08/20 13:00:59.568479 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:59.568491 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:59.568536 [info] prophet: session 1[127.0.0.1:47294] connected
2021/08/20 13:00:59.568798 [info] prophet: load 0 jobs
2021/08/20 13:00:59.569068 [info] [raftstore]: create local store with id 1
2021/08/20 13:00:59.569482 [info] [raftstore]: the cluster already bootstrap: false
2021/08/20 13:00:59.569491 [info] prophet: coordinator begins to actively drive push operator 
2021/08/20 13:00:59.569491 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/08/20 13:00:59.569501 [info] prophet: coordinator starts patrol resources 
2021/08/20 13:00:59.569649 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/08/20 13:00:59.571642 [info] prophet: container 1 limit added
2021/08/20 13:00:59.571705 [info] [raftstore]: prophet started
2021/08/20 13:00:59.571739 [info] prophet: container 1 heartbeat stream binded
2021/08/20 13:00:59.571742 [info] [transport]: net application started
2021/08/20 13:00:59.571744 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/08/20 13:00:59.571747 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:59.571760 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:59.571765 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:59.571766 [info] [raftstore]: shard 2 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:00:59.571+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-08-20T13:00:59.571+0800","caller":"raft/raft.go:711","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:00:59.571+0800","caller":"raft/raft.go:388","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:00:59.571809 [info] [raftstore]: shard 2 try to campaign leader, because only self
{"level":"info","ts":"2021-08-20T13:00:59.571+0800","caller":"raft/raft.go:934","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:00:59.571+0800","caller":"raft/raft.go:724","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:00:59.571+0800","caller":"raft/raft.go:835","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-08-20T13:00:59.571+0800","caller":"raft/raft.go:776","msg":"3 became leader at term 6"}
2021/08/20 13:00:59.571837 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards
2021/08/20 13:00:59.571837 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:59.571864 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 3 add registration job by startShards, completed
2021/08/20 13:00:59.571876 [info] [raftstore]: shard 2 added with peer {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:00:59.571877 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:59.571878 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:59.571879 [info] [raftstore]: shards started
2021/08/20 13:00:59.571881 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:59.571886 [info] [raftstore]: net application started
2021/08/20 13:00:59.571887 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/08/20 13:00:59.571894 [info] [raftstore]: router started
2021/08/20 13:00:59.571911 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:59.571928 [info] [raftstore]: router event loop task started
2021/08/20 13:00:59.571966 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:59.571966 [info] prophet: session 2[127.0.0.1:47296] connected
2021/08/20 13:00:59.571968 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:59.572005 [info] prophet: new watcher 127.0.0.1:47296 added
2021/08/20 13:00:59.572041 [info] [raftstore]: start init event
2021/08/20 13:00:59.573260 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:59.573268 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-08-20T13:00:59.573+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(5922308646336700704 10650127570946328820)"}
2021-08-20 13:00:59.573853 I | etcdserver/membership: added member 523044560b1fa120 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 13:00:59.573867 I | rafthttp: starting peer 523044560b1fa120...
2021-08-20 13:00:59.573882 I | rafthttp: started HTTP pipelining with peer 523044560b1fa120
2021-08-20 13:00:59.574103 I | rafthttp: started streaming with peer 523044560b1fa120 (writer)
2021-08-20 13:00:59.574246 I | rafthttp: started streaming with peer 523044560b1fa120 (writer)
2021-08-20 13:00:59.574482 I | rafthttp: started peer 523044560b1fa120
2021-08-20 13:00:59.574498 I | rafthttp: started streaming with peer 523044560b1fa120 (stream MsgApp v2 reader)
2021-08-20 13:00:59.574501 I | rafthttp: started streaming with peer 523044560b1fa120 (stream Message reader)
2021-08-20 13:00:59.574521 I | rafthttp: added peer 523044560b1fa120
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:00:59.574820 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:00:59.574843 I | embed: name = node-1
2021-08-20 13:00:59.574854 I | embed: data dir = /tmp/cube/node-1/prophet
2021-08-20 13:00:59.574856 I | embed: member dir = /tmp/cube/node-1/prophet/member
2021-08-20 13:00:59.574857 I | embed: heartbeat = 100ms
2021-08-20 13:00:59.574859 I | embed: election = 3000ms
2021-08-20 13:00:59.574861 I | embed: snapshot count = 100000
2021-08-20 13:00:59.574863 I | embed: advertise client URLs = http://127.0.0.1:40001
2021-08-20 13:00:59.579675 I | etcdserver: starting member 523044560b1fa120 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:00:59.579+0800","caller":"raft/raft.go:1550","msg":"523044560b1fa120 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:59.579+0800","caller":"raft/raft.go:711","msg":"523044560b1fa120 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:59.579+0800","caller":"raft/raft.go:388","msg":"newRaft 523044560b1fa120 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 13:00:59.581575 W | auth: simple token is not cryptographically signed
2021/08/20 13:00:59.582737 [info] [raftstore]: shard 2 ********become leader now********
2021-08-20 13:00:59.585354 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:59.585367 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 13:00:59.585374 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:00:59.585623 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:59.585783 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:00:59.586018 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 13:00:59.586034 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 13:00:59.586038 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:00:59.586051 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:59.586098 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:59.586333 I | rafthttp: peer 523044560b1fa120 became active
2021-08-20 13:00:59.586349 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 13:00:59.586356 I | rafthttp: established a TCP streaming connection with peer 523044560b1fa120 (stream Message writer)
2021-08-20 13:00:59.586359 I | embed: listening for peers on 127.0.0.1:50001
2021-08-20 13:00:59.586402 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:00:59.586428 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:00:59.586508 I | rafthttp: established a TCP streaming connection with peer 523044560b1fa120 (stream MsgApp v2 writer)
{"level":"info","ts":"2021-08-20T13:00:59.586+0800","caller":"raft/raft.go:870","msg":"523044560b1fa120 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T13:00:59.586+0800","caller":"raft/raft.go:711","msg":"523044560b1fa120 became follower at term 2"}
{"level":"info","ts":"2021-08-20T13:00:59.586+0800","caller":"raft/node.go:325","msg":"raft.node: 523044560b1fa120 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:00:59.588+0800","caller":"raft/raft.go:1550","msg":"523044560b1fa120 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:00:59.588240 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:00:59.588274 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T13:00:59.588+0800","caller":"raft/raft.go:1550","msg":"523044560b1fa120 switched to configuration voters=(5922308646336700704 10650127570946328820)"}
2021-08-20 13:00:59.588612 I | etcdserver/membership: added member 523044560b1fa120 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
2021-08-20 13:00:59.589727 I | etcdserver: published {Name:node-1 ClientURLs:[http://127.0.0.1:40001]} to cluster 6a4ade671189dc2f
2021-08-20 13:00:59.589742 I | embed: ready to serve client requests
2021/08/20 13:00:59.589772 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
2021-08-20 13:00:59.589947 N | embed: serving insecure client requests on 127.0.0.1:40001, this is strongly discouraged!
2021/08/20 13:00:59.590637 [info] prophet: net application started
2021/08/20 13:00:59.590655 [info] prophet: start system time monitor 
2021/08/20 13:00:59.591037 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 13:00:59.591046 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:59.591048 [info] prophet: ********node-1 become to follower now********
2021/08/20 13:00:59.591072 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:59.591080 [info] prophet: client started
2021/08/20 13:00:59.591083 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 13:00:59.591085 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:00:59.591096 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1629435659 deployPath:"not set" 
2021/08/20 13:00:59.591097 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:00:59.591113 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:59.591119 [info] prophet: session 3[127.0.0.1:47328] connected
2021/08/20 13:00:59.591076 [info] prophet: client read loop started 
2021/08/20 13:00:59.591128 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:00:59.591181 [info] [raftstore]: create local store with id 5
2021/08/20 13:00:59.591587 [info] [raftstore]: the cluster already bootstrap: true
2021/08/20 13:00:59.594173 [info] prophet: container 5 limit added
2021/08/20 13:00:59.594209 [info] [raftstore]: prophet started
2021/08/20 13:00:59.594229 [info] prophet: container 5 heartbeat stream binded
2021/08/20 13:00:59.594236 [info] [transport]: net application started
2021/08/20 13:00:59.594243 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/08/20 13:00:59.594248 [info] [raftstore]: raft shards workers started
2021/08/20 13:00:59.594251 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:00:59.594252 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:00:59.594253 [info] [raftstore]: shards started
2021/08/20 13:00:59.594254 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:00:59.594261 [info] [raftstore]: net application started
2021/08/20 13:00:59.594262 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/08/20 13:00:59.594272 [info] [raftstore]: router started
2021/08/20 13:00:59.594313 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:00:59.594316 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:00:59.594364 [info] prophet: session 4[127.0.0.1:47330] connected
2021/08/20 13:00:59.594374 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:00:59.594382 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:00:59.594383 [info] [raftstore]: router event loop task started
2021/08/20 13:00:59.594413 [info] prophet: new watcher 127.0.0.1:47330 added
2021/08/20 13:00:59.594473 [info] [raftstore]: start init event
2021/08/20 13:00:59.596202 [info] [raftstore]: begin start raftstore
2021/08/20 13:00:59.596212 [info] [raftstore]: begin to start prophet
2021-08-20 13:00:59.596678 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:29bf35cf93a92070 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:00:59.596+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e268e29d-36f3-4989-8359-93a42015bb31/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:00:59.596756 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:00:59.669767 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 13:00:59.6697473 +0800 CST m=+177.784833101, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/08/20 13:00:59.669788 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/08/20 13:00:59.669880 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:59.672147 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:59.672267 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:59.672286 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:59.672304 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source heartbeat
2021/08/20 13:00:59.672440 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021-08-20 13:00:59.674779 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:00:59.674820 I | rafthttp: established a TCP streaming connection with peer 523044560b1fa120 (stream MsgApp v2 reader)
2021-08-20 13:00:59.674823 I | rafthttp: established a TCP streaming connection with peer 523044560b1fa120 (stream Message reader)
2021-08-20 13:00:59.674848 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
{"level":"info","ts":"2021-08-20T13:00:59.682+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/08/20 13:00:59.682448 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 212 114 53 212 43 7 70 11 144 193 170 156 51 79 239 170 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:59.682460 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:59.682479 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:59.682597 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:59.682665 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/08/20 13:00:59.683006 [info] [transport]: session 1[127.0.0.1:38988] connected
2021/08/20 13:00:59.683013 [info] [transport]: connected to store 5
2021/08/20 13:00:59.683107 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 13:00:59.683139 [info] [raftstore]: shard 2 replicate peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:59.683160 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:59.683164 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:00:59.683166 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T13:00:59.683+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:00:59.683+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:00:59.683+0800","caller":"raft/raft.go:388","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 13:00:59.683265 [info] [raftstore]: shard 2 added with peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T13:00:59.683+0800","caller":"raft/raft.go:870","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:59.683+0800","caller":"raft/raft.go:711","msg":"6 became follower at term 6"}
2021/08/20 13:00:59.683424 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:59.683671 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/08/20 13:00:59.683737 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:59.683911 [info] [transport]: connected to store 1
2021/08/20 13:00:59.683931 [info] [transport]: session 1[127.0.0.1:44906] connected
2021/08/20 13:00:59.683972 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:59.684040 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:59.684052 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:00:59.684056 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T13:00:59.684+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:59.684116 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T13:00:59.684+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6)"}
{"level":"error","ts":"2021-08-20T13:00:59.684+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:59.684292 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6 XXX_unrecognized:[]}] Context:[10 32 10 16 91 122 242 214 214 111 77 251 129 216 195 111 74 46 132 26 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:00:59.684306 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:00:59.684308 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:00:59.684340 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<9> 
2021/08/20 13:00:59.684370 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/08/20 13:00:59.684380 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:00:59.684+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:10:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:00:59.684461 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 13:00:59.684563 [info] [transport]: connected to store 5
2021/08/20 13:00:59.684575 [info] [transport]: session 2[127.0.0.1:38992] connected
{"level":"info","ts":"2021-08-20T13:00:59.684+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:59.684+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-08-20T13:00:59.684+0800","caller":"raft/raft.go:1503","msg":"6 [commit: 9, lastindex: 9, lastterm: 6] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-08-20T13:00:59.684+0800","caller":"raft/raft.go:1420","msg":"6 [commit: 9] restored snapshot [index: 9, term: 6]"}
2021/08/20 13:00:59.684651 [info] [raftstore]: shard 2 peer 6 receiving snapshot, skip further handling
2021/08/20 13:00:59.685088 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:9 >,size=<125>
2021/08/20 13:00:59.685128 [info] [raftstore]: shard 2 send snap complete
2021/08/20 13:00:59.685143 [info] [transport]: shard 2 pending snap sent succ, size=<125>, epoch=<confVer:3 version:1 > term=<6> index=<9>
2021/08/20 13:00:59.685295 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-08-20 13:00:59.6697473 +0800 CST m=+177.784833101, startAt:2021-08-20 13:00:59.6697824 +0800 CST m=+177.784868301, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 15.5023ms, 
2021-08-20 13:01:00.097076 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:94900db51d12db08 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:01:00.097+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e268e29d-36f3-4989-8359-93a42015bb31/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:01:00.097230 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:01:00.130818 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:01:00.598359 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:94900db51d12db08 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:01:00.598+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e268e29d-36f3-4989-8359-93a42015bb31/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:01:00.598482 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:01:01.099066 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:e3d3130ae2736218 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:01:01.099+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e268e29d-36f3-4989-8359-93a42015bb31/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:01:01.099196 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:01:01.130795 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:01:01.541098 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 13:01:01.541123 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 13:01:01.541134 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:9 TruncatedState:{Index:9 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:01.541143 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 start applying snapshot
2021/08/20 13:01:01.541156 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 13:01:01.541266 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply
2021/08/20 13:01:01.541270 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 applying snapshot to set read 9
2021/08/20 13:01:01.541288 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:01:01.541301 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:01:01.541305 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 AdvanceApply with 9
2021/08/20 13:01:01.541359 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_9.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:9 
2021/08/20 13:01:01.541400 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:9 XXX_unrecognized:[]}
2021/08/20 13:01:01.541416 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 6 add registration job by handleRaftReadyApply, completed
2021-08-20 13:01:01.600001 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:e3d3130ae2736218 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:01:01.600+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e268e29d-36f3-4989-8359-93a42015bb31/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:01:01.600120 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:01:02.100884 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:6821ab9597f5e540 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:01:02.100+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e268e29d-36f3-4989-8359-93a42015bb31/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:01:02.101018 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:01:02.130593 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:01:02.601196 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:6821ab9597f5e540 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:01:02.601+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e268e29d-36f3-4989-8359-93a42015bb31/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:01:02.601338 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:01:03.101744 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:9c6e2beddbb6bc06 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:01:03.101+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e268e29d-36f3-4989-8359-93a42015bb31/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:01:03.101880 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:01:03.130439 [error] [raftstore]: shards pool create shards failed with client is closed
2021-08-20 13:01:03.602244 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:9c6e2beddbb6bc06 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:01:03.602+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e268e29d-36f3-4989-8359-93a42015bb31/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:01:03.602345 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021-08-20 13:01:04.102853 W | etcdserver: not healthy for reconfigure, rejecting member add {ID:7978ad8ed13b0087 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}
{"level":"warn","ts":"2021-08-20T13:01:04.102+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-e268e29d-36f3-4989-8359-93a42015bb31/127.0.0.1:40000","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/08/20 13:01:04.103000 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/08/20 13:01:04.130586 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"info","ts":"2021-08-20T13:01:04.604+0800","caller":"raft/raft.go:1550","msg":"93ccda9956d988f4 switched to configuration voters=(5922308646336700704 8752936704701825159 10650127570946328820)"}
2021-08-20 13:01:04.604777 I | etcdserver/membership: added member 7978ad8ed13b0087 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:01:04.604793 I | rafthttp: starting peer 7978ad8ed13b0087...
2021-08-20 13:01:04.604801 I | rafthttp: started HTTP pipelining with peer 7978ad8ed13b0087
{"level":"info","ts":"2021-08-20T13:01:04.604+0800","caller":"raft/raft.go:1550","msg":"523044560b1fa120 switched to configuration voters=(5922308646336700704 8752936704701825159 10650127570946328820)"}
2021-08-20 13:01:04.604885 I | etcdserver/membership: added member 7978ad8ed13b0087 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:01:04.604901 I | rafthttp: starting peer 7978ad8ed13b0087...
2021-08-20 13:01:04.604909 I | rafthttp: started HTTP pipelining with peer 7978ad8ed13b0087
2021-08-20 13:01:04.605273 I | rafthttp: started streaming with peer 7978ad8ed13b0087 (writer)
2021-08-20 13:01:04.605351 I | rafthttp: started streaming with peer 7978ad8ed13b0087 (writer)
2021-08-20 13:01:04.605434 I | rafthttp: started streaming with peer 7978ad8ed13b0087 (writer)
2021-08-20 13:01:04.605546 I | rafthttp: started streaming with peer 7978ad8ed13b0087 (writer)
2021-08-20 13:01:04.605640 I | rafthttp: started peer 7978ad8ed13b0087
2021-08-20 13:01:04.605652 I | rafthttp: started streaming with peer 7978ad8ed13b0087 (stream MsgApp v2 reader)
2021-08-20 13:01:04.605658 I | rafthttp: added peer 7978ad8ed13b0087
2021-08-20 13:01:04.605660 I | rafthttp: started streaming with peer 7978ad8ed13b0087 (stream MsgApp v2 reader)
2021-08-20 13:01:04.605706 I | rafthttp: started peer 7978ad8ed13b0087
2021-08-20 13:01:04.605722 I | rafthttp: added peer 7978ad8ed13b0087
2021-08-20 13:01:04.605734 I | rafthttp: started streaming with peer 7978ad8ed13b0087 (stream Message reader)
2021-08-20 13:01:04.605795 I | rafthttp: started streaming with peer 7978ad8ed13b0087 (stream Message reader)
[WARNING] Deprecated '--logger=capnslog' flag is set; use '--logger=zap' flag instead
2021-08-20 13:01:04.605988 I | embed: pprof is enabled under /debug/pprof
2021-08-20 13:01:04.606015 I | embed: name = node-2
2021-08-20 13:01:04.606026 I | embed: data dir = /tmp/cube/node-2/prophet
2021-08-20 13:01:04.606028 I | embed: member dir = /tmp/cube/node-2/prophet/member
2021-08-20 13:01:04.606030 I | embed: heartbeat = 100ms
2021-08-20 13:01:04.606031 I | embed: election = 3000ms
2021-08-20 13:01:04.606032 I | embed: snapshot count = 100000
2021-08-20 13:01:04.606034 I | embed: advertise client URLs = http://127.0.0.1:40002
2021-08-20 13:01:04.612891 I | etcdserver: starting member 7978ad8ed13b0087 in cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:01:04.612+0800","caller":"raft/raft.go:1550","msg":"7978ad8ed13b0087 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:01:04.612+0800","caller":"raft/raft.go:711","msg":"7978ad8ed13b0087 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:01:04.612+0800","caller":"raft/raft.go:388","msg":"newRaft 7978ad8ed13b0087 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021-08-20 13:01:04.615079 W | auth: simple token is not cryptographically signed
2021-08-20 13:01:04.618061 I | rafthttp: started HTTP pipelining with peer 523044560b1fa120
2021-08-20 13:01:04.618078 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:01:04.618083 I | rafthttp: starting peer 523044560b1fa120...
2021-08-20 13:01:04.618089 I | rafthttp: started HTTP pipelining with peer 523044560b1fa120
2021-08-20 13:01:04.618307 I | rafthttp: started streaming with peer 523044560b1fa120 (writer)
2021-08-20 13:01:04.618426 I | rafthttp: started streaming with peer 523044560b1fa120 (writer)
2021-08-20 13:01:04.618589 I | rafthttp: started peer 523044560b1fa120
2021-08-20 13:01:04.618602 I | rafthttp: added peer 523044560b1fa120
2021-08-20 13:01:04.618605 I | rafthttp: started streaming with peer 523044560b1fa120 (stream Message reader)
2021-08-20 13:01:04.618618 I | rafthttp: started streaming with peer 523044560b1fa120 (stream MsgApp v2 reader)
2021-08-20 13:01:04.618677 I | rafthttp: starting peer 93ccda9956d988f4...
2021-08-20 13:01:04.618694 I | rafthttp: started HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:01:04.618846 I | rafthttp: peer 7978ad8ed13b0087 became active
2021-08-20 13:01:04.618862 I | rafthttp: peer 523044560b1fa120 became active
2021-08-20 13:01:04.618881 I | rafthttp: established a TCP streaming connection with peer 523044560b1fa120 (stream MsgApp v2 reader)
2021-08-20 13:01:04.618887 I | rafthttp: established a TCP streaming connection with peer 523044560b1fa120 (stream Message reader)
2021-08-20 13:01:04.618910 I | rafthttp: established a TCP streaming connection with peer 7978ad8ed13b0087 (stream MsgApp v2 writer)
2021-08-20 13:01:04.618926 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:01:04.618962 I | rafthttp: established a TCP streaming connection with peer 7978ad8ed13b0087 (stream Message writer)
2021-08-20 13:01:04.619113 I | rafthttp: started streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:01:04.619314 I | rafthttp: started peer 93ccda9956d988f4
2021-08-20 13:01:04.619327 I | rafthttp: added peer 93ccda9956d988f4
2021-08-20 13:01:04.619332 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:01:04.619339 I | rafthttp: started streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:01:04.619353 I | etcdserver: starting server... [version: 3.4.15, cluster version: to_be_decided]
2021-08-20 13:01:04.619471 I | rafthttp: peer 7978ad8ed13b0087 became active
2021-08-20 13:01:04.619488 I | rafthttp: established a TCP streaming connection with peer 7978ad8ed13b0087 (stream Message writer)
2021-08-20 13:01:04.619510 I | rafthttp: peer 93ccda9956d988f4 became active
2021-08-20 13:01:04.619521 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:01:04.619547 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:01:04.619579 I | rafthttp: established a TCP streaming connection with peer 7978ad8ed13b0087 (stream MsgApp v2 writer)
2021-08-20 13:01:04.619806 I | embed: listening for peers on 127.0.0.1:50002
2021-08-20 13:01:04.648917 I | etcdserver: 523044560b1fa120 initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
{"level":"info","ts":"2021-08-20T13:01:04.663+0800","caller":"raft/raft.go:870","msg":"7978ad8ed13b0087 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-08-20T13:01:04.663+0800","caller":"raft/raft.go:711","msg":"7978ad8ed13b0087 became follower at term 2"}
{"level":"info","ts":"2021-08-20T13:01:04.663+0800","caller":"raft/node.go:325","msg":"raft.node: 7978ad8ed13b0087 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-08-20T13:01:04.665+0800","caller":"raft/raft.go:1550","msg":"7978ad8ed13b0087 switched to configuration voters=(10650127570946328820)"}
2021-08-20 13:01:04.665450 I | etcdserver/membership: added member 93ccda9956d988f4 [http://127.0.0.1:50000] to cluster 6a4ade671189dc2f
2021-08-20 13:01:04.665488 N | etcdserver/membership: set the initial cluster version to 3.4
{"level":"info","ts":"2021-08-20T13:01:04.665+0800","caller":"raft/raft.go:1550","msg":"7978ad8ed13b0087 switched to configuration voters=(5922308646336700704 10650127570946328820)"}
2021-08-20 13:01:04.665866 I | etcdserver/membership: added member 523044560b1fa120 [http://127.0.0.1:50001] to cluster 6a4ade671189dc2f
{"level":"info","ts":"2021-08-20T13:01:04.666+0800","caller":"raft/raft.go:1550","msg":"7978ad8ed13b0087 switched to configuration voters=(5922308646336700704 8752936704701825159 10650127570946328820)"}
2021-08-20 13:01:04.666107 I | etcdserver/membership: added member 7978ad8ed13b0087 [http://127.0.0.1:50002] to cluster 6a4ade671189dc2f
2021-08-20 13:01:04.666540 I | etcdserver: published {Name:node-2 ClientURLs:[http://127.0.0.1:40002]} to cluster 6a4ade671189dc2f
2021/08/20 13:01:04.666551 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
2021-08-20 13:01:04.666553 I | embed: ready to serve client requests
2021-08-20 13:01:04.666802 N | embed: serving insecure client requests on 127.0.0.1:40002, this is strongly discouraged!
2021/08/20 13:01:04.667569 [info] prophet: net application started
2021/08/20 13:01:04.667574 [info] prophet: start system time monitor 
2021/08/20 13:01:04.668031 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/08/20 13:01:04.668042 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:01:04.668045 [info] prophet: ********node-2 become to follower now********
2021/08/20 13:01:04.668062 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:01:04.668085 [info] prophet: client started
2021/08/20 13:01:04.668096 [info] [raftstore]: *********Become prophet follower*********
2021/08/20 13:01:04.668097 [info] [raftstore]: begin to bootstrap the cluster
2021/08/20 13:01:04.668111 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1629435664 deployPath:"not set" 
2021/08/20 13:01:04.668120 [info] [raftstore]: begin to create local store metadata
2021/08/20 13:01:04.668113 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:01:04.668065 [info] prophet: client read loop started 
2021/08/20 13:01:04.668135 [info] prophet: client read loop actived, ready to read from leader
2021/08/20 13:01:04.668128 [info] prophet: session 5[127.0.0.1:47396] connected
2021/08/20 13:01:04.668225 [info] [raftstore]: create local store with id 7
2021/08/20 13:01:04.668652 [info] [raftstore]: the cluster already bootstrap: true
2021-08-20 13:01:04.669672 I | etcdserver: 7978ad8ed13b0087 initialized peer connection; fast-forwarding 28 ticks (election ticks 30) with 2 active peer(s)
2021/08/20 13:01:04.670810 [info] prophet: container 7 limit added
2021/08/20 13:01:04.670871 [info] [raftstore]: prophet started
2021/08/20 13:01:04.670891 [info] prophet: container 7 heartbeat stream binded
2021/08/20 13:01:04.670910 [info] [transport]: net application started
2021/08/20 13:01:04.670919 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/08/20 13:01:04.670922 [info] [raftstore]: raft shards workers started
2021/08/20 13:01:04.670925 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/08/20 13:01:04.670933 [info] [raftstore]: cleanup possible garbage data complete
2021/08/20 13:01:04.670934 [info] [raftstore]: shards started
2021/08/20 13:01:04.670938 [info] [raftstore]: shard timer based tasks started
2021/08/20 13:01:04.670941 [info] [raftstore]: raft worker 0/0 start
2021/08/20 13:01:04.670942 [info] [raftstore]: net application started
2021/08/20 13:01:04.670944 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/08/20 13:01:04.670951 [info] [raftstore]: router started
2021/08/20 13:01:04.670963 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:01:04.671041 [info] prophet: session 6[127.0.0.1:47398] connected
2021/08/20 13:01:04.671044 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/08/20 13:01:04.671059 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/08/20 13:01:04.671049 [info] [raftstore]: router event loop task started
2021/08/20 13:01:04.671082 [info] prophet: new watcher 127.0.0.1:47398 added
2021/08/20 13:01:04.671145 [info] [raftstore]: start init event
2021/08/20 13:01:04.690219 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 13:01:04.6902016 +0800 CST m=+182.805287401, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/08/20 13:01:04.690239 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/08/20 13:01:04.690322 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:04.692491 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.692719 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.692737 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.692739 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.692746 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:01:04.692+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6) learners=(8)"}
2021/08/20 13:01:04.692808 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 12 184 229 44 153 41 65 130 167 128 129 151 220 218 201 254 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1] XXX_unrecognized:[]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:04.692828 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:01:04.692+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6) learners=(8)"}
2021/08/20 13:01:04.692860 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.692933 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/08/20 13:01:04.693174 [info] [transport]: connected to store 7
2021/08/20 13:01:04.693186 [info] [transport]: session 1[127.0.0.1:49668] connected
2021/08/20 13:01:04.693270 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/08/20 13:01:04.693309 [info] [raftstore]: shard 2 replicate peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:04.693344 [info] [raftstore]: shard 2 init with raft local state {HardState:{Term:0 Vote:0 Commit:0 XXX_unrecognized:[]} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:04.693349 [info] [raftstore]: shard 2 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:01:04.693351 [info] [raftstore]: shard 2 init last term, last term=<0>
{"level":"info","ts":"2021-08-20T13:01:04.693+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-08-20T13:01:04.693+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-08-20T13:01:04.693+0800","caller":"raft/raft.go:388","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/08/20 13:01:04.693428 [info] [raftstore]: shard 2 added with peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T13:01:04.693+0800","caller":"raft/raft.go:870","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-08-20T13:01:04.693+0800","caller":"raft/raft.go:711","msg":"8 became follower at term 6"}
2021/08/20 13:01:04.693568 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:01:04.694432 [info] prophet: resource 2 send schedule command, step promote learner peer 8 on container 7 to voter, source heartbeat
2021/08/20 13:01:04.694485 [info] [raftstore]: shard-2 AddNode peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:04.694583 [info] [transport]: session 2[127.0.0.1:44966] connected
2021/08/20 13:01:04.694586 [info] [transport]: connected to store 1
2021/08/20 13:01:04.694685 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.694759 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:01:04.694812 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.694829 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.694851 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.694871 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"error","ts":"2021-08-20T13:01:04.694+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1150\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:01:04.694875 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-08-20T13:01:04.694+0800","caller":"raft/raft.go:1550","msg":"6 switched to configuration voters=(3 6 8)"}
2021/08/20 13:01:04.694913 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-08-20T13:01:04.694+0800","caller":"raft/raft.go:1550","msg":"3 switched to configuration voters=(3 6 8)"}
{"level":"error","ts":"2021-08-20T13:01:04.694+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).switchToConfig.func1\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1586\ngo.etcd.io/etcd/raft/tracker.(*ProgressTracker).Visit\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/tracker/tracker.go:209\ngo.etcd.io/etcd/raft.(*raft).switchToConfig\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1585\ngo.etcd.io/etcd/raft.(*raft).applyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1537\ngo.etcd.io/etcd/raft.(*RawNode).ApplyConfChange\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doApplyConfChange\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:103\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPostApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:89\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).doPollApply\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:51\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleApplyResult\n\t/root/projects/matrixcube/raftstore/peer_event_post_apply.go:39\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:186\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:01:04.695036 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:8 XXX_unrecognized:[]}] Context:[10 32 10 16 150 167 82 0 47 11 76 199 147 74 36 182 237 213 116 253 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 8 16 7] XXX_unrecognized:[]} with changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:04.695048 [info] [raftstore]: shard 2 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.695081 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<11> 
2021/08/20 13:01:04.695132 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/08/20 13:01:04.695143 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 skip with no delegates, 0 commits, result <nil>
{"level":"error","ts":"2021-08-20T13:01:04.695+0800","caller":"raft/log.go:354","msg":"3 >>>>>>>>>>>>>>>> [1:12:6)","stacktrace":"go.etcd.io/etcd/pkg/logutil.(*zapRaftLogger).Errorf\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/pkg/logutil/zap_raft.go:69\ngo.etcd.io/etcd/raft.(*raftLog).mustCheckOutOfBounds\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:354\ngo.etcd.io/etcd/raft.(*raftLog).slice\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:308\ngo.etcd.io/etcd/raft.(*raftLog).entries\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/log.go:258\ngo.etcd.io/etcd/raft.(*raft).maybeSendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:459\ngo.etcd.io/etcd/raft.(*raft).sendAppend\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:442\ngo.etcd.io/etcd/raft.stepLeader\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:1208\ngo.etcd.io/etcd/raft.(*raft).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/raft.go:995\ngo.etcd.io/etcd/raft.(*RawNode).Step\n\t/root/projects/matrixcube/vendor/go.etcd.io/etcd/raft/rawnode.go:114\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleStep\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:257\ngithub.com/matrixorigin/matrixcube/raftstore.(*peerReplica).handleEvent\n\t/root/projects/matrixcube/raftstore/peer_event_loop.go:183\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1.1\n\t/root/projects/matrixcube/raftstore/store.go:420\nsync.(*Map).Range\n\t/opt/lib/go/src/sync/map.go:345\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask.func1\n\t/root/projects/matrixcube/raftstore/store.go:418\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).runPRTask\n\t/root/projects/matrixcube/raftstore/store.go:443\ngithub.com/matrixorigin/matrixcube/raftstore.(*store).startRaftWorkers.func1\n\t/root/projects/matrixcube/raftstore/store.go:406\ngithub.com/fagongzi/util/task.(*Runner).RunCancelableTask.func1\n\t/root/projects/matrixcube/vendor/github.com/fagongzi/util/task/task.go:350"}
2021/08/20 13:01:04.695205 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 13:01:04.695357 [info] [transport]: connected to store 7
2021/08/20 13:01:04.695382 [info] [transport]: session 2[127.0.0.1:49672] connected
{"level":"info","ts":"2021-08-20T13:01:04.695+0800","caller":"raft/log.go:301","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T13:01:04.695+0800","caller":"raft/raft.go:1550","msg":"8 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-08-20T13:01:04.695+0800","caller":"raft/raft.go:1503","msg":"8 [commit: 11, lastindex: 11, lastterm: 6] restored snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-08-20T13:01:04.695+0800","caller":"raft/raft.go:1420","msg":"8 [commit: 11] restored snapshot [index: 11, term: 6]"}
2021/08/20 13:01:04.695481 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/08/20 13:01:04.695514 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:5 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:8 containerID:7 > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:11 >,size=<126>
2021/08/20 13:01:04.695538 [info] [raftstore]: shard 2 send snap complete
2021/08/20 13:01:04.695551 [info] [transport]: shard 2 pending snap sent succ, size=<126>, epoch=<confVer:5 version:1 > term=<6> index=<11>
2021/08/20 13:01:04.696234 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-08-20 13:01:04.6902016 +0800 CST m=+182.805287401, startAt:2021-08-20 13:01:04.6902339 +0800 CST m=+182.805319701, currentStep:2, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]) finished) finish, takes 5.9883ms, 
2021-08-20 13:01:04.706157 I | rafthttp: established a TCP streaming connection with peer 523044560b1fa120 (stream Message writer)
2021-08-20 13:01:04.706184 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:01:04.706205 I | rafthttp: established a TCP streaming connection with peer 7978ad8ed13b0087 (stream MsgApp v2 reader)
2021-08-20 13:01:04.706213 I | rafthttp: established a TCP streaming connection with peer 7978ad8ed13b0087 (stream Message reader)
2021-08-20 13:01:04.706234 I | rafthttp: established a TCP streaming connection with peer 7978ad8ed13b0087 (stream Message reader)
2021-08-20 13:01:04.706237 I | rafthttp: established a TCP streaming connection with peer 7978ad8ed13b0087 (stream MsgApp v2 reader)
2021-08-20 13:01:04.706288 I | rafthttp: established a TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:01:04.706306 I | rafthttp: established a TCP streaming connection with peer 523044560b1fa120 (stream MsgApp v2 writer)
2021/08/20 13:01:04.718223 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/08/20 13:01:04.772309 [info] prophet: resource 9 created with peers [{ID:10 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/08/20 13:01:04.773525 [info] [raftstore]: shard 9 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:04.773537 [info] [raftstore]: shard 9 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:04.773539 [info] [raftstore]: shard 9 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:01:04.773541 [info] [raftstore]: shard 9 init last term, last term=<5>
2021/08/20 13:01:04.773543 [info] [raftstore]: shard 9 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:01:04.773544 [info] [raftstore]: shard 9 init last term, last term=<5>
2021/08/20 13:01:04.773545 [info] [raftstore]: shard 9 init with raft local state {HardState:{Term:5 Vote:0 Commit:5 XXX_unrecognized:[]} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:04.773550 [info] [raftstore]: shard 9 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:01:04.773552 [info] [raftstore]: shard 9 init last term, last term=<5>
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:1550","msg":"c switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:1550","msg":"b switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:1550","msg":"a switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:711","msg":"b became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:711","msg":"c became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:711","msg":"a became follower at term 5"}
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:388","msg":"newRaft a [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:01:04.773619 [info] [raftstore]: shard 9 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:388","msg":"newRaft b [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:01:04.773646 [info] [raftstore]: shard 9 added with peer {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:01:04.773687 [info] [raftstore]: create init shard id:9 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:7 > peers:<id:11 containerID:5 > peers:<id:12 containerID:1 > unique:"abc" 
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:388","msg":"newRaft c [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/08/20 13:01:04.773702 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 11 add registration job by doCreate
2021/08/20 13:01:04.773708 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 11 add registration job by doCreate, completed
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:934","msg":"a is starting a new election at term 5"}
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:724","msg":"a became candidate at term 6"}
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:835","msg":"a received MsgVoteResp from a at term 6"}
2021/08/20 13:01:04.773720 [info] [raftstore]: shard 9 added with peer {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:822","msg":"a [logterm: 5, index: 5] sent MsgVote request to b at term 6"}
{"level":"info","ts":"2021-08-20T13:01:04.773+0800","caller":"raft/raft.go:822","msg":"a [logterm: 5, index: 5] sent MsgVote request to c at term 6"}
2021/08/20 13:01:04.773771 [info] [raftstore]: create init shard id:9 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:7 > peers:<id:11 containerID:5 > peers:<id:12 containerID:1 > unique:"abc" 
2021/08/20 13:01:04.773780 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 10 skip with no delegates, 0 commits, result <nil>
2021/08/20 13:01:04.773789 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 12 add registration job by doCreate
2021/08/20 13:01:04.773799 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 12 add registration job by doCreate, completed
2021/08/20 13:01:04.773772 [info] [raftstore]: shard 9 added with peer {ID:10 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/08/20 13:01:04.773813 [info] [raftstore]: create init shard id:9 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:7 > peers:<id:11 containerID:5 > peers:<id:12 containerID:1 > unique:"abc" 
2021/08/20 13:01:04.773818 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 10 add registration job by doCreate
2021/08/20 13:01:04.773821 [error] [raftstore]: >>>>>>>>>>>> shard 9 peer 10 add registration job by doCreate, completed
2021/08/20 13:01:05.130478 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:01:05.541892 [info] [raftstore]: shard 2 begin to apply snapshot
2021/08/20 13:01:05.541913 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/08/20 13:01:05.541923 [info] [raftstore]: shard 2 apply snapshot state completed, apply state {AppliedIndex:11 TruncatedState:{Index:11 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/08/20 13:01:05.541931 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 start applying snapshot
2021/08/20 13:01:05.541936 [info] [raftstore]: shard 2 begin apply snapshot data
2021/08/20 13:01:05.542061 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 add registration job by handleRaftReadyApply
2021/08/20 13:01:05.542087 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 applying snapshot to set read 11
2021/08/20 13:01:05.542107 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:01:05.542122 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/08/20 13:01:05.542128 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 AdvanceApply with 11
2021/08/20 13:01:05.542173 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_11.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:8 containerID:7 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:11 
2021/08/20 13:01:05.542219 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:11 XXX_unrecognized:[]}
2021/08/20 13:01:05.542223 [error] [raftstore]: >>>>>>>>>>>> shard 2 peer 8 add registration job by handleRaftReadyApply, completed
2021/08/20 13:01:06.130932 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:01:07.130603 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:01:08.130790 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:01:09.130280 [error] [raftstore]: shards pool create shards failed with client is closed
    testutil.go:743: 
        	Error Trace:	testutil.go:743
        	            				store_test.go:213
        	Error:      	
        	Test:       	TestSpeedupAddShard
        	Messages:   	wait shard state changed to Running timeout
2021/08/20 13:01:09.918531 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:47294->127.0.0.1:30000: use of closed network connection
2021/08/20 13:01:09.918557 [error] prophet: client read loop stopped
2021/08/20 13:01:09.918538 [error] prophet: session 1[127.0.0.1:47294] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47294: use of closed network connection
2021/08/20 13:01:09.918573 [error] prophet: session 5[127.0.0.1:47396] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47396: use of closed network connection
2021/08/20 13:01:09.918586 [error] prophet: session 3[127.0.0.1:47328] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47328: use of closed network connection
2021/08/20 13:01:09.918591 [error] prophet: session 4[127.0.0.1:47330] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47330: use of closed network connection
2021/08/20 13:01:09.918594 [error] prophet: session 2[127.0.0.1:47296] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47296: use of closed network connection
2021/08/20 13:01:09.918601 [error] prophet: watcher read events failed with EOF
2021/08/20 13:01:09.918603 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:01:09.918607 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 13:01:09.918614 [error] prophet: session 6[127.0.0.1:47398] read failed with read tcp 127.0.0.1:30000->127.0.0.1:47398: use of closed network connection
2021/08/20 13:01:09.918614 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with EOF
2021/08/20 13:01:09.918625 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:01:09.918645 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:01:09.918667 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 13:01:09.918655 [error] prophet: watcher read events failed with EOF
2021/08/20 13:01:09.918722 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:01:09.918655 [error] prophet: watcher read events failed with EOF
2021/08/20 13:01:09.918725 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/08/20 13:01:09.918756 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 13:01:09.919798 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/08/20 13:01:09.919835 [info] prophet: drive push operator has been stopped 
2021/08/20 13:01:09.919842 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/08/20 13:01:09.919857 [info] prophet: coordinator is stopping
2021/08/20 13:01:09.919858 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021-08-20 13:01:09.919889 I | etcdserver: 93ccda9956d988f4 starts leadership transfer from 93ccda9956d988f4 to 523044560b1fa120
{"level":"info","ts":"2021-08-20T13:01:09.919+0800","caller":"raft/raft.go:1278","msg":"93ccda9956d988f4 [term 2] starts to transfer leadership to 523044560b1fa120"}
2021/08/20 13:01:09.919860 [info] prophet: patrol resources has been stopped 
2021/08/20 13:01:09.919935 [info] prophet: coordinator has been stopped
2021/08/20 13:01:09.919864 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/08/20 13:01:09.919913 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/08/20 13:01:09.919964 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:1191","msg":"93ccda9956d988f4 sent MsgTimeoutNow to 523044560b1fa120 after received MsgAppResp"}
2021/08/20 13:01:09.920268 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:1372","msg":"523044560b1fa120 [term 2] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:724","msg":"523044560b1fa120 became candidate at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:835","msg":"523044560b1fa120 received MsgVoteResp from 523044560b1fa120 at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:822","msg":"523044560b1fa120 [logterm: 2, index: 31] sent MsgVote request to 7978ad8ed13b0087 at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:822","msg":"523044560b1fa120 [logterm: 2, index: 31] sent MsgVote request to 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/node.go:331","msg":"raft.node: 523044560b1fa120 lost leader 93ccda9956d988f4 at term 3"}
2021/08/20 13:01:09.920307 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/08/20 13:01:09.920344 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/08/20 13:01:09.920387 [info] prophet: [prophet-leader/node-2]/campaign: start
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:870","msg":"7978ad8ed13b0087 [term: 2] received a MsgVote message with higher term from 523044560b1fa120 [term: 3]"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:711","msg":"7978ad8ed13b0087 became follower at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:971","msg":"7978ad8ed13b0087 [logterm: 2, index: 31, vote: 0] cast MsgVote for 523044560b1fa120 [logterm: 2, index: 31] at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/node.go:331","msg":"raft.node: 7978ad8ed13b0087 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:870","msg":"93ccda9956d988f4 [term: 2] received a MsgVote message with higher term from 523044560b1fa120 [term: 3]"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:711","msg":"93ccda9956d988f4 became follower at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/raft.go:971","msg":"93ccda9956d988f4 [logterm: 2, index: 31, vote: 0] cast MsgVote for 523044560b1fa120 [logterm: 2, index: 31] at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.920+0800","caller":"raft/node.go:331","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.921+0800","caller":"raft/raft.go:835","msg":"523044560b1fa120 received MsgVoteResp from 7978ad8ed13b0087 at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.921+0800","caller":"raft/raft.go:1319","msg":"523044560b1fa120 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T13:01:09.921+0800","caller":"raft/raft.go:776","msg":"523044560b1fa120 became leader at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.921+0800","caller":"raft/node.go:325","msg":"raft.node: 523044560b1fa120 elected leader 523044560b1fa120 at term 3"}
{"level":"info","ts":"2021-08-20T13:01:09.921+0800","caller":"raft/node.go:325","msg":"raft.node: 7978ad8ed13b0087 elected leader 523044560b1fa120 at term 3"}
{"level":"warn","ts":"2021-08-20T13:01:09.921+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-a39a50b9-72d9-409f-8d9d-b80ab85c230f/127.0.0.1:40001","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-08-20T13:01:09.921+0800","caller":"raft/node.go:325","msg":"raft.node: 93ccda9956d988f4 elected leader 523044560b1fa120 at term 3"}
2021/08/20 13:01:09.946640 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/08/20 13:01:09.946650 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/08/20 13:01:09.947531 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/08/20 13:01:09.948656 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/08/20 13:01:09.948668 [info] prophet: ********node-1 become to leader now********
2021/08/20 13:01:09.950458 [info] prophet: load 3 containers, cost 1.7107ms
2021/08/20 13:01:09.950714 [info] prophet: load 1 resources, cost 242.7µs
2021/08/20 13:01:09.951398 [info] [raftstore]: *********Become prophet leader*********
2021/08/20 13:01:09.951409 [info] prophet: coordinator starts to collect cluster information 
2021/08/20 13:01:09.951696 [info] prophet: load 0 jobs
2021/08/20 13:01:09.972067 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021-08-20 13:01:10.020251 I | etcdserver: 93ccda9956d988f4 finished leadership transfer from 93ccda9956d988f4 to 523044560b1fa120 (took 100.3608ms)
2021/08/20 13:01:10.020259 [info] prophet: [prophet-leader/node-0]/loop: exit
2021-08-20 13:01:10.020295 I | rafthttp: stopping peer 523044560b1fa120...
2021-08-20 13:01:10.020445 I | rafthttp: closed the TCP streaming connection with peer 523044560b1fa120 (stream MsgApp v2 writer)
2021-08-20 13:01:10.020457 I | rafthttp: stopped streaming with peer 523044560b1fa120 (writer)
2021-08-20 13:01:10.020498 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:01:10.020609 I | rafthttp: closed the TCP streaming connection with peer 523044560b1fa120 (stream Message writer)
2021-08-20 13:01:10.020620 I | rafthttp: stopped streaming with peer 523044560b1fa120 (writer)
2021-08-20 13:01:10.020623 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:01:10.020634 I | rafthttp: stopped HTTP pipelining with peer 523044560b1fa120
2021-08-20 13:01:10.020691 W | rafthttp: lost the TCP streaming connection with peer 523044560b1fa120 (stream MsgApp v2 reader)
2021-08-20 13:01:10.020708 E | rafthttp: failed to read 523044560b1fa120 on stream MsgApp v2 (context canceled)
2021-08-20 13:01:10.020711 I | rafthttp: peer 523044560b1fa120 became inactive (message send to peer failed)
2021-08-20 13:01:10.020721 I | rafthttp: stopped streaming with peer 523044560b1fa120 (stream MsgApp v2 reader)
2021-08-20 13:01:10.020742 W | rafthttp: lost the TCP streaming connection with peer 523044560b1fa120 (stream Message reader)
2021-08-20 13:01:10.020758 I | rafthttp: stopped streaming with peer 523044560b1fa120 (stream Message reader)
2021-08-20 13:01:10.020761 I | rafthttp: stopped peer 523044560b1fa120
2021-08-20 13:01:10.020765 I | rafthttp: stopping peer 7978ad8ed13b0087...
2021-08-20 13:01:10.020912 I | rafthttp: closed the TCP streaming connection with peer 7978ad8ed13b0087 (stream MsgApp v2 writer)
2021-08-20 13:01:10.020943 I | rafthttp: stopped streaming with peer 7978ad8ed13b0087 (writer)
2021-08-20 13:01:10.020948 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:01:10.021088 I | rafthttp: closed the TCP streaming connection with peer 7978ad8ed13b0087 (stream Message writer)
2021-08-20 13:01:10.021101 I | rafthttp: stopped streaming with peer 7978ad8ed13b0087 (writer)
2021-08-20 13:01:10.021109 I | rafthttp: stopped HTTP pipelining with peer 7978ad8ed13b0087
2021-08-20 13:01:10.021111 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:01:10.021141 W | rafthttp: lost the TCP streaming connection with peer 7978ad8ed13b0087 (stream MsgApp v2 reader)
2021-08-20 13:01:10.021145 E | rafthttp: failed to read 7978ad8ed13b0087 on stream MsgApp v2 (context canceled)
2021-08-20 13:01:10.021146 I | rafthttp: peer 7978ad8ed13b0087 became inactive (message send to peer failed)
2021-08-20 13:01:10.021151 I | rafthttp: stopped streaming with peer 7978ad8ed13b0087 (stream MsgApp v2 reader)
2021-08-20 13:01:10.021192 W | rafthttp: lost the TCP streaming connection with peer 7978ad8ed13b0087 (stream Message reader)
2021-08-20 13:01:10.021205 I | rafthttp: stopped streaming with peer 7978ad8ed13b0087 (stream Message reader)
2021-08-20 13:01:10.021208 I | rafthttp: stopped peer 7978ad8ed13b0087
2021-08-20 13:01:10.021281 E | rafthttp: failed to find member 523044560b1fa120 in cluster 6a4ade671189dc2f
2021-08-20 13:01:10.021296 E | rafthttp: failed to find member 7978ad8ed13b0087 in cluster 6a4ade671189dc2f
2021-08-20 13:01:10.021337 E | rafthttp: failed to find member 523044560b1fa120 in cluster 6a4ade671189dc2f
2021-08-20 13:01:10.021360 E | rafthttp: failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node 7978ad8ed13b0087)
2021-08-20 13:01:10.021365 E | rafthttp: failed to find member 7978ad8ed13b0087 in cluster 6a4ade671189dc2f
2021-08-20 13:01:10.021370 E | rafthttp: failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node 523044560b1fa120)
2021-08-20 13:01:10.021373 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021-08-20 13:01:10.021397 I | rafthttp: peer 93ccda9956d988f4 became inactive (message send to peer failed)
2021/08/20 13:01:10.032041 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:01:10.032055 [info] [raftstore]: shard 9 handle serve raft stopped
2021/08/20 13:01:10.032073 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:01:10.032077 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:01:10.032080 [info] [raftstore]: router event loop task stopped
2021/08/20 13:01:10.032083 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:01:10.032112 [info] [transport]: transfer stopped
2021/08/20 13:01:10.032170 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.032185 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.032188 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.032190 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.032193 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.032195 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.032197 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.032199 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.032201 [info] [transport]: send raft worker stopped
2021/08/20 13:01:10.032207 [error] [transport]: session 1[127.0.0.1:44906] read failed with read tcp 127.0.0.1:10000->127.0.0.1:44906: use of closed network connection
2021/08/20 13:01:10.032249 [error] [transport]: session 2[127.0.0.1:44966] read failed with read tcp 127.0.0.1:10000->127.0.0.1:44966: use of closed network connection
2021/08/20 13:01:10.033287 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/08/20 13:01:10.033309 [info] prophet: coordinator stops running 
2021/08/20 13:01:10.033316 [info] prophet: coordinator is stopping
2021/08/20 13:01:10.033318 [info] prophet: coordinator has been stopped
2021/08/20 13:01:10.033310 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
2021/08/20 13:01:10.033321 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/08/20 13:01:10.033327 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
2021-08-20 13:01:10.033343 I | etcdserver: 523044560b1fa120 starts leadership transfer from 523044560b1fa120 to 7978ad8ed13b0087
{"level":"info","ts":"2021-08-20T13:01:10.033+0800","caller":"raft/raft.go:1278","msg":"523044560b1fa120 [term 3] starts to transfer leadership to 7978ad8ed13b0087"}
{"level":"info","ts":"2021-08-20T13:01:10.033+0800","caller":"raft/raft.go:1284","msg":"523044560b1fa120 sends MsgTimeoutNow to 7978ad8ed13b0087 immediately as 7978ad8ed13b0087 already has up-to-date log"}
{"level":"info","ts":"2021-08-20T13:01:10.033+0800","caller":"raft/raft.go:1372","msg":"7978ad8ed13b0087 [term 3] received MsgTimeoutNow from 523044560b1fa120 and starts an election to get leadership."}
{"level":"info","ts":"2021-08-20T13:01:10.033+0800","caller":"raft/raft.go:724","msg":"7978ad8ed13b0087 became candidate at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.033+0800","caller":"raft/raft.go:835","msg":"7978ad8ed13b0087 received MsgVoteResp from 7978ad8ed13b0087 at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.033+0800","caller":"raft/raft.go:822","msg":"7978ad8ed13b0087 [logterm: 3, index: 35] sent MsgVote request to 523044560b1fa120 at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.033+0800","caller":"raft/raft.go:822","msg":"7978ad8ed13b0087 [logterm: 3, index: 35] sent MsgVote request to 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.033+0800","caller":"raft/node.go:331","msg":"raft.node: 7978ad8ed13b0087 lost leader 523044560b1fa120 at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.034+0800","caller":"raft/raft.go:870","msg":"523044560b1fa120 [term: 3] received a MsgVote message with higher term from 7978ad8ed13b0087 [term: 4]"}
{"level":"info","ts":"2021-08-20T13:01:10.034+0800","caller":"raft/raft.go:711","msg":"523044560b1fa120 became follower at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.034+0800","caller":"raft/raft.go:971","msg":"523044560b1fa120 [logterm: 3, index: 35, vote: 0] cast MsgVote for 7978ad8ed13b0087 [logterm: 3, index: 35] at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.034+0800","caller":"raft/node.go:331","msg":"raft.node: 523044560b1fa120 lost leader 523044560b1fa120 at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.034+0800","caller":"raft/raft.go:835","msg":"7978ad8ed13b0087 received MsgVoteResp from 523044560b1fa120 at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.034+0800","caller":"raft/raft.go:1319","msg":"7978ad8ed13b0087 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-08-20T13:01:10.034+0800","caller":"raft/raft.go:776","msg":"7978ad8ed13b0087 became leader at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.034+0800","caller":"raft/node.go:325","msg":"raft.node: 7978ad8ed13b0087 elected leader 7978ad8ed13b0087 at term 4"}
{"level":"info","ts":"2021-08-20T13:01:10.034+0800","caller":"raft/node.go:325","msg":"raft.node: 523044560b1fa120 elected leader 7978ad8ed13b0087 at term 4"}
2021/08/20 13:01:10.118885 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/08/20 13:01:10.118892 [error] prophet: reset leader connection failed with client is closed
2021/08/20 13:01:10.118954 [error] prophet: init leader conn failed with dial tcp 127.0.0.1:30000: connect: connection refused, retry later
2021/08/20 13:01:10.118959 [error] prophet: client read loop stopped
2021/08/20 13:01:10.130778 [error] [raftstore]: shards pool create shards failed with client is closed
2021/08/20 13:01:10.133983 [info] prophet: [prophet-leader/node-1]/loop: exit
2021-08-20 13:01:10.134002 I | etcdserver: 523044560b1fa120 finished leadership transfer from 523044560b1fa120 to 7978ad8ed13b0087 (took 100.6557ms)
2021-08-20 13:01:10.134047 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:01:10.134062 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 13:01:10.134200 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:01:10.134212 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:01:10.134614 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021-08-20 13:01:10.134630 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:01:10.134659 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:01:10.134682 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:01:10.134702 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:01:10.134720 I | rafthttp: stopped peer 93ccda9956d988f4
2021-08-20 13:01:10.134723 I | rafthttp: stopping peer 7978ad8ed13b0087...
2021-08-20 13:01:10.134811 I | rafthttp: closed the TCP streaming connection with peer 7978ad8ed13b0087 (stream MsgApp v2 writer)
2021-08-20 13:01:10.134821 I | rafthttp: stopped streaming with peer 7978ad8ed13b0087 (writer)
2021-08-20 13:01:10.134852 W | rafthttp: lost the TCP streaming connection with peer 523044560b1fa120 (stream MsgApp v2 reader)
2021-08-20 13:01:10.134950 I | rafthttp: closed the TCP streaming connection with peer 7978ad8ed13b0087 (stream Message writer)
2021-08-20 13:01:10.134962 I | rafthttp: stopped streaming with peer 7978ad8ed13b0087 (writer)
2021-08-20 13:01:10.134969 I | rafthttp: stopped HTTP pipelining with peer 7978ad8ed13b0087
2021-08-20 13:01:10.134971 W | rafthttp: lost the TCP streaming connection with peer 523044560b1fa120 (stream Message reader)
2021-08-20 13:01:10.135001 W | rafthttp: lost the TCP streaming connection with peer 7978ad8ed13b0087 (stream MsgApp v2 reader)
2021-08-20 13:01:10.135012 E | rafthttp: failed to read 7978ad8ed13b0087 on stream MsgApp v2 (context canceled)
2021-08-20 13:01:10.135014 I | rafthttp: peer 7978ad8ed13b0087 became inactive (message send to peer failed)
2021-08-20 13:01:10.135021 I | rafthttp: stopped streaming with peer 7978ad8ed13b0087 (stream MsgApp v2 reader)
2021-08-20 13:01:10.135056 W | rafthttp: lost the TCP streaming connection with peer 7978ad8ed13b0087 (stream Message reader)
2021-08-20 13:01:10.135069 I | rafthttp: stopped streaming with peer 7978ad8ed13b0087 (stream Message reader)
2021-08-20 13:01:10.135071 I | rafthttp: stopped peer 7978ad8ed13b0087
2021-08-20 13:01:10.135122 E | rafthttp: failed to find member 7978ad8ed13b0087 in cluster 6a4ade671189dc2f
2021-08-20 13:01:10.135140 E | rafthttp: failed to find member 7978ad8ed13b0087 in cluster 6a4ade671189dc2f
2021-08-20 13:01:10.135200 E | rafthttp: failed to dial 523044560b1fa120 on stream Message (peer 523044560b1fa120 failed to find local node 7978ad8ed13b0087)
2021-08-20 13:01:10.135216 I | rafthttp: peer 523044560b1fa120 became inactive (message send to peer failed)
2021/08/20 13:01:10.144728 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:01:10.144742 [info] [raftstore]: shard 9 handle serve raft stopped
2021/08/20 13:01:10.144763 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:01:10.144767 [info] [raftstore]: router event loop task stopped
2021/08/20 13:01:10.144764 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:01:10.144765 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:01:10.144802 [info] [transport]: transfer stopped
2021/08/20 13:01:10.144843 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.144855 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.144860 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.144883 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.144898 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.144887 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.144889 [error] [transport]: session 1[127.0.0.1:38988] read failed with read tcp 127.0.0.1:10001->127.0.0.1:38988: use of closed network connection
2021/08/20 13:01:10.144889 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.144911 [info] [transport]: send raft worker stopped
2021/08/20 13:01:10.144892 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:10.144888 [error] [transport]: session 2[127.0.0.1:38992] read failed with read tcp 127.0.0.1:10001->127.0.0.1:38992: use of closed network connection
2021-08-20 13:01:10.314218 W | rafthttp: lost the TCP streaming connection with peer 93ccda9956d988f4 (stream Message writer)
2021/08/20 13:01:10.319308 [error] prophet: reset leader connection failed with client is closed
2021/08/20 13:01:10.319348 [error] prophet: client read loop stopped
2021-08-20 13:01:10.413319 W | rafthttp: failed to process raft message (raft: stopped)
2021-08-20 13:01:10.513803 W | rafthttp: failed to process raft message (raft: stopped)
2021-08-20 13:01:10.513851 W | rafthttp: lost the TCP streaming connection with peer 523044560b1fa120 (stream Message writer)
2021-08-20 13:01:10.613523 W | rafthttp: failed to process raft message (raft: stopped)
2021/08/20 13:01:10.671944 [error] [raftstore]: send store heartbeat failed with client is closed
2021/08/20 13:01:10.741967 [info] [raftstore]: shard 9 raft tick stopped
2021/08/20 13:01:10.741979 [info] [raftstore]: shard 9 raft tick stopped
2021/08/20 13:01:11.130757 [error] [raftstore]: shards pool create shards failed with client is closed
{"level":"warn","ts":"2021-08-20T13:01:11.145+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f64ac8a3-11ac-4507-9d8e-a1b3516a41d1/127.0.0.1:40002","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/08/20 13:01:11.145717 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
2021-08-20 13:01:11.145781 W | etcdserver: 7978ad8ed13b0087 failed to transfer leadership (etcdserver: unhealthy cluster)
{"level":"warn","ts":"2021-08-20T13:01:11.145+0800","caller":"clientv3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"endpoint://client-f64ac8a3-11ac-4507-9d8e-a1b3516a41d1/127.0.0.1:40002","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/08/20 13:01:11.145807 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
WARNING: 2021/08/20 13:01:11 grpc: Server.processUnaryRPC failed to write status: connection error: desc = "transport is closing"
2021-08-20 13:01:11.145829 I | rafthttp: stopped HTTP pipelining with peer 523044560b1fa120
2021-08-20 13:01:11.145839 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:01:11.145842 I | rafthttp: stopping peer 523044560b1fa120...
2021-08-20 13:01:11.145992 I | rafthttp: closed the TCP streaming connection with peer 523044560b1fa120 (stream MsgApp v2 writer)
2021-08-20 13:01:11.146007 I | rafthttp: stopped streaming with peer 523044560b1fa120 (writer)
2021-08-20 13:01:11.146021 I | rafthttp: stopped streaming with peer 523044560b1fa120 (writer)
2021-08-20 13:01:11.146035 I | rafthttp: stopped HTTP pipelining with peer 523044560b1fa120
2021-08-20 13:01:11.146048 I | rafthttp: stopped streaming with peer 523044560b1fa120 (stream MsgApp v2 reader)
2021-08-20 13:01:11.146068 I | rafthttp: stopped streaming with peer 523044560b1fa120 (stream Message reader)
2021-08-20 13:01:11.146071 I | rafthttp: stopped peer 523044560b1fa120
2021-08-20 13:01:11.146073 I | rafthttp: stopping peer 93ccda9956d988f4...
2021-08-20 13:01:11.146216 I | rafthttp: closed the TCP streaming connection with peer 93ccda9956d988f4 (stream MsgApp v2 writer)
2021-08-20 13:01:11.146228 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:01:11.146242 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (writer)
2021-08-20 13:01:11.146248 I | rafthttp: stopped HTTP pipelining with peer 93ccda9956d988f4
2021-08-20 13:01:11.146261 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream MsgApp v2 reader)
2021-08-20 13:01:11.146265 I | rafthttp: stopped streaming with peer 93ccda9956d988f4 (stream Message reader)
2021-08-20 13:01:11.146268 I | rafthttp: stopped peer 93ccda9956d988f4
2021/08/20 13:01:11.150977 [info] [raftstore]: shard 2 handle serve raft stopped
2021/08/20 13:01:11.150991 [info] [raftstore]: shard 9 handle serve raft stopped
2021/08/20 13:01:11.151000 [info] [raftstore]: router event loop task stopped
2021/08/20 13:01:11.151005 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/08/20 13:01:11.151008 [info] [raftstore]: timer based tasks stopped
2021/08/20 13:01:11.151005 [info] [raftstore]: raft worker worker 0/0 exit
2021/08/20 13:01:11.151039 [info] [transport]: transfer stopped
2021/08/20 13:01:11.151064 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:11.151075 [info] [transport]: send snapshot worker stopped
--- FAIL: TestSpeedupAddShard (13.69s)
2021/08/20 13:01:11.151091 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:11.151096 [info] [transport]: send snapshot worker stopped
=== RUN   TestIsEpochStale
--- PASS: TestIsEpochStale (0.00s)
2021/08/20 13:01:11.151114 [error] [transport]: session 2[127.0.0.1:49672] read failed with read tcp 127.0.0.1:10002->127.0.0.1:49672: use of closed network connection
2021/08/20 13:01:11.151119 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:11.151116 [info] [transport]: send snapshot worker stopped
=== RUN   TestFindPeer
2021/08/20 13:01:11.151122 [info] [transport]: send snapshot worker stopped
2021/08/20 13:01:11.151132 [info] [transport]: send raft worker stopped
2021/08/20 13:01:11.151124 [info] [transport]: send snapshot worker stopped
--- PASS: TestFindPeer (0.00s)
=== RUN   TestRemovePeer
2021/08/20 13:01:11.151141 [error] [transport]: session 1[127.0.0.1:49668] read failed with read tcp 127.0.0.1:10002->127.0.0.1:49668: use of closed network connection
--- PASS: TestRemovePeer (0.00s)
=== RUN   TestRemovedPeers
--- PASS: TestRemovedPeers (0.00s)
FAIL
FAIL	github.com/matrixorigin/matrixcube/raftstore	189.271s
FAIL
